const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-CX_3d3rd.js","assets/main-X9THBjap.js","assets/style-DHqpffR4.js","assets/style-Bksgp8bg.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as $,i as P}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{s as n,a as p,b as y,d as D,h as x,_ as A,f as h,r as k,c as N}from"./main-X9THBjap.js";import{l as S}from"./pymupdf-loader-DSwOn04P.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-provider-C9fvsoLq.js";document.addEventListener("DOMContentLoaded",()=>{const f=document.getElementById("file-input"),c=document.getElementById("drop-zone"),m=document.getElementById("process-btn"),u=document.getElementById("file-display-area"),E=document.getElementById("extract-options"),L=document.getElementById("file-controls"),I=document.getElementById("add-more-btn"),b=document.getElementById("clear-files-btn"),w=document.getElementById("back-to-tools");w&&w.addEventListener("click",()=>{window.location.href="/bentopdf/"});const v=async()=>{if(!(!u||!E||!m||!L))if(n.files.length>0){u.innerHTML="";for(let e=0;e<n.files.length;e++){const a=n.files[e],o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const d=document.createElement("div");d.className="flex flex-col overflow-hidden";const r=document.createElement("div");r.className="truncate font-medium text-gray-200 text-sm mb-1",r.textContent=a.name;const s=document.createElement("div");s.className="text-xs text-gray-400",s.textContent=`${h(a.size)} • Loading pages...`,d.append(r,s);const l=document.createElement("button");l.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",l.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',l.onclick=()=>{n.files=n.files.filter((t,i)=>i!==e),v()},o.append(d,l),u.appendChild(o);try{const t=await k(a),i=await N({data:t}).promise;s.textContent=`${h(a.size)} • ${i.numPages} pages`}catch(t){console.error("Error loading PDF:",t),s.textContent=`${h(a.size)} • Could not load page count`}}$({icons:P}),L.classList.remove("hidden"),E.classList.remove("hidden"),m.disabled=!1}else u.innerHTML="",L.classList.add("hidden"),E.classList.add("hidden"),m.disabled=!0},g=()=>{n.files=[],n.pdfDoc=null,v()},_=async()=>{try{if(n.files.length===0){p("No Files","Please select at least one PDF file.");return}y("Loading engine...");const e=await S(),a=n.files.length;let o=0,d=0;if(a===1){const r=n.files[0];y(`Extracting ${r.name} for AI...`);const s=await e.pdfToLlamaIndex(r),l=r.name.replace(/\.pdf$/i,"")+"_llm.json",t=JSON.stringify(s,null,2);D(new Blob([t],{type:"application/json"}),l),x(),p("Extraction Complete","Successfully extracted PDF for AI/LLM use.","success",()=>g())}else{const r=(await A(async()=>{const{default:t}=await import("./jszip.min-CX_3d3rd.js").then(i=>i.j);return{default:t}},__vite__mapDeps([0,1,2,3,4]))).default,s=new r;for(const t of n.files)try{y(`Extracting ${t.name} for AI (${o+1}/${a})...`);const i=await e.pdfToLlamaIndex(t),C=t.name.replace(/\.pdf$/i,"")+"_llm.json",F=JSON.stringify(i,null,2);s.file(C,F),o++}catch(i){console.error(`Failed to extract ${t.name}:`,i),d++}y("Creating ZIP archive...");const l=await s.generateAsync({type:"blob"});D(l,"pdf-for-ai.zip"),x(),d===0?p("Extraction Complete",`Successfully extracted ${o} PDF(s) for AI/LLM use.`,"success",()=>g()):p("Extraction Partial",`Extracted ${o} PDF(s), failed ${d}.`,"warning",()=>g())}}catch(e){x(),p("Error",`An error occurred during extraction. Error: ${e.message}`)}},B=e=>{if(e&&e.length>0){const a=Array.from(e).filter(o=>o.type==="application/pdf"||o.name.toLowerCase().endsWith(".pdf"));a.length>0&&(n.files=[...n.files,...a],v())}};f&&c&&(f.addEventListener("change",e=>{B(e.target.files)}),c.addEventListener("dragover",e=>{e.preventDefault(),c.classList.add("bg-gray-700")}),c.addEventListener("dragleave",e=>{e.preventDefault(),c.classList.remove("bg-gray-700")}),c.addEventListener("drop",e=>{e.preventDefault(),c.classList.remove("bg-gray-700"),B(e.dataTransfer?.files??null)}),f.addEventListener("click",()=>{f.value=""})),I&&I.addEventListener("click",()=>{f.click()}),b&&b.addEventListener("click",g),m&&m.addEventListener("click",_)});
