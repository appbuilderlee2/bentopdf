const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-CX_3d3rd.js","assets/main-X9THBjap.js","assets/style-DHqpffR4.js","assets/style-Bksgp8bg.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js","assets/xlsx-DLWyRTOj.js"])))=>i.map(i=>d[i]);
import"./style-DHqpffR4.js";import"./version-Cc_uNslJ.js";import{y as Mp,r as Vr,i as Pt,d as be,_ as xe,o as Oe,n as Ee,c as Rp,a as ke}from"./main-X9THBjap.js";import{p as Lp,t as Up}from"./ocr-kbBkW-3T.js";import{t as Wp,_ as q,a as se}from"./defineProperty-CAutLgT2.js";import{_ as L,b as Hp,c as qp,a as fe}from"./slicedToArray-DAoiatbY.js";import{P as X,r as mt,S as Vp,a as Gp,e as He}from"./PDFButton-B7ekbw-1.js";import{l as he,i as Xp}from"./pymupdf-loader-DSwOn04P.js";import{m as Kp,p as sa,s as Jp,e as Zp,f as Yp,d as Qp,b as eu,a as tu}from"./pdf-operations-C69fooj2.js";import{d as nu,a as ru,b as ou,c as iu}from"./image-effects-Lmx2y_xU.js";import{s as au}from"./sanitize-DHRueDTs.js";import{p as su,a as cu,s as lu}from"./digital-sign-pdf-8A4a6JDF.js";import{g as _e}from"./libreoffice-loader-CCIf03AR.js";import{l as pu}from"./ghostscript-dynamic-loader-CEQ1Fp2-.js";import{b as uu}from"./ghostscript-loader-CdhAqTpj.js";import{W as hu}from"./wasm-provider-C9fvsoLq.js";import{p as fu,r as du}from"./email-to-pdf-CX5zwdyH.js";import{M as bu}from"./index-BMSQkwth.js";import"./mobileMenu-BoMunYmR.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./index-YkV0U4e7.js";import"./index-jnNnAvsC.js";import"./index-C-9hWrTX.js";import"./wasm-cdn-config-DzU6jbwW.js";function Q(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function mu(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Wp(r.key),r)}}function ee(n,e,t){return e&&mu(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function gu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ue(n,e){if(e&&(L(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gu(n)}function J(n){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(n)}function gt(n,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},gt(n,e)}function pe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gt(n,e)}var Wt={exports:{}},Ht={exports:{}},Gr;function ca(){return Gr||(Gr=1,(function(n){function e(t,r){this.v=t,this.k=r}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Ht)),Ht.exports}var qt={exports:{}},Vt={exports:{}},Xr;function la(){return Xr||(Xr=1,(function(n){function e(t,r,o,i){var a=Object.defineProperty;try{a({},"",{})}catch{a=0}n.exports=e=function(c,p,f,h){function u(w,l){e(c,w,function(b){return this._invoke(w,l,b)})}p?a?a(c,p,{value:f,enumerable:!h,configurable:!h,writable:!h}):c[p]=f:(u("next",0),u("throw",1),u("return",2))},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,r,o,i)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Vt)),Vt.exports}var Kr;function pa(){return Kr||(Kr=1,(function(n){var e=la();function t(){var r,o,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",s=i.toStringTag||"@@toStringTag";function c(d,v,y,C){var I=v&&v.prototype instanceof f?v:f,S=Object.create(I.prototype);return e(S,"_invoke",(function(B,O,_){var g,k,F,x=0,N=_||[],T=!1,z={p:0,n:0,v:r,a:m,f:m.bind(r,4),d:function(D,P){return g=D,k=0,F=r,z.n=P,p}};function m(A,D){for(k=A,F=D,o=0;!T&&x&&!P&&o<N.length;o++){var P,R=N[o],Z=z.p,Y=R[2];A>3?(P=Y===D)&&(F=R[(k=R[4])?5:(k=3,3)],R[4]=R[5]=r):R[0]<=Z&&((P=A<2&&Z<R[1])?(k=0,z.v=D,z.n=R[1]):Z<Y&&(P=A<3||R[0]>D||D>Y)&&(R[4]=A,R[5]=D,z.n=Y,k=0))}if(P||A>1)return p;throw T=!0,D}return function(A,D,P){if(x>1)throw TypeError("Generator is already running");for(T&&D===1&&m(D,P),k=D,F=P;(o=k<2?r:F)||!T;){g||(k?k<3?(k>1&&(z.n=-1),m(k,F)):z.n=F:z.v=F);try{if(x=2,g){if(k||(A="next"),o=g[A]){if(!(o=o.call(g,F)))throw TypeError("iterator result is not an object");if(!o.done)return o;F=o.value,k<2&&(k=0)}else k===1&&(o=g.return)&&o.call(g),k<2&&(F=TypeError("The iterator does not provide a '"+A+"' method"),k=1);g=r}else if((o=(T=z.n<0)?F:B.call(O,z))!==p)break}catch(R){g=r,k=1,F=R}finally{x=1}}return{value:o,done:T}}})(d,y,C),!0),S}var p={};function f(){}function h(){}function u(){}o=Object.getPrototypeOf;var w=[][a]?o(o([][a]())):(e(o={},a,function(){return this}),o),l=u.prototype=f.prototype=Object.create(w);function b(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,u):(d.__proto__=u,e(d,s,"GeneratorFunction")),d.prototype=Object.create(l),d}return h.prototype=u,e(l,"constructor",u),e(u,"constructor",h),h.displayName="GeneratorFunction",e(u,s,"GeneratorFunction"),e(l),e(l,s,"Generator"),e(l,a,function(){return this}),e(l,"toString",function(){return"[object Generator]"}),(n.exports=t=function(){return{w:c,m:b}},n.exports.__esModule=!0,n.exports.default=n.exports)()}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(qt)),qt.exports}var Gt={exports:{}},Xt={exports:{}},Kt={exports:{}},Jr;function ua(){return Jr||(Jr=1,(function(n){var e=ca(),t=la();function r(o,i){function a(c,p,f,h){try{var u=o[c](p),w=u.value;return w instanceof e?i.resolve(w.v).then(function(l){a("next",l,f,h)},function(l){a("throw",l,f,h)}):i.resolve(w).then(function(l){u.value=l,f(u)},function(l){return a("throw",l,f,h)})}catch(l){h(l)}}var s;this.next||(t(r.prototype),t(r.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),t(this,"_invoke",function(c,p,f){function h(){return new i(function(u,w){a(c,f,u,w)})}return s=s?s.then(h,h):h()},!0)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Kt)),Kt.exports}var Zr;function ha(){return Zr||(Zr=1,(function(n){var e=pa(),t=ua();function r(o,i,a,s,c){return new t(e().w(o,i,a,s),c||Promise)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Xt)),Xt.exports}var Yr;function yu(){return Yr||(Yr=1,(function(n){var e=ha();function t(r,o,i,a,s){var c=e(r,o,i,a,s);return c.next().then(function(p){return p.done?p.value:c.next()})}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Gt)),Gt.exports}var Jt={exports:{}},Qr;function vu(){return Qr||(Qr=1,(function(n){function e(t){var r=Object(t),o=[];for(var i in r)o.unshift(i);return function a(){for(;o.length;)if((i=o.pop())in r)return a.value=i,a.done=!1,a;return a.done=!0,a}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Jt)),Jt.exports}var Zt={exports:{}},Yt={exports:{}},eo;function wu(){return eo||(eo=1,(function(n){function e(t){"@babel/helpers - typeof";return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Yt)),Yt.exports}var to;function ku(){return to||(to=1,(function(n){var e=wu().default;function t(r){if(r!=null){var o=r[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],i=0;if(o)return o.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length))return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}}}throw new TypeError(e(r)+" is not iterable")}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Zt)),Zt.exports}var no;function Pu(){return no||(no=1,(function(n){var e=ca(),t=pa(),r=yu(),o=ha(),i=ua(),a=vu(),s=ku();function c(){var p=t(),f=p.m(c),h=(Object.getPrototypeOf?Object.getPrototypeOf(f):f.__proto__).constructor;function u(b){var d=typeof b=="function"&&b.constructor;return!!d&&(d===h||(d.displayName||d.name)==="GeneratorFunction")}var w={throw:1,return:2,break:3,continue:3};function l(b){var d,v;return function(y){d||(d={stop:function(){return v(y.a,2)},catch:function(){return y.v},abrupt:function(I,S){return v(y.a,w[I],S)},delegateYield:function(I,S,B){return d.resultName=S,v(y.d,s(I),B)},finish:function(I){return v(y.f,I)}},v=function(I,S,B){y.p=d.prev,y.n=d.next;try{return I(S,B)}finally{d.next=y.n}}),d.resultName&&(d[d.resultName]=y.v,d.resultName=void 0),d.sent=y.v,d.next=y.n;try{return b.call(this,d)}finally{y.p=d.prev,y.n=d.next}}}return(n.exports=c=function(){return{wrap:function(v,y,C,I){return p.w(l(v),y,C,I&&I.reverse())},isGeneratorFunction:u,mark:p.m,awrap:function(v,y){return new e(v,y)},AsyncIterator:i,async:function(v,y,C,I,S){return(u(y)?o:r)(l(v),y,C,I,S)},keys:a,values:s}},n.exports.__esModule=!0,n.exports.default=n.exports)()}n.exports=c,n.exports.__esModule=!0,n.exports.default=n.exports})(Wt)),Wt.exports}var Qt,ro;function xu(){if(ro)return Qt;ro=1;var n=Pu()();Qt=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}return Qt}var Cu=xu();const V=Mp(Cu);function _u(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=$u(n))||e){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var p=t.next();return a=p.done,p},e:function(p){s=!0,i=p},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw i}}}}function $u(n,e){if(n){if(typeof n=="string")return oo(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oo(n,e):void 0}}function oo(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Eu(){return{debug:function(e){}}}var Ou=(function(){function n(){Q(this,n),q(this,"pipes",[])}return ee(n,[{key:"addPipe",value:function(t){this.pipes.push(t)}},{key:"emit",value:(function(){var e=se(V.mark(function r(o){var i,a,s,c;return V.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:i=o,a=_u(this.pipes),f.prev=2,a.s();case 4:if((s=a.n()).done){f.next=13;break}return c=s.value,f.next=8,c(i);case 8:if(i=f.sent,!(typeof i>"u")){f.next=11;break}return f.abrupt("return");case 11:f.next=4;break;case 13:f.next=18;break;case 15:f.prev=15,f.t0=f.catch(2),a.e(f.t0);case 18:return f.prev=18,a.f(),f.finish(18);case 21:return f.abrupt("return",i);case 22:case"end":return f.stop()}},r,this,[[2,15,18,21]])}));function t(r){return e.apply(this,arguments)}return t})()}])})(),xt=(function(){function n(e){Q(this,n),q(this,"signal",new Ou),this.name=e}return ee(n,[{key:"addPipe",value:function(t){this.signal.addPipe(t)}},{key:"use",value:function(t){if(!(t instanceof n))throw new Error("cannot use non-Scope instance");return t.setParent(this),this.addPipe(function(r){return t.signal.emit(r)}),Eu()}},{key:"setParent",value:function(t){this.parent=t}},{key:"emit",value:function(t){return this.signal.emit(t)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(t){if(!this.parent)throw new Error("cannot find parent");if(t&&this.parent instanceof t)return this.parent;if(t)throw new Error("actual parent is not instance of type");return this.parent}}])})();function io(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Du(n))||e){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var p=t.next();return a=p.done,p},e:function(p){s=!0,i=p},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw i}}}}function Du(n,e){if(n){if(typeof n=="string")return ao(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ao(n,e):void 0}}function ao(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Fu(n,e,t){return e=J(e),ue(n,fa()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function fa(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fa=function(){return!!n})()}var ze=(function(n){function e(){var t;return Q(this,e),t=Fu(this,e,["NodeEditor"]),q(t,"nodes",[]),q(t,"connections",[]),t}return pe(e,n),ee(e,[{key:"getNode",value:function(r){return this.nodes.find(function(o){return o.id===r})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(r){return this.connections.find(function(o){return o.id===r})}},{key:"addNode",value:(function(){var t=se(V.mark(function o(i){return V.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.getNode(i.id)){s.next=2;break}throw new Error("node has already been added");case 2:return s.next=4,this.emit({type:"nodecreate",data:i});case 4:if(s.sent){s.next=6;break}return s.abrupt("return",!1);case 6:return this.nodes.push(i),s.next=9,this.emit({type:"nodecreated",data:i});case 9:return s.abrupt("return",!0);case 10:case"end":return s.stop()}},o,this)}));function r(o){return t.apply(this,arguments)}return r})()},{key:"addConnection",value:(function(){var t=se(V.mark(function o(i){return V.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.getConnection(i.id)){s.next=2;break}throw new Error("connection has already been added");case 2:return s.next=4,this.emit({type:"connectioncreate",data:i});case 4:if(s.sent){s.next=6;break}return s.abrupt("return",!1);case 6:return this.connections.push(i),s.next=9,this.emit({type:"connectioncreated",data:i});case 9:return s.abrupt("return",!0);case 10:case"end":return s.stop()}},o,this)}));function r(o){return t.apply(this,arguments)}return r})()},{key:"removeNode",value:(function(){var t=se(V.mark(function o(i){var a,s;return V.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(a=this.nodes.find(function(f){return f.id===i}),a){p.next=3;break}throw new Error("cannot find node");case 3:return p.next=5,this.emit({type:"noderemove",data:a});case 5:if(p.sent){p.next=7;break}return p.abrupt("return",!1);case 7:return s=this.nodes.indexOf(a),this.nodes.splice(s,1),p.next=11,this.emit({type:"noderemoved",data:a});case 11:return p.abrupt("return",!0);case 12:case"end":return p.stop()}},o,this)}));function r(o){return t.apply(this,arguments)}return r})()},{key:"removeConnection",value:(function(){var t=se(V.mark(function o(i){var a,s;return V.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(a=this.connections.find(function(f){return f.id===i}),a){p.next=3;break}throw new Error("cannot find connection");case 3:return p.next=5,this.emit({type:"connectionremove",data:a});case 5:if(p.sent){p.next=7;break}return p.abrupt("return",!1);case 7:return s=this.connections.indexOf(a),this.connections.splice(s,1),p.next=11,this.emit({type:"connectionremoved",data:a});case 11:return p.abrupt("return",!0);case 12:case"end":return p.stop()}},o,this)}));function r(o){return t.apply(this,arguments)}return r})()},{key:"clear",value:(function(){var t=se(V.mark(function o(){var i,a,s,c,p,f;return V.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.emit({type:"clear"});case 2:if(u.sent){u.next=6;break}return u.next=5,this.emit({type:"clearcancelled"});case 5:return u.abrupt("return",!1);case 6:i=io(this.connections.slice()),u.prev=7,i.s();case 9:if((a=i.n()).done){u.next=15;break}return s=a.value,u.next=13,this.removeConnection(s.id);case 13:u.next=9;break;case 15:u.next=20;break;case 17:u.prev=17,u.t0=u.catch(7),i.e(u.t0);case 20:return u.prev=20,i.f(),u.finish(20);case 23:c=io(this.nodes.slice()),u.prev=24,c.s();case 26:if((p=c.n()).done){u.next=32;break}return f=p.value,u.next=30,this.removeNode(f.id);case 30:u.next=26;break;case 32:u.next=37;break;case 34:u.prev=34,u.t1=u.catch(24),c.e(u.t1);case 37:return u.prev=37,c.f(),u.finish(37);case 40:return u.next=42,this.emit({type:"cleared"});case 42:return u.abrupt("return",!0);case 43:case"end":return u.stop()}},o,this,[[7,17,20,23],[24,34,37,40]])}));function r(){return t.apply(this,arguments)}return r})()}])})(xt),en=globalThis.crypto;function Me(){if("randomBytes"in en)return en.randomBytes(8).toString("hex");var n=en.getRandomValues(new Uint8Array(8)),e=Array.from(n),t=e.map(function(r){return r.toString(16).padStart(2,"0")});return t.join("")}function wr(n,e,t){return e=J(e),ue(n,da()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function da(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(da=function(){return!!n})()}var Su=ee(function n(e){Q(this,n),this.name=e}),kr=ee(function n(e,t,r){Q(this,n),this.socket=e,this.label=t,this.multipleConnections=r,this.id=Me()}),Iu=(function(n){function e(t,r,o){var i;return Q(this,e),i=wr(this,e,[t,r,o]),q(i,"control",null),q(i,"showControl",!0),i.socket=t,i.label=r,i.multipleConnections=o,i}return pe(e,n),ee(e,[{key:"addControl",value:function(r){if(this.control)throw new Error("control already added for this input");this.control=r}},{key:"removeControl",value:function(){this.control=null}}])})(kr),ju=(function(n){function e(t,r,o){return Q(this,e),wr(this,e,[t,r,o!==!1])}return pe(e,n),ee(e)})(kr),ba=ee(function n(){Q(this,n),this.id=Me()}),Nu=(function(n){function e(t,r){var o,i;return Q(this,e),i=wr(this,e),i.type=t,i.options=r,i.id=Me(),i.readonly=(o=r?.readonly)!==null&&o!==void 0?o:!1,typeof r?.initial<"u"&&(i.value=r.initial),i}return pe(e,n),ee(e,[{key:"setValue",value:function(r){var o;this.value=r,(o=this.options)!==null&&o!==void 0&&o.change&&this.options.change(r)}}])})(ba),Au=(function(){function n(e){Q(this,n),q(this,"inputs",{}),q(this,"outputs",{}),q(this,"controls",{}),this.label=e,this.id=Me()}return ee(n,[{key:"hasInput",value:function(t){return Object.prototype.hasOwnProperty.call(this.inputs,t)}},{key:"addInput",value:function(t,r){if(this.hasInput(t))throw new Error("input with key '".concat(String(t),"' already added"));Object.defineProperty(this.inputs,t,{value:r,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(t){delete this.inputs[t]}},{key:"hasOutput",value:function(t){return Object.prototype.hasOwnProperty.call(this.outputs,t)}},{key:"addOutput",value:function(t,r){if(this.hasOutput(t))throw new Error("output with key '".concat(String(t),"' already added"));Object.defineProperty(this.outputs,t,{value:r,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(t){delete this.outputs[t]}},{key:"hasControl",value:function(t){return Object.prototype.hasOwnProperty.call(this.controls,t)}},{key:"addControl",value:function(t,r){if(this.hasControl(t))throw new Error("control with key '".concat(String(t),"' already added"));Object.defineProperty(this.controls,t,{value:r,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(t){delete this.controls[t]}}])})(),Tu=ee(function n(e,t,r,o){if(Q(this,n),this.sourceOutput=t,this.targetInput=o,!e.outputs[t])throw new Error("source node doesn't have output with a key ".concat(String(t)));if(!r.inputs[o])throw new Error("target node doesn't have input with a key ".concat(String(o)));this.id=Me(),this.source=e.id,this.target=r.id}),$=Object.freeze({__proto__:null,Socket:Su,Port:kr,Input:Iu,Output:ju,Control:ba,InputControl:Nu,Node:Au,Connection:Tu});function Bu(n){if(Array.isArray(n))return Hp(n)}function zu(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Mu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xe(n){return Bu(n)||zu(n)||qp(n)||Mu()}var Ru=(function(){function n(e){Q(this,n),this.reordered=e,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ee(n,[{key:"getPointerFrom",value:function(t){var r=this.holder.getBoundingClientRect(),o=r.left,i=r.top,a=t.clientX-o,s=t.clientY-i;return{x:a,y:s}}},{key:"add",value:function(t){this.holder.appendChild(t)}},{key:"reorder",value:(function(){var e=se(V.mark(function r(o,i){return V.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.holder.contains(o)){s.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(i!==null&&!this.holder.contains(i))){s.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(o,i),s.next=7,this.reordered(o);case 7:case"end":return s.stop()}},r,this)}));function t(r,o){return e.apply(this,arguments)}return t})()},{key:"remove",value:function(t){this.holder.contains(t)&&this.holder.removeChild(t)}}])})();function Lu(n,e){var t=function(a){e.move(a)},r=function(a){window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",r),window.removeEventListener("pointercancel",r),e.up(a)},o=function(a){window.addEventListener("pointermove",t),window.addEventListener("pointerup",r),window.addEventListener("pointercancel",r),e.down(a)};return n.addEventListener("pointerdown",o),{destroy:function(){n.removeEventListener("pointerdown",o),window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",r),window.removeEventListener("pointercancel",r)}}}var so=function(e){return e.length===0?0:Math.min.apply(Math,Xe(e))},co=function(e){return e.length===0?0:Math.max.apply(Math,Xe(e))};function ma(n){var e=so(n.map(function(i){return i.position.x})),t=so(n.map(function(i){return i.position.y})),r=co(n.map(function(i){return i.position.x+i.width})),o=co(n.map(function(i){return i.position.y+i.height}));return{left:e,right:r,top:t,bottom:o,width:Math.abs(e-r),height:Math.abs(t-o),center:{x:(e+r)/2,y:(t+o)/2}}}function lo(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Uu(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lo(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lo(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ga=(function(){function n(e){var t=this;Q(this,n),q(this,"down",function(r){t.guards.down(r)&&(r.stopPropagation(),t.pointerStart={x:r.pageX,y:r.pageY},t.startPosition=Uu({},t.config.getCurrentPosition()),t.events.start(r))}),q(this,"move",function(r){if(!(!t.pointerStart||!t.startPosition)&&t.guards.move(r)){r.preventDefault();var o={x:r.pageX-t.pointerStart.x,y:r.pageY-t.pointerStart.y},i=t.config.getZoom(),a=t.startPosition.x+o.x/i,s=t.startPosition.y+o.y/i;t.events.translate(a,s,r)}}),q(this,"up",function(r){t.pointerStart&&(delete t.pointerStart,t.events.drag(r))}),this.guards=e||{down:function(o){return!(o.pointerType==="mouse"&&o.button!==0)},move:function(){return!0}}}return ee(n,[{key:"initialize",value:function(t,r,o){this.config=r,this.events=o,t.style.touchAction="none",this.pointerListener=Lu(t,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Wu=(function(){function n(e){var t=this;Q(this,n),q(this,"previous",null),q(this,"pointers",[]),q(this,"wheel",function(r){r.preventDefault();var o=t.element.getBoundingClientRect(),i=o.left,a=o.top,s=r.deltaY<0,c=s?t.intensity:-t.intensity,p=(i-r.clientX)*c,f=(a-r.clientY)*c;t.onzoom(c,p,f,"wheel")}),q(this,"down",function(r){t.pointers.push(r)}),q(this,"move",function(r){if(t.pointers=t.pointers.map(function(l){return l.pointerId===r.pointerId?r:l}),!!t.isTranslating()){var o=t.element.getBoundingClientRect(),i=o.left,a=o.top,s=t.getTouches(),c=s.cx,p=s.cy,f=s.distance;if(t.previous!==null&&t.previous.distance>0){var h=f/t.previous.distance-1,u=(i-c)*h,w=(a-p)*h;t.onzoom(h,u-(t.previous.cx-c),w-(t.previous.cy-p),"touch")}t.previous={cx:c,cy:p,distance:f}}}),q(this,"contextmenu",function(){t.pointers=[]}),q(this,"up",function(r){t.previous=null,t.pointers=t.pointers.filter(function(o){return o.pointerId!==r.pointerId})}),q(this,"dblclick",function(r){r.preventDefault();var o=t.element.getBoundingClientRect(),i=o.left,a=o.top,s=4*t.intensity,c=(i-r.clientX)*s,p=(a-r.clientY)*s;t.onzoom(s,c,p,"dblclick")}),this.intensity=e}return ee(n,[{key:"initialize",value:function(t,r,o){this.container=t,this.element=r,this.onzoom=o,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var t={touches:this.pointers},r=[t.touches[0].clientX,t.touches[0].clientY],o=r[0],i=r[1],a=[t.touches[1].clientX,t.touches[1].clientY],s=a[0],c=a[1],p=Math.sqrt(Math.pow(o-s,2)+Math.pow(i-c,2));return{cx:(o+s)/2,cy:(i+c)/2,distance:p}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Hu=(function(){function n(e,t,r){var o=this;Q(this,n),q(this,"transform",{k:1,x:0,y:0}),q(this,"pointer",{x:0,y:0}),q(this,"zoomHandler",null),q(this,"dragHandler",null),q(this,"pointerdown",function(i){o.setPointerFrom(i),o.events.pointerDown(o.pointer,i)}),q(this,"pointermove",function(i){o.setPointerFrom(i),o.events.pointerMove(o.pointer,i)}),q(this,"pointerup",function(i){o.setPointerFrom(i),o.events.pointerUp(o.pointer,i)}),q(this,"resize",function(i){o.events.resize(i)}),q(this,"onTranslate",function(i,a){var s;(s=o.zoomHandler)!==null&&s!==void 0&&s.isTranslating()||o.translate(i,a)}),q(this,"onZoom",function(i,a,s,c){o.zoom(o.transform.k*(1+i),a,s,c),o.update()}),this.container=e,this.events=t,this.guards=r,this.content=new Ru(function(i){return o.events.reordered(i)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Wu(.1)),this.setDragHandler(new ga),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),e.appendChild(this.content.holder),this.update()}return ee(n,[{key:"update",value:function(){var t=this.transform,r=t.x,o=t.y,i=t.k;this.content.holder.style.transform="translate(".concat(r,"px, ").concat(o,"px) scale(").concat(i,")")}},{key:"setDragHandler",value:function(t){var r=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=t,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return r.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(t){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=t,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(t){var r=this.content.getPointerFrom(t),o=r.x,i=r.y,a=this.transform.k;this.pointer={x:o/a,y:i/a}}},{key:"translate",value:(function(){var e=se(V.mark(function r(o,i){var a,s;return V.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a={x:o,y:i},p.next=3,this.guards.translate({previous:this.transform,position:a});case 3:if(s=p.sent,s){p.next=6;break}return p.abrupt("return",!1);case 6:return this.transform.x=s.data.position.x,this.transform.y=s.data.position.y,this.update(),p.next=11,this.events.translated(s.data);case 11:return p.abrupt("return",!0);case 12:case"end":return p.stop()}},r,this)}));function t(r,o){return e.apply(this,arguments)}return t})()},{key:"zoom",value:(function(){var e=se(V.mark(function r(o){var i,a,s,c,p,f,h=arguments;return V.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return i=h.length>1&&h[1]!==void 0?h[1]:0,a=h.length>2&&h[2]!==void 0?h[2]:0,s=h.length>3?h[3]:void 0,c=this.transform.k,w.next=6,this.guards.zoom({previous:this.transform,zoom:o,source:s});case 6:if(p=w.sent,p){w.next=9;break}return w.abrupt("return",!0);case 9:return f=(c-p.data.zoom)/(c-o||1),this.transform.k=p.data.zoom||1,this.transform.x+=i*f,this.transform.y+=a*f,this.update(),w.next=16,this.events.zoomed(p.data);case 16:return w.abrupt("return",!1);case 17:case"end":return w.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function qu(n,e,t){return e=J(e),ue(n,ya()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function ya(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ya=function(){return!!n})()}var Tt=(function(n){function e(){return Q(this,e),qu(this,e,arguments)}return pe(e,n),ee(e)})(xt),Vu=ee(function n(e){Q(this,n),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(t){return e.contextmenu(t)})}),Gu=(function(){function n(){Q(this,n),q(this,"views",new WeakMap),q(this,"viewsElements",new Map)}return ee(n,[{key:"set",value:function(t){var r=t.element,o=t.type,i=t.payload;i!=null&&i.id&&(this.views.set(r,t),this.viewsElements.set("".concat(o,"_").concat(i.id),r))}},{key:"get",value:function(t,r){var o=this.viewsElements.get("".concat(t,"_").concat(r));return o&&this.views.get(o)}},{key:"delete",value:function(t){var r,o=this.views.get(t);o&&(r=o.payload)!==null&&r!==void 0&&r.id&&(this.views.delete(t),this.viewsElements.delete("".concat(o.type,"_").concat(o.payload.id)))}}])})();function po(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function uo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?po(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):po(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Xu=(function(){function n(e,t,r){var o=this;Q(this,n),q(this,"translate",(function(){var i=se(V.mark(function a(s,c){var p,f;return V.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return p=uo({},o.position),u.next=3,o.guards.translate({previous:p,position:{x:s,y:c}});case 3:if(f=u.sent,f){u.next=6;break}return u.abrupt("return",!1);case 6:return o.position=uo({},f.data.position),o.element.style.transform="translate(".concat(o.position.x,"px, ").concat(o.position.y,"px)"),u.next=10,o.events.translated({position:o.position,previous:p});case 10:return u.abrupt("return",!0);case 11:case"end":return u.stop()}},a)}));return function(a,s){return i.apply(this,arguments)}})()),q(this,"resize",(function(){var i=se(V.mark(function a(s,c){var p,f;return V.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return p={width:s,height:c},u.next=3,o.guards.resize({size:p});case 3:if(u.sent){u.next=5;break}return u.abrupt("return",!1);case 5:if(f=o.element.querySelector("*:not(span):not([fragment])"),!(!f||!(f instanceof HTMLElement))){u.next=8;break}return u.abrupt("return",!1);case 8:return f.style.width="".concat(s,"px"),f.style.height="".concat(c,"px"),u.next=12,o.events.resized({size:p});case 12:return u.abrupt("return",!0);case 13:case"end":return u.stop()}},a)}));return function(a,s){return i.apply(this,arguments)}})()),this.getZoom=e,this.events=t,this.guards=r,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(i){return o.events.contextmenu(i)}),this.dragHandler=new ga,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return o.position},getZoom:function(){return o.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ee(n,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function va(n,e){return n.map(function(t){return{view:e.get(t.id),node:t}}).filter(function(t){return t.view}).map(function(t){var r=t.view,o=t.node,i=o.width,a=o.height;return typeof i<"u"&&typeof a<"u"?{position:r.position,width:i,height:a}:{position:r.position,width:r.element.clientWidth,height:r.element.clientHeight}})}function Ku(n,e){var t=n.parentScope(ze),r=e.map(function(i){return L(i)==="object"?i:t.getNode(i)}),o=va(r,n.nodeViews);return ma(o)}function Ju(n){var e=n;e.addPipe(function(t){if(!t||L(t)!=="object"||!("type"in t))return t;if(t.type==="nodepicked"){var r=e.nodeViews.get(t.data.id),o=e.area.content;r&&o.reorder(r.element,null)}if(t.type==="connectioncreated"){var i=e.connectionViews.get(t.data.id),a=e.area.content;i&&a.reorder(i.element,a.holder.firstChild)}return t})}function ho(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Ce(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ho(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ho(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Zu(n,e){var t=e!=null&&e.scaling?e.scaling===!0?{min:.1,max:1}:e.scaling:!1,r=e!=null&&e.translation?e.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:e.translation:!1;function o(a){if(!t)throw new Error("scaling param isnt defined");var s=typeof t=="function"?t():t,c=s.min,p=s.max;return a<c?c:a>p?p:a}function i(a){if(!r)throw new Error("translation param isnt defined");var s=Ce({},a),c=typeof r=="function"?r():r,p=c.left,f=c.top,h=c.right,u=c.bottom;return s.x<p&&(s.x=p),s.x>h&&(s.x=h),s.y<f&&(s.y=f),s.y>u&&(s.y=u),s}n.addPipe(function(a){if(!a||L(a)!=="object"||!("type"in a))return a;if(t&&a.type==="zoom")return Ce(Ce({},a),{},{data:Ce(Ce({},a.data),{},{zoom:o(a.data.zoom)})});if(r&&a.type==="zoomed"){var s=i(n.area.transform);n.area.translate(s.x,s.y)}return r&&a.type==="translate"?Ce(Ce({},a),{},{data:Ce(Ce({},a.data),{},{position:i(a.data.position)})}):a})}function Yu(){var n=!1;function e(r){(r.key==="Control"||r.key==="Meta")&&(n=!0)}function t(r){(r.key==="Control"||r.key==="Meta")&&(n=!1)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),{active:function(){return n},destroy:function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}}var wa=(function(){function n(){Q(this,n),q(this,"entities",new Map),q(this,"pickId",null)}return ee(n,[{key:"isSelected",value:function(t){return this.entities.has("".concat(t.label,"_").concat(t.id))}},{key:"add",value:(function(){var e=se(V.mark(function r(o,i){return V.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i){s.next=3;break}return s.next=3,this.unselectAll();case 3:this.entities.set("".concat(o.label,"_").concat(o.id),o);case 4:case"end":return s.stop()}},r,this)}));function t(r,o){return e.apply(this,arguments)}return t})()},{key:"remove",value:(function(){var e=se(V.mark(function r(o){var i,a;return V.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i="".concat(o.label,"_").concat(o.id),a=this.entities.get(i),!a){c.next=6;break}return this.entities.delete(i),c.next=6,a.unselect();case 6:case"end":return c.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t})()},{key:"unselectAll",value:(function(){var e=se(V.mark(function r(){var o=this;return V.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(Xe(Array.from(this.entities.values())).map(function(s){return o.remove(s)}));case 2:case"end":return a.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t})()},{key:"translate",value:(function(){var e=se(V.mark(function r(o,i){var a=this;return V.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Promise.all(Array.from(this.entities.values()).map(function(p){return!a.isPicked(p)&&p.translate(o,i)}));case 2:case"end":return c.stop()}},r,this)}));function t(r,o){return e.apply(this,arguments)}return t})()},{key:"pick",value:function(t){this.pickId="".concat(t.label,"_").concat(t.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(t){return this.pickId==="".concat(t.label,"_").concat(t.id)}}])})();function Qu(){return new wa}function eh(n,e,t){var r=null,o=n,i=function(){return r||(r=o.parentScope(ze))},a=0;function s(w){w.selected||(w.selected=!0,o.update("node",w.id))}function c(w){w.selected&&(w.selected=!1,o.update("node",w.id))}function p(w,l){return f.apply(this,arguments)}function f(){return f=se(V.mark(function w(l,b){var d;return V.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d=i().getNode(l),d){y.next=3;break}return y.abrupt("return");case 3:return y.next=5,e.add({label:"node",id:d.id,translate:function(I,S){return se(V.mark(function B(){var O,_;return V.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(O=o.nodeViews.get(d.id),_=O?.position,!_){k.next=5;break}return k.next=5,O.translate(_.x+I,_.y+S);case 5:case"end":return k.stop()}},B)}))()},unselect:function(){c(d)}},b);case 5:s(d);case 6:case"end":return y.stop()}},w)})),f.apply(this,arguments)}function h(w){return u.apply(this,arguments)}function u(){return u=se(V.mark(function w(l){return V.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.remove({id:l,label:"node"});case 2:case"end":return d.stop()}},w)})),u.apply(this,arguments)}return o.addPipe((function(){var w=se(V.mark(function l(b){var d,v,y,C,I,S,B,O;return V.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(!b||L(b)!=="object"||!("type"in b))){g.next=2;break}return g.abrupt("return",b);case 2:if(b.type!=="nodepicked"){g.next=11;break}return d=b.data.id,v=t.accumulating.active(),e.pick({id:d,label:"node"}),a=null,g.next=9,p(d,v);case 9:g.next=33;break;case 11:if(b.type!=="nodetranslated"){g.next=20;break}if(y=b.data,C=y.id,I=y.position,S=y.previous,B=I.x-S.x,O=I.y-S.y,!e.isPicked({id:C,label:"node"})){g.next=18;break}return g.next=18,e.translate(B,O);case 18:g.next=33;break;case 20:if(b.type!=="pointerdown"){g.next=24;break}a=0,g.next=33;break;case 24:if(b.type!=="pointermove"){g.next=28;break}a!==null&&a++,g.next=33;break;case 28:if(b.type!=="pointerup"){g.next=33;break}if(!(a!==null&&a<4)){g.next=32;break}return g.next=32,e.unselectAll();case 32:a=null;case 33:return g.abrupt("return",b);case 34:case"end":return g.stop()}},l)}));return function(l){return w.apply(this,arguments)}})()),{select:p,unselect:h}}function th(n,e){var t=null,r=function(){return t||(t=n.parentScope(ze))};function o(i,a){var s=r().getNode(i);if(s){var c=s.inputs[a];if(!c)throw new Error("cannot find input");var p=c.showControl,f=r().getConnections(),h=!!f.find(function(u){return u.target===i&&u.targetInput===a});c.showControl=e?e({hasAnyConnection:h,input:c}):!h,c.showControl!==p&&n.update("node",s.id)}}n.addPipe(function(i){return(i.type==="connectioncreated"||i.type==="connectionremoved")&&o(i.data.target,i.data.targetInput),i})}function fo(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Et(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fo(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fo(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nh(n,e){var t=n,r=typeof e?.size>"u"?16:e.size,o=typeof e?.dynamic>"u"?!0:e.dynamic;function i(a){return Math.round(a/r)*r}t.addPipe(function(a){if(!a||L(a)!=="object"||!("type"in a))return a;if(o&&a.type==="nodetranslate"){var s=a.data.position,c=i(s.x),p=i(s.y);return Et(Et({},a),{},{data:Et(Et({},a.data),{},{position:{x:c,y:p}})})}if(!o&&a.type==="nodedragged"){var f=t.nodeViews.get(a.data.id);if(f){var h=f.position,u=h.x,w=h.y;f.translate(i(u),i(w))}}return a})}function rh(n,e,t){return dr.apply(this,arguments)}function dr(){return dr=se(V.mark(function n(e,t,r){var o,i,a,s,c,p,f,h,u,w,l,b,d;return V.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return o=r||{},i=o.scale,a=i===void 0?.9:i,s=e.parentScope(ze),c=t.map(function(C){return L(C)==="object"?C:s.getNode(C)}),p=va(c,e.nodeViews),f=ma(p),h=[e.container.clientWidth,e.container.clientHeight],u=h[0],w=h[1],l=u/f.width,b=w/f.height,d=Math.min(b*a,l*a,1),e.area.transform.x=u/2-f.center.x*d,e.area.transform.y=w/2-f.center.y*d,y.next=12,e.area.zoom(d,0,0);case 12:case"end":return y.stop()}},n)})),dr.apply(this,arguments)}var Ot=Object.freeze({__proto__:null,getBoundingBox:Ku,simpleNodesOrder:Ju,restrictor:Zu,accumulateOnCtrl:Yu,selectableNodes:eh,Selector:wa,selector:Qu,showInputControl:th,snapGrid:nh,zoomAt:rh});function bo(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function mo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bo(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bo(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oh(n,e,t){return e=J(e),ue(n,ka()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function ka(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ka=function(){return!!n})()}var ih=(function(n){function e(t){var r;return Q(this,e),r=oh(this,e,["area"]),q(r,"nodeViews",new Map),q(r,"connectionViews",new Map),q(r,"elements",new Gu),q(r,"onContextMenu",function(o){r.emit({type:"contextmenu",data:{event:o,context:"root"}})}),r.container=t,t.style.overflow="hidden",t.addEventListener("contextmenu",r.onContextMenu),r.addPipe(function(o){return!o||!(L(o)==="object"&&"type"in o)||(o.type==="nodecreated"&&r.addNodeView(o.data),o.type==="noderemoved"&&r.removeNodeView(o.data.id),o.type==="connectioncreated"&&r.addConnectionView(o.data),o.type==="connectionremoved"&&r.removeConnectionView(o.data.id),o.type==="render"&&r.elements.set(o.data),o.type==="unmount"&&r.elements.delete(o.data.element)),o}),r.area=new Hu(t,{zoomed:function(i){return r.emit({type:"zoomed",data:i})},pointerDown:function(i,a){r.emit({type:"pointerdown",data:{position:i,event:a}})},pointerMove:function(i,a){r.emit({type:"pointermove",data:{position:i,event:a}})},pointerUp:function(i,a){r.emit({type:"pointerup",data:{position:i,event:a}})},resize:function(i){r.emit({type:"resized",data:{event:i}})},translated:function(i){return r.emit({type:"translated",data:i})},reordered:function(i){return r.emit({type:"reordered",data:{element:i}})}},{translate:function(i){return r.emit({type:"translate",data:i})},zoom:function(i){return r.emit({type:"zoom",data:i})}}),r}return pe(e,n),ee(e,[{key:"addNodeView",value:function(r){var o=this,i=r.id,a=new Xu(function(){return o.area.transform.k},{picked:function(){o.emit({type:"nodepicked",data:{id:i}})},translated:function(c){return o.emit({type:"nodetranslated",data:mo({id:i},c)})},dragged:function(){o.emit({type:"nodedragged",data:r})},contextmenu:function(c){o.emit({type:"contextmenu",data:{event:c,context:r}})},resized:function(c){var p=c.size;return o.emit({type:"noderesized",data:{id:r.id,size:p}})}},{translate:function(c){return o.emit({type:"nodetranslate",data:mo({id:i},c)})},resize:function(c){var p=c.size;return o.emit({type:"noderesize",data:{id:r.id,size:p}})}});return this.nodeViews.set(i,a),this.area.content.add(a.element),this.emit({type:"render",data:{element:a.element,type:"node",payload:r}}),a}},{key:"removeNodeView",value:function(r){var o=this.nodeViews.get(r);o&&(this.emit({type:"unmount",data:{element:o.element}}),this.nodeViews.delete(r),this.area.content.remove(o.element))}},{key:"addConnectionView",value:function(r){var o=this,i=new Vu({contextmenu:function(s){o.emit({type:"contextmenu",data:{event:s,context:r}})}});return this.connectionViews.set(r.id,i),this.area.content.add(i.element),this.emit({type:"render",data:{element:i.element,type:"connection",payload:r}}),i}},{key:"removeConnectionView",value:function(r){var o=this.connectionViews.get(r);o&&(this.emit({type:"unmount",data:{element:o.element}}),this.connectionViews.delete(r),this.area.content.remove(o.element))}},{key:"update",value:(function(){var t=se(V.mark(function o(i,a){var s;return V.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(s=this.elements.get(i,a),!s){p.next=4;break}return p.next=4,this.emit({type:"render",data:s});case 4:case"end":return p.stop()}},o,this)}));function r(o,i){return t.apply(this,arguments)}return r})()},{key:"resize",value:(function(){var t=se(V.mark(function o(i,a,s){var c;return V.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(c=this.nodeViews.get(i),!c){f.next=5;break}return f.next=4,c.resize(a,s);case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},o,this)}));function r(o,i,a){return t.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var t=se(V.mark(function o(i,a){var s,c,p;return V.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=a.x,c=a.y,p=this.nodeViews.get(i),!p){h.next=6;break}return h.next=5,p.translate(s,c);case 5:return h.abrupt("return",h.sent);case 6:case"end":return h.stop()}},o,this)}));function r(o,i){return t.apply(this,arguments)}return r})()},{key:"destroy",value:function(){var r=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(o){return r.removeConnectionView(o)}),Array.from(this.nodeViews.keys()).forEach(function(o){return r.removeNodeView(o)}),this.area.destroy()}}])})(Tt);function ah(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=J(n))!==null;);return n}function we(){return we=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var r=ah(n,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?n:t):o.value}},we.apply(null,arguments)}function go(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function tn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?go(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):go(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sh(n){var e=null,t=null;function r(i){t&&i.removeConnectionView(t),e=null,t=null}function o(i){r(i),t="pseudo_".concat(Me())}return{isMounted:function(){return!!t},mount:o,render:function(a,s,c){var p=s.x,f=s.y,h=c.side==="output",u={x:p+(h?-3:3),y:f};if(!t)throw new Error("pseudo connection id wasn't generated");var w=h?tn({id:t,source:c.nodeId,sourceOutput:c.key,target:"",targetInput:""},n??{}):tn({id:t,target:c.nodeId,targetInput:c.key,source:"",sourceOutput:""},n??{});if(!e){var l=a.addConnectionView(w);e=l.element}e&&a.emit({type:"render",data:tn({element:e,type:"connection",payload:w},h?{end:u}:{start:u})})},unmount:r}}function ch(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=lh(n))||e){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var p=t.next();return a=p.done,p},e:function(p){s=!0,i=p},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw i}}}}function lh(n,e){if(n){if(typeof n=="string")return yo(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?yo(n,e):void 0}}function yo(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ph(n,e){var t=ch(e),r;try{for(t.s();!(r=t.n()).done;){var o=r.value,i=n.get(o);if(i)return i}}catch(a){t.e(a)}finally{t.f()}}function Pa(n,e){var t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,o=r.elementsFromPoint(n,e),i=(t=o[0])===null||t===void 0?void 0:t.shadowRoot;return i&&i!==r&&o.unshift.apply(o,Xe(Pa(n,e,i))),o}var Pr=(function(){function n(){Q(this,n)}return ee(n,[{key:"setContext",value:function(t){this.context=t}}])})();function xa(n,e){var t=n.side==="output"&&e.side==="input",r=n.side==="input"&&e.side==="output",o=t?[n,e]:r?[e,n]:[],i=fe(o,2),a=i[0],s=i[1];if(a&&s)return[a,s]}function uh(n,e){return!!xa(n,e)}function hh(n,e,t){var r=xa(n,e)||[null,null],o=fe(r,2),i=o[0],a=o[1];if(i&&a)return t.editor.addConnection({id:Me(),source:i.nodeId,sourceOutput:i.key,target:a.nodeId,targetInput:a.key}),!0}function fh(n,e){var t=e.getNode(n.nodeId);if(!t)throw new Error("cannot find node");var r=n.side==="input"?t.inputs:t.outputs;return r[n.key]}function dh(n,e){var t=n.nodeId,r=n.side,o=n.key;return e.getConnections().filter(function(i){if(r==="input")return i.target===t&&i.targetInput===o;if(r==="output")return i.source===t&&i.sourceOutput===o})}function br(n,e){var t=n.map(function(r){var o=fh(r,e),i=o?.multipleConnections;return i?[]:dh(r,e)}).flat();return{commit:function(){var o=Array.from(new Set(t.map(function(i){var a=i.id;return a})));o.forEach(function(i){e.removeConnection(i)})}}}function xr(n,e,t){return e=J(e),ue(n,Ca()?Reflect.construct(e,[],J(n).constructor):e.apply(n,t))}function Ca(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ca=function(){return!!n})()}var bh=(function(n){function e(t,r){var o;return Q(this,e),o=xr(this,e),o.initial=t,o.params=r,o}return pe(e,n),ee(e,[{key:"pick",value:(function(){var t=se(V.mark(function o(i,a){var s,c;return V.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:s=i.socket,this.params.canMakeConnection(this.initial,s)&&(br([this.initial,s],a.editor).commit(),c=this.params.makeConnection(this.initial,s,a),this.drop(a,c?s:null,c));case 2:case"end":return f.stop()}},o,this)}));function r(o,i){return t.apply(this,arguments)}return r})()},{key:"drop",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&r.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:o,created:i}}),this.context.switchTo(new Cr(this.params))}}])})(Pr),mh=(function(n){function e(t,r,o){var i;Q(this,e),i=xr(this,e),i.connection=t,i.params=r;var a=Array.from(o.socketsCache.values()).find(function(s){return s.nodeId===i.connection.source&&s.side==="output"&&s.key===i.connection.sourceOutput});if(!a)throw new Error("cannot find output socket");return i.outputSocket=a,i}return pe(e,n),ee(e,[{key:"init",value:(function(){var t=se(V.mark(function o(i){var a=this;return V.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:i.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(p){p?(i.editor.removeConnection(a.connection.id),a.initial=a.outputSocket):a.drop(i)});case 1:case"end":return c.stop()}},o,this)}));function r(o){return t.apply(this,arguments)}return r})()},{key:"pick",value:(function(){var t=se(V.mark(function o(i,a){var s,c,p,f,h,u;return V.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:s=i.socket,c=i.event,this.initial&&!(s.side==="input"&&this.connection.target===s.nodeId&&this.connection.targetInput===s.key)?this.params.canMakeConnection(this.initial,s)&&(br([this.initial,s],a.editor).commit(),p=this.params.makeConnection(this.initial,s,a),f=p?s:null,this.drop(a,f,p)):c==="down"&&this.initial&&(br([this.initial,s],a.editor).commit(),h=this.params.makeConnection(this.initial,s,a),u=h?null:s,this.drop(a,u,h));case 2:case"end":return l.stop()}},o,this)}));function r(o,i){return t.apply(this,arguments)}return r})()},{key:"drop",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&r.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:o,created:i}}),this.context.switchTo(new Cr(this.params))}}])})(Pr),Cr=(function(n){function e(t){var r;return Q(this,e),r=xr(this,e),r.params=t,r}return pe(e,n),ee(e,[{key:"pick",value:(function(){var t=se(V.mark(function o(i,a){var s,c,p,f;return V.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=i.socket,c=i.event,c==="down"){u.next=3;break}return u.abrupt("return");case 3:if(s.side!=="input"){u.next=11;break}if(p=a.editor.getConnections().find(function(w){return w.target===s.nodeId&&w.targetInput===s.key}),!p){u.next=11;break}return f=new mh(p,this.params,a),u.next=9,f.init(a);case 9:return this.context.switchTo(f),u.abrupt("return");case 11:return u.next=13,a.scope.emit({type:"connectionpick",data:{socket:s}});case 13:if(!u.sent){u.next=17;break}this.context.switchTo(new bh(s,this.params)),u.next=18;break;case 17:this.drop(a);case 18:case"end":return u.stop()}},o,this)}));function r(o,i){return t.apply(this,arguments)}return r})()},{key:"drop",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&r.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:o,created:i}}),delete this.initial}}])})(Pr),gh=(function(){function n(e){Q(this,n);var t=e?.canMakeConnection||uh,r=e?.makeConnection||hh;this.switchTo(new Cr({canMakeConnection:t,makeConnection:r}))}return ee(n,[{key:"pick",value:(function(){var e=se(V.mark(function r(o,i){return V.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.currentState.pick(o,i);case 2:case"end":return s.stop()}},r,this)}));function t(r,o){return e.apply(this,arguments)}return t})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(t){t.setContext(this),this.currentState=t}},{key:"drop",value:function(t){this.currentState.drop(t)}}])})();function yh(){return function(){return new gh}}var vh=Object.freeze({__proto__:null,setup:yh}),wh=Object.freeze({__proto__:null,classic:vh});function kh(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Ph(n))||e){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var p=t.next();return a=p.done,p},e:function(p){s=!0,i=p},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw i}}}}function Ph(n,e){if(n){if(typeof n=="string")return vo(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vo(n,e):void 0}}function vo(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function xh(n,e,t){return e=J(e),ue(n,_a()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function _a(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_a=function(){return!!n})()}function Ch(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}var _h=(function(n){function e(){var t;return Q(this,e),t=xh(this,e,["connection"]),q(t,"presets",[]),q(t,"currentFlow",null),q(t,"preudoconnection",sh({isPseudo:!0})),q(t,"socketsCache",new Map),t}return pe(e,n),ee(e,[{key:"addPreset",value:function(r){this.presets.push(r)}},{key:"findPreset",value:function(r){var o=kh(this.presets),i;try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a(r);if(s)return s}}catch(c){o.e(c)}finally{o.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var r=this.currentFlow.getPickedSocket();r&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,r)}}},{key:"drop",value:function(){var r={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(r),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var t=se(V.mark(function o(i,a){var s,c,p;return V.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s={editor:this.editor,scope:this,socketsCache:this.socketsCache},c=Pa(i.clientX,i.clientY),p=ph(this.socketsCache,c),!p){h.next=13;break}if(i.preventDefault(),i.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(p),!this.currentFlow){h.next=11;break}return h.next=10,this.currentFlow.pick({socket:p,event:a},s);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:h.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(s);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return h.stop()}},o,this)}));function r(o,i){return t.apply(this,arguments)}return r})()},{key:"setParent",value:function(r){var o=this;Ch(e,"setParent",this)([r]),this.areaPlugin=this.parentScope(Tt),this.editor=this.areaPlugin.parentScope(ze);var i=function(s){o.pick(s,"down")};this.addPipe(function(a){if(!a||L(a)!=="object"||!("type"in a))return a;if(a.type==="pointermove")o.update();else if(a.type==="pointerup")o.pick(a.data.event,"up");else if(a.type==="render"){if(a.data.type==="socket"){var s=a.data.element;s.addEventListener("pointerdown",i),o.socketsCache.set(s,a.data)}}else if(a.type==="unmount"){var c=a.data.element;c.removeEventListener("pointerdown",i),o.socketsCache.delete(c)}return a})}}])})(xt);function ne(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const jt=globalThis,_r=jt.ShadowRoot&&(jt.ShadyCSS===void 0||jt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,$r=Symbol(),wo=new WeakMap;let $a=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==$r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(_r&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=wo.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&wo.set(t,e))}return e}toString(){return this.cssText}};const $h=n=>new $a(typeof n=="string"?n:n+"",void 0,$r),me=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((r,o,i)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+n[i+1],n[0]);return new $a(t,n,$r)},Eh=(n,e)=>{if(_r)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),o=jt.litNonce;o!==void 0&&r.setAttribute("nonce",o),r.textContent=t.cssText,n.appendChild(r)}},ko=_r?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return $h(t)})(n):n;const{is:Oh,defineProperty:Dh,getOwnPropertyDescriptor:Fh,getOwnPropertyNames:Sh,getOwnPropertySymbols:Ih,getPrototypeOf:jh}=Object,Bt=globalThis,Po=Bt.trustedTypes,Nh=Po?Po.emptyScript:"",Ah=Bt.reactiveElementPolyfillSupport,ht=(n,e)=>n,Nt={toAttribute(n,e){switch(e){case Boolean:n=n?Nh:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},Er=(n,e)=>!Oh(n,e),xo={attribute:!0,type:String,converter:Nt,reflect:!1,useDefault:!1,hasChanged:Er};Symbol.metadata??=Symbol("metadata"),Bt.litPropertyMetadata??=new WeakMap;let qe=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=xo){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),o=this.getPropertyDescriptor(e,r,t);o!==void 0&&Dh(this.prototype,e,o)}}static getPropertyDescriptor(e,t,r){const{get:o,set:i}=Fh(this.prototype,e)??{get(){return this[t]},set(a){this[t]=a}};return{get:o,set(a){const s=o?.call(this);i?.call(this,a),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??xo}static _$Ei(){if(this.hasOwnProperty(ht("elementProperties")))return;const e=jh(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ht("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ht("properties"))){const t=this.properties,r=[...Sh(t),...Ih(t)];for(const o of r)this.createProperty(o,t[o])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,o]of t)this.elementProperties.set(r,o)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const o=this._$Eu(t,r);o!==void 0&&this._$Eh.set(o,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const o of r)t.unshift(ko(o))}else e!==void 0&&t.push(ko(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Eh(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){const r=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,r);if(o!==void 0&&r.reflect===!0){const i=(r.converter?.toAttribute!==void 0?r.converter:Nt).toAttribute(t,r.type);this._$Em=e,i==null?this.removeAttribute(o):this.setAttribute(o,i),this._$Em=null}}_$AK(e,t){const r=this.constructor,o=r._$Eh.get(e);if(o!==void 0&&this._$Em!==o){const i=r.getPropertyOptions(o),a=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:Nt;this._$Em=o;const s=a.fromAttribute(t,i.type);this[o]=s??this._$Ej?.get(o)??s,this._$Em=null}}requestUpdate(e,t,r,o=!1,i){if(e!==void 0){const a=this.constructor;if(o===!1&&(i=this[e]),r??=a.getPropertyOptions(e),!((r.hasChanged??Er)(i,t)||r.useDefault&&r.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(a._$Eu(e,r))))return;this.C(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:o,wrapped:i},a){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,a??t??this[e]),i!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),o===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[o,i]of this._$Ep)this[o]=i;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[o,i]of r){const{wrapped:a}=i,s=this[o];a!==!0||this._$AL.has(o)||s===void 0||this.C(o,void 0,i,s)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(t)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(e){}firstUpdated(e){}};qe.elementStyles=[],qe.shadowRootOptions={mode:"open"},qe[ht("elementProperties")]=new Map,qe[ht("finalized")]=new Map,Ah?.({ReactiveElement:qe}),(Bt.reactiveElementVersions??=[]).push("2.1.2");const Or=globalThis,Co=n=>n,At=Or.trustedTypes,_o=At?At.createPolicy("lit-html",{createHTML:n=>n}):void 0,Ea="$lit$",$e=`lit$${Math.random().toFixed(9).slice(2)}$`,Oa="?"+$e,Th=`<${Oa}>`,Be=document,yt=()=>Be.createComment(""),vt=n=>n===null||typeof n!="object"&&typeof n!="function",Dr=Array.isArray,Bh=n=>Dr(n)||typeof n?.[Symbol.iterator]=="function",nn=`[ 	
\f\r]`,Qe=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,$o=/-->/g,Eo=/>/g,Fe=RegExp(`>|${nn}(?:([^\\s"'>=/]+)(${nn}*=${nn}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Oo=/'/g,Do=/"/g,Da=/^(?:script|style|textarea|title)$/i,zh=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),ae=zh(1),Ve=Symbol.for("lit-noChange"),de=Symbol.for("lit-nothing"),Fo=new WeakMap,Ae=Be.createTreeWalker(Be,129);function Fa(n,e){if(!Dr(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return _o!==void 0?_o.createHTML(e):e}const Mh=(n,e)=>{const t=n.length-1,r=[];let o,i=e===2?"<svg>":e===3?"<math>":"",a=Qe;for(let s=0;s<t;s++){const c=n[s];let p,f,h=-1,u=0;for(;u<c.length&&(a.lastIndex=u,f=a.exec(c),f!==null);)u=a.lastIndex,a===Qe?f[1]==="!--"?a=$o:f[1]!==void 0?a=Eo:f[2]!==void 0?(Da.test(f[2])&&(o=RegExp("</"+f[2],"g")),a=Fe):f[3]!==void 0&&(a=Fe):a===Fe?f[0]===">"?(a=o??Qe,h=-1):f[1]===void 0?h=-2:(h=a.lastIndex-f[2].length,p=f[1],a=f[3]===void 0?Fe:f[3]==='"'?Do:Oo):a===Do||a===Oo?a=Fe:a===$o||a===Eo?a=Qe:(a=Fe,o=void 0);const w=a===Fe&&n[s+1].startsWith("/>")?" ":"";i+=a===Qe?c+Th:h>=0?(r.push(p),c.slice(0,h)+Ea+c.slice(h)+$e+w):c+$e+(h===-2?s:w)}return[Fa(n,i+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class wt{constructor({strings:e,_$litType$:t},r){let o;this.parts=[];let i=0,a=0;const s=e.length-1,c=this.parts,[p,f]=Mh(e,t);if(this.el=wt.createElement(p,r),Ae.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(o=Ae.nextNode())!==null&&c.length<s;){if(o.nodeType===1){if(o.hasAttributes())for(const h of o.getAttributeNames())if(h.endsWith(Ea)){const u=f[a++],w=o.getAttribute(h).split($e),l=/([.?@])?(.*)/.exec(u);c.push({type:1,index:i,name:l[2],strings:w,ctor:l[1]==="."?Lh:l[1]==="?"?Uh:l[1]==="@"?Wh:zt}),o.removeAttribute(h)}else h.startsWith($e)&&(c.push({type:6,index:i}),o.removeAttribute(h));if(Da.test(o.tagName)){const h=o.textContent.split($e),u=h.length-1;if(u>0){o.textContent=At?At.emptyScript:"";for(let w=0;w<u;w++)o.append(h[w],yt()),Ae.nextNode(),c.push({type:2,index:++i});o.append(h[u],yt())}}}else if(o.nodeType===8)if(o.data===Oa)c.push({type:2,index:i});else{let h=-1;for(;(h=o.data.indexOf($e,h+1))!==-1;)c.push({type:7,index:i}),h+=$e.length-1}i++}}static createElement(e,t){const r=Be.createElement("template");return r.innerHTML=e,r}}function Ge(n,e,t=n,r){if(e===Ve)return e;let o=r!==void 0?t._$Co?.[r]:t._$Cl;const i=vt(e)?void 0:e._$litDirective$;return o?.constructor!==i&&(o?._$AO?.(!1),i===void 0?o=void 0:(o=new i(n),o._$AT(n,t,r)),r!==void 0?(t._$Co??=[])[r]=o:t._$Cl=o),o!==void 0&&(e=Ge(n,o._$AS(n,e.values),o,r)),e}class Rh{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,o=(e?.creationScope??Be).importNode(t,!0);Ae.currentNode=o;let i=Ae.nextNode(),a=0,s=0,c=r[0];for(;c!==void 0;){if(a===c.index){let p;c.type===2?p=new Ct(i,i.nextSibling,this,e):c.type===1?p=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(p=new Hh(i,this,e)),this._$AV.push(p),c=r[++s]}a!==c?.index&&(i=Ae.nextNode(),a++)}return Ae.currentNode=Be,o}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class Ct{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,o){this.type=2,this._$AH=de,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Ge(this,e,t),vt(e)?e===de||e==null||e===""?(this._$AH!==de&&this._$AR(),this._$AH=de):e!==this._$AH&&e!==Ve&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Bh(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==de&&vt(this._$AH)?this._$AA.nextSibling.data=e:this.T(Be.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:r}=e,o=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=wt.createElement(Fa(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===o)this._$AH.p(t);else{const i=new Rh(o,this),a=i.u(this.options);i.p(t),this.T(a),this._$AH=i}}_$AC(e){let t=Fo.get(e.strings);return t===void 0&&Fo.set(e.strings,t=new wt(e)),t}k(e){Dr(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,o=0;for(const i of e)o===t.length?t.push(r=new Ct(this.O(yt()),this.O(yt()),this,this.options)):r=t[o],r._$AI(i),o++;o<t.length&&(this._$AR(r&&r._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const r=Co(e).nextSibling;Co(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class zt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,o,i){this.type=1,this._$AH=de,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=de}_$AI(e,t=this,r,o){const i=this.strings;let a=!1;if(i===void 0)e=Ge(this,e,t,0),a=!vt(e)||e!==this._$AH&&e!==Ve,a&&(this._$AH=e);else{const s=e;let c,p;for(e=i[0],c=0;c<i.length-1;c++)p=Ge(this,s[r+c],t,c),p===Ve&&(p=this._$AH[c]),a||=!vt(p)||p!==this._$AH[c],p===de?e=de:e!==de&&(e+=(p??"")+i[c+1]),this._$AH[c]=p}a&&!o&&this.j(e)}j(e){e===de?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Lh extends zt{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===de?void 0:e}}class Uh extends zt{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==de)}}class Wh extends zt{constructor(e,t,r,o,i){super(e,t,r,o,i),this.type=5}_$AI(e,t=this){if((e=Ge(this,e,t,0)??de)===Ve)return;const r=this._$AH,o=e===de&&r!==de||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==de&&(r===de||o);o&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class Hh{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Ge(this,e)}}const qh=Or.litHtmlPolyfillSupport;qh?.(wt,Ct),(Or.litHtmlVersions??=[]).push("3.3.2");const mr=(n,e,t)=>{const r=t?.renderBefore??e;let o=r._$litPart$;if(o===void 0){const i=t?.renderBefore??null;r._$litPart$=o=new Ct(e.insertBefore(yt(),i),i,void 0,t??{})}return o._$AI(n),o};const Fr=globalThis;class le extends qe{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=mr(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Ve}}le._$litElement$=!0,le.finalized=!0,Fr.litElementHydrateSupport?.({LitElement:le});const Vh=Fr.litElementPolyfillSupport;Vh?.({LitElement:le});(Fr.litElementVersions??=[]).push("4.2.2");const Gh={attribute:!0,type:String,converter:Nt,reflect:!1,hasChanged:Er},Xh=(n=Gh,e,t)=>{const{kind:r,metadata:o}=t;let i=globalThis.litPropertyMetadata.get(o);if(i===void 0&&globalThis.litPropertyMetadata.set(o,i=new Map),r==="setter"&&((n=Object.create(n)).wrapped=!0),i.set(t.name,n),r==="accessor"){const{name:a}=t;return{set(s){const c=e.get.call(this);e.set.call(this,s),this.requestUpdate(a,c,n,!0,s)},init(s){return s!==void 0&&this.C(a,void 0,n,s),s}}}if(r==="setter"){const{name:a}=t;return function(s){const c=this[a];e.call(this,s),this.requestUpdate(a,c,n,!0,s)}}throw Error("Unsupported decorator location: "+r)};function te(n){return(e,t)=>typeof t=="object"?Xh(n,e,t):((r,o,i)=>{const a=o.hasOwnProperty(i);return o.constructor.createProperty(i,r),a?Object.getOwnPropertyDescriptor(o,i):void 0})(n,e,t)}function Sr(n){return te({...n,state:!0,attribute:!1})}const Kh=(n,e,t)=>(t.configurable=!0,t.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(n,e,t),t);function Jh(n,e){return(t,r,o)=>{const i=a=>a.renderRoot?.querySelector(n)??null;return Kh(t,r,{get(){return i(this)}})}}function Zh(n,e){var t=fe(n,2),r=t[0],o=r.x,i=r.y,a=t[1],s=a.x,c=a.y,p=Math.abs(i-c),f=o+Math.max(p/2,Math.abs(s-o))*e,h=s-Math.max(p/2,Math.abs(s-o))*e;return"M ".concat(o," ").concat(i," C ").concat(f," ").concat(i," ").concat(h," ").concat(c," ").concat(s," ").concat(c)}function Yh(n,e,t){var r=fe(n,2),o=r[0],i=o.x,a=o.y,s=r[1],c=s.x,p=s.y,f=p>a?1:-1,h=t+Math.abs(i-c)/(t/2),u=(i+c)/2,w=a-f*h,l=(p-a)*e;return`
        M `.concat(i," ").concat(a,`
        C `).concat(i+h," ").concat(a,`
        `).concat(i+h," ").concat(w-l,`
        `).concat(u," ").concat(w,`
        C `).concat(c-h," ").concat(w+l,`
        `).concat(c-h," ").concat(p,`
        `).concat(c," ").concat(p,`
    `)}function Qh(n,e){return gr.apply(this,arguments)}function gr(){return gr=se(V.mark(function n(e,t){var r,o,i,a,s;return V.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(e.offsetParent){p.next=5;break}return p.next=3,new Promise(function(f){return setTimeout(f,0)});case 3:p.next=0;break;case 5:if(r=e.offsetLeft,o=e.offsetTop,i=e.offsetParent,i){p.next=10;break}throw new Error("child has null offsetParent");case 10:for(;i!==null&&i!==t;)r+=i.offsetLeft+i.clientLeft,o+=i.offsetTop+i.clientTop,i=i.offsetParent;return a=e.offsetWidth,s=e.offsetHeight,p.abrupt("return",{x:r+a/2,y:o+s/2});case 14:case"end":return p.stop()}},n)})),gr.apply(this,arguments)}var ef=(function(){function n(){Q(this,n),q(this,"listeners",new Set)}return ee(n,[{key:"emit",value:function(t){this.listeners.forEach(function(r){r(t)})}},{key:"listen",value:function(t){var r=this;return this.listeners.add(t),function(){r.listeners.delete(t)}}}])})(),tf=(function(){function n(){Q(this,n),q(this,"elements",new Map)}return ee(n,[{key:"getPosition",value:function(t){var r,o,i=Array.from(this.elements.values()).flat(),a=i.filter(function(s){return s.side===t.side&&s.nodeId===t.nodeId&&s.key===t.key});return a.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),t),(r=(o=a.pop())===null||o===void 0?void 0:o.position)!==null&&r!==void 0?r:null}},{key:"add",value:function(t){var r=this.elements.get(t.element);this.elements.set(t.element,r?[].concat(Xe(r.filter(function(o){return!(o.nodeId===t.nodeId&&o.key===t.key&&o.side===t.side)})),[t]):[t])}},{key:"remove",value:function(t){this.elements.delete(t)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),nf=(function(){function n(){Q(this,n),q(this,"sockets",new tf),q(this,"emitter",new ef),q(this,"area",null)}return ee(n,[{key:"attach",value:function(t){var r=this;this.area||t.hasParent()&&(this.area=t.parentScope(Tt),this.area.addPipe((function(){var o=se(V.mark(function i(a){var s,c,p,f,h,u,w,l,b,d,v;return V.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(a.type==="rendered"&&a.data.type==="socket")){C.next=8;break}return s=a.data,c=s.nodeId,p=s.key,f=s.side,h=s.element,C.next=4,r.calculatePosition(c,f,p,h);case 4:u=C.sent,u&&(r.sockets.add({nodeId:c,key:p,side:f,element:h,position:u}),r.emitter.emit({nodeId:c,key:p,side:f})),C.next=24;break;case 8:if(a.type!=="unmount"){C.next=12;break}r.sockets.remove(a.data.element),C.next=24;break;case 12:if(a.type!=="nodetranslated"){C.next=16;break}r.emitter.emit({nodeId:a.data.id}),C.next=24;break;case 16:if(a.type!=="noderesized"){C.next=23;break}return w=a.data.id,C.next=20,Promise.all(r.sockets.snapshot().filter(function(I){return I.nodeId===a.data.id&&I.side==="output"}).map((function(){var I=se(V.mark(function S(B){var O,_,g,k;return V.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return O=B.side,_=B.key,g=B.element,x.next=3,r.calculatePosition(w,O,_,g);case 3:k=x.sent,k&&(B.position=k);case 5:case"end":return x.stop()}},S)}));return function(S){return I.apply(this,arguments)}})()));case 20:r.emitter.emit({nodeId:w}),C.next=24;break;case 23:a.type==="render"&&a.data.type==="connection"&&(l=a.data.payload,b=l.source,d=l.target,v=b||d,r.emitter.emit({nodeId:v}));case 24:return C.abrupt("return",a);case 25:case"end":return C.stop()}},i)}));return function(i){return o.apply(this,arguments)}})()))}},{key:"listen",value:function(t,r,o,i){var a=this,s=this.emitter.listen(function(c){if(c.nodeId===t&&(!c.key||c.side===r)&&(!c.side||c.key===o)){var p,f=a.sockets.getPosition({side:r,nodeId:t,key:o});if(!f)return;var h=f.x,u=f.y,w=(p=a.area)===null||p===void 0?void 0:p.nodeViews.get(t);w&&i({x:h+w.position.x,y:u+w.position.y})}});return this.sockets.snapshot().forEach(function(c){c.nodeId===t&&a.emitter.emit(c)}),s}}])})();function rf(n,e,t){return e=J(e),ue(n,Sa()?Reflect.construct(e,[],J(n).constructor):e.apply(n,t))}function Sa(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sa=function(){return!!n})()}var of=(function(n){function e(t){var r;return Q(this,e),r=rf(this,e),r.props=t,r}return pe(e,n),ee(e,[{key:"calculatePosition",value:(function(){var t=se(V.mark(function o(i,a,s,c){var p,f,h,u;return V.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(h=(p=this.area)===null||p===void 0?void 0:p.nodeViews.get(i),h!=null&&h.element){l.next=3;break}return l.abrupt("return",null);case 3:return l.next=5,Qh(c,h.element);case 5:if(u=l.sent,!((f=this.props)!==null&&f!==void 0&&f.offset)){l.next=8;break}return l.abrupt("return",this.props.offset(u,i,a,s));case 8:return l.abrupt("return",{x:u.x+12*(a==="input"?-1:1),y:u.y});case 9:case"end":return l.stop()}},o,this)}));function r(o,i,a,s){return t.apply(this,arguments)}return r})()}])})(nf);function af(n){return new of(n)}var So;function sf(){var n=new Map;return{get:function(t){return n.get(t)},mount:function(t,r,o){mr(ae(So||(So=ne([`
        <rete-root
          fragment
          .rendered=`,`
        >
          `,`
        </rete-root>
      `])),o,r),t);var i=t.children[0].children[0];if(!i)throw new Error("no instance found");n.set(t,i)},update:function(t,r){Object.keys(r).forEach(function(o){t[o]=r[o]}),t.requestUpdate()},unmount:function(t){var r=n.get(t);r&&(mr(de,t),n.delete(t))}}}var Ia,ja,Na,Aa,Ta;function cf(n,e,t){return e=J(e),ue(n,Ba()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function Ba(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ba=function(){return!!n})()}function lf(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}function pf(n,e,t){uf(n,e),e.set(n,t)}function uf(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hf(n,e,t){return n.set(za(n,e),t),t}function ff(n,e){return n.get(za(n,e))}function za(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function df(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Io(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Io(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return gf(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:bf(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function bf(n){var e=mf(n,"string");return L(e)=="symbol"?e:e+""}function mf(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Io(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function gf(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var rn=new WeakMap;Ta=(Na=te({type:Function}),"rendered");var Ma=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=cf(this,e,[].concat(o)),pf(t,rn,(ja(t),Aa(t,null))),t}return pe(e,n),ee(e,[{key:Ta,get:function(){return ff(rn,this)}},{key:"rendered",set:function(r){hf(rn,this,r)}},{key:"connectedCallback",value:function(){var r;lf(e,"connectedCallback",this)([]),(r=this.rendered)===null||r===void 0||r.call(this)}},{key:"createRenderRoot",value:function(){return this}}])})(le);Ia=Ma;var yf=df(Ia,[[Na,1,"rendered"]],[],0,void 0,le).e,Ra=fe(yf,2);Aa=Ra[0];ja=Ra[1];function vf(n,e,t){return e=J(e),ue(n,La()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function La(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(La=function(){return!!n})()}function jo(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}var Ua=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=vf(this,e,[].concat(o)),q(t,"beingMoved",!1),t}return pe(e,n),ee(e,[{key:"connectedCallback",value:function(){jo(e,"connectedCallback",this)([]),this.beingMoved||this.mounted(),this.beingMoved=!1}},{key:"disconnectedCallback",value:function(){var r=this;jo(e,"disconnectedCallback",this)([]),this.beingMoved=!0,queueMicrotask(function(){r.beingMoved&&r.unmounted()})}}])})(le),Wa,Ha,qa,Va,Ga,Xa,Ka;function No(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Ao(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?No(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):No(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wf(n,e,t){return e=J(e),ue(n,Ja()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function Ja(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ja=function(){return!!n})()}function To(n,e,t){kf(n,e),e.set(n,t)}function kf(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bo(n,e,t){return n.set(Za(n,e),t),t}function zo(n,e){return n.get(Za(n,e))}function Za(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Pf(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Mo(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Mo(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return _f(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:xf(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function xf(n){var e=Cf(n,"string");return L(e)=="symbol"?e:e+""}function Cf(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Mo(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function _f(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var on=new WeakMap,an=new WeakMap;Ka=(qa=te({type:Object}),Ga=te({type:Function}),"data");var Ya=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=wf(this,e,[].concat(o)),To(t,on,(Ha(t),Va(t))),To(t,an,Xa(t)),t}return pe(e,n),ee(e,[{key:Ka,get:function(){return zo(on,this)}},{key:"data",set:function(r){Bo(on,this,r)}},{key:"emit",get:function(){return zo(an,this)},set:function(r){Bo(an,this,r)}},{key:"mounted",value:function(){this.emit({type:"render",data:Ao(Ao({},this.data),{},{element:this})})}},{key:"unmounted",value:function(){this.emit({type:"unmount",data:{element:this}})}},{key:"createRenderRoot",value:function(){return this.style.display="block",this}}])})(Ua);Wa=Ya;var $f=Pf(Wa,[[qa,1,"data"],[Ga,1,"emit"]],[],0,void 0,Ua).e,Ir=fe($f,3);Va=Ir[0];Xa=Ir[1];Ha=Ir[2];var Qa,Ro,Lo,es,ts,ns,rs,os,is,as,ss;function Ef(n,e,t){return e=J(e),ue(n,cs()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function cs(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cs=function(){return!!n})()}function sn(n,e,t){Of(n,e),e.set(n,t)}function Of(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cn(n,e,t){return n.set(ls(n,e),t),t}function ln(n,e){return n.get(ls(n,e))}function ls(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Df(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Uo(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Uo(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return If(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Ff(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Ff(n){var e=Sf(n,"string");return L(e)=="symbol"?e:e+""}function Sf(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Uo(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function If(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var pn=new WeakMap,un=new WeakMap,hn=new WeakMap;ss=(ts=te(),rs=te(),is=te(),"start");var jr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=Ef(this,e,[].concat(o)),sn(t,pn,(es(t),ns(t))),sn(t,un,os(t)),sn(t,hn,as(t)),t}return pe(e,n),ee(e,[{key:ss,get:function(){return ln(pn,this)}},{key:"start",set:function(r){cn(pn,this,r)}},{key:"end",get:function(){return ln(un,this)},set:function(r){cn(un,this,r)}},{key:"path",get:function(){return ln(hn,this)},set:function(r){cn(hn,this,r)}},{key:"render",value:function(){return ae(Ro||(Ro=ne([`
      <svg data-testid="connection">
        <path d=`,`></path>
      </svg>
    `])),this.path)}}])})(le);Qa=jr;var Mt=fe(Df(Qa,[[ts,1,"start"],[rs,1,"end"],[is,1,"path"]],[],0,void 0,le).e,4);ns=Mt[0];os=Mt[1];as=Mt[2];es=Mt[3];q(jr,"styles",me(Lo||(Lo=ne([`
    svg {
      overflow: visible !important;
      position: absolute;
      pointer-events: none;
      width: 9999px;
      height: 9999px;
    }

    path {
      fill: none;
      stroke-width: 5px;
      stroke: steelblue;
      pointer-events: auto;
    }
  `]))));var ps,us,hs,fs,ds,bs,ms,gs,ys,vs,ws,ks,Ps;function jf(n,e,t){return e=J(e),ue(n,xs()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function xs(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xs=function(){return!!n})()}function Wo(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}function et(n,e,t){Nf(n,e),e.set(n,t)}function Nf(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tt(n,e,t){return n.set(Cs(n,e),t),t}function nt(n,e){return n.get(Cs(n,e))}function Cs(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Af(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Ho(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Ho(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return zf(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Tf(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Tf(n){var e=Bf(n,"string");return L(e)=="symbol"?e:e+""}function Bf(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Ho(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function zf(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var fn=new WeakMap,dn=new WeakMap,bn=new WeakMap,mn=new WeakMap,gn=new WeakMap;Ps=(hs=te(),ds=te(),ms=te(),ys=te(),ws=te({reflect:!1}),"start");var _s=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=jf(this,e,[].concat(o)),et(t,fn,(us(t),fs(t))),et(t,dn,bs(t)),et(t,bn,gs(t)),et(t,mn,vs(t)),q(t,"computedStart",null),q(t,"computedEnd",null),et(t,gn,ks(t)),q(t,"unwatch1",!1),q(t,"unwatch2",!1),t}return pe(e,n),ee(e,[{key:Ps,get:function(){return nt(fn,this)}},{key:"start",set:function(r){tt(fn,this,r)}},{key:"end",get:function(){return nt(dn,this)},set:function(r){tt(dn,this,r)}},{key:"path",get:function(){return nt(bn,this)},set:function(r){tt(bn,this,r)}},{key:"component",get:function(){return nt(mn,this)},set:function(r){tt(mn,this,r)}},{key:"render",value:function(){return this.component(this.computedPath,this.computedStart,this.computedEnd)}},{key:"computedPath",get:function(){return nt(gn,this)},set:function(r){tt(gn,this,r)}},{key:"connectedCallback",value:function(){var r=this;Wo(e,"connectedCallback",this)([]),this.unwatch1=typeof this.start=="function"&&this.start(function(o){r.computedStart=o,r.updatePath()}),this.unwatch2=typeof this.end=="function"&&this.end(function(o){r.computedEnd=o,r.updatePath()})}},{key:"updated",value:function(r){r.has("start")&&typeof this.start!="function"&&(this.computedStart=this.start,this.updatePath()),r.has("end")&&typeof this.end!="function"&&(this.computedEnd=this.end,this.updatePath())}},{key:"disconnectedCallback",value:function(){Wo(e,"disconnectedCallback",this)([]),this.unwatch1&&this.unwatch1(),this.unwatch2&&this.unwatch2()}},{key:"updatePath",value:function(){var r=this;this.computedStart&&this.computedEnd&&this.path(this.computedStart,this.computedEnd).then(function(o){r.computedPath=o})}}])})(le);ps=_s;var Mf=Af(ps,[[hs,1,"start"],[ds,1,"end"],[ms,1,"path"],[ys,1,"component"],[ws,1,"computedPath"]],[],0,void 0,le).e,Ke=fe(Mf,6);fs=Ke[0];bs=Ke[1];gs=Ke[2];vs=Ke[3];ks=Ke[4];us=Ke[5];var $s,qo,Vo,Go,Es,Os,Ds,Fs;function Rf(n,e,t){return e=J(e),ue(n,Ss()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function Ss(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ss=function(){return!!n})()}function Lf(n,e,t){Uf(n,e),e.set(n,t)}function Uf(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wf(n,e,t){return n.set(Is(n,e),t),t}function Hf(n,e){return n.get(Is(n,e))}function Is(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function qf(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Xo(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Xo(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return Xf(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Vf(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Vf(n){var e=Gf(n,"string");return L(e)=="symbol"?e:e+""}function Gf(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Xo(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Xf(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var yn=new WeakMap;Fs=(Os=te({type:Object}),"data");var Nr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=Rf(this,e,[].concat(o)),Lf(t,yn,(Es(t),Ds(t,null))),t}return pe(e,n),ee(e,[{key:Fs,get:function(){return Hf(yn,this)}},{key:"data",set:function(r){Wf(yn,this,r)}},{key:"handleInput",value:function(r){if(this.data){var o=r.target,i=this.data.type==="number"?+o.value:o.value;this.data.setValue(i)}}},{key:"render",value:function(){return this.data?ae(Vo||(Vo=ne([`
      <input
        type="`,`"
        .value="`,`"
        ?readonly="`,`"
        @input="`,`"
        @pointerdown="`,`"
      />
    `])),this.data.type,this.data.value,this.data.readonly,this.handleInput,function(r){r.stopPropagation()}):ae(qo||(qo=ne([""])))}}])})(le);$s=Nr;var js=fe(qf($s,[[Os,1,"data"]],[],0,void 0,le).e,2);Ds=js[0];Es=js[1];q(Nr,"styles",me(Go||(Go=ne([`
    input {
      width: 100%;
      border-radius: 30px;
      background-color: white;
      padding: 2px 6px;
      border: 1px solid #999;
      font-size: 110%;
      box-sizing: border-box;
    }
  `]))));var Ns,Ko,Jo,Zo,Yo,Qo,ei,ti,As,Ts,Bs,zs,Ms,Rs,Ls,Us,Ws,Hs,qs,Vs;function Kf(n,e,t){return e=J(e),ue(n,Gs()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function Gs(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gs=function(){return!!n})()}function rt(n,e,t){Jf(n,e),e.set(n,t)}function Jf(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ot(n,e,t){return n.set(Xs(n,e),t),t}function it(n,e){return n.get(Xs(n,e))}function Xs(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Zf(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:ni(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||ni(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return ed(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Yf(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Yf(n){var e=Qf(n,"string");return L(e)=="symbol"?e:e+""}function Qf(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function ni(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function ed(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var vn=new WeakMap,wn=new WeakMap,kn=new WeakMap,Pn=new WeakMap,xn=new WeakMap;Vs=(Ts=te({type:Number}),zs=te({type:Number}),Rs=te({type:Object}),Us=te({type:Function}),Hs=te({type:Function}),"width");var Ar=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=Kf(this,e,[].concat(o)),rt(t,vn,(As(t),Bs(t,null))),rt(t,wn,Ms(t,null)),rt(t,kn,Ls(t)),rt(t,Pn,Ws(t,null)),rt(t,xn,qs(t,null)),t}return pe(e,n),ee(e,[{key:Vs,get:function(){return it(vn,this)}},{key:"width",set:function(r){ot(vn,this,r)}},{key:"height",get:function(){return it(wn,this)},set:function(r){ot(wn,this,r)}},{key:"data",get:function(){return it(kn,this)},set:function(r){ot(kn,this,r)}},{key:"styles",get:function(){return it(Pn,this)},set:function(r){ot(Pn,this,r)}},{key:"emit",get:function(){return it(xn,this)},set:function(r){ot(xn,this,r)}},{key:"sortByIndex",value:function(r){r.sort(function(o,i){var a,s,c=((a=o[1])===null||a===void 0?void 0:a.index)||0,p=((s=i[1])===null||s===void 0?void 0:s.index)||0;return c-p})}},{key:"render",value:function(){var r,o=this,i=Object.entries(this.data.inputs||{}),a=Object.entries(this.data.outputs||{}),s=Object.entries(this.data.controls||{}),c=this.data,p=c.id,f=c.label,h=c.width,u=c.height;return this.sortByIndex(i),this.sortByIndex(a),this.sortByIndex(s),this.data.selected?this.classList.add("selected"):this.classList.remove("selected"),this.dataset.testid="node",ae(Ko||(Ko=ne([`
      <style>
        :host {
          width: `,`;
          height: `,`;
        }
        `,`
      </style>
      <div class="title" data-testid="title">`,`</div>
      `,`
      `,`
      `,`
    `])),Number.isFinite(h)?"".concat(h,"px"):"var(--node-width)",Number.isFinite(u)?"".concat(u,"px"):"auto",(r=this.styles)===null||r===void 0?void 0:r.call(this,this),f,a.map(function(w){var l=fe(w,2),b=l[0],d=l[1];return d?ae(Jo||(Jo=ne([`
        <div class="output" key=`," data-testid=",`>
          <div class="output-title" data-testid="output-title">`,`</div><!--
          --><span class="output-socket" data-testid="output-socket">
            <rete-ref
              .data=`,`
              .emit=`,`
            ></rete-ref>
          </span>
        </div>`])),b,"output-".concat(b),d.label,{type:"socket",side:"output",key:b,nodeId:p,payload:d.socket},o.emit):null}),s.map(function(w){var l=fe(w,2),b=l[0],d=l[1];return d?ae(Zo||(Zo=ne([`
        <span class="control" data-testid="`,`">
          <rete-ref
            .emit=`,`
            .data="`,`"
          ></rete-ref>
        </span>
        `])),"control-"+b,o.emit,{type:"control",payload:d}):null}),i.map(function(w){var l=fe(w,2),b=l[0],d=l[1];return d?ae(Yo||(Yo=ne([`
        <div class="input" key=`," data-testid=",`>
          <span class="input-socket" data-testid="input-socket">
            <rete-ref
              .data=`,`
              .emit=`,`
            ></rete-ref>
          </span><!--
          -->`,`
          `,`
        </div>`])),b,"input-".concat(b),{type:"socket",side:"input",key:b,nodeId:p,payload:d.socket},o.emit,d&&(!d.control||!d.showControl)?ae(Qo||(Qo=ne([`<!--
          --><div class="input-title" data-testid="input-title">`,"</div>"])),d.label):null,d.control&&d.showControl?ae(ei||(ei=ne([`
            <span class="control" data-testid="input-control">
              <rete-ref
                .emit=`,`
                .data="`,`"
              ></rete-ref>
            </span>
          `])),o.emit,{type:"control",payload:d.control}):null):null}))}}])})(le);Ns=Ar;var Je=fe(Zf(Ns,[[Ts,1,"width"],[zs,1,"height"],[Rs,1,"data"],[Us,1,"styles"],[Hs,1,"emit"]],[],0,void 0,le).e,6);Bs=Je[0];Ms=Je[1];Ls=Je[2];Ws=Je[3];qs=Je[4];As=Je[5];q(Ar,"styles",me(ti||(ti=ne([`
    :host {
      --node-color: rgba(110, 136, 255, 0.8);
      --node-color-hover: rgba(130, 153, 255, 0.8);
      --node-color-selected: #ffd92c;
      --socket-size: 24px;
      --socket-margin: 6px;
      --socket-color: #96b38a;
      --node-width: 180px;
    }

    :host {
      display: block;
      background: var(--node-color);
      border: 2px solid #4e58bf;
      border-radius: 10px;
      cursor: pointer;
      box-sizing: border-box;
      padding-bottom: 6px;
      position: relative;
      user-select: none;
      line-height: initial;
      font-family: Arial;
    }

    :host(:hover) {
      background: var(--node-color-hover);
    }

    :host(.selected) {
      background: var(--node-color-selected);
      border-color: #e3c000;
    }

    .title {
      color: white;
      font-family: sans-serif;
      font-size: 18px;
      padding: 8px;
    }

    .output,
    .input {
      text-align: right;
    }

    .input {
      text-align: left;
    }


    .output-socket {
      text-align: right;
      margin-right: calc(0px - var(--socket-size) / 2 - var(--socket-margin));
      display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: calc(0px - var(--socket-size) / 2 - var(--socket-margin));
        display: inline-block;
    }

    .input-title,
    .output-title {
      vertical-align: middle;
      color: white;
      display: inline-block;
      font-family: sans-serif;
      font-size: 14px;
      margin: var(--socket-margin);
      line-height: var(--socket-size);
    }

    .input-control {
      z-index: 1;
      width: calc(100% - calc(var(--socket-size) + 2 * var(--socket-margin)));
      vertical-align: middle;
      display: inline-block;
    }

    .control {
      display: block;
      padding: var(--socket-margin) calc(var(--socket-size) / 2 + var(--socket-margin));
    }
  `]))));var Ks,ri,oi,Js,Zs,Ys,Qs;function td(n,e,t){return e=J(e),ue(n,ec()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function ec(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ec=function(){return!!n})()}function nd(n,e,t){rd(n,e),e.set(n,t)}function rd(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function od(n,e,t){return n.set(tc(n,e),t),t}function id(n,e){return n.get(tc(n,e))}function tc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function ad(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:ii(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||ii(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return ld(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:sd(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function sd(n){var e=cd(n,"string");return L(e)=="symbol"?e:e+""}function cd(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function ii(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function ld(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var Cn=new WeakMap;Qs=(Zs=te({type:Object}),"data");var Tr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=td(this,e,[].concat(o)),nd(t,Cn,(Js(t),Ys(t,null))),t}return pe(e,n),ee(e,[{key:Qs,get:function(){return id(Cn,this)}},{key:"data",set:function(r){od(Cn,this,r)}},{key:"render",value:function(){var r;return ae(ri||(ri=ne([`
      <div class="hoverable">
        <div class="styles" title="`,`"></div>
      </div>
    `])),(r=this.data)===null||r===void 0?void 0:r.name)}}])})(le);Ks=Tr;var nc=fe(ad(Ks,[[Zs,1,"data"]],[],0,void 0,le).e,2);Ys=nc[0];Js=nc[1];q(Tr,"styles",me(oi||(oi=ne([`
    :host {
      --socket-color: #96b38a;
      --socket-size: 24px;
      --socket-margin: 6px;
      --border-width: 1px;
      --hover-border-width: 4px;
      --multiple-border-color: yellow;
    }

    .styles {
      display: inline-block;
      cursor: pointer;
      border: var(--border-width) solid white;
      border-radius: calc(var(--socket-size) / 2);
      width: var(--socket-size);
      height: var(--socket-size);
      vertical-align: middle;
      background: var(--socket-color);
      z-index: 2;
      box-sizing: border-box;
    }

    .styles:hover {
      border-width: var(--hover-border-width);
    }

    .multiple {
      border-color: var(--multiple-border-color);
    }

    .hoverable {
      border-radius: calc((var(--socket-size) + var(--socket-margin) * 2) / 2);
      padding: var(--socket-margin);
    }

    .hoverable:hover .styles {
      border-width: var(--hover-border-width);
    }
  `]))));var ai,si,ci,li,pi;function ui(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function hi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ui(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ui(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}customElements.define("rete-connection-wrapper",_s);customElements.define("rete-connection",jr);customElements.define("rete-ref",Ya);customElements.define("rete-socket",Tr);customElements.define("rete-node",Ar);customElements.define("rete-control",Nr);function pd(n){var e=typeof n?.socketPositionWatcher>"u"?af():n.socketPositionWatcher,t=n?.customize||{},r=t.node,o=t.connection,i=t.socket,a=t.control;return{attach:function(c){e.attach(c)},update:function(c,p){var f=c.data.payload,h=p.parentScope();if(!h)throw new Error("parent");var u=h.emit.bind(h);if(c.data.type==="node")return{data:f,emit:u};if(c.data.type==="connection"){var w=c.data,l=w.start,b=w.end;return hi(hi({data:f},l?{start:l}:{}),b?{end:b}:{})}return{data:f}},render:function(c,p){if(c.data.type==="node"){var f=p.parentScope(),h=function(I){f.emit(I)};return r?r(c.data)({emit:h}):ae(ai||(ai=ne(["<rete-node .data="," .emit=","></rete-node>"])),c.data.payload,h)}if(c.data.type==="connection"){var u=c.data,w=u.payload,l=w.sourceOutput,b=w.targetInput,d=w.source,v=w.target,y=function(I,S,B){return o?o(u)({path:I,start:S,end:B}):ae(si||(si=ne(["<rete-connection .path="," .start="," .end=","></rete-connection>"])),I,S,B)};return ae(ci||(ci=ne([`<rete-connection-wrapper
          .start=`,`
          .end=`,`
          .path=`,`
  .component=`,`
  ></rete-connection>`])),c.data.start||function(C){return e.listen(d,"output",l,C)},c.data.end||function(C){return e.listen(v,"input",b,C)},(function(){var C=se(V.mark(function I(S,B){var O,_,g,k,F;return V.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,p.emit({type:"connectionpath",data:{payload:w,points:[S,B]}});case 2:if(O=N.sent,O){N.next=5;break}return N.abrupt("return","");case 5:if(_=O.data,g=_.path,k=_.points,F=.3,!(!g&&k.length!==2)){N.next=9;break}throw new Error("cannot render connection with a custom number of points");case 9:if(g){N.next=11;break}return N.abrupt("return",w.isLoop?Yh(k,F,120):Zh(k,F));case 11:return N.abrupt("return",g);case 12:case"end":return N.stop()}},I)}));return function(I,S){return C.apply(this,arguments)}})(),y)}else{if(c.data.type==="socket")return i?i(c.data)():ae(li||(li=ne(["<rete-socket .data=","></rete-socket>"])),c.data.payload);if(c.data.type==="control")return a?a(c.data)():ae(pi||(pi=ne(["<rete-control .data=","></rete-control>"])),c.data.payload)}return null}}}var ud=Object.freeze({__proto__:null,setup:pd}),fi,di;function hd(n,e,t){return e=J(e),ue(n,rc()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function rc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rc=function(){return!!n})()}var Br=(function(n){function e(){return Q(this,e),hd(this,e,arguments)}return pe(e,n),ee(e,[{key:"render",value:function(){return ae(fi||(fi=ne([`
      <slot></slot>
    `])))}}])})(le);q(Br,"styles",me(di||(di=ne([`
    :host {
      color: #fff;
      padding: 4px;
      border-bottom: 1px solid var(--context-color-dark);
      background-color: var(--context-color);
      cursor: pointer;
      box-sizing: border-box;
      width: 100%;
      position: relative;
      display: block;
    }

    :host(:first-child) {
      border-top-left-radius: var(--context-menu-round);
      border-top-right-radius: var(--context-menu-round);
    }

    :host(:last-child) {
      border-bottom-left-radius: var(--context-menu-round);
      border-bottom-right-radius: var(--context-menu-round);
    }

    :host(:hover) {
      background-color: var(--context-color-light);
    }
  `]))));function oc(n,e){return{timeout:null,cancel:function(){this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)},call:function(){this.timeout=window.setTimeout(function(){e()},n)}}}var ic,bi,mi,gi,yi,ac,sc,cc,lc,pc,uc,hc,fc;function fd(n,e,t){return e=J(e),ue(n,dc()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function dc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dc=function(){return!!n})()}function dd(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}function _n(n,e,t){bd(n,e),e.set(n,t)}function bd(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $n(n,e,t){return n.set(bc(n,e),t),t}function En(n,e){return n.get(bc(n,e))}function bc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function md(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:vi(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||vi(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return vd(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:gd(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function gd(n){var e=yd(n,"string");return L(e)=="symbol"?e:e+""}function yd(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function vi(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function vd(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var On=new WeakMap,Dn=new WeakMap,Fn=new WeakMap;fc=(sc=te({type:Array}),lc=te({type:Number}),uc=Sr(),"subitems");var zr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=fd(this,e,[].concat(o)),_n(t,On,(ac(t),cc(t,[]))),_n(t,Dn,pc(t,0)),_n(t,Fn,hc(t,!1)),t}return pe(e,n),ee(e,[{key:fc,get:function(){return En(On,this)}},{key:"subitems",set:function(r){$n(On,this,r)}},{key:"delay",get:function(){return En(Dn,this)},set:function(r){$n(Dn,this,r)}},{key:"visibleSubitems",get:function(){return En(Fn,this)},set:function(r){$n(Fn,this,r)}},{key:"connectedCallback",value:function(){dd(e,"connectedCallback",this)([]),this.hide=oc(this.delay,this.hideSubitems.bind(this))}},{key:"hideSubitems",value:function(){this.visibleSubitems=!1}},{key:"render",value:function(){var r,o=this;return(r=this.subitems)!==null&&r!==void 0&&r.length?this.classList.add("hasSubitems"):this.classList.remove("hasSubitems"),ae(bi||(bi=ne([`
      <div data-testid="context-menu-item">
        <div
          class="content"
          @click="`,`"
          @wheel="`,`"
          @pointerover="`,`"
          @pointerleave="`,`"
          @pointerdown="`,`"
        >
          <slot></slot>
          `,`
        </div>
      </div>
    `])),this.handleClick,this.stopEvent,this.handlePointerOver,this.handlePointerLeave,this.stopEvent,this.subitems&&this.visibleSubitems?ae(mi||(mi=ne([`
                <div class="subitems">
                  `,`
                </div>
              `])),this.subitems.map(function(i){return ae(gi||(gi=ne([`
                      <rete-context-menu-item
                        .key="`,`"
                        .delay="`,`"
                        .subitems="`,`"
                        @select="`,`"
                        @hide="`,`"
                      >
                        `,`
                      </rete-context-menu-item>
                    `])),i.key,o.delay,i.subitems,i.handler,o.handleHide,i.label)})):"")}},{key:"handleClick",value:function(r){r.stopPropagation(),this.dispatchEvent(new CustomEvent("select",{detail:r})),this.dispatchEvent(new CustomEvent("hide"))}},{key:"stopEvent",value:function(r){r.stopPropagation()}},{key:"handlePointerOver",value:function(){this.hide.cancel(),this.visibleSubitems=!0}},{key:"handlePointerLeave",value:function(){this.hide.call()}},{key:"handleHide",value:function(){this.dispatchEvent(new CustomEvent("hide"))}}])})(le);ic=zr;var Rt=fe(md(ic,[[sc,1,"subitems"],[lc,1,"delay"],[uc,1,"visibleSubitems"]],[],0,void 0,le).e,4);cc=Rt[0];pc=Rt[1];hc=Rt[2];ac=Rt[3];q(zr,"styles",[Br.styles,me(yi||(yi=ne([`
      :host {
        padding: 0;
      }
      .content {
        padding: 4px;
      }
      :host(.hasSubitems):after {
        content: '';
        position: absolute;
        opacity: 0.6;
        right: 5px;
        top: 5px;
        pointer-events: none;
      }
      .subitems {
        position: absolute;
        top: 0;
        left: 100%;
        width: var(--menu-width);
      }
    `])))]);var mc,wi,ki,Pi,xi,gc,yc,vc,wc,kc,Pc,xc,Cc,_c,$c,Ec,Oc;function wd(n,e,t){return e=J(e),ue(n,Dc()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function Dc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dc=function(){return!!n})()}function Ci(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}function at(n,e,t){kd(n,e),e.set(n,t)}function kd(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function st(n,e,t){return n.set(Fc(n,e),t),t}function ct(n,e){return n.get(Fc(n,e))}function Fc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Pd(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:_i(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||_i(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return _d(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:xd(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function xd(n){var e=Cd(n,"string");return L(e)=="symbol"?e:e+""}function Cd(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function _i(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function _d(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var Sn=new WeakMap,In=new WeakMap,jn=new WeakMap,Nn=new WeakMap,An=new WeakMap;Oc=(yc=te({type:Array}),wc=te({type:Number}),Pc=te({type:Boolean}),Cc=te({type:Function}),$c=Sr(),"items");var Mr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=wd(this,e,[].concat(o)),at(t,Sn,(gc(t),vc(t,[]))),at(t,In,kc(t,0)),at(t,jn,xc(t,!1)),at(t,Nn,_c(t,function(){return null})),at(t,An,Ec(t,"")),t}return pe(e,n),ee(e,[{key:Oc,get:function(){return ct(Sn,this)}},{key:"items",set:function(r){st(Sn,this,r)}},{key:"delay",get:function(){return ct(In,this)},set:function(r){st(In,this,r)}},{key:"searchBar",get:function(){return ct(jn,this)},set:function(r){st(jn,this,r)}},{key:"onHide",get:function(){return ct(Nn,this)},set:function(r){st(Nn,this,r)}},{key:"filter",get:function(){return ct(An,this)},set:function(r){st(An,this,r)}},{key:"connectedCallback",value:function(){Ci(e,"connectedCallback",this)([]),this.hide=oc(this.delay,this.onHide)}},{key:"firstUpdated",value:function(){var r=this;this.addEventListener("mouseover",function(){r.hide.cancel()}),this.addEventListener("mouseleave",function(){r.hide.call()})}},{key:"disconnectedCallback",value:function(){Ci(e,"disconnectedCallback",this)([]),this.hide&&this.hide.cancel()}},{key:"getItems",value:function(){var r=new RegExp(this.filter,"i");return this.items.filter(function(o){return o.label.match(r)})}},{key:"handleFilterChange",value:function(r){this.filter=r.target.value,this.requestUpdate()}},{key:"render",value:function(){var r=this;return ae(wi||(wi=ne([`
      <style>
        :host {
          --context-color: rgba(110, 136, 255, 0.8);
          --context-color-light: rgba(130, 153, 255, 0.8);
          --context-color-dark: rgba(69, 103, 255, 0.8);
          --context-menu-round: 5px;
          --menu-width: 120px;
        }
      </style>
      <div class="menu" data-testid="context-menu">
        `,`
        `,`
      </div>
    `])),this.searchBar?ae(ki||(ki=ne([`<rete-context-menu-block>
                 <rete-context-menu-search .text=`," @change=",` />
            </rete-context-menu-block>`])),this.filter,this.handleFilterChange):"",this.getItems().map(function(o){return ae(Pi||(Pi=ne([`
          <rete-context-menu-item
            .key=`,`
            @select=`,`
            .delay=`,`
            @hide=`,`
            .subitems=`,`
            class="first"
          >
            `,`
          </rete-context-menu-item>
        `])),o.key,o.handler,r.delay,r.onHide,o.subitems,o.label)}))}}])})(le);mc=Mr;var Ze=fe(Pd(mc,[[yc,1,"items"],[wc,1,"delay"],[Pc,1,"searchBar"],[Cc,1,"onHide"],[$c,1,"filter"]],[],0,void 0,le).e,6);vc=Ze[0];kc=Ze[1];xc=Ze[2];_c=Ze[3];Ec=Ze[4];gc=Ze[5];q(Mr,"styles",me(xi||(xi=ne([`
    .menu {
      padding: 10px;
      width: var(--menu-width);
      margin-top: -20px;
      margin-left: calc(-1 * var(--menu-width) / 2);
    }
  `]))));var Sc,$i,Ei,Ic,jc,Nc,Ac;function $d(n,e,t){return e=J(e),ue(n,Tc()?Reflect.construct(e,[],J(n).constructor):e.apply(n,t))}function Tc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tc=function(){return!!n})()}function Ed(n,e,t){Od(n,e),e.set(n,t)}function Od(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dd(n,e,t){return n.set(Bc(n,e),t),t}function Fd(n,e){return n.get(Bc(n,e))}function Bc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Sd(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Oi(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Oi(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return Nd(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Id(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Id(n){var e=jd(n,"string");return L(e)=="symbol"?e:e+""}function jd(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Oi(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Nd(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var Tn=new WeakMap;Ac=(jc=Sr(),"properties");var Lt=(function(n){function e(){var t;return Q(this,e),t=$d(this,e),Ed(t,Tn,(Ic(t),Nc(t,""))),t.text="",t}return pe(e,n),ee(e,[{key:"text",get:function(){return Fd(Tn,this)},set:function(r){Dd(Tn,this,r)}},{key:"handleInput",value:function(r){this.text=r.target.value;var o=new InputEvent("change");Object.defineProperty(o,"target",{writable:!1,value:r.target}),this.dispatchEvent(o)}},{key:"render",value:function(){return ae($i||($i=ne([`
      <input
        class="search"
        .value="`,`"
        @input="`,`"
        data-testid="context-menu-search-input"
      />
    `])),this.text,this.handleInput)}}])})(le);Sc=Lt;var zc=fe(Sd(Sc,[[jc,1,"text"]],[],0,void 0,le).e,2);Nc=zc[0];Ic=zc[1];q(Lt,Ac,{text:{type:String}});q(Lt,"styles",me(Ei||(Ei=ne([`
    .search {
      color: white;
      padding: 1px 8px;
      border: 1px solid white;
      border-radius: 10px;
      font-size: 16px;
      font-family: serif;
      width: 100%;
      box-sizing: border-box;
      background: transparent;
    }
  `]))));var Di;customElements.define("rete-context-menu",Mr);customElements.define("rete-context-menu-block",Br);customElements.define("rete-context-menu-search",Lt);customElements.define("rete-context-menu-item",zr);function Ad(n){var e=typeof n?.delay>"u"?1e3:n.delay;return{update:function(r){if(r.data.type==="contextmenu")return{items:r.data.items,delay:e,searchBar:r.data.searchBar,onHide:r.data.onHide}},render:function(r){if(r.data.type==="contextmenu")return ae(Di||(Di=ne([`
            <rete-context-menu
                .items="`,`"
                .delay="`,`"
                .searchBar="`,`"
                .onHide="`,`"
            ></rete-context-menu>
        `])),r.data.items,e,r.data.searchBar,r.data.onHide)}}}var Td=Object.freeze({__proto__:null,setup:Ad});function Pe(n){return"".concat(n,"px")}function Mc(n){return Object.entries(n).map(function(e){var t=fe(e,2),r=t[0],o=t[1];return"".concat(r,": ").concat(o)}).join("; ")}var Rc,Fi,Si,Lc,Uc,Wc,Hc,qc,Vc,Gc,Xc,Kc,Jc;function Bd(n,e,t){return e=J(e),ue(n,Zc()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function Zc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zc=function(){return!!n})()}function Dt(n,e,t){zd(n,e),e.set(n,t)}function zd(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ft(n,e,t){return n.set(Yc(n,e),t),t}function St(n,e){return n.get(Yc(n,e))}function Yc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Md(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Ii(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Ii(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return Ud(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Rd(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Rd(n){var e=Ld(n,"string");return L(e)=="symbol"?e:e+""}function Ld(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Ii(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Ud(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var Bn=new WeakMap,zn=new WeakMap,Mn=new WeakMap,Rn=new WeakMap;Jc=(Uc=te({type:Number}),Hc=te({type:Number}),Vc=te({type:Number}),Xc=te({type:Number}),"left");var Rr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=Bd(this,e,[].concat(o)),Dt(t,Bn,(Lc(t),Wc(t))),Dt(t,zn,qc(t)),Dt(t,Mn,Gc(t)),Dt(t,Rn,Kc(t)),t}return pe(e,n),ee(e,[{key:Jc,get:function(){return St(Bn,this)}},{key:"left",set:function(r){Ft(Bn,this,r)}},{key:"top",get:function(){return St(zn,this)},set:function(r){Ft(zn,this,r)}},{key:"width",get:function(){return St(Mn,this)},set:function(r){Ft(Mn,this,r)}},{key:"height",get:function(){return St(Rn,this)},set:function(r){Ft(Rn,this,r)}},{key:"styles",get:function(){return{left:Pe(this.left),top:Pe(this.top),width:Pe(this.width),height:Pe(this.height)}}},{key:"render",value:function(){return ae(Fi||(Fi=ne([`
      <div class="mini-node" style=`,` data-testid="minimap-node"></div>
    `])),Mc(this.styles))}}])})(le);Rc=Rr;var _t=fe(Md(Rc,[[Uc,1,"left"],[Hc,1,"top"],[Vc,1,"width"],[Xc,1,"height"]],[],0,void 0,le).e,5);Wc=_t[0];qc=_t[1];Gc=_t[2];Kc=_t[3];Lc=_t[4];q(Rr,"styles",me(Si||(Si=ne([`
    .mini-node {
      position: absolute;
      background: rgba(110, 136, 255, 0.8);
      border: 1px solid rgb(192 206 212 / 60%);
    }
  `]))));function ji(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Wd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ji(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ji(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qc(n,e){var t=function(o){var i=e(o);return i?Wd({},i):null};return{start:function(o){var i=t(o);function a(c){var p=t(c);if(p&&i){var f=p.x-i.x,h=p.y-i.y;n(f,h)}i=p}function s(){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}window.addEventListener("pointermove",a),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s)}}}var el,Ni,Ai,tl,nl,rl,ol,il,al,sl,cl,ll,pl,ul,hl,fl,dl;function Hd(n,e,t){return e=J(e),ue(n,bl()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function bl(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bl=function(){return!!n})()}function Le(n,e,t){qd(n,e),e.set(n,t)}function qd(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ue(n,e,t){return n.set(ml(n,e),t),t}function We(n,e){return n.get(ml(n,e))}function ml(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Vd(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Ti(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Ti(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return Kd(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Gd(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Gd(n){var e=Xd(n,"string");return L(e)=="symbol"?e:e+""}function Xd(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Ti(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Kd(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var Ln=new WeakMap,Un=new WeakMap,Wn=new WeakMap,Hn=new WeakMap,qn=new WeakMap,Vn=new WeakMap;dl=(nl=te({type:Number}),ol=te({type:Number}),al=te({type:Number}),cl=te({type:Number}),pl=te({type:Number}),hl=te({type:Function}),"left");var Lr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=Hd(this,e,[].concat(o)),Le(t,Ln,(tl(t),rl(t,0))),Le(t,Un,il(t,0)),Le(t,Wn,sl(t,0)),Le(t,Hn,ll(t,0)),Le(t,qn,ul(t,0)),Le(t,Vn,fl(t,function(){return null})),q(t,"drag",Qc(t.onDrag.bind(t),function(a){return{x:a.pageX,y:a.pageY}})),t}return pe(e,n),ee(e,[{key:dl,get:function(){return We(Ln,this)}},{key:"left",set:function(r){Ue(Ln,this,r)}},{key:"top",get:function(){return We(Un,this)},set:function(r){Ue(Un,this,r)}},{key:"width",get:function(){return We(Wn,this)},set:function(r){Ue(Wn,this,r)}},{key:"height",get:function(){return We(Hn,this)},set:function(r){Ue(Hn,this,r)}},{key:"containerWidth",get:function(){return We(qn,this)},set:function(r){Ue(qn,this,r)}},{key:"onTranslate",get:function(){return We(Vn,this)},set:function(r){Ue(Vn,this,r)}},{key:"scale",value:function(r){return r*this.containerWidth}},{key:"invert",value:function(r){return r/this.containerWidth}},{key:"onDrag",value:function(r,o){this.onTranslate(this.invert(-r),this.invert(-o))}},{key:"styles",get:function(){return{left:Pe(this.scale(this.left)),top:Pe(this.scale(this.top)),width:Pe(this.scale(this.width)),height:Pe(this.scale(this.height))}}},{key:"render",value:function(){return ae(Ni||(Ni=ne([`
      <div
        @pointerdown=`,`
        style=`,`
        data-testid="minimap-viewport"
        class="mini-viewport"
      ></div>
    `])),this.drag.start,Mc(this.styles))}}])})(le);el=Lr;var Re=fe(Vd(el,[[nl,1,"left"],[ol,1,"top"],[al,1,"width"],[cl,1,"height"],[pl,1,"containerWidth"],[hl,1,"onTranslate"]],[],0,void 0,le).e,7);rl=Re[0];il=Re[1];sl=Re[2];ll=Re[3];ul=Re[4];fl=Re[5];tl=Re[6];q(Lr,"styles",me(Ai||(Ai=ne([`
    .mini-viewport {
      position: absolute;
      background: rgba(255, 251, 128, 0.32);
      border: 1px solid #ffe52b;
    }
  `]))));var gl,Bi,zi,Mi,yl,vl,wl,kl,Pl,xl,Cl,_l,$l,El,Ol,Dl,Fl,Sl,Il,jl;function Jd(n,e,t){return e=J(e),ue(n,Nl()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function Nl(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nl=function(){return!!n})()}function Se(n,e,t){Zd(n,e),e.set(n,t)}function Zd(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ie(n,e,t){return n.set(Al(n,e),t),t}function je(n,e){return n.get(Al(n,e))}function Al(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Yd(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Ri(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Ri(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return tb(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:Qd(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function Qd(n){var e=eb(n,"string");return L(e)=="symbol"?e:e+""}function eb(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Ri(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function tb(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var Gn=new WeakMap,Xn=new WeakMap,Kn=new WeakMap,Jn=new WeakMap,Zn=new WeakMap,Yn=new WeakMap,Qn=new WeakMap;jl=(vl=te({type:Number}),kl=te({type:Number}),xl=te({type:Array}),_l=te({type:Object}),El=te({type:Function}),Dl=te({type:Function}),Sl=Jh(".minimap"),"size");var Ur=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=Jd(this,e,[].concat(o)),Se(t,Gn,(yl(t),wl(t,0))),Se(t,Xn,Pl(t,1)),Se(t,Kn,Cl(t,[])),Se(t,Jn,$l(t)),Se(t,Zn,Ol(t)),Se(t,Yn,Fl(t)),Se(t,Qn,Il(t)),t}return pe(e,n),ee(e,[{key:jl,get:function(){return je(Gn,this)}},{key:"size",set:function(r){Ie(Gn,this,r)}},{key:"ratio",get:function(){return je(Xn,this)},set:function(r){Ie(Xn,this,r)}},{key:"nodes",get:function(){return je(Kn,this)},set:function(r){Ie(Kn,this,r)}},{key:"viewport",get:function(){return je(Jn,this)},set:function(r){Ie(Jn,this,r)}},{key:"onTranslate",get:function(){return je(Zn,this)},set:function(r){Ie(Zn,this,r)}},{key:"point",get:function(){return je(Yn,this)},set:function(r){Ie(Yn,this,r)}},{key:"container",get:function(){return je(Qn,this)},set:function(r){Ie(Qn,this,r)}},{key:"render",value:function(){var r=this;return ae(Bi||(Bi=ne([`
      <div
        class="minimap"
        style="width: `,"; height: ",`"
        @pointerdown="`,`"
        @dblclick="`,`"
        data-testid="minimap"
      >
        `,`
      <rete-mini-viewport
        .left="`,`"
        .top="`,`"
        .width="`,`"
        .height="`,`"
        .containerWidth="`,`"
        .onTranslate="`,`"
      ></rete-mini-viewport>
      </div>
    `])),Pe(this.size*this.ratio),Pe(this.size),this.preventDefault,this.dblclick,this.nodes.map(function(o,i){return ae(zi||(zi=ne([`<rete-mini-node
            .left="`,`"
            .top="`,`"
            .width="`,`"
            .height="`,`"
            key="`,"_",`"
          ></rete-mini-node>`])),r.scale(o.left),r.scale(o.top),r.scale(o.width),r.scale(o.height),i,o.left)}),this.viewport.left,this.viewport.top,this.viewport.width,this.viewport.height,this.container?this.container.clientWidth:0,this.onTranslate)}},{key:"scale",value:function(r){return this.container?r*this.container.clientWidth:0}},{key:"preventDefault",value:function(r){r.stopPropagation(),r.preventDefault()}},{key:"dblclick",value:function(r){if(this.preventDefault(r),!!this.container){var o=this.container.getBoundingClientRect(),i=(r.clientX-o.left)/(this.size*this.ratio),a=(r.clientY-o.top)/(this.size*this.ratio);this.point(i,a)}}}])})(le);gl=Ur;var De=fe(Yd(gl,[[vl,1,"size"],[kl,1,"ratio"],[xl,1,"nodes"],[_l,1,"viewport"],[El,1,"onTranslate"],[Dl,1,"point"],[Sl,1,"container"]],[],0,void 0,le).e,8);wl=De[0];Pl=De[1];Cl=De[2];$l=De[3];Ol=De[4];Fl=De[5];Il=De[6];yl=De[7];q(Ur,"styles",me(Mi||(Mi=ne([`
    .minimap {
      position: absolute;
      right: 24px;
      bottom: 24px;
      background: rgba(229, 234, 239, 0.65);
      padding: 20px;
      overflow: hidden;
      border: 1px solid #b1b7ff;
      border-radius: 8px;
      box-sizing: border-box;
    }
  `]))));var Li;customElements.define("rete-minimap",Ur);customElements.define("rete-mini-node",Rr);customElements.define("rete-mini-viewport",Lr);function nb(n){return{update:function(t){if(t.data.type==="minimap")return{nodes:t.data.nodes,size:n?.size||200,ratio:t.data.ratio,viewport:t.data.viewport,onTranslate:t.data.translate,point:t.data.point}},render:function(t){if(t.data.type==="minimap")return ae(Li||(Li=ne([`
        <rete-minimap
            .nodes="`,`"
            .size="`,`"
            .ratio="`,`"
            .viewport="`,`"
            .onTranslate="`,`"
            .point="`,`"
        ></rete-minimap>
        `])),t.data.nodes,n?.size||200,t.data.ratio,t.data.viewport,t.data.translate,t.data.point)}}}var rb=Object.freeze({__proto__:null,setup:nb}),Tl,Ui,Wi,Bl,zl,Ml,Rl,Ll,Ul,Wl,Hl;function ob(n,e,t){return e=J(e),ue(n,ql()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function ql(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ql=function(){return!!n})()}function ib(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}function er(n,e,t){ab(n,e),e.set(n,t)}function ab(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tr(n,e,t){return n.set(Vl(n,e),t),t}function nr(n,e){return n.get(Vl(n,e))}function Vl(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function sb(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Hi(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Hi(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return pb(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:cb(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function cb(n){var e=lb(n,"string");return L(e)=="symbol"?e:e+""}function lb(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Hi(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function pb(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var ft=20,rr=new WeakMap,or=new WeakMap,ir=new WeakMap;Hl=(zl=te({type:Object}),Rl=te({type:Boolean}),Ul=te({type:Function}),"position");var Wr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=ob(this,e,[].concat(o)),er(t,rr,(Bl(t),Ml(t,{x:0,y:0}))),er(t,or,Ll(t,!1)),er(t,ir,Wl(t,function(){return null})),q(t,"drag",null),t}return pe(e,n),ee(e,[{key:Hl,get:function(){return nr(rr,this)}},{key:"position",set:function(r){tr(rr,this,r)}},{key:"selected",get:function(){return nr(or,this)},set:function(r){tr(or,this,r)}},{key:"getPointer",get:function(){return nr(ir,this)},set:function(r){tr(ir,this,r)}},{key:"connectedCallback",value:function(){ib(e,"connectedCallback",this)([]),this.drag=Qc(this.onDrag.bind(this),this.getPointer)}},{key:"render",value:function(){var r=`
      top: `.concat(this.position.y-ft/2,`px;
      left: `).concat(this.position.x-ft/2,`px;
    `);return ae(Ui||(Ui=ne([`
      <div
        class="pin `,`"
        style="`,`"
        @pointerdown="`,`"
        @contextmenu="`,`"
        data-testid="pin"
      ></div>
    `])),this.selected?"selected":"",r,this.onPointerDown,this.onContextMenu)}},{key:"onPointerDown",value:function(r){var o;r.stopPropagation(),r.preventDefault(),(o=this.drag)===null||o===void 0||o.start(r),this.dispatchEvent(new CustomEvent("down",{detail:r}))}},{key:"onContextMenu",value:function(r){r.stopPropagation(),r.preventDefault(),this.dispatchEvent(new CustomEvent("menu",{detail:r}))}},{key:"onDrag",value:function(r,o){this.dispatchEvent(new CustomEvent("translate",{detail:{dx:r,dy:o}}))}}])})(le);Tl=Wr;var Ut=fe(sb(Tl,[[zl,1,"position"],[Rl,1,"selected"],[Ul,1,"getPointer"]],[],0,void 0,le).e,4);Ml=Ut[0];Ll=Ut[1];Wl=Ut[2];Bl=Ut[3];q(Wr,"styles",me(Wi||(Wi=ne([`
    :host {
      display: block;
    }
    .pin {
      width: `,`px;
      height: `,`px;
      box-sizing: border-box;
      background: steelblue;
      border: 2px solid white;
      border-radius: `,`px;
      position: absolute;
    }
    .selected {
      background: #ffd92c;
    }
  `])),ft,ft,ft));var Gl,qi,Vi,Gi,Xl,Kl,Jl,Zl,Yl,Ql,ep,tp,np,rp,op,ip;function ub(n,e,t){return e=J(e),ue(n,ap()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function ap(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ap=function(){return!!n})()}function lt(n,e,t){hb(n,e),e.set(n,t)}function hb(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pt(n,e,t){return n.set(sp(n,e),t),t}function ut(n,e){return n.get(sp(n,e))}function sp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function fb(n,e,t,r,o,i){function a(l,b,d){return function(v,y){return d&&d(v),l[b].call(v,y)}}function s(l,b){for(var d=0;d<l.length;d++)l[d].call(b);return b}function c(l,b,d,v){if(typeof l!="function"&&(v||l!==void 0))throw new TypeError(b+" must "+(d||"be")+" a function"+(v?"":" or undefined"));return l}function p(l,b,d,v,y,C,I,S,B,O,_,g,k){function F(j){if(!k(j))throw new TypeError("Attempted to access private element on non-instance")}var x,N=b[0],T=b[3],z=!S;if(!z){d||Array.isArray(N)||(N=[N]);var m={},A=[],D=y===3?"get":y===4||g?"set":"value";O?(_||g?m={get:Xi(function(){return T(this)},v,"get"),set:function(E){b[4](this,E)}}:m[D]=T,_||Xi(m[D],v,y===2?"":D)):_||(m=Object.getOwnPropertyDescriptor(l,v))}for(var P=l,R=N.length-1;R>=0;R-=d?2:1){var Z=N[R],Y=d?N[R-1]:void 0,re={},U={kind:["field","accessor","method","getter","setter","class"][y],name:v,metadata:C,addInitializer:(function(j,E){if(j.v)throw Error("attempted to call addInitializer after decoration was finished");c(E,"An initializer","be",!0),I.push(E)}).bind(null,re)};try{if(z)(x=c(Z.call(Y,P,U),"class decorators","return"))&&(P=x);else{var W,G;U.static=B,U.private=O,O?y===2?W=function(E){return F(E),m.value}:(y<4&&(W=a(m,"get",F)),y!==3&&(G=a(m,"set",F))):(W=function(E){return E[v]},(y<2||y===4)&&(G=function(E,H){E[v]=H}));var ie=U.access={has:O?k.bind():function(j){return v in j}};if(W&&(ie.get=W),G&&(ie.set=G),P=Z.call(Y,g?{get:m.get,set:m.set}:m[D],U),g){if(L(P)=="object"&&P)(x=c(P.get,"accessor.get"))&&(m.get=x),(x=c(P.set,"accessor.set"))&&(m.set=x),(x=c(P.init,"accessor.init"))&&A.push(x);else if(P!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0")}else c(P,(_?"field":"method")+" decorators","return")&&(_?A.push(P):m[D]=P)}}finally{re.v=!0}}return(_||g)&&S.push(function(j,E){for(var H=A.length-1;H>=0;H--)E=A[H].call(j,E);return E}),_||z||(O?g?S.push(a(m,"get"),a(m,"set")):S.push(y===2?m[D]:a.call.bind(m[D])):Object.defineProperty(l,v,m)),P}function f(l,b){return Object.defineProperty(l,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:b})}if(arguments.length>=6)var h=i[Symbol.metadata||Symbol.for("Symbol.metadata")];var u=Object.create(h??null),w=(function(l,b,d,v){var y,C,I=[],S=function(P){return mb(P)===l},B=new Map;function O(D){D&&I.push(s.bind(null,D))}for(var _=0;_<b.length;_++){var g=b[_];if(Array.isArray(g)){var k=g[1],F=g[2],x=g.length>3,N=16&k,T=!!(8&k),z=(k&=7)==0,m=F+"/"+T;if(!z&&!x){var A=B.get(m);if(A===!0||A===3&&k!==4||A===4&&k!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+F);B.set(m,!(k>2)||k)}p(T?l:l.prototype,g,N,x?"#"+F:db(F),k,v,T?C=C||[]:y=y||[],I,T,x,z,k===1,T&&x?S:d)}}return O(y),O(C),I})(n,e,o,u);return t.length||f(n,u),{e:w,get c(){var l=[];return t.length&&[f(p(n,[t],r,n.name,5,u,l),u),s.bind(null,l,n)]}}}function db(n){var e=bb(n,"string");return L(e)=="symbol"?e:e+""}function bb(n,e){if(L(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Xi(n,e,t){L(e)=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function mb(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?L(n):"null"));return n}var ar=new WeakMap,sr=new WeakMap,cr=new WeakMap,lr=new WeakMap,pr=new WeakMap;ip=(Kl=te({type:Array}),Zl=te({type:Function}),Ql=te({type:Function}),tp=te({type:Function}),rp=te({type:Function}),"pins");var Hr=(function(n){function e(){var t;Q(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=ub(this,e,[].concat(o)),lt(t,ar,(Xl(t),Jl(t,[]))),lt(t,sr,Yl(t,function(){return null})),lt(t,cr,ep(t,function(){return null})),lt(t,lr,np(t,function(){return null})),lt(t,pr,op(t,function(){return null})),t}return pe(e,n),ee(e,[{key:ip,get:function(){return ut(ar,this)}},{key:"pins",set:function(r){pt(ar,this,r)}},{key:"onMenu",get:function(){return ut(sr,this)},set:function(r){pt(sr,this,r)}},{key:"onTranslate",get:function(){return ut(cr,this)},set:function(r){pt(cr,this,r)}},{key:"onDown",get:function(){return ut(lr,this)},set:function(r){pt(lr,this,r)}},{key:"getPointer",get:function(){return ut(pr,this)},set:function(r){pt(pr,this,r)}},{key:"render",value:function(){var r=this;return ae(qi||(qi=ne([`
      <div class="pins">
        `,`
      </div>
    `])),this.pins.map(function(o){return ae(Vi||(Vi=ne([`
          <rete-pin
            .position=`,`
            .selected=`,`
            .getPointer=`,`
            @menu=`,`
            @translate=`,`
            @down=`,`
          ></rete-pin>
        `])),o.position,o.selected,r.getPointer,function(){r.onMenu(o.id)},function(i){r.onTranslate(o.id,i.detail.dx,i.detail.dy)},function(){r.onDown(o.id)})}))}}])})(le);Gl=Hr;var Ye=fe(fb(Gl,[[Kl,1,"pins"],[Zl,1,"onMenu"],[Ql,1,"onTranslate"],[tp,1,"onDown"],[rp,1,"getPointer"]],[],0,void 0,le).e,6);Jl=Ye[0];Yl=Ye[1];ep=Ye[2];np=Ye[3];op=Ye[4];Xl=Ye[5];q(Hr,"styles",me(Gi||(Gi=ne([`
    .pins {
      display: flex;
      flex-direction: column;
    }
  `]))));var Ki;customElements.define("rete-pins",Hr);customElements.define("rete-pin",Wr);function gb(n){return{update:function(t){if(t.data.type==="reroute-pins")return{menu:n?.contextMenu||function(){return null},translate:n?.translate||function(){return null},down:n?.pointerdown||function(){return null},pins:t.data.data.pins}},render:function(t,r){if(t.data.type==="reroute-pins"){var o=r.parentScope(Tt);return ae(Ki||(Ki=ne([`
          <rete-pins
            .onMenu="`,`"
            .onTranslate="`,`"
            .onDown="`,`"
            .getPointer="`,`"
            .pins="`,`"
          ></rete-pins>`])),n?.contextMenu||function(){return null},n?.translate||function(){return null},n?.pointerdown||function(){return null},function(){return o.area.pointer},t.data.data.pins)}}}}var yb=Object.freeze({__proto__:null,setup:gb}),vb=Object.freeze({__proto__:null,classic:ud,contextMenu:Td,minimap:rb,reroute:yb});function wb(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=kb(n))||e){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var p=t.next();return a=p.done,p},e:function(p){s=!0,i=p},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw i}}}}function kb(n,e){if(n){if(typeof n=="string")return Ji(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ji(n,e):void 0}}function Ji(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Zi(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function It(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zi(Object(t),!0).forEach(function(r){q(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zi(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pb(n,e,t){return e=J(e),ue(n,cp()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function cp(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cp=function(){return!!n})()}function xb(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}customElements.define("rete-root",Ma);var Cb=(function(n){function e(){var t;return Q(this,e),t=Pb(this,e,["lit"]),q(t,"presets",[]),q(t,"owners",new WeakMap),t.renderer=sf(),t.addPipe(function(r){if(!r||L(r)!=="object"||!("type"in r))return r;if(r.type==="unmount")t.unmount(r.data.element);else if(r.type==="render"){if("filled"in r.data&&r.data.filled)return r;if(t.mount(r.data.element,r))return It(It({},r),{},{data:It(It({},r.data),{},{filled:!0})})}return r}),t}return pe(e,n),ee(e,[{key:"setParent",value:function(r){var o=this;xb(e,"setParent",this)([r]),this.presets.forEach(function(i){i.attach&&i.attach(o)})}},{key:"mount",value:function(r,o){var i=this,a=this.renderer.get(r),s=this.parentScope();if(a)return this.presets.forEach(function(u){if(i.owners.get(r)===u){var w=u.update(o,i);w&&i.renderer.update(a,w)}}),!0;var c=wb(this.presets),p;try{var f=function(){var w=p.value,l=w.render(o,i);if(!l)return 0;var b=o,d=b.data;return i.renderer.mount(r,l,function(){s.emit({type:"rendered",data:d})}),i.owners.set(r,w),{v:!0}},h;for(c.s();!(p=c.n()).done;)if(h=f(),h!==0&&h)return h.v}catch(u){c.e(u)}finally{c.f()}}},{key:"unmount",value:function(r){this.owners.delete(r),this.renderer.unmount(r)}},{key:"addPreset",value:function(r){var o=r;o.attach&&o.attach(this),this.presets.push(o)}}])})(xt);function _b(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function lp(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lp=function(){return!!n})()}function $b(n,e,t){if(lp())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(n.bind.apply(n,r));return t&&gt(o,t.prototype),o}function yr(n){var e=typeof Map=="function"?new Map:void 0;return yr=function(r){if(r===null||!_b(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,o)}function o(){return $b(r,arguments,J(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),gt(o,r)},yr(n)}function Eb(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Ob(n))||e){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,s=!1;return{s:function(){t=t.call(n)},n:function(){var p=t.next();return a=p.done,p},e:function(p){s=!0,i=p},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw i}}}}function Ob(n,e){if(n){if(typeof n=="string")return Yi(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Yi(n,e):void 0}}function Yi(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}var Db=(function(){function n(e){Q(this,n),q(this,"setups",new Map),this.editor=e}return ee(n,[{key:"add",value:function(t,r){var o=this.setups.get(t.id);if(o)throw new Error("already processed");this.setups.set(t.id,r)}},{key:"remove",value:function(t){this.setups.delete(t)}},{key:"fetchInputs",value:(function(){var e=se(V.mark(function r(o){var i=this,a,s,c,p,f,h,u,w,l,b,d,v;return V.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(a=this.setups.get(o),a){C.next=3;break}throw new Error("node is not initialized");case 3:return s=a.inputs(),c=this.editor.getConnections().filter(function(I){return I.target===o&&s.includes(I.targetInput)}),p={},C.next=8,Promise.all(c.map((function(){var I=se(V.mark(function S(B){return V.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.t0=B,_.next=3,i.fetch(B.source);case 3:return _.t1=_.sent,_.abrupt("return",{c:_.t0,sourceData:_.t1});case 5:case"end":return _.stop()}},S)}));return function(S){return I.apply(this,arguments)}})()));case 8:f=C.sent,h=Eb(f);try{for(h.s();!(u=h.n()).done;)w=u.value,l=w.c,b=w.sourceData,d=p[l.targetInput]?p[l.targetInput]:[],v=p,v[l.targetInput]=[].concat(Xe(d),[b[l.sourceOutput]])}catch(I){h.e(I)}finally{h.f()}return C.abrupt("return",p);case 12:case"end":return C.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t})()},{key:"fetch",value:(function(){var e=se(V.mark(function r(o){var i=this,a,s,c,p;return V.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(a=this.setups.get(o),a){h.next=3;break}throw new Error("node is not initialized");case 3:return s=a.outputs(),h.next=6,a.data(function(){return i.fetchInputs(o)});case 6:if(c=h.sent,p=Object.keys(c),s.every(function(u){return p.includes(u)})){h.next=10;break}throw new Error('dataflow node "'.concat(o,`" doesn't return all of required properties. Expected "`).concat(s.join('", "'),'". Got "').concat(p.join('", "'),'"'));case 10:return h.abrupt("return",c);case 11:case"end":return h.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t})()}])})(),Fb=(function(){function n(e){Q(this,n),q(this,"cache",new Map),this.onDelete=e}return ee(n,[{key:"get",value:function(t){return this.cache.get(t)}},{key:"add",value:function(t,r){if(this.cache.has(t))throw new Error("cache already exists");this.cache.set(t,r)}},{key:"patch",value:function(t,r){this.cache.set(t,r)}},{key:"delete",value:function(t){var r=this.cache.get(t);this.cache.delete(t),this.onDelete&&this.onDelete(r)}},{key:"clear",value:function(){var t=this;Array.from(this.cache.keys()).forEach(function(r){t.delete(r)})}}])})();function Sb(n,e,t){return e=J(e),ue(n,pp()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function pp(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pp=function(){return!!n})()}var Qi=(function(n){function e(){return Q(this,e),Sb(this,e,["cancelled"])}return pe(e,n),ee(e)})(yr(Error));function Ib(){var n=!1;function e(c){if(n)throw new Qi;return c}for(var t,r=new Promise(function(c,p){t=p,c()}),o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=i.reduce(function(c,p){var f=c.then(p).then(e);return f},r);return s.cancel=function(){n||t(new Qi),n=!0},s}function jb(n,e,t){return e=J(e),ue(n,up()?Reflect.construct(e,t||[],J(n).constructor):e.apply(n,t))}function up(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(up=function(){return!!n})()}function Nb(n,e,t,r){var o=we(J(n.prototype),e,t);return typeof o=="function"?function(i){return o.apply(t,i)}:o}var Ab=(function(n){function e(t){var r;return Q(this,e),r=jb(this,e,["dataflow-engine"]),q(r,"cache",new Fb(function(o){return o?.cancel&&o.cancel()})),r.configure=t,r.addPipe(function(o){return o.type==="nodecreated"&&r.add(o.data),o.type==="noderemoved"&&r.remove(o.data),o}),r}return pe(e,n),ee(e,[{key:"setParent",value:function(r){Nb(e,"setParent",this)([r]),this.editor=this.parentScope(ze),this.dataflow=new Db(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(r){var o=this,i=this.configure?this.configure(r):{inputs:function(){return Object.keys(r.inputs)},outputs:function(){return Object.keys(r.outputs)}};this.getDataflow().add(r,{inputs:i.inputs,outputs:i.outputs,data:(function(){var a=se(V.mark(function c(p){var f,h;return V.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(f=o.cache.get(r.id),!f){w.next=3;break}return w.abrupt("return",f);case 3:return h=Ib(function(){return p()},function(l){return r.data(l)}),o.cache.add(r.id,h),w.abrupt("return",h);case 6:case"end":return w.stop()}},c)}));function s(c){return a.apply(this,arguments)}return s})()})}},{key:"remove",value:function(r){this.getDataflow().remove(r.id)}},{key:"reset",value:function(r){var o=this;if(r){var i=this.getDataflow().setups.get(r);if(!i)throw new Error("setup");var a=i.outputs();this.cache.delete(r),this.editor.getConnections().filter(function(s){return s.source===r&&a.includes(s.sourceOutput)}).forEach(function(s){o.reset(s.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var t=se(V.mark(function o(i){var a;return V.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=L(i)==="object"?i.id:i,c.abrupt("return",this.getDataflow().fetchInputs(a));case 2:case"end":return c.stop()}},o,this)}));function r(o){return t.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var t=se(V.mark(function o(i){var a;return V.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=L(i)==="object"?i.id:i,c.abrupt("return",this.getDataflow().fetch(a));case 2:case"end":return c.stop()}},o,this)}));function r(o){return t.apply(this,arguments)}return r})()}])})(xt);const Tb='@font-face{font-family:Phosphor;src:url(/bentopdf/assets/Phosphor-DtdjzkpE.woff2) format("woff2"),url(/bentopdf/assets/Phosphor-BdqudwT5.woff) format("woff"),url(/bentopdf/assets/Phosphor-CDxgqcPu.ttf) format("truetype"),url(/bentopdf/assets/Phosphor-BXRFlF4V.svg#Phosphor) format("svg");font-weight:400;font-style:normal;font-display:block}.ph{font-family:Phosphor!important;speak:never;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;letter-spacing:0;-webkit-font-feature-settings:"liga";-moz-font-feature-settings:"liga=1";-moz-font-feature-settings:"liga";-ms-font-feature-settings:"liga" 1;font-feature-settings:"liga";-webkit-font-variant-ligatures:discretionary-ligatures;font-variant-ligatures:discretionary-ligatures;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.ph.ph-acorn:before{content:""}.ph.ph-address-book:before{content:""}.ph.ph-address-book-tabs:before{content:""}.ph.ph-air-traffic-control:before{content:""}.ph.ph-airplane:before{content:""}.ph.ph-airplane-in-flight:before{content:""}.ph.ph-airplane-landing:before{content:""}.ph.ph-airplane-takeoff:before{content:""}.ph.ph-airplane-taxiing:before{content:""}.ph.ph-airplane-tilt:before{content:""}.ph.ph-airplay:before{content:""}.ph.ph-alarm:before{content:""}.ph.ph-alien:before{content:""}.ph.ph-align-bottom:before{content:""}.ph.ph-align-bottom-simple:before{content:""}.ph.ph-align-center-horizontal:before{content:""}.ph.ph-align-center-horizontal-simple:before{content:""}.ph.ph-align-center-vertical:before{content:""}.ph.ph-align-center-vertical-simple:before{content:""}.ph.ph-align-left:before{content:""}.ph.ph-align-left-simple:before{content:""}.ph.ph-align-right:before{content:""}.ph.ph-align-right-simple:before{content:""}.ph.ph-align-top:before{content:""}.ph.ph-align-top-simple:before{content:""}.ph.ph-amazon-logo:before{content:""}.ph.ph-ambulance:before{content:""}.ph.ph-anchor:before{content:""}.ph.ph-anchor-simple:before{content:""}.ph.ph-android-logo:before{content:""}.ph.ph-angle:before{content:""}.ph.ph-angular-logo:before{content:""}.ph.ph-aperture:before{content:""}.ph.ph-app-store-logo:before{content:""}.ph.ph-app-window:before{content:""}.ph.ph-apple-logo:before{content:""}.ph.ph-apple-podcasts-logo:before{content:""}.ph.ph-approximate-equals:before{content:""}.ph.ph-archive:before{content:""}.ph.ph-armchair:before{content:""}.ph.ph-arrow-arc-left:before{content:""}.ph.ph-arrow-arc-right:before{content:""}.ph.ph-arrow-bend-double-up-left:before{content:""}.ph.ph-arrow-bend-double-up-right:before{content:""}.ph.ph-arrow-bend-down-left:before{content:""}.ph.ph-arrow-bend-down-right:before{content:""}.ph.ph-arrow-bend-left-down:before{content:""}.ph.ph-arrow-bend-left-up:before{content:""}.ph.ph-arrow-bend-right-down:before{content:""}.ph.ph-arrow-bend-right-up:before{content:""}.ph.ph-arrow-bend-up-left:before{content:""}.ph.ph-arrow-bend-up-right:before{content:""}.ph.ph-arrow-circle-down:before{content:""}.ph.ph-arrow-circle-down-left:before{content:""}.ph.ph-arrow-circle-down-right:before{content:""}.ph.ph-arrow-circle-left:before{content:""}.ph.ph-arrow-circle-right:before{content:""}.ph.ph-arrow-circle-up:before{content:""}.ph.ph-arrow-circle-up-left:before{content:""}.ph.ph-arrow-circle-up-right:before{content:""}.ph.ph-arrow-clockwise:before{content:""}.ph.ph-arrow-counter-clockwise:before{content:""}.ph.ph-arrow-down:before{content:""}.ph.ph-arrow-down-left:before{content:""}.ph.ph-arrow-down-right:before{content:""}.ph.ph-arrow-elbow-down-left:before{content:""}.ph.ph-arrow-elbow-down-right:before{content:""}.ph.ph-arrow-elbow-left:before{content:""}.ph.ph-arrow-elbow-left-down:before{content:""}.ph.ph-arrow-elbow-left-up:before{content:""}.ph.ph-arrow-elbow-right:before{content:""}.ph.ph-arrow-elbow-right-down:before{content:""}.ph.ph-arrow-elbow-right-up:before{content:""}.ph.ph-arrow-elbow-up-left:before{content:""}.ph.ph-arrow-elbow-up-right:before{content:""}.ph.ph-arrow-fat-down:before{content:""}.ph.ph-arrow-fat-left:before{content:""}.ph.ph-arrow-fat-line-down:before{content:""}.ph.ph-arrow-fat-line-left:before{content:""}.ph.ph-arrow-fat-line-right:before{content:""}.ph.ph-arrow-fat-line-up:before{content:""}.ph.ph-arrow-fat-lines-down:before{content:""}.ph.ph-arrow-fat-lines-left:before{content:""}.ph.ph-arrow-fat-lines-right:before{content:""}.ph.ph-arrow-fat-lines-up:before{content:""}.ph.ph-arrow-fat-right:before{content:""}.ph.ph-arrow-fat-up:before{content:""}.ph.ph-arrow-left:before{content:""}.ph.ph-arrow-line-down:before{content:""}.ph.ph-arrow-line-down-left:before{content:""}.ph.ph-arrow-line-down-right:before{content:""}.ph.ph-arrow-line-left:before{content:""}.ph.ph-arrow-line-right:before{content:""}.ph.ph-arrow-line-up:before{content:""}.ph.ph-arrow-line-up-left:before{content:""}.ph.ph-arrow-line-up-right:before{content:""}.ph.ph-arrow-right:before{content:""}.ph.ph-arrow-square-down:before{content:""}.ph.ph-arrow-square-down-left:before{content:""}.ph.ph-arrow-square-down-right:before{content:""}.ph.ph-arrow-square-in:before{content:""}.ph.ph-arrow-square-left:before{content:""}.ph.ph-arrow-square-out:before{content:""}.ph.ph-arrow-square-right:before{content:""}.ph.ph-arrow-square-up:before{content:""}.ph.ph-arrow-square-up-left:before{content:""}.ph.ph-arrow-square-up-right:before{content:""}.ph.ph-arrow-u-down-left:before{content:""}.ph.ph-arrow-u-down-right:before{content:""}.ph.ph-arrow-u-left-down:before{content:""}.ph.ph-arrow-u-left-up:before{content:""}.ph.ph-arrow-u-right-down:before{content:""}.ph.ph-arrow-u-right-up:before{content:""}.ph.ph-arrow-u-up-left:before{content:""}.ph.ph-arrow-u-up-right:before{content:""}.ph.ph-arrow-up:before{content:""}.ph.ph-arrow-up-left:before{content:""}.ph.ph-arrow-up-right:before{content:""}.ph.ph-arrows-clockwise:before{content:""}.ph.ph-arrows-counter-clockwise:before{content:""}.ph.ph-arrows-down-up:before{content:""}.ph.ph-arrows-horizontal:before{content:""}.ph.ph-arrows-in:before{content:""}.ph.ph-arrows-in-cardinal:before{content:""}.ph.ph-arrows-in-line-horizontal:before{content:""}.ph.ph-arrows-in-line-vertical:before{content:""}.ph.ph-arrows-in-simple:before{content:""}.ph.ph-arrows-left-right:before{content:""}.ph.ph-arrows-merge:before{content:""}.ph.ph-arrows-out:before{content:""}.ph.ph-arrows-out-cardinal:before{content:""}.ph.ph-arrows-out-line-horizontal:before{content:""}.ph.ph-arrows-out-line-vertical:before{content:""}.ph.ph-arrows-out-simple:before{content:""}.ph.ph-arrows-split:before{content:""}.ph.ph-arrows-vertical:before{content:""}.ph.ph-article:before{content:""}.ph.ph-article-medium:before{content:""}.ph.ph-article-ny-times:before{content:""}.ph.ph-asclepius:before{content:""}.ph.ph-caduceus:before{content:""}.ph.ph-asterisk:before{content:""}.ph.ph-asterisk-simple:before{content:""}.ph.ph-at:before{content:""}.ph.ph-atom:before{content:""}.ph.ph-avocado:before{content:""}.ph.ph-axe:before{content:""}.ph.ph-baby:before{content:""}.ph.ph-baby-carriage:before{content:""}.ph.ph-backpack:before{content:""}.ph.ph-backspace:before{content:""}.ph.ph-bag:before{content:""}.ph.ph-bag-simple:before{content:""}.ph.ph-balloon:before{content:""}.ph.ph-bandaids:before{content:""}.ph.ph-bank:before{content:""}.ph.ph-barbell:before{content:""}.ph.ph-barcode:before{content:""}.ph.ph-barn:before{content:""}.ph.ph-barricade:before{content:""}.ph.ph-baseball:before{content:""}.ph.ph-baseball-cap:before{content:""}.ph.ph-baseball-helmet:before{content:""}.ph.ph-basket:before{content:""}.ph.ph-basketball:before{content:""}.ph.ph-bathtub:before{content:""}.ph.ph-battery-charging:before{content:""}.ph.ph-battery-charging-vertical:before{content:""}.ph.ph-battery-empty:before{content:""}.ph.ph-battery-full:before{content:""}.ph.ph-battery-high:before{content:""}.ph.ph-battery-low:before{content:""}.ph.ph-battery-medium:before{content:""}.ph.ph-battery-plus:before{content:""}.ph.ph-battery-plus-vertical:before{content:""}.ph.ph-battery-vertical-empty:before{content:""}.ph.ph-battery-vertical-full:before{content:""}.ph.ph-battery-vertical-high:before{content:""}.ph.ph-battery-vertical-low:before{content:""}.ph.ph-battery-vertical-medium:before{content:""}.ph.ph-battery-warning:before{content:""}.ph.ph-battery-warning-vertical:before{content:""}.ph.ph-beach-ball:before{content:""}.ph.ph-beanie:before{content:""}.ph.ph-bed:before{content:""}.ph.ph-beer-bottle:before{content:""}.ph.ph-beer-stein:before{content:""}.ph.ph-behance-logo:before{content:""}.ph.ph-bell:before{content:""}.ph.ph-bell-ringing:before{content:""}.ph.ph-bell-simple:before{content:""}.ph.ph-bell-simple-ringing:before{content:""}.ph.ph-bell-simple-slash:before{content:""}.ph.ph-bell-simple-z:before{content:""}.ph.ph-bell-slash:before{content:""}.ph.ph-bell-z:before{content:""}.ph.ph-belt:before{content:""}.ph.ph-bezier-curve:before{content:""}.ph.ph-bicycle:before{content:""}.ph.ph-binary:before{content:""}.ph.ph-binoculars:before{content:""}.ph.ph-biohazard:before{content:""}.ph.ph-bird:before{content:""}.ph.ph-blueprint:before{content:""}.ph.ph-bluetooth:before{content:""}.ph.ph-bluetooth-connected:before{content:""}.ph.ph-bluetooth-slash:before{content:""}.ph.ph-bluetooth-x:before{content:""}.ph.ph-boat:before{content:""}.ph.ph-bomb:before{content:""}.ph.ph-bone:before{content:""}.ph.ph-book:before{content:""}.ph.ph-book-bookmark:before{content:""}.ph.ph-book-open:before{content:""}.ph.ph-book-open-text:before{content:""}.ph.ph-book-open-user:before{content:""}.ph.ph-bookmark:before{content:""}.ph.ph-bookmark-simple:before{content:""}.ph.ph-bookmarks:before{content:""}.ph.ph-bookmarks-simple:before{content:""}.ph.ph-books:before{content:""}.ph.ph-boot:before{content:""}.ph.ph-boules:before{content:""}.ph.ph-bounding-box:before{content:""}.ph.ph-bowl-food:before{content:""}.ph.ph-bowl-steam:before{content:""}.ph.ph-bowling-ball:before{content:""}.ph.ph-box-arrow-down:before{content:""}.ph.ph-archive-box:before{content:""}.ph.ph-box-arrow-up:before{content:""}.ph.ph-boxing-glove:before{content:""}.ph.ph-brackets-angle:before{content:""}.ph.ph-brackets-curly:before{content:""}.ph.ph-brackets-round:before{content:""}.ph.ph-brackets-square:before{content:""}.ph.ph-brain:before{content:""}.ph.ph-brandy:before{content:""}.ph.ph-bread:before{content:""}.ph.ph-bridge:before{content:""}.ph.ph-briefcase:before{content:""}.ph.ph-briefcase-metal:before{content:""}.ph.ph-broadcast:before{content:""}.ph.ph-broom:before{content:""}.ph.ph-browser:before{content:""}.ph.ph-browsers:before{content:""}.ph.ph-bug:before{content:""}.ph.ph-bug-beetle:before{content:""}.ph.ph-bug-droid:before{content:""}.ph.ph-building:before{content:""}.ph.ph-building-apartment:before{content:""}.ph.ph-building-office:before{content:""}.ph.ph-buildings:before{content:""}.ph.ph-bulldozer:before{content:""}.ph.ph-bus:before{content:""}.ph.ph-butterfly:before{content:""}.ph.ph-cable-car:before{content:""}.ph.ph-cactus:before{content:""}.ph.ph-cake:before{content:""}.ph.ph-calculator:before{content:""}.ph.ph-calendar:before{content:""}.ph.ph-calendar-blank:before{content:""}.ph.ph-calendar-check:before{content:""}.ph.ph-calendar-dot:before{content:""}.ph.ph-calendar-dots:before{content:""}.ph.ph-calendar-heart:before{content:""}.ph.ph-calendar-minus:before{content:""}.ph.ph-calendar-plus:before{content:""}.ph.ph-calendar-slash:before{content:""}.ph.ph-calendar-star:before{content:""}.ph.ph-calendar-x:before{content:""}.ph.ph-call-bell:before{content:""}.ph.ph-camera:before{content:""}.ph.ph-camera-plus:before{content:""}.ph.ph-camera-rotate:before{content:""}.ph.ph-camera-slash:before{content:""}.ph.ph-campfire:before{content:""}.ph.ph-car:before{content:""}.ph.ph-car-battery:before{content:""}.ph.ph-car-profile:before{content:""}.ph.ph-car-simple:before{content:""}.ph.ph-cardholder:before{content:""}.ph.ph-cards:before{content:""}.ph.ph-cards-three:before{content:""}.ph.ph-caret-circle-double-down:before{content:""}.ph.ph-caret-circle-double-left:before{content:""}.ph.ph-caret-circle-double-right:before{content:""}.ph.ph-caret-circle-double-up:before{content:""}.ph.ph-caret-circle-down:before{content:""}.ph.ph-caret-circle-left:before{content:""}.ph.ph-caret-circle-right:before{content:""}.ph.ph-caret-circle-up:before{content:""}.ph.ph-caret-circle-up-down:before{content:""}.ph.ph-caret-double-down:before{content:""}.ph.ph-caret-double-left:before{content:""}.ph.ph-caret-double-right:before{content:""}.ph.ph-caret-double-up:before{content:""}.ph.ph-caret-down:before{content:""}.ph.ph-caret-left:before{content:""}.ph.ph-caret-line-down:before{content:""}.ph.ph-caret-line-left:before{content:""}.ph.ph-caret-line-right:before{content:""}.ph.ph-caret-line-up:before{content:""}.ph.ph-caret-right:before{content:""}.ph.ph-caret-up:before{content:""}.ph.ph-caret-up-down:before{content:""}.ph.ph-carrot:before{content:""}.ph.ph-cash-register:before{content:""}.ph.ph-cassette-tape:before{content:""}.ph.ph-castle-turret:before{content:""}.ph.ph-cat:before{content:""}.ph.ph-cell-signal-full:before{content:""}.ph.ph-cell-signal-high:before{content:""}.ph.ph-cell-signal-low:before{content:""}.ph.ph-cell-signal-medium:before{content:""}.ph.ph-cell-signal-none:before{content:""}.ph.ph-cell-signal-slash:before{content:""}.ph.ph-cell-signal-x:before{content:""}.ph.ph-cell-tower:before{content:""}.ph.ph-certificate:before{content:""}.ph.ph-chair:before{content:""}.ph.ph-chalkboard:before{content:""}.ph.ph-chalkboard-simple:before{content:""}.ph.ph-chalkboard-teacher:before{content:""}.ph.ph-champagne:before{content:""}.ph.ph-charging-station:before{content:""}.ph.ph-chart-bar:before{content:""}.ph.ph-chart-bar-horizontal:before{content:""}.ph.ph-chart-donut:before{content:""}.ph.ph-chart-line:before{content:""}.ph.ph-chart-line-down:before{content:""}.ph.ph-chart-line-up:before{content:""}.ph.ph-chart-pie:before{content:""}.ph.ph-chart-pie-slice:before{content:""}.ph.ph-chart-polar:before{content:""}.ph.ph-chart-scatter:before{content:""}.ph.ph-chat:before{content:""}.ph.ph-chat-centered:before{content:""}.ph.ph-chat-centered-dots:before{content:""}.ph.ph-chat-centered-slash:before{content:""}.ph.ph-chat-centered-text:before{content:""}.ph.ph-chat-circle:before{content:""}.ph.ph-chat-circle-dots:before{content:""}.ph.ph-chat-circle-slash:before{content:""}.ph.ph-chat-circle-text:before{content:""}.ph.ph-chat-dots:before{content:""}.ph.ph-chat-slash:before{content:""}.ph.ph-chat-teardrop:before{content:""}.ph.ph-chat-teardrop-dots:before{content:""}.ph.ph-chat-teardrop-slash:before{content:""}.ph.ph-chat-teardrop-text:before{content:""}.ph.ph-chat-text:before{content:""}.ph.ph-chats:before{content:""}.ph.ph-chats-circle:before{content:""}.ph.ph-chats-teardrop:before{content:""}.ph.ph-check:before{content:""}.ph.ph-check-circle:before{content:""}.ph.ph-check-fat:before{content:""}.ph.ph-check-square:before{content:""}.ph.ph-check-square-offset:before{content:""}.ph.ph-checkerboard:before{content:""}.ph.ph-checks:before{content:""}.ph.ph-cheers:before{content:""}.ph.ph-cheese:before{content:""}.ph.ph-chef-hat:before{content:""}.ph.ph-cherries:before{content:""}.ph.ph-church:before{content:""}.ph.ph-cigarette:before{content:""}.ph.ph-cigarette-slash:before{content:""}.ph.ph-circle:before{content:""}.ph.ph-circle-dashed:before{content:""}.ph.ph-circle-half:before{content:""}.ph.ph-circle-half-tilt:before{content:""}.ph.ph-circle-notch:before{content:""}.ph.ph-circles-four:before{content:""}.ph.ph-circles-three:before{content:""}.ph.ph-circles-three-plus:before{content:""}.ph.ph-circuitry:before{content:""}.ph.ph-city:before{content:""}.ph.ph-clipboard:before{content:""}.ph.ph-clipboard-text:before{content:""}.ph.ph-clock:before{content:""}.ph.ph-clock-afternoon:before{content:""}.ph.ph-clock-clockwise:before{content:""}.ph.ph-clock-countdown:before{content:""}.ph.ph-clock-counter-clockwise:before{content:""}.ph.ph-clock-user:before{content:""}.ph.ph-closed-captioning:before{content:""}.ph.ph-cloud:before{content:""}.ph.ph-cloud-arrow-down:before{content:""}.ph.ph-cloud-arrow-up:before{content:""}.ph.ph-cloud-check:before{content:""}.ph.ph-cloud-fog:before{content:""}.ph.ph-cloud-lightning:before{content:""}.ph.ph-cloud-moon:before{content:""}.ph.ph-cloud-rain:before{content:""}.ph.ph-cloud-slash:before{content:""}.ph.ph-cloud-snow:before{content:""}.ph.ph-cloud-sun:before{content:""}.ph.ph-cloud-warning:before{content:""}.ph.ph-cloud-x:before{content:""}.ph.ph-clover:before{content:""}.ph.ph-club:before{content:""}.ph.ph-coat-hanger:before{content:""}.ph.ph-coda-logo:before{content:""}.ph.ph-code:before{content:""}.ph.ph-code-block:before{content:""}.ph.ph-code-simple:before{content:""}.ph.ph-codepen-logo:before{content:""}.ph.ph-codesandbox-logo:before{content:""}.ph.ph-coffee:before{content:""}.ph.ph-coffee-bean:before{content:""}.ph.ph-coin:before{content:""}.ph.ph-coin-vertical:before{content:""}.ph.ph-coins:before{content:""}.ph.ph-columns:before{content:""}.ph.ph-columns-plus-left:before{content:""}.ph.ph-columns-plus-right:before{content:""}.ph.ph-command:before{content:""}.ph.ph-compass:before{content:""}.ph.ph-compass-rose:before{content:""}.ph.ph-compass-tool:before{content:""}.ph.ph-computer-tower:before{content:""}.ph.ph-confetti:before{content:""}.ph.ph-contactless-payment:before{content:""}.ph.ph-control:before{content:""}.ph.ph-cookie:before{content:""}.ph.ph-cooking-pot:before{content:""}.ph.ph-copy:before{content:""}.ph.ph-copy-simple:before{content:""}.ph.ph-copyleft:before{content:""}.ph.ph-copyright:before{content:""}.ph.ph-corners-in:before{content:""}.ph.ph-corners-out:before{content:""}.ph.ph-couch:before{content:""}.ph.ph-court-basketball:before{content:""}.ph.ph-cow:before{content:""}.ph.ph-cowboy-hat:before{content:""}.ph.ph-cpu:before{content:""}.ph.ph-crane:before{content:""}.ph.ph-crane-tower:before{content:""}.ph.ph-credit-card:before{content:""}.ph.ph-cricket:before{content:""}.ph.ph-crop:before{content:""}.ph.ph-cross:before{content:""}.ph.ph-crosshair:before{content:""}.ph.ph-crosshair-simple:before{content:""}.ph.ph-crown:before{content:""}.ph.ph-crown-cross:before{content:""}.ph.ph-crown-simple:before{content:""}.ph.ph-cube:before{content:""}.ph.ph-cube-focus:before{content:""}.ph.ph-cube-transparent:before{content:""}.ph.ph-currency-btc:before{content:""}.ph.ph-currency-circle-dollar:before{content:""}.ph.ph-currency-cny:before{content:""}.ph.ph-currency-dollar:before{content:""}.ph.ph-currency-dollar-simple:before{content:""}.ph.ph-currency-eth:before{content:""}.ph.ph-currency-eur:before{content:""}.ph.ph-currency-gbp:before{content:""}.ph.ph-currency-inr:before{content:""}.ph.ph-currency-jpy:before{content:""}.ph.ph-currency-krw:before{content:""}.ph.ph-currency-kzt:before{content:""}.ph.ph-currency-ngn:before{content:""}.ph.ph-currency-rub:before{content:""}.ph.ph-cursor:before{content:""}.ph.ph-cursor-click:before{content:""}.ph.ph-cursor-text:before{content:""}.ph.ph-cylinder:before{content:""}.ph.ph-database:before{content:""}.ph.ph-desk:before{content:""}.ph.ph-desktop:before{content:""}.ph.ph-desktop-tower:before{content:""}.ph.ph-detective:before{content:""}.ph.ph-dev-to-logo:before{content:""}.ph.ph-device-mobile:before{content:""}.ph.ph-device-mobile-camera:before{content:""}.ph.ph-device-mobile-slash:before{content:""}.ph.ph-device-mobile-speaker:before{content:""}.ph.ph-device-rotate:before{content:""}.ph.ph-device-tablet:before{content:""}.ph.ph-device-tablet-camera:before{content:""}.ph.ph-device-tablet-speaker:before{content:""}.ph.ph-devices:before{content:""}.ph.ph-diamond:before{content:""}.ph.ph-diamonds-four:before{content:""}.ph.ph-dice-five:before{content:""}.ph.ph-dice-four:before{content:""}.ph.ph-dice-one:before{content:""}.ph.ph-dice-six:before{content:""}.ph.ph-dice-three:before{content:""}.ph.ph-dice-two:before{content:""}.ph.ph-disc:before{content:""}.ph.ph-disco-ball:before{content:""}.ph.ph-discord-logo:before{content:""}.ph.ph-divide:before{content:""}.ph.ph-dna:before{content:""}.ph.ph-dog:before{content:""}.ph.ph-door:before{content:""}.ph.ph-door-open:before{content:""}.ph.ph-dot:before{content:""}.ph.ph-dot-outline:before{content:""}.ph.ph-dots-nine:before{content:""}.ph.ph-dots-six:before{content:""}.ph.ph-dots-six-vertical:before{content:""}.ph.ph-dots-three:before{content:""}.ph.ph-dots-three-circle:before{content:""}.ph.ph-dots-three-circle-vertical:before{content:""}.ph.ph-dots-three-outline:before{content:""}.ph.ph-dots-three-outline-vertical:before{content:""}.ph.ph-dots-three-vertical:before{content:""}.ph.ph-download:before{content:""}.ph.ph-download-simple:before{content:""}.ph.ph-dress:before{content:""}.ph.ph-dresser:before{content:""}.ph.ph-dribbble-logo:before{content:""}.ph.ph-drone:before{content:""}.ph.ph-drop:before{content:""}.ph.ph-drop-half:before{content:""}.ph.ph-drop-half-bottom:before{content:""}.ph.ph-drop-simple:before{content:""}.ph.ph-drop-slash:before{content:""}.ph.ph-dropbox-logo:before{content:""}.ph.ph-ear:before{content:""}.ph.ph-ear-slash:before{content:""}.ph.ph-egg:before{content:""}.ph.ph-egg-crack:before{content:""}.ph.ph-eject:before{content:""}.ph.ph-eject-simple:before{content:""}.ph.ph-elevator:before{content:""}.ph.ph-empty:before{content:""}.ph.ph-engine:before{content:""}.ph.ph-envelope:before{content:""}.ph.ph-envelope-open:before{content:""}.ph.ph-envelope-simple:before{content:""}.ph.ph-envelope-simple-open:before{content:""}.ph.ph-equalizer:before{content:""}.ph.ph-equals:before{content:""}.ph.ph-eraser:before{content:""}.ph.ph-escalator-down:before{content:""}.ph.ph-escalator-up:before{content:""}.ph.ph-exam:before{content:""}.ph.ph-exclamation-mark:before{content:""}.ph.ph-exclude:before{content:""}.ph.ph-exclude-square:before{content:""}.ph.ph-export:before{content:""}.ph.ph-eye:before{content:""}.ph.ph-eye-closed:before{content:""}.ph.ph-eye-slash:before{content:""}.ph.ph-eyedropper:before{content:""}.ph.ph-eyedropper-sample:before{content:""}.ph.ph-eyeglasses:before{content:""}.ph.ph-eyes:before{content:""}.ph.ph-face-mask:before{content:""}.ph.ph-facebook-logo:before{content:""}.ph.ph-factory:before{content:""}.ph.ph-faders:before{content:""}.ph.ph-faders-horizontal:before{content:""}.ph.ph-fallout-shelter:before{content:""}.ph.ph-fan:before{content:""}.ph.ph-farm:before{content:""}.ph.ph-fast-forward:before{content:""}.ph.ph-fast-forward-circle:before{content:""}.ph.ph-feather:before{content:""}.ph.ph-fediverse-logo:before{content:""}.ph.ph-figma-logo:before{content:""}.ph.ph-file:before{content:""}.ph.ph-file-archive:before{content:""}.ph.ph-file-arrow-down:before{content:""}.ph.ph-file-arrow-up:before{content:""}.ph.ph-file-audio:before{content:""}.ph.ph-file-c:before{content:""}.ph.ph-file-c-sharp:before{content:""}.ph.ph-file-cloud:before{content:""}.ph.ph-file-code:before{content:""}.ph.ph-file-cpp:before{content:""}.ph.ph-file-css:before{content:""}.ph.ph-file-csv:before{content:""}.ph.ph-file-dashed:before{content:""}.ph.ph-file-dotted:before{content:""}.ph.ph-file-doc:before{content:""}.ph.ph-file-html:before{content:""}.ph.ph-file-image:before{content:""}.ph.ph-file-ini:before{content:""}.ph.ph-file-jpg:before{content:""}.ph.ph-file-js:before{content:""}.ph.ph-file-jsx:before{content:""}.ph.ph-file-lock:before{content:""}.ph.ph-file-magnifying-glass:before{content:""}.ph.ph-file-search:before{content:""}.ph.ph-file-md:before{content:""}.ph.ph-file-minus:before{content:""}.ph.ph-file-pdf:before{content:""}.ph.ph-file-plus:before{content:""}.ph.ph-file-png:before{content:""}.ph.ph-file-ppt:before{content:""}.ph.ph-file-py:before{content:""}.ph.ph-file-rs:before{content:""}.ph.ph-file-sql:before{content:""}.ph.ph-file-svg:before{content:""}.ph.ph-file-text:before{content:""}.ph.ph-file-ts:before{content:""}.ph.ph-file-tsx:before{content:""}.ph.ph-file-txt:before{content:""}.ph.ph-file-video:before{content:""}.ph.ph-file-vue:before{content:""}.ph.ph-file-x:before{content:""}.ph.ph-file-xls:before{content:""}.ph.ph-file-zip:before{content:""}.ph.ph-files:before{content:""}.ph.ph-film-reel:before{content:""}.ph.ph-film-script:before{content:""}.ph.ph-film-slate:before{content:""}.ph.ph-film-strip:before{content:""}.ph.ph-fingerprint:before{content:""}.ph.ph-fingerprint-simple:before{content:""}.ph.ph-finn-the-human:before{content:""}.ph.ph-fire:before{content:""}.ph.ph-fire-extinguisher:before{content:""}.ph.ph-fire-simple:before{content:""}.ph.ph-fire-truck:before{content:""}.ph.ph-first-aid:before{content:""}.ph.ph-first-aid-kit:before{content:""}.ph.ph-fish:before{content:""}.ph.ph-fish-simple:before{content:""}.ph.ph-flag:before{content:""}.ph.ph-flag-banner:before{content:""}.ph.ph-flag-banner-fold:before{content:""}.ph.ph-flag-checkered:before{content:""}.ph.ph-flag-pennant:before{content:""}.ph.ph-flame:before{content:""}.ph.ph-flashlight:before{content:""}.ph.ph-flask:before{content:""}.ph.ph-flip-horizontal:before{content:""}.ph.ph-flip-vertical:before{content:""}.ph.ph-floppy-disk:before{content:""}.ph.ph-floppy-disk-back:before{content:""}.ph.ph-flow-arrow:before{content:""}.ph.ph-flower:before{content:""}.ph.ph-flower-lotus:before{content:""}.ph.ph-flower-tulip:before{content:""}.ph.ph-flying-saucer:before{content:""}.ph.ph-folder:before{content:""}.ph.ph-folder-notch:before{content:""}.ph.ph-folder-dashed:before{content:""}.ph.ph-folder-dotted:before{content:""}.ph.ph-folder-lock:before{content:""}.ph.ph-folder-minus:before{content:""}.ph.ph-folder-notch-minus:before{content:""}.ph.ph-folder-open:before{content:""}.ph.ph-folder-notch-open:before{content:""}.ph.ph-folder-plus:before{content:""}.ph.ph-folder-notch-plus:before{content:""}.ph.ph-folder-simple:before{content:""}.ph.ph-folder-simple-dashed:before{content:""}.ph.ph-folder-simple-dotted:before{content:""}.ph.ph-folder-simple-lock:before{content:""}.ph.ph-folder-simple-minus:before{content:""}.ph.ph-folder-simple-plus:before{content:""}.ph.ph-folder-simple-star:before{content:""}.ph.ph-folder-simple-user:before{content:""}.ph.ph-folder-star:before{content:""}.ph.ph-folder-user:before{content:""}.ph.ph-folders:before{content:""}.ph.ph-football:before{content:""}.ph.ph-football-helmet:before{content:""}.ph.ph-footprints:before{content:""}.ph.ph-fork-knife:before{content:""}.ph.ph-four-k:before{content:""}.ph.ph-frame-corners:before{content:""}.ph.ph-framer-logo:before{content:""}.ph.ph-function:before{content:""}.ph.ph-funnel:before{content:""}.ph.ph-funnel-simple:before{content:""}.ph.ph-funnel-simple-x:before{content:""}.ph.ph-funnel-x:before{content:""}.ph.ph-game-controller:before{content:""}.ph.ph-garage:before{content:""}.ph.ph-gas-can:before{content:""}.ph.ph-gas-pump:before{content:""}.ph.ph-gauge:before{content:""}.ph.ph-gavel:before{content:""}.ph.ph-gear:before{content:""}.ph.ph-gear-fine:before{content:""}.ph.ph-gear-six:before{content:""}.ph.ph-gender-female:before{content:""}.ph.ph-gender-intersex:before{content:""}.ph.ph-gender-male:before{content:""}.ph.ph-gender-neuter:before{content:""}.ph.ph-gender-nonbinary:before{content:""}.ph.ph-gender-transgender:before{content:""}.ph.ph-ghost:before{content:""}.ph.ph-gif:before{content:""}.ph.ph-gift:before{content:""}.ph.ph-git-branch:before{content:""}.ph.ph-git-commit:before{content:""}.ph.ph-git-diff:before{content:""}.ph.ph-git-fork:before{content:""}.ph.ph-git-merge:before{content:""}.ph.ph-git-pull-request:before{content:""}.ph.ph-github-logo:before{content:""}.ph.ph-gitlab-logo:before{content:""}.ph.ph-gitlab-logo-simple:before{content:""}.ph.ph-globe:before{content:""}.ph.ph-globe-hemisphere-east:before{content:""}.ph.ph-globe-hemisphere-west:before{content:""}.ph.ph-globe-simple:before{content:""}.ph.ph-globe-simple-x:before{content:""}.ph.ph-globe-stand:before{content:""}.ph.ph-globe-x:before{content:""}.ph.ph-goggles:before{content:""}.ph.ph-golf:before{content:""}.ph.ph-goodreads-logo:before{content:""}.ph.ph-google-cardboard-logo:before{content:""}.ph.ph-google-chrome-logo:before{content:""}.ph.ph-google-drive-logo:before{content:""}.ph.ph-google-logo:before{content:""}.ph.ph-google-photos-logo:before{content:""}.ph.ph-google-play-logo:before{content:""}.ph.ph-google-podcasts-logo:before{content:""}.ph.ph-gps:before{content:""}.ph.ph-gps-fix:before{content:""}.ph.ph-gps-slash:before{content:""}.ph.ph-gradient:before{content:""}.ph.ph-graduation-cap:before{content:""}.ph.ph-grains:before{content:""}.ph.ph-grains-slash:before{content:""}.ph.ph-graph:before{content:""}.ph.ph-graphics-card:before{content:""}.ph.ph-greater-than:before{content:""}.ph.ph-greater-than-or-equal:before{content:""}.ph.ph-grid-four:before{content:""}.ph.ph-grid-nine:before{content:""}.ph.ph-guitar:before{content:""}.ph.ph-hair-dryer:before{content:""}.ph.ph-hamburger:before{content:""}.ph.ph-hammer:before{content:""}.ph.ph-hand:before{content:""}.ph.ph-hand-arrow-down:before{content:""}.ph.ph-hand-arrow-up:before{content:""}.ph.ph-hand-coins:before{content:""}.ph.ph-hand-deposit:before{content:""}.ph.ph-hand-eye:before{content:""}.ph.ph-hand-fist:before{content:""}.ph.ph-hand-grabbing:before{content:""}.ph.ph-hand-heart:before{content:""}.ph.ph-hand-palm:before{content:""}.ph.ph-hand-peace:before{content:""}.ph.ph-hand-pointing:before{content:""}.ph.ph-hand-soap:before{content:""}.ph.ph-hand-swipe-left:before{content:""}.ph.ph-hand-swipe-right:before{content:""}.ph.ph-hand-tap:before{content:""}.ph.ph-hand-waving:before{content:""}.ph.ph-hand-withdraw:before{content:""}.ph.ph-handbag:before{content:""}.ph.ph-handbag-simple:before{content:""}.ph.ph-hands-clapping:before{content:""}.ph.ph-hands-praying:before{content:""}.ph.ph-handshake:before{content:""}.ph.ph-hard-drive:before{content:""}.ph.ph-hard-drives:before{content:""}.ph.ph-hard-hat:before{content:""}.ph.ph-hash:before{content:""}.ph.ph-hash-straight:before{content:""}.ph.ph-head-circuit:before{content:""}.ph.ph-headlights:before{content:""}.ph.ph-headphones:before{content:""}.ph.ph-headset:before{content:""}.ph.ph-heart:before{content:""}.ph.ph-heart-break:before{content:""}.ph.ph-heart-half:before{content:""}.ph.ph-heart-straight:before{content:""}.ph.ph-heart-straight-break:before{content:""}.ph.ph-heartbeat:before{content:""}.ph.ph-hexagon:before{content:""}.ph.ph-high-definition:before{content:""}.ph.ph-high-heel:before{content:""}.ph.ph-highlighter:before{content:""}.ph.ph-highlighter-circle:before{content:""}.ph.ph-hockey:before{content:""}.ph.ph-hoodie:before{content:""}.ph.ph-horse:before{content:""}.ph.ph-hospital:before{content:""}.ph.ph-hourglass:before{content:""}.ph.ph-hourglass-high:before{content:""}.ph.ph-hourglass-low:before{content:""}.ph.ph-hourglass-medium:before{content:""}.ph.ph-hourglass-simple:before{content:""}.ph.ph-hourglass-simple-high:before{content:""}.ph.ph-hourglass-simple-low:before{content:""}.ph.ph-hourglass-simple-medium:before{content:""}.ph.ph-house:before{content:""}.ph.ph-house-line:before{content:""}.ph.ph-house-simple:before{content:""}.ph.ph-hurricane:before{content:""}.ph.ph-ice-cream:before{content:""}.ph.ph-identification-badge:before{content:""}.ph.ph-identification-card:before{content:""}.ph.ph-image:before{content:""}.ph.ph-image-broken:before{content:""}.ph.ph-image-square:before{content:""}.ph.ph-images:before{content:""}.ph.ph-images-square:before{content:""}.ph.ph-infinity:before{content:""}.ph.ph-lemniscate:before{content:""}.ph.ph-info:before{content:""}.ph.ph-instagram-logo:before{content:""}.ph.ph-intersect:before{content:""}.ph.ph-intersect-square:before{content:""}.ph.ph-intersect-three:before{content:""}.ph.ph-intersection:before{content:""}.ph.ph-invoice:before{content:""}.ph.ph-island:before{content:""}.ph.ph-jar:before{content:""}.ph.ph-jar-label:before{content:""}.ph.ph-jeep:before{content:""}.ph.ph-joystick:before{content:""}.ph.ph-kanban:before{content:""}.ph.ph-key:before{content:""}.ph.ph-key-return:before{content:""}.ph.ph-keyboard:before{content:""}.ph.ph-keyhole:before{content:""}.ph.ph-knife:before{content:""}.ph.ph-ladder:before{content:""}.ph.ph-ladder-simple:before{content:""}.ph.ph-lamp:before{content:""}.ph.ph-lamp-pendant:before{content:""}.ph.ph-laptop:before{content:""}.ph.ph-lasso:before{content:""}.ph.ph-lastfm-logo:before{content:""}.ph.ph-layout:before{content:""}.ph.ph-leaf:before{content:""}.ph.ph-lectern:before{content:""}.ph.ph-lego:before{content:""}.ph.ph-lego-smiley:before{content:""}.ph.ph-less-than:before{content:""}.ph.ph-less-than-or-equal:before{content:""}.ph.ph-letter-circle-h:before{content:""}.ph.ph-letter-circle-p:before{content:""}.ph.ph-letter-circle-v:before{content:""}.ph.ph-lifebuoy:before{content:""}.ph.ph-lightbulb:before{content:""}.ph.ph-lightbulb-filament:before{content:""}.ph.ph-lighthouse:before{content:""}.ph.ph-lightning:before{content:""}.ph.ph-lightning-a:before{content:""}.ph.ph-lightning-slash:before{content:""}.ph.ph-line-segment:before{content:""}.ph.ph-line-segments:before{content:""}.ph.ph-line-vertical:before{content:""}.ph.ph-link:before{content:""}.ph.ph-link-break:before{content:""}.ph.ph-link-simple:before{content:""}.ph.ph-link-simple-break:before{content:""}.ph.ph-link-simple-horizontal:before{content:""}.ph.ph-link-simple-horizontal-break:before{content:""}.ph.ph-linkedin-logo:before{content:""}.ph.ph-linktree-logo:before{content:""}.ph.ph-linux-logo:before{content:""}.ph.ph-list:before{content:""}.ph.ph-list-bullets:before{content:""}.ph.ph-list-checks:before{content:""}.ph.ph-list-dashes:before{content:""}.ph.ph-list-heart:before{content:""}.ph.ph-list-magnifying-glass:before{content:""}.ph.ph-list-numbers:before{content:""}.ph.ph-list-plus:before{content:""}.ph.ph-list-star:before{content:""}.ph.ph-lock:before{content:""}.ph.ph-lock-key:before{content:""}.ph.ph-lock-key-open:before{content:""}.ph.ph-lock-laminated:before{content:""}.ph.ph-lock-laminated-open:before{content:""}.ph.ph-lock-open:before{content:""}.ph.ph-lock-simple:before{content:""}.ph.ph-lock-simple-open:before{content:""}.ph.ph-lockers:before{content:""}.ph.ph-log:before{content:""}.ph.ph-magic-wand:before{content:""}.ph.ph-magnet:before{content:""}.ph.ph-magnet-straight:before{content:""}.ph.ph-magnifying-glass:before{content:""}.ph.ph-magnifying-glass-minus:before{content:""}.ph.ph-magnifying-glass-plus:before{content:""}.ph.ph-mailbox:before{content:""}.ph.ph-map-pin:before{content:""}.ph.ph-map-pin-area:before{content:""}.ph.ph-map-pin-line:before{content:""}.ph.ph-map-pin-plus:before{content:""}.ph.ph-map-pin-simple:before{content:""}.ph.ph-map-pin-simple-area:before{content:""}.ph.ph-map-pin-simple-line:before{content:""}.ph.ph-map-trifold:before{content:""}.ph.ph-markdown-logo:before{content:""}.ph.ph-marker-circle:before{content:""}.ph.ph-martini:before{content:""}.ph.ph-mask-happy:before{content:""}.ph.ph-mask-sad:before{content:""}.ph.ph-mastodon-logo:before{content:""}.ph.ph-math-operations:before{content:""}.ph.ph-matrix-logo:before{content:""}.ph.ph-medal:before{content:""}.ph.ph-medal-military:before{content:""}.ph.ph-medium-logo:before{content:""}.ph.ph-megaphone:before{content:""}.ph.ph-megaphone-simple:before{content:""}.ph.ph-member-of:before{content:""}.ph.ph-memory:before{content:""}.ph.ph-messenger-logo:before{content:""}.ph.ph-meta-logo:before{content:""}.ph.ph-meteor:before{content:""}.ph.ph-metronome:before{content:""}.ph.ph-microphone:before{content:""}.ph.ph-microphone-slash:before{content:""}.ph.ph-microphone-stage:before{content:""}.ph.ph-microscope:before{content:""}.ph.ph-microsoft-excel-logo:before{content:""}.ph.ph-microsoft-outlook-logo:before{content:""}.ph.ph-microsoft-powerpoint-logo:before{content:""}.ph.ph-microsoft-teams-logo:before{content:""}.ph.ph-microsoft-word-logo:before{content:""}.ph.ph-minus:before{content:""}.ph.ph-minus-circle:before{content:""}.ph.ph-minus-square:before{content:""}.ph.ph-money:before{content:""}.ph.ph-money-wavy:before{content:""}.ph.ph-monitor:before{content:""}.ph.ph-monitor-arrow-up:before{content:""}.ph.ph-monitor-play:before{content:""}.ph.ph-moon:before{content:""}.ph.ph-moon-stars:before{content:""}.ph.ph-moped:before{content:""}.ph.ph-moped-front:before{content:""}.ph.ph-mosque:before{content:""}.ph.ph-motorcycle:before{content:""}.ph.ph-mountains:before{content:""}.ph.ph-mouse:before{content:""}.ph.ph-mouse-left-click:before{content:""}.ph.ph-mouse-middle-click:before{content:""}.ph.ph-mouse-right-click:before{content:""}.ph.ph-mouse-scroll:before{content:""}.ph.ph-mouse-simple:before{content:""}.ph.ph-music-note:before{content:""}.ph.ph-music-note-simple:before{content:""}.ph.ph-music-notes:before{content:""}.ph.ph-music-notes-minus:before{content:""}.ph.ph-music-notes-plus:before{content:""}.ph.ph-music-notes-simple:before{content:""}.ph.ph-navigation-arrow:before{content:""}.ph.ph-needle:before{content:""}.ph.ph-network:before{content:""}.ph.ph-network-slash:before{content:""}.ph.ph-network-x:before{content:""}.ph.ph-newspaper:before{content:""}.ph.ph-newspaper-clipping:before{content:""}.ph.ph-not-equals:before{content:""}.ph.ph-not-member-of:before{content:""}.ph.ph-not-subset-of:before{content:""}.ph.ph-not-superset-of:before{content:""}.ph.ph-notches:before{content:""}.ph.ph-note:before{content:""}.ph.ph-note-blank:before{content:""}.ph.ph-note-pencil:before{content:""}.ph.ph-notebook:before{content:""}.ph.ph-notepad:before{content:""}.ph.ph-notification:before{content:""}.ph.ph-notion-logo:before{content:""}.ph.ph-nuclear-plant:before{content:""}.ph.ph-number-circle-eight:before{content:""}.ph.ph-number-circle-five:before{content:""}.ph.ph-number-circle-four:before{content:""}.ph.ph-number-circle-nine:before{content:""}.ph.ph-number-circle-one:before{content:""}.ph.ph-number-circle-seven:before{content:""}.ph.ph-number-circle-six:before{content:""}.ph.ph-number-circle-three:before{content:""}.ph.ph-number-circle-two:before{content:""}.ph.ph-number-circle-zero:before{content:""}.ph.ph-number-eight:before{content:""}.ph.ph-number-five:before{content:""}.ph.ph-number-four:before{content:""}.ph.ph-number-nine:before{content:""}.ph.ph-number-one:before{content:""}.ph.ph-number-seven:before{content:""}.ph.ph-number-six:before{content:""}.ph.ph-number-square-eight:before{content:""}.ph.ph-number-square-five:before{content:""}.ph.ph-number-square-four:before{content:""}.ph.ph-number-square-nine:before{content:""}.ph.ph-number-square-one:before{content:""}.ph.ph-number-square-seven:before{content:""}.ph.ph-number-square-six:before{content:""}.ph.ph-number-square-three:before{content:""}.ph.ph-number-square-two:before{content:""}.ph.ph-number-square-zero:before{content:""}.ph.ph-number-three:before{content:""}.ph.ph-number-two:before{content:""}.ph.ph-number-zero:before{content:""}.ph.ph-numpad:before{content:""}.ph.ph-nut:before{content:""}.ph.ph-ny-times-logo:before{content:""}.ph.ph-octagon:before{content:""}.ph.ph-office-chair:before{content:""}.ph.ph-onigiri:before{content:""}.ph.ph-open-ai-logo:before{content:""}.ph.ph-option:before{content:""}.ph.ph-orange:before{content:""}.ph.ph-orange-slice:before{content:""}.ph.ph-oven:before{content:""}.ph.ph-package:before{content:""}.ph.ph-paint-brush:before{content:""}.ph.ph-paint-brush-broad:before{content:""}.ph.ph-paint-brush-household:before{content:""}.ph.ph-paint-bucket:before{content:""}.ph.ph-paint-roller:before{content:""}.ph.ph-palette:before{content:""}.ph.ph-panorama:before{content:""}.ph.ph-pants:before{content:""}.ph.ph-paper-plane:before{content:""}.ph.ph-paper-plane-right:before{content:""}.ph.ph-paper-plane-tilt:before{content:""}.ph.ph-paperclip:before{content:""}.ph.ph-paperclip-horizontal:before{content:""}.ph.ph-parachute:before{content:""}.ph.ph-paragraph:before{content:""}.ph.ph-parallelogram:before{content:""}.ph.ph-park:before{content:""}.ph.ph-password:before{content:""}.ph.ph-path:before{content:""}.ph.ph-patreon-logo:before{content:""}.ph.ph-pause:before{content:""}.ph.ph-pause-circle:before{content:""}.ph.ph-paw-print:before{content:""}.ph.ph-paypal-logo:before{content:""}.ph.ph-peace:before{content:""}.ph.ph-pen:before{content:""}.ph.ph-pen-nib:before{content:""}.ph.ph-pen-nib-straight:before{content:""}.ph.ph-pencil:before{content:""}.ph.ph-pencil-circle:before{content:""}.ph.ph-pencil-line:before{content:""}.ph.ph-pencil-ruler:before{content:""}.ph.ph-pencil-simple:before{content:""}.ph.ph-pencil-simple-line:before{content:""}.ph.ph-pencil-simple-slash:before{content:""}.ph.ph-pencil-slash:before{content:""}.ph.ph-pentagon:before{content:""}.ph.ph-pentagram:before{content:""}.ph.ph-pepper:before{content:""}.ph.ph-percent:before{content:""}.ph.ph-person:before{content:""}.ph.ph-person-arms-spread:before{content:""}.ph.ph-person-simple:before{content:""}.ph.ph-person-simple-bike:before{content:""}.ph.ph-person-simple-circle:before{content:""}.ph.ph-person-simple-hike:before{content:""}.ph.ph-person-simple-run:before{content:""}.ph.ph-person-simple-ski:before{content:""}.ph.ph-person-simple-snowboard:before{content:""}.ph.ph-person-simple-swim:before{content:""}.ph.ph-person-simple-tai-chi:before{content:""}.ph.ph-person-simple-throw:before{content:""}.ph.ph-person-simple-walk:before{content:""}.ph.ph-perspective:before{content:""}.ph.ph-phone:before{content:""}.ph.ph-phone-call:before{content:""}.ph.ph-phone-disconnect:before{content:""}.ph.ph-phone-incoming:before{content:""}.ph.ph-phone-list:before{content:""}.ph.ph-phone-outgoing:before{content:""}.ph.ph-phone-pause:before{content:""}.ph.ph-phone-plus:before{content:""}.ph.ph-phone-slash:before{content:""}.ph.ph-phone-transfer:before{content:""}.ph.ph-phone-x:before{content:""}.ph.ph-phosphor-logo:before{content:""}.ph.ph-pi:before{content:""}.ph.ph-piano-keys:before{content:""}.ph.ph-picnic-table:before{content:""}.ph.ph-picture-in-picture:before{content:""}.ph.ph-piggy-bank:before{content:""}.ph.ph-pill:before{content:""}.ph.ph-ping-pong:before{content:""}.ph.ph-pint-glass:before{content:""}.ph.ph-pinterest-logo:before{content:""}.ph.ph-pinwheel:before{content:""}.ph.ph-pipe:before{content:""}.ph.ph-pipe-wrench:before{content:""}.ph.ph-pix-logo:before{content:""}.ph.ph-pizza:before{content:""}.ph.ph-placeholder:before{content:""}.ph.ph-planet:before{content:""}.ph.ph-plant:before{content:""}.ph.ph-play:before{content:""}.ph.ph-play-circle:before{content:""}.ph.ph-play-pause:before{content:""}.ph.ph-playlist:before{content:""}.ph.ph-plug:before{content:""}.ph.ph-plug-charging:before{content:""}.ph.ph-plugs:before{content:""}.ph.ph-plugs-connected:before{content:""}.ph.ph-plus:before{content:""}.ph.ph-plus-circle:before{content:""}.ph.ph-plus-minus:before{content:""}.ph.ph-plus-square:before{content:""}.ph.ph-poker-chip:before{content:""}.ph.ph-police-car:before{content:""}.ph.ph-polygon:before{content:""}.ph.ph-popcorn:before{content:""}.ph.ph-popsicle:before{content:""}.ph.ph-potted-plant:before{content:""}.ph.ph-power:before{content:""}.ph.ph-prescription:before{content:""}.ph.ph-presentation:before{content:""}.ph.ph-presentation-chart:before{content:""}.ph.ph-printer:before{content:""}.ph.ph-prohibit:before{content:""}.ph.ph-prohibit-inset:before{content:""}.ph.ph-projector-screen:before{content:""}.ph.ph-projector-screen-chart:before{content:""}.ph.ph-pulse:before{content:""}.ph.ph-activity:before{content:""}.ph.ph-push-pin:before{content:""}.ph.ph-push-pin-simple:before{content:""}.ph.ph-push-pin-simple-slash:before{content:""}.ph.ph-push-pin-slash:before{content:""}.ph.ph-puzzle-piece:before{content:""}.ph.ph-qr-code:before{content:""}.ph.ph-question:before{content:""}.ph.ph-question-mark:before{content:""}.ph.ph-queue:before{content:""}.ph.ph-quotes:before{content:""}.ph.ph-rabbit:before{content:""}.ph.ph-racquet:before{content:""}.ph.ph-radical:before{content:""}.ph.ph-radio:before{content:""}.ph.ph-radio-button:before{content:""}.ph.ph-radioactive:before{content:""}.ph.ph-rainbow:before{content:""}.ph.ph-rainbow-cloud:before{content:""}.ph.ph-ranking:before{content:""}.ph.ph-read-cv-logo:before{content:""}.ph.ph-receipt:before{content:""}.ph.ph-receipt-x:before{content:""}.ph.ph-record:before{content:""}.ph.ph-rectangle:before{content:""}.ph.ph-rectangle-dashed:before{content:""}.ph.ph-recycle:before{content:""}.ph.ph-reddit-logo:before{content:""}.ph.ph-repeat:before{content:""}.ph.ph-repeat-once:before{content:""}.ph.ph-replit-logo:before{content:""}.ph.ph-resize:before{content:""}.ph.ph-rewind:before{content:""}.ph.ph-rewind-circle:before{content:""}.ph.ph-road-horizon:before{content:""}.ph.ph-robot:before{content:""}.ph.ph-rocket:before{content:""}.ph.ph-rocket-launch:before{content:""}.ph.ph-rows:before{content:""}.ph.ph-rows-plus-bottom:before{content:""}.ph.ph-rows-plus-top:before{content:""}.ph.ph-rss:before{content:""}.ph.ph-rss-simple:before{content:""}.ph.ph-rug:before{content:""}.ph.ph-ruler:before{content:""}.ph.ph-sailboat:before{content:""}.ph.ph-scales:before{content:""}.ph.ph-scan:before{content:""}.ph.ph-scan-smiley:before{content:""}.ph.ph-scissors:before{content:""}.ph.ph-scooter:before{content:""}.ph.ph-screencast:before{content:""}.ph.ph-screwdriver:before{content:""}.ph.ph-scribble:before{content:""}.ph.ph-scribble-loop:before{content:""}.ph.ph-scroll:before{content:""}.ph.ph-seal:before{content:""}.ph.ph-circle-wavy:before{content:""}.ph.ph-seal-check:before{content:""}.ph.ph-circle-wavy-check:before{content:""}.ph.ph-seal-percent:before{content:""}.ph.ph-seal-question:before{content:""}.ph.ph-circle-wavy-question:before{content:""}.ph.ph-seal-warning:before{content:""}.ph.ph-circle-wavy-warning:before{content:""}.ph.ph-seat:before{content:""}.ph.ph-seatbelt:before{content:""}.ph.ph-security-camera:before{content:""}.ph.ph-selection:before{content:""}.ph.ph-selection-all:before{content:""}.ph.ph-selection-background:before{content:""}.ph.ph-selection-foreground:before{content:""}.ph.ph-selection-inverse:before{content:""}.ph.ph-selection-plus:before{content:""}.ph.ph-selection-slash:before{content:""}.ph.ph-shapes:before{content:""}.ph.ph-share:before{content:""}.ph.ph-share-fat:before{content:""}.ph.ph-share-network:before{content:""}.ph.ph-shield:before{content:""}.ph.ph-shield-check:before{content:""}.ph.ph-shield-checkered:before{content:""}.ph.ph-shield-chevron:before{content:""}.ph.ph-shield-plus:before{content:""}.ph.ph-shield-slash:before{content:""}.ph.ph-shield-star:before{content:""}.ph.ph-shield-warning:before{content:""}.ph.ph-shipping-container:before{content:""}.ph.ph-shirt-folded:before{content:""}.ph.ph-shooting-star:before{content:""}.ph.ph-shopping-bag:before{content:""}.ph.ph-shopping-bag-open:before{content:""}.ph.ph-shopping-cart:before{content:""}.ph.ph-shopping-cart-simple:before{content:""}.ph.ph-shovel:before{content:""}.ph.ph-shower:before{content:""}.ph.ph-shrimp:before{content:""}.ph.ph-shuffle:before{content:""}.ph.ph-shuffle-angular:before{content:""}.ph.ph-shuffle-simple:before{content:""}.ph.ph-sidebar:before{content:""}.ph.ph-sidebar-simple:before{content:""}.ph.ph-sigma:before{content:""}.ph.ph-sign-in:before{content:""}.ph.ph-sign-out:before{content:""}.ph.ph-signature:before{content:""}.ph.ph-signpost:before{content:""}.ph.ph-sim-card:before{content:""}.ph.ph-siren:before{content:""}.ph.ph-sketch-logo:before{content:""}.ph.ph-skip-back:before{content:""}.ph.ph-skip-back-circle:before{content:""}.ph.ph-skip-forward:before{content:""}.ph.ph-skip-forward-circle:before{content:""}.ph.ph-skull:before{content:""}.ph.ph-skype-logo:before{content:""}.ph.ph-slack-logo:before{content:""}.ph.ph-sliders:before{content:""}.ph.ph-sliders-horizontal:before{content:""}.ph.ph-slideshow:before{content:""}.ph.ph-smiley:before{content:""}.ph.ph-smiley-angry:before{content:""}.ph.ph-smiley-blank:before{content:""}.ph.ph-smiley-meh:before{content:""}.ph.ph-smiley-melting:before{content:""}.ph.ph-smiley-nervous:before{content:""}.ph.ph-smiley-sad:before{content:""}.ph.ph-smiley-sticker:before{content:""}.ph.ph-smiley-wink:before{content:""}.ph.ph-smiley-x-eyes:before{content:""}.ph.ph-snapchat-logo:before{content:""}.ph.ph-sneaker:before{content:""}.ph.ph-sneaker-move:before{content:""}.ph.ph-snowflake:before{content:""}.ph.ph-soccer-ball:before{content:""}.ph.ph-sock:before{content:""}.ph.ph-solar-panel:before{content:""}.ph.ph-solar-roof:before{content:""}.ph.ph-sort-ascending:before{content:""}.ph.ph-sort-descending:before{content:""}.ph.ph-soundcloud-logo:before{content:""}.ph.ph-spade:before{content:""}.ph.ph-sparkle:before{content:""}.ph.ph-speaker-hifi:before{content:""}.ph.ph-speaker-high:before{content:""}.ph.ph-speaker-low:before{content:""}.ph.ph-speaker-none:before{content:""}.ph.ph-speaker-simple-high:before{content:""}.ph.ph-speaker-simple-low:before{content:""}.ph.ph-speaker-simple-none:before{content:""}.ph.ph-speaker-simple-slash:before{content:""}.ph.ph-speaker-simple-x:before{content:""}.ph.ph-speaker-slash:before{content:""}.ph.ph-speaker-x:before{content:""}.ph.ph-speedometer:before{content:""}.ph.ph-sphere:before{content:""}.ph.ph-spinner:before{content:""}.ph.ph-spinner-ball:before{content:""}.ph.ph-spinner-gap:before{content:""}.ph.ph-spiral:before{content:""}.ph.ph-split-horizontal:before{content:""}.ph.ph-split-vertical:before{content:""}.ph.ph-spotify-logo:before{content:""}.ph.ph-spray-bottle:before{content:""}.ph.ph-square:before{content:""}.ph.ph-square-half:before{content:""}.ph.ph-square-half-bottom:before{content:""}.ph.ph-square-logo:before{content:""}.ph.ph-square-split-horizontal:before{content:""}.ph.ph-square-split-vertical:before{content:""}.ph.ph-squares-four:before{content:""}.ph.ph-stack:before{content:""}.ph.ph-stack-minus:before{content:""}.ph.ph-stack-overflow-logo:before{content:""}.ph.ph-stack-plus:before{content:""}.ph.ph-stack-simple:before{content:""}.ph.ph-stairs:before{content:""}.ph.ph-stamp:before{content:""}.ph.ph-standard-definition:before{content:""}.ph.ph-star:before{content:""}.ph.ph-star-and-crescent:before{content:""}.ph.ph-star-four:before{content:""}.ph.ph-star-half:before{content:""}.ph.ph-star-of-david:before{content:""}.ph.ph-steam-logo:before{content:""}.ph.ph-steering-wheel:before{content:""}.ph.ph-steps:before{content:""}.ph.ph-stethoscope:before{content:""}.ph.ph-sticker:before{content:""}.ph.ph-stool:before{content:""}.ph.ph-stop:before{content:""}.ph.ph-stop-circle:before{content:""}.ph.ph-storefront:before{content:""}.ph.ph-strategy:before{content:""}.ph.ph-stripe-logo:before{content:""}.ph.ph-student:before{content:""}.ph.ph-subset-of:before{content:""}.ph.ph-subset-proper-of:before{content:""}.ph.ph-subtitles:before{content:""}.ph.ph-subtitles-slash:before{content:""}.ph.ph-subtract:before{content:""}.ph.ph-subtract-square:before{content:""}.ph.ph-subway:before{content:""}.ph.ph-suitcase:before{content:""}.ph.ph-suitcase-rolling:before{content:""}.ph.ph-suitcase-simple:before{content:""}.ph.ph-sun:before{content:""}.ph.ph-sun-dim:before{content:""}.ph.ph-sun-horizon:before{content:""}.ph.ph-sunglasses:before{content:""}.ph.ph-superset-of:before{content:""}.ph.ph-superset-proper-of:before{content:""}.ph.ph-swap:before{content:""}.ph.ph-swatches:before{content:""}.ph.ph-swimming-pool:before{content:""}.ph.ph-sword:before{content:""}.ph.ph-synagogue:before{content:""}.ph.ph-syringe:before{content:""}.ph.ph-t-shirt:before{content:""}.ph.ph-table:before{content:""}.ph.ph-tabs:before{content:""}.ph.ph-tag:before{content:""}.ph.ph-tag-chevron:before{content:""}.ph.ph-tag-simple:before{content:""}.ph.ph-target:before{content:""}.ph.ph-taxi:before{content:""}.ph.ph-tea-bag:before{content:""}.ph.ph-telegram-logo:before{content:""}.ph.ph-television:before{content:""}.ph.ph-television-simple:before{content:""}.ph.ph-tennis-ball:before{content:""}.ph.ph-tent:before{content:""}.ph.ph-terminal:before{content:""}.ph.ph-terminal-window:before{content:""}.ph.ph-test-tube:before{content:""}.ph.ph-text-a-underline:before{content:""}.ph.ph-text-aa:before{content:""}.ph.ph-text-align-center:before{content:""}.ph.ph-text-align-justify:before{content:""}.ph.ph-text-align-left:before{content:""}.ph.ph-text-align-right:before{content:""}.ph.ph-text-b:before{content:""}.ph.ph-text-bolder:before{content:""}.ph.ph-text-columns:before{content:""}.ph.ph-text-h:before{content:""}.ph.ph-text-h-five:before{content:""}.ph.ph-text-h-four:before{content:""}.ph.ph-text-h-one:before{content:""}.ph.ph-text-h-six:before{content:""}.ph.ph-text-h-three:before{content:""}.ph.ph-text-h-two:before{content:""}.ph.ph-text-indent:before{content:""}.ph.ph-text-italic:before{content:""}.ph.ph-text-outdent:before{content:""}.ph.ph-text-strikethrough:before{content:""}.ph.ph-text-subscript:before{content:""}.ph.ph-text-superscript:before{content:""}.ph.ph-text-t:before{content:""}.ph.ph-text-t-slash:before{content:""}.ph.ph-text-underline:before{content:""}.ph.ph-textbox:before{content:""}.ph.ph-thermometer:before{content:""}.ph.ph-thermometer-cold:before{content:""}.ph.ph-thermometer-hot:before{content:""}.ph.ph-thermometer-simple:before{content:""}.ph.ph-threads-logo:before{content:""}.ph.ph-three-d:before{content:""}.ph.ph-thumbs-down:before{content:""}.ph.ph-thumbs-up:before{content:""}.ph.ph-ticket:before{content:""}.ph.ph-tidal-logo:before{content:""}.ph.ph-tiktok-logo:before{content:""}.ph.ph-tilde:before{content:""}.ph.ph-timer:before{content:""}.ph.ph-tip-jar:before{content:""}.ph.ph-tipi:before{content:""}.ph.ph-tire:before{content:""}.ph.ph-toggle-left:before{content:""}.ph.ph-toggle-right:before{content:""}.ph.ph-toilet:before{content:""}.ph.ph-toilet-paper:before{content:""}.ph.ph-toolbox:before{content:""}.ph.ph-tooth:before{content:""}.ph.ph-tornado:before{content:""}.ph.ph-tote:before{content:""}.ph.ph-tote-simple:before{content:""}.ph.ph-towel:before{content:""}.ph.ph-tractor:before{content:""}.ph.ph-trademark:before{content:""}.ph.ph-trademark-registered:before{content:""}.ph.ph-traffic-cone:before{content:""}.ph.ph-traffic-sign:before{content:""}.ph.ph-traffic-signal:before{content:""}.ph.ph-train:before{content:""}.ph.ph-train-regional:before{content:""}.ph.ph-train-simple:before{content:""}.ph.ph-tram:before{content:""}.ph.ph-translate:before{content:""}.ph.ph-trash:before{content:""}.ph.ph-trash-simple:before{content:""}.ph.ph-tray:before{content:""}.ph.ph-tray-arrow-down:before{content:""}.ph.ph-archive-tray:before{content:""}.ph.ph-tray-arrow-up:before{content:""}.ph.ph-treasure-chest:before{content:""}.ph.ph-tree:before{content:""}.ph.ph-tree-evergreen:before{content:""}.ph.ph-tree-palm:before{content:""}.ph.ph-tree-structure:before{content:""}.ph.ph-tree-view:before{content:""}.ph.ph-trend-down:before{content:""}.ph.ph-trend-up:before{content:""}.ph.ph-triangle:before{content:""}.ph.ph-triangle-dashed:before{content:""}.ph.ph-trolley:before{content:""}.ph.ph-trolley-suitcase:before{content:""}.ph.ph-trophy:before{content:""}.ph.ph-truck:before{content:""}.ph.ph-truck-trailer:before{content:""}.ph.ph-tumblr-logo:before{content:""}.ph.ph-twitch-logo:before{content:""}.ph.ph-twitter-logo:before{content:""}.ph.ph-umbrella:before{content:""}.ph.ph-umbrella-simple:before{content:""}.ph.ph-union:before{content:""}.ph.ph-unite:before{content:""}.ph.ph-unite-square:before{content:""}.ph.ph-upload:before{content:""}.ph.ph-upload-simple:before{content:""}.ph.ph-usb:before{content:""}.ph.ph-user:before{content:""}.ph.ph-user-check:before{content:""}.ph.ph-user-circle:before{content:""}.ph.ph-user-circle-check:before{content:""}.ph.ph-user-circle-dashed:before{content:""}.ph.ph-user-circle-gear:before{content:""}.ph.ph-user-circle-minus:before{content:""}.ph.ph-user-circle-plus:before{content:""}.ph.ph-user-focus:before{content:""}.ph.ph-user-gear:before{content:""}.ph.ph-user-list:before{content:""}.ph.ph-user-minus:before{content:""}.ph.ph-user-plus:before{content:""}.ph.ph-user-rectangle:before{content:""}.ph.ph-user-sound:before{content:""}.ph.ph-user-square:before{content:""}.ph.ph-user-switch:before{content:""}.ph.ph-users:before{content:""}.ph.ph-users-four:before{content:""}.ph.ph-users-three:before{content:""}.ph.ph-van:before{content:""}.ph.ph-vault:before{content:""}.ph.ph-vector-three:before{content:""}.ph.ph-vector-two:before{content:""}.ph.ph-vibrate:before{content:""}.ph.ph-video:before{content:""}.ph.ph-video-camera:before{content:""}.ph.ph-video-camera-slash:before{content:""}.ph.ph-video-conference:before{content:""}.ph.ph-vignette:before{content:""}.ph.ph-vinyl-record:before{content:""}.ph.ph-virtual-reality:before{content:""}.ph.ph-virus:before{content:""}.ph.ph-visor:before{content:""}.ph.ph-voicemail:before{content:""}.ph.ph-volleyball:before{content:""}.ph.ph-wall:before{content:""}.ph.ph-wallet:before{content:""}.ph.ph-warehouse:before{content:""}.ph.ph-warning:before{content:""}.ph.ph-warning-circle:before{content:""}.ph.ph-warning-diamond:before{content:""}.ph.ph-warning-octagon:before{content:""}.ph.ph-washing-machine:before{content:""}.ph.ph-watch:before{content:""}.ph.ph-wave-sawtooth:before{content:""}.ph.ph-wave-sine:before{content:""}.ph.ph-wave-square:before{content:""}.ph.ph-wave-triangle:before{content:""}.ph.ph-waveform:before{content:""}.ph.ph-waveform-slash:before{content:""}.ph.ph-waves:before{content:""}.ph.ph-webcam:before{content:""}.ph.ph-webcam-slash:before{content:""}.ph.ph-webhooks-logo:before{content:""}.ph.ph-wechat-logo:before{content:""}.ph.ph-whatsapp-logo:before{content:""}.ph.ph-wheelchair:before{content:""}.ph.ph-wheelchair-motion:before{content:""}.ph.ph-wifi-high:before{content:""}.ph.ph-wifi-low:before{content:""}.ph.ph-wifi-medium:before{content:""}.ph.ph-wifi-none:before{content:""}.ph.ph-wifi-slash:before{content:""}.ph.ph-wifi-x:before{content:""}.ph.ph-wind:before{content:""}.ph.ph-windmill:before{content:""}.ph.ph-windows-logo:before{content:""}.ph.ph-wine:before{content:""}.ph.ph-wrench:before{content:""}.ph.ph-x:before{content:""}.ph.ph-x-circle:before{content:""}.ph.ph-x-logo:before{content:""}.ph.ph-x-square:before{content:""}.ph.ph-yarn:before{content:""}.ph.ph-yin-yang:before{content:""}.ph.ph-youtube-logo:before{content:""}',vr=new CSSStyleSheet;vr.replaceSync(Tb.replace(/@font-face[^}]*\}/g,""));const Bb={Input:"#60a5fa","Edit & Annotate":"#a5b4fc","Organize & Manage":"#c4b5fd","Optimize & Repair":"#fcd34d","Secure PDF":"#fda4af",Output:"#5eead4"};function zb(n,e){return n==="running"?{color:"#eab308",label:"Running...",animate:!0}:n==="completed"?{color:"#22c55e",label:"Complete",animate:!1}:n==="error"?{color:"#ef4444",label:"Failed",animate:!1}:{color:e?"#22c55e":"#6b7280",label:e?"Connected":"Not connected",animate:!1}}function Ne(n,e,t){const r=t.nodeViews.get(n);if(!r)return;const o=r.element,i=e.getNode(n);if(!i)return;const s=e.getConnections().some(w=>w.target===n||w.source===n),c=i.execStatus||"idle",p=zb(c,s),f=o.querySelector('[data-wf="bar"]'),h=o.querySelector('[data-wf="dot"]'),u=o.querySelector('[data-wf="label"]');f&&(f.className=p.animate?"wf-bar-slide":"",f.style.background=p.animate?`linear-gradient(90deg, #1f2937 0%, ${p.color} 50%, #1f2937 100%)`:p.color,f.style.opacity=c==="idle"&&!s?"0.25":c==="idle"?"0.5":"1",f.style.backgroundSize=p.animate?"200% 100%":""),h&&(h.className=p.animate?"wf-dot-pulse":"",h.style.background=p.color,h.style.boxShadow="none"),u&&(u.style.color=p.color,u.textContent=p.label)}async function Mb(n){const e=new ze,t=new ih(n),r=new _h,o=new Cb,i=new Ab;o.addPreset(vb.classic.setup({customize:{node(u){return({emit:w})=>{const l=u.payload,b=Object.entries(l.inputs||{}),d=Object.entries(l.outputs||{}),v=Bb[l.category]||"#6b7280";return ae`
              <div
                style="
              position: relative; display: flex; flex-direction: column;
              align-items: center; width: 280px;
            "
              >
                ${b.length>0?ae`
                      <div
                        style="display: flex; justify-content: center; gap: 8px; position: relative; z-index: 1; margin-bottom: -7px;"
                      >
                        ${b.map(([y,C])=>C?ae`
                                <div
                                  style="display: flex; align-items: center; justify-content: center;"
                                >
                                  <rete-ref
                                    .data=${{type:"socket",side:"input",key:y,nodeId:l.id,payload:C.socket}}
                                    .emit=${w}
                                  ></rete-ref>
                                </div>
                              `:null)}
                      </div>
                    `:null}
                <div
                  style="
                background: #1f2937; border: 1px solid #374151;
                border-radius: 12px; width: 100%; overflow: hidden;
              "
                >
                  <div
                    style="height: 3px; border-radius: 10px 10px 0 0; overflow: hidden;"
                  >
                    <div
                      data-wf="bar"
                      style="
                    height: 100%; width: 100%;
                    background: #6b7280; opacity: 0.25;
                  "
                    ></div>
                  </div>
                  <div
                    style="padding: 6px 14px; display: flex; align-items: center; gap: 6px;"
                  >
                    <span
                      data-wf="dot"
                      style="
                    width: 7px; height: 7px; border-radius: 50%; background: #6b7280; flex-shrink: 0;
                  "
                    ></span>
                    <span
                      data-wf="label"
                      style="font-size: 10px; color: #6b7280; font-weight: 500; flex: 1;"
                      >Not connected</span
                    >
                    <span
                      data-wf-delete="${l.id}"
                      style="
                      cursor: pointer; display: flex; align-items: center; justify-content: center;
                      width: 18px; height: 18px; border-radius: 4px;
                      color: #6b7280; transition: all 0.15s;
                    "
                    >
                      <svg
                        width="12"
                        height="12"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                      </svg>
                    </span>
                  </div>
                  <div
                    style="height: 1px; background: #374151; margin: 0 14px;"
                  ></div>
                  <div
                    style="padding: 10px 14px 12px; display: flex; align-items: flex-start; gap: 10px;"
                  >
                    <i
                      class="ph ${l.icon}"
                      style="font-size: 18px; color: ${v}; flex-shrink: 0; margin-top: 1px; line-height: 1;"
                    ></i>
                    <div style="flex: 1; min-width: 0;">
                      <div
                        style="font-size: 13px; font-weight: 600; color: #f3f4f6; line-height: 1.3;"
                      >
                        ${l.label}
                      </div>
                      <div
                        style="font-size: 11px; color: #9ca3af; margin-top: 2px; line-height: 1.3;"
                      >
                        ${l.description}
                      </div>
                    </div>
                  </div>
                </div>
                ${d.length>0?ae`
                      <div
                        style="display: flex; justify-content: center; gap: 8px; position: relative; z-index: 1; margin-top: -7px;"
                      >
                        ${d.map(([y,C])=>C?ae`
                                <div
                                  style="display: flex; align-items: center; justify-content: center;"
                                >
                                  <rete-ref
                                    .data=${{type:"socket",side:"output",key:y,nodeId:l.id,payload:C.socket}}
                                    .emit=${w}
                                  ></rete-ref>
                                </div>
                              `:null)}
                      </div>
                    `:null}
              </div>
            `}},socket(){return()=>ae`<div
              style="
            width: 14px; height: 14px; border-radius: 50%;
            background: #6366f1; border: 2px solid #1f2937;
            box-shadow: 0 0 0 1px #6366f1; cursor: crosshair;
          "
            ></div>`}}})),r.addPreset(wh.classic.setup()),o.addPipe(u=>{if(u.type==="connectionpath"){const{points:w}=u.data,[l,b]=w,d=.3,v=Math.abs(l.x-b.x),y=Math.max(v/2,Math.abs(b.y-l.y))*d,C=`M ${l.x} ${l.y} C ${l.x} ${l.y+y} ${b.x} ${b.y-y} ${b.x} ${b.y}`;return{...u,data:{...u.data,path:C}}}return u}),e.use(t),t.use(r),t.use(o),e.use(i),Ot.selectableNodes(t,Ot.selector(),{accumulating:Ot.accumulateOnCtrl()}),Ot.simpleNodesOrder(t);let a=null;const s=()=>{a||(a=setTimeout(()=>{a=null;for(const u of n.querySelectorAll("*")){const w=u.shadowRoot;w&&!w.adoptedStyleSheets.includes(vr)&&(w.adoptedStyleSheets=[...w.adoptedStyleSheets,vr])}},50))},c=new MutationObserver(s);c.observe(n,{childList:!0,subtree:!0});const p=u=>{const w=u.target.closest("[data-wf-delete]");if(!w)return;u.stopPropagation(),u.preventDefault();const l=w.getAttribute("data-wf-delete");l&&document.dispatchEvent(new CustomEvent("wf-delete-node",{detail:{nodeId:l}}))},f=u=>{const w=u.target.closest("[data-wf-delete]");w&&(w.style.color="#f87171",w.style.background="rgba(248,113,113,0.1)")},h=u=>{const w=u.target.closest("[data-wf-delete]");w&&(w.style.color="#6b7280",w.style.background="transparent")};return n.addEventListener("pointerdown",p,!0),n.addEventListener("mouseenter",f,!0),n.addEventListener("mouseleave",h,!0),{editor:e,area:t,engine:i,destroy:()=>{c.disconnect(),a&&(clearTimeout(a),a=null),n.removeEventListener("pointerdown",p,!0),n.removeEventListener("mouseenter",f,!0),n.removeEventListener("mouseleave",h,!0),t.destroy()}}}function ea(n){return{...n,bytes:n.bytes.slice()}}function ge(n){const e=[];for(const t of n)t.type==="pdf"&&e.push(ea(t)),t.type==="multi-pdf"&&e.push(...t.items.map(ea));return e}const Rb=1;class dt extends Error{nodeName;constructor(e,t){super(t?`${t}: ${e}`:e),this.name="WorkflowError",this.nodeName=t}}function oe(n,e){if(!n.pdf?.[0])throw new dt("No PDF connected",e);return n.pdf}async function ce(n,e){const t=ge(n);if(t.length===0)throw new Error("No PDFs in input");if(t.length===1)return e(t[0]);const r=[];for(const o of t)r.push(await e(o));return{type:"multi-pdf",items:r}}function Lb(n,e){const t=new Set,r=[n];for(;r.length>0;){const o=r.shift();if(t.has(o))continue;t.add(o);const i=e.getConnections().filter(a=>a.target===o);for(const a of i)r.push(a.source)}return t}function Ub(n,e){const t=new Map,r=new Map;for(const a of n)t.set(a,0),r.set(a,[]);for(const a of e.getConnections())n.has(a.source)&&n.has(a.target)&&(r.get(a.source).push(a.target),t.set(a.target,(t.get(a.target)||0)+1));const o=[];for(const[a,s]of t)s===0&&o.push(a);const i=[];for(;o.length>0;){const a=o.shift();i.push(a);for(const s of r.get(a)||[]){const c=(t.get(s)??0)-1;t.set(s,c),c===0&&o.push(s)}}if(i.length<n.size)throw new dt("Circular dependency detected in workflow. Please remove any loops between nodes.");return i}function ur(){return new Promise(n=>setTimeout(n,0))}function Wb(n,e){for(const t of e){if(n.getNode(t)?.label!=="Encrypt")continue;const o=n.getConnections().filter(i=>i.source===t);for(const i of o){const a=n.getNode(i.target);if(a&&a.category!=="Output")return`The Encrypt node feeds into "${a.label}", which may fail on encrypted data. Move Encrypt to just before the output node.`}}return null}async function Hb(n,e,t,r){const o=n.getNodes(),i=n.getConnections(),a=new Set(i.map(h=>h.source)),s=o.filter(h=>!a.has(h.id));if(s.length===0)throw new Error("No output nodes found. Add a Download node to complete your workflow.");const c=new Set;for(const h of s){const u=Lb(h.id,n);for(const w of u)c.add(w)}for(const h of o)h.execStatus="idle",Ne(h.id,n,t);await ur();const p=Ub(c,n),f=Wb(n,p);if(f)throw new dt(f,"Encrypt");e.reset();for(const h of p){const u=n.getNode(h);if(u){u.execStatus="running",Ne(u.id,n,t),r({nodeId:u.id,nodeName:u.label,status:"running",message:`Processing ${u.label}...`}),await ur();try{await e.fetch(h),u.execStatus="completed",Ne(u.id,n,t),r({nodeId:u.id,nodeName:u.label,status:"completed"}),await ur()}catch(w){u.execStatus="error",Ne(u.id,n,t);for(const d of p){const v=n.getNode(d);v&&v.execStatus==="running"&&(v.execStatus="idle",Ne(v.id,n,t))}const l=w instanceof Error?w.message:String(w),b=w instanceof dt?w:new dt(l,u.label);throw r({nodeId:u.id,nodeName:u.label,status:"error",message:b.message}),b}}}}class K extends $.Node{width=280;height=140;execStatus="idle";constructor(e){super(e)}getMeta(){return{id:this.id,label:this.label,category:this.category,icon:this.icon,description:this.description}}}class qb extends $.Socket{constructor(){super("PDF")}}class Vb extends $.Socket{constructor(){super("Image")}}class Gb extends $.Socket{constructor(){super("MultiPDF")}}const M=new qb;new Vb;new Gb;class hp extends Error{constructor(e){super(`PDF "${e}" is password-protected`),this.filename=e,this.name="EncryptedPDFError"}}class fp extends K{category="Input";icon="ph-file-pdf";description="Upload one or more PDF files";files=[];constructor(){super("PDF Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFile(e){const t=await Vr(e),r=new Uint8Array(t);let o=!1;try{await X.load(r,{throwOnInvalidObject:!1})}catch{o=!0}if(o){try{await X.load(r,{ignoreEncryption:!0,throwOnInvalidObject:!1})}catch{throw new Error(`Failed to load "${e.name}" - file may be corrupted`)}throw new hp(e.name)}const i=await X.load(r,{throwOnInvalidObject:!1});this.files.push({type:"pdf",document:i,bytes:r,filename:e.name})}async addDecryptedFile(e,t){const r=await Vr(e),o=new Uint8Array(r),i=await Pt(),a=`${Date.now()}_${Math.random().toString(36).slice(2,9)}`,s=`/tmp/input_decrypt_${a}.pdf`,c=`/tmp/output_decrypt_${a}.pdf`;try{i.FS.writeFile(s,o),i.callMain([s,"--password="+t,"--decrypt",c]);const p=i.FS.readFile(c,{encoding:"binary"}),f=new Uint8Array(p),h=await X.load(f,{throwOnInvalidObject:!1});this.files.push({type:"pdf",document:h,bytes:f,filename:e.name})}finally{try{i.FS.unlink(s)}catch{}try{i.FS.unlink(c)}catch{}}}async setFile(e){this.files=[],await this.addFile(e)}async setFiles(e){this.files=[];for(const t of e)await this.addFile(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.filename)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].filename:`${this.files.length} files`}async data(e){if(this.files.length===0)throw new Error("No PDF files uploaded in PDF Input node");return this.files.length===1?{pdf:this.files[0]}:{pdf:{type:"multi-pdf",items:this.files}}}}class dp extends K{category="Input";icon="ph-image";description="Upload images and convert to PDF";files=[];constructor(){super("Image Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.type.startsWith("image/")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} images`}async data(e){if(this.files.length===0)throw new Error("No images uploaded in Image Input node");const r=await(await he()).imagesToPdf(this.files),o=new Uint8Array(await r.arrayBuffer());return{pdf:{type:"pdf",document:await X.load(o),bytes:o,filename:"images.pdf"}}}}class hr extends K{category="Output";icon="ph-download-simple";description="Download as PDF or ZIP automatically";constructor(){super("Download"),this.addInput("pdf",new $.Input(M,"PDF",!0)),this.addControl("filename",new $.InputControl("text",{initial:"output"}))}async data(e){const t=Object.values(e).flat(),r=ge(t);if(r.length===0)throw new Error("No PDFs connected to Download node");const i=this.controls.filename?.value||"output";if(r.length===1){const a=i.toLowerCase().endsWith(".pdf")?i:`${i}.pdf`,s=new Blob([new Uint8Array(r[0].bytes)],{type:"application/pdf"});be(s,a)}else{const a=(await xe(async()=>{const{default:h}=await import("./jszip.min-CX_3d3rd.js").then(u=>u.j);return{default:h}},__vite__mapDeps([0,1,2,3,4]))).default,s=new a,c=new Set;for(const h of r){let u=h.filename||"document.pdf";u.toLowerCase().endsWith(".pdf")||(u+=".pdf");let w=u,l=1;for(;c.has(w);)w=u.replace(/\.pdf$/i,`_${l}.pdf`),l++;c.add(w),s.file(w,h.bytes)}const p=await s.generateAsync({type:"blob"}),f=i.toLowerCase().endsWith(".zip")?i:`${i}.zip`;be(p,f)}return{}}}class Xb extends K{category="Output";icon="ph-file-image";description="Convert PDF pages to images (ZIP)";constructor(){super("PDF to Images"),this.addInput("pdf",new $.Input(M,"PDF")),this.addControl("format",new $.InputControl("text",{initial:"jpg"})),this.addControl("quality",new $.InputControl("number",{initial:90})),this.addControl("dpi",new $.InputControl("number",{initial:150}))}async addPdfPages(e,t,r,o,i,a,s){const c=await Oe({data:e.bytes}).promise;for(let p=1;p<=c.numPages;p++){const f=await c.getPage(p),h=f.getViewport({scale:a}),u=document.createElement("canvas");u.width=h.width,u.height=h.height;const w=u.getContext("2d");await f.render({canvasContext:w,viewport:h,canvas:u}).promise;const l=await new Promise(b=>u.toBlob(b,o,i));u.width=0,u.height=0,l&&t.file(`${s}page_${p}.${r}`,l)}}async addPdfPagesAsSvg(e,t){const r=await he();for(const o of e){const i=new Blob([new Uint8Array(o.bytes)],{type:"application/pdf"}),a=await r.open(i);try{const s=a.pageCount,c=e.length>1?o.filename.replace(/\.pdf$/i,"")+"/":"";for(let p=0;p<s;p++){const h=a.getPage(p).toSvg();t.file(`${c}page_${p+1}.svg`,h)}}finally{a.close()}}}async data(e){const t=oe(e,"PDF to Images"),r=ge(t),o=this.controls.format,i=["jpg","png","webp","svg"].includes(o?.value??"")?o?.value??"jpg":"jpg",a=this.controls.quality,s=Math.max(10,Math.min(100,a?.value??90))/100,c=this.controls.dpi,f=Math.max(72,Math.min(600,c?.value??150))/72,u={jpg:"image/jpeg",png:"image/png",webp:"image/webp"}[i]||"image/jpeg",w=(await xe(async()=>{const{default:d}=await import("./jszip.min-CX_3d3rd.js").then(v=>v.j);return{default:d}},__vite__mapDeps([0,1,2,3,4]))).default,l=new w;if(i==="svg")await this.addPdfPagesAsSvg(r,l);else if(r.length===1)await this.addPdfPages(r[0],l,i,u,s,f,"");else for(const d of r){const v=d.filename.replace(/\.pdf$/i,"")+"/";await this.addPdfPages(d,l,i,u,s,f,v)}const b=await l.generateAsync({type:"blob"});return be(b,"images.zip"),{}}}class Kb extends K{category="Organize & Manage";icon="ph-browsers";description="Combine multiple PDFs into one";constructor(){super("Merge PDFs"),this.addInput("pdf",new $.Input(M,"PDFs",!0)),this.addOutput("pdf",new $.Output(M,"Merged PDF"))}async data(e){const t=Object.values(e).flat(),r=ge(t);if(r.length===0)throw new Error("No PDFs connected to Merge node");const o=await Kp(r.map(a=>a.bytes));return{pdf:{type:"pdf",document:await X.load(o),bytes:o,filename:"merged.pdf"}}}}class Jb extends K{category="Organize & Manage";icon="ph-scissors";description="Extract a range of pages";constructor(){super("Split PDF"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Split PDF")),this.addControl("pages",new $.InputControl("text",{initial:"1-3"}))}async data(e){const t=oe(e,"Split PDF"),o=this.controls.pages?.value||"1";return{pdf:await ce(t,async i=>{const s=(await X.load(i.bytes)).getPageCount(),c=sa(o,s),p=await Jp(i.bytes,c);return{type:"pdf",document:await X.load(p),bytes:p,filename:i.filename.replace(/\.pdf$/i,"_split.pdf")}})}}}class Zb extends K{category="Organize & Manage";icon="ph-squares-four";description="Extract pages as separate PDFs";constructor(){super("Extract Pages"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Extracted PDFs")),this.addControl("pages",new $.InputControl("text",{initial:"1,2,3"}))}async data(e){const t=oe(e,"Extract Pages"),r=ge(t),i=this.controls.pages?.value||"1",a=[];for(const c of r){const p=await X.load(c.bytes),f=p.getPageCount(),h=sa(i,f);for(const u of h){const w=await X.create(),[l]=await w.copyPages(p,[u]);w.addPage(l);const b=await w.save();a.push({type:"pdf",document:w,bytes:new Uint8Array(b),filename:`page_${u+1}.pdf`})}}return a.length===1?{pdf:a[0]}:{pdf:{type:"multi-pdf",items:a}}}}class Yb extends K{category="Organize & Manage";icon="ph-arrow-clockwise";description="Rotate all pages";constructor(){super("Rotate"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Rotated PDF")),this.addControl("angle",new $.InputControl("text",{initial:"90"}))}async data(e){const t=oe(e,"Rotate"),r=this.controls.angle,o=parseInt(r?.value??"90",10)||90;return{pdf:await ce(t,async i=>{const a=await Zp(i.bytes,o);return{type:"pdf",document:await X.load(a),bytes:a,filename:i.filename.replace(/\.pdf$/i,"_rotated.pdf")}})}}}class Qb extends K{category="Organize & Manage";icon="ph-trash";description="Remove specific pages";constructor(){super("Delete Pages"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF")),this.addControl("pages",new $.InputControl("text",{initial:"1"}))}async data(e){const t=oe(e,"Delete Pages"),o=this.controls.pages?.value||"";return{pdf:await ce(t,async i=>{const s=(await X.load(i.bytes)).getPageCount(),c=Yp(o,s),p=await Qp(i.bytes,c);return{type:"pdf",document:await X.load(p),bytes:p,filename:i.filename.replace(/\.pdf$/i,"_trimmed.pdf")}})}}}class em extends K{category="Organize & Manage";icon="ph-sort-descending";description="Reverse page order";constructor(){super("Reverse Pages"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Reversed PDF"))}async data(e){const t=oe(e,"Reverse Pages");return{pdf:await ce(t,async r=>{const o=await X.load(r.bytes),i=o.getPageCount(),a=await X.create(),s=Array.from({length:i},(f,h)=>i-1-h);(await a.copyPages(o,s)).forEach(f=>a.addPage(f));const p=await a.save();return{type:"pdf",document:a,bytes:new Uint8Array(p),filename:r.filename.replace(/\.pdf$/i,"_reversed.pdf")}})}}}class tm extends K{category="Organize & Manage";icon="ph-file-plus";description="Insert blank pages";constructor(){super("Add Blank Page"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF")),this.addControl("blankPosition",new $.InputControl("text",{initial:"end"})),this.addControl("afterPage",new $.InputControl("number",{initial:1})),this.addControl("count",new $.InputControl("number",{initial:1}))}async data(e){const t=oe(e,"Add Blank Page"),o=this.controls.blankPosition?.value||"end",a=this.controls.afterPage?.value??1,s=this.controls.count,c=Math.max(1,Math.min(100,s?.value??1));return{pdf:await ce(t,async p=>{const f=await X.load(p.bytes),h=f.getPages()[0],{width:u,height:w}=h?h.getSize():{width:595.28,height:841.89};for(let b=0;b<c;b++)if(o==="start")f.insertPage(0,[u,w]);else if(o==="after"){const d=Math.min(Math.max(1,a),f.getPageCount())+b;f.insertPage(d,[u,w])}else f.addPage([u,w]);const l=await f.save();return{type:"pdf",document:f,bytes:new Uint8Array(l),filename:p.filename.replace(/\.pdf$/i,"_blank.pdf")}})}}}class nm extends K{category="Organize & Manage";icon="ph-columns";description="Split pages vertically or horizontally";constructor(){super("Divide Pages"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Divided PDF")),this.addControl("direction",new $.InputControl("text",{initial:"vertical"}))}async data(e){const t=oe(e,"Divide Pages"),o=this.controls.direction?.value==="horizontal"?"horizontal":"vertical";return{pdf:await ce(t,async i=>{const a=await X.load(i.bytes),s=await X.create();for(let p=0;p<a.getPageCount();p++){const[f]=await s.copyPages(a,[p]),[h]=await s.copyPages(a,[p]),{width:u,height:w}=f.getSize();o==="vertical"?(f.setCropBox(0,0,u/2,w),h.setCropBox(u/2,0,u/2,w)):(f.setCropBox(0,w/2,u,w/2),h.setCropBox(0,0,u,w/2)),s.addPage(f),s.addPage(h)}const c=await s.save();return{type:"pdf",document:s,bytes:new Uint8Array(c),filename:i.filename.replace(/\.pdf$/i,"_divided.pdf")}})}}}class rm extends K{category="Organize & Manage";icon="ph-squares-four";description="Arrange multiple pages per sheet";constructor(){super("N-Up"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"N-Up PDF")),this.addControl("pagesPerSheet",new $.InputControl("number",{initial:4})),this.addControl("orientation",new $.InputControl("text",{initial:"auto"})),this.addControl("margins",new $.InputControl("text",{initial:"true"})),this.addControl("border",new $.InputControl("text",{initial:"false"})),this.addControl("borderColor",new $.InputControl("text",{initial:"#000000"}))}async data(e){const t=oe(e,"N-Up"),r=this.controls.pagesPerSheet,o=[2,4,9,16].includes(r?.value??4)?r?.value??4:4,i=(u,w)=>this.controls[u]?.value||w,a=i("orientation","auto"),s=i("margins","true")==="true",c=i("border","false")==="true",p=i("borderColor","#000000"),f=Ee(p),h=mt(f.r,f.g,f.b);return{pdf:await ce(t,async u=>{const w={2:[2,1],4:[2,2],9:[3,3],16:[4,4]},[l,b]=w[o],d=await X.load(u.bytes),v=await X.create(),y=d.getPageCount(),C=d.getPages()[0];let{width:I,height:S}=C.getSize();a==="landscape"&&I<S?[I,S]=[S,I]:a==="portrait"&&I>S&&([I,S]=[S,I]);const B=s?36:0,O=s?5:0,_=I-B*2,g=S-B*2,k=(_-O*(l-1))/l,F=(g-O*(b-1))/b;for(let N=0;N<y;N+=o){const T=v.addPage([I,S]),z=Math.min(o,y-N);for(let m=0;m<z;m++){const A=d.getPages()[N+m],D=await v.embedPage(A),P=m%l,R=Math.floor(m/l),Z=B+P*(k+O),Y=S-B-(R+1)*F-R*O;T.drawPage(D,{x:Z,y:Y,width:k,height:F}),c&&T.drawRectangle({x:Z,y:Y,width:k,height:F,borderColor:h,borderWidth:1})}}const x=await v.save();return{type:"pdf",document:v,bytes:new Uint8Array(x),filename:u.filename.replace(/\.pdf$/i,"_nup.pdf")}})}}}class om extends K{category="Organize & Manage";icon="ph-arrows-out-line-vertical";description="Stitch all pages into one continuous page";constructor(){super("Combine to Single Page"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Combined PDF")),this.addControl("orientation",new $.InputControl("text",{initial:"vertical"})),this.addControl("spacing",new $.InputControl("number",{initial:0})),this.addControl("backgroundColor",new $.InputControl("text",{initial:"#ffffff"})),this.addControl("separator",new $.InputControl("text",{initial:"false"})),this.addControl("separatorThickness",new $.InputControl("number",{initial:.5})),this.addControl("separatorColor",new $.InputControl("text",{initial:"#000000"}))}async data(e){const t=oe(e,"Combine to Single Page"),r=(w,l)=>this.controls[w]?.value||l,o=(w,l)=>this.controls[w]?.value??l,i=r("orientation","vertical")==="vertical",a=Math.max(0,o("spacing",0)),s=Ee(r("backgroundColor","#ffffff")),c=mt(s.r,s.g,s.b),p=r("separator","false")==="true",f=o("separatorThickness",.5),h=Ee(r("separatorColor","#000000")),u=mt(h.r,h.g,h.b);return{pdf:await ce(t,async w=>{const l=await Oe({data:w.bytes}).promise,b=await X.create(),d=[];for(let g=1;g<=l.numPages;g++){const F=(await l.getPage(g)).getViewport({scale:1});d.push({width:F.width,height:F.height})}const v=Math.max(...d.map(g=>g.width)),y=Math.max(...d.map(g=>g.height)),C=a*(l.numPages-1),I=i?v:d.reduce((g,k)=>g+k.width,0)+C,S=i?d.reduce((g,k)=>g+k.height,0)+C:y,B=b.addPage([I,S]);B.drawRectangle({x:0,y:0,width:I,height:S,color:c});let O=i?S:0;for(let g=1;g<=l.numPages;g++){const k=await l.getPage(g),F=k.getViewport({scale:2}),x=document.createElement("canvas");x.width=F.width,x.height=F.height;const N=x.getContext("2d");if(!N)throw new Error(`Failed to get canvas context for page ${g}`);await k.render({canvasContext:N,viewport:F,canvas:x}).promise;const T=await new Promise(D=>x.toBlob(D,"image/png"));if(!T)throw new Error(`Failed to render page ${g} to image`);const z=await T.arrayBuffer(),m=await b.embedPng(z),A=d[g-1];i?(O-=A.height,B.drawImage(m,{x:0,y:O,width:A.width,height:A.height}),p&&g<l.numPages&&B.drawLine({start:{x:0,y:O-a/2},end:{x:I,y:O-a/2},thickness:f,color:u}),O-=a):(B.drawImage(m,{x:O,y:0,width:A.width,height:A.height}),O+=A.width,p&&g<l.numPages&&B.drawLine({start:{x:O+a/2,y:0},end:{x:O+a/2,y:S},thickness:f,color:u}),O+=a)}const _=await b.save();return{type:"pdf",document:b,bytes:new Uint8Array(_),filename:w.filename.replace(/\.pdf$/i,"_combined.pdf")}})}}}class im extends K{category="Edit & Annotate";icon="ph-crop";description="Trim margins from all pages";constructor(){super("Crop"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Cropped PDF")),this.addControl("top",new $.InputControl("number",{initial:0})),this.addControl("bottom",new $.InputControl("number",{initial:0})),this.addControl("left",new $.InputControl("number",{initial:0})),this.addControl("right",new $.InputControl("number",{initial:0}))}async data(e){const t=oe(e,"Crop"),r=c=>{const p=this.controls[c];return Math.max(0,p?.value??0)},o=r("top"),i=r("bottom"),a=r("left"),s=r("right");return{pdf:await ce(t,async c=>{const p=await X.load(c.bytes),f=p.getPages();for(const u of f){const{width:w,height:l}=u.getSize(),b=w-a-s,d=l-o-i;if(b<=0||d<=0)throw new Error("Crop margins exceed page dimensions. Reduce crop values.");u.setCropBox(a,i,b,d)}const h=await p.save();return{type:"pdf",document:p,bytes:new Uint8Array(h),filename:c.filename.replace(/\.pdf$/i,"_cropped.pdf")}})}}}class am extends K{category="Edit & Annotate";icon="ph-palette";description="Convert to greyscale";constructor(){super("Greyscale"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Greyscale PDF"))}async data(e){const t=oe(e,"Greyscale");return{pdf:await ce(t,async r=>{const o=await X.create(),i=await Oe({data:r.bytes}).promise;for(let s=1;s<=i.numPages;s++){const c=await i.getPage(s),p=c.getViewport({scale:2}),f=document.createElement("canvas");f.width=p.width,f.height=p.height;const h=f.getContext("2d");if(!h)throw new Error(`Failed to get canvas context for page ${s}`);await c.render({canvasContext:h,viewport:p,canvas:f}).promise;const u=h.getImageData(0,0,f.width,f.height);nu(u),h.putImageData(u,0,0);const w=await new Promise(v=>f.toBlob(v,"image/jpeg",.9));if(!w)throw new Error(`Failed to render page ${s} to image`);const l=await w.arrayBuffer(),b=await o.embedJpg(l);o.addPage([p.width,p.height]).drawImage(b,{x:0,y:0,width:p.width,height:p.height})}if(o.getPageCount()===0)throw new Error("No pages were processed");const a=await o.save();return{type:"pdf",document:o,bytes:new Uint8Array(a),filename:r.filename.replace(/\.pdf$/i,"_greyscale.pdf")}})}}}class sm extends K{category="Edit & Annotate";icon="ph-circle-half";description="Invert all colors";constructor(){super("Invert Colors"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Inverted PDF"))}async data(e){const t=oe(e,"Invert Colors");return{pdf:await ce(t,async r=>{const o=await X.create(),i=await Oe({data:r.bytes}).promise;for(let s=1;s<=i.numPages;s++){const c=await i.getPage(s),p=c.getViewport({scale:1.5}),f=document.createElement("canvas");f.width=p.width,f.height=p.height;const h=f.getContext("2d");if(!h)throw new Error(`Failed to get canvas context for page ${s}`);await c.render({canvasContext:h,viewport:p,canvas:f}).promise;const u=h.getImageData(0,0,f.width,f.height);ru(u),h.putImageData(u,0,0);const w=await new Promise((d,v)=>f.toBlob(y=>{if(!y){v(new Error(`Failed to render page ${s}`));return}const C=new FileReader;C.onload=()=>d(new Uint8Array(C.result)),C.onerror=()=>v(new Error("Failed to read image data")),C.readAsArrayBuffer(y)},"image/png")),l=await o.embedPng(w);o.addPage([l.width,l.height]).drawImage(l,{x:0,y:0,width:l.width,height:l.height})}const a=await o.save();return{type:"pdf",document:o,bytes:new Uint8Array(a),filename:r.filename.replace(/\.pdf$/i,"_inverted.pdf")}})}}}class cm extends K{category="Edit & Annotate";icon="ph-scan";description="Apply scanner simulation effect";constructor(){super("Scanner Effect"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Scanned PDF")),this.addControl("grayscale",new $.InputControl("text",{initial:"false"})),this.addControl("border",new $.InputControl("text",{initial:"false"})),this.addControl("rotation",new $.InputControl("number",{initial:0})),this.addControl("rotationVariance",new $.InputControl("number",{initial:0})),this.addControl("brightness",new $.InputControl("number",{initial:0})),this.addControl("contrast",new $.InputControl("number",{initial:0})),this.addControl("blur",new $.InputControl("number",{initial:0})),this.addControl("noise",new $.InputControl("number",{initial:10})),this.addControl("yellowish",new $.InputControl("number",{initial:0})),this.addControl("resolution",new $.InputControl("number",{initial:150}))}async data(e){const t=oe(e,"Scanner Effect"),r=(a,s)=>this.controls[a]?.value??s,o=a=>this.controls[a]?.value==="true",i={grayscale:o("grayscale"),border:o("border"),rotate:r("rotation",0),rotateVariance:r("rotationVariance",0),brightness:r("brightness",0),contrast:r("contrast",0),blur:r("blur",0),noise:r("noise",10),yellowish:r("yellowish",0),resolution:r("resolution",150)};return{pdf:await ce(t,async a=>{const s=await X.create(),c=await Oe({data:a.bytes}).promise,p=i.resolution/72;for(let h=1;h<=c.numPages;h++){const u=await c.getPage(h),w=u.getViewport({scale:p}),l=document.createElement("canvas");l.width=w.width,l.height=w.height;const b=l.getContext("2d");if(!b)throw new Error(`Failed to get canvas context for page ${h}`);await u.render({canvasContext:b,viewport:w,canvas:l}).promise;const d=b.getImageData(0,0,l.width,l.height),v=new ImageData(new Uint8ClampedArray(d.data),d.width,d.height),y=document.createElement("canvas");ou(v,y,i,0,p);const C=await new Promise(O=>y.toBlob(O,"image/jpeg",.85));if(!C)throw new Error(`Failed to render page ${h} to image`);const I=await C.arrayBuffer(),S=await s.embedJpg(I);s.addPage([y.width,y.height]).drawImage(S,{x:0,y:0,width:y.width,height:y.height})}if(s.getPageCount()===0)throw new Error("No pages were processed");const f=await s.save();return{type:"pdf",document:s,bytes:new Uint8Array(f),filename:a.filename.replace(/\.pdf$/i,"_scanned.pdf")}})}}}class lm extends K{category="Edit & Annotate";icon="ph-sliders-horizontal";description="Adjust brightness, contrast, and colors";constructor(){super("Adjust Colors"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Adjusted PDF")),this.addControl("brightness",new $.InputControl("number",{initial:0})),this.addControl("contrast",new $.InputControl("number",{initial:0})),this.addControl("saturation",new $.InputControl("number",{initial:0})),this.addControl("hueShift",new $.InputControl("number",{initial:0})),this.addControl("temperature",new $.InputControl("number",{initial:0})),this.addControl("tint",new $.InputControl("number",{initial:0})),this.addControl("gamma",new $.InputControl("number",{initial:1})),this.addControl("sepia",new $.InputControl("number",{initial:0}))}async data(e){const t=oe(e,"Adjust Colors"),r=(i,a)=>this.controls[i]?.value??a,o={brightness:r("brightness",0),contrast:r("contrast",0),saturation:r("saturation",0),hueShift:r("hueShift",0),temperature:r("temperature",0),tint:r("tint",0),gamma:r("gamma",1),sepia:r("sepia",0)};return{pdf:await ce(t,async i=>{const a=await X.create(),s=await Oe({data:i.bytes}).promise;for(let p=1;p<=s.numPages;p++){const f=await s.getPage(p),h=f.getViewport({scale:2}),u=document.createElement("canvas");u.width=h.width,u.height=h.height;const w=u.getContext("2d");if(!w)throw new Error(`Failed to get canvas context for page ${p}`);await f.render({canvasContext:w,viewport:h,canvas:u}).promise;const l=w.getImageData(0,0,u.width,u.height),b=document.createElement("canvas");iu(l,b,o);const d=await new Promise(S=>b.toBlob(S,"image/png"));if(!d)throw new Error(`Failed to render page ${p} to image`);const v=await d.arrayBuffer(),y=await a.embedPng(v),C=f.getViewport({scale:1});a.addPage([C.width,C.height]).drawImage(y,{x:0,y:0,width:C.width,height:C.height})}if(a.getPageCount()===0)throw new Error("No pages were processed");const c=await a.save();return{type:"pdf",document:a,bytes:new Uint8Array(c),filename:i.filename.replace(/\.pdf$/i,"_adjusted.pdf")}})}}}class pm extends K{category="Edit & Annotate";icon="ph-palette";description="Change background color";constructor(){super("Background Color"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF")),this.addControl("color",new $.InputControl("text",{initial:"#ffffff"}))}async data(e){const t=oe(e,"Background Color"),o=this.controls.color?.value||"#ffffff",i=Ee(o);return{pdf:await ce(t,async a=>{const s=await X.load(a.bytes),c=await X.create();for(let f=0;f<s.getPageCount();f++){const[h]=await c.copyPages(s,[f]),{width:u,height:w}=h.getSize(),l=c.addPage([u,w]);l.drawRectangle({x:0,y:0,width:u,height:w,color:mt(i.r,i.g,i.b)});const b=await c.embedPage(h);l.drawPage(b,{x:0,y:0,width:u,height:w})}const p=await c.save();return{type:"pdf",document:c,bytes:new Uint8Array(p),filename:a.filename.replace(/\.pdf$/i,"_bg.pdf")}})}}}class um extends K{category="Edit & Annotate";icon="ph-drop";description="Add text watermark";constructor(){super("Watermark"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Watermarked PDF")),this.addControl("text",new $.InputControl("text",{initial:"DRAFT"})),this.addControl("fontSize",new $.InputControl("number",{initial:72})),this.addControl("color",new $.InputControl("text",{initial:"#808080"})),this.addControl("opacity",new $.InputControl("number",{initial:30})),this.addControl("angle",new $.InputControl("number",{initial:-45}))}async data(e){const t=oe(e,"Watermark"),r=(h,u)=>this.controls[h]?.value||u,o=(h,u)=>this.controls[h]?.value??u,i=r("color","#808080"),a=Ee(i),s=r("text","DRAFT"),c=o("fontSize",72),p=o("opacity",30)/100,f=o("angle",-45);return{pdf:await ce(t,async h=>{const u=await eu(h.bytes,{text:s,fontSize:c,color:{r:a.r,g:a.g,b:a.b},opacity:p,angle:f});return{type:"pdf",document:await X.load(u),bytes:u,filename:h.filename.replace(/\.pdf$/i,"_watermarked.pdf")}})}}}class hm extends K{category="Edit & Annotate";icon="ph-list-numbers";description="Add page numbers";constructor(){super("Page Numbers"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Numbered PDF")),this.addControl("position",new $.InputControl("text",{initial:"bottom-center"})),this.addControl("fontSize",new $.InputControl("number",{initial:12})),this.addControl("numberFormat",new $.InputControl("text",{initial:"simple"})),this.addControl("color",new $.InputControl("text",{initial:"#000000"}))}async data(e){const t=oe(e,"Page Numbers"),r=(f,h)=>this.controls[f]?.value||h,o=this.controls.fontSize,i=Math.max(4,Math.min(72,o?.value??12)),a=r("position","bottom-center"),s=r("numberFormat","simple"),c=r("color","#000000"),p=Ee(c);return{pdf:await ce(t,async f=>{const h=await tu(f.bytes,{position:a,fontSize:i,format:s,color:{r:p.r,g:p.g,b:p.b}});return{type:"pdf",document:await X.load(h),bytes:new Uint8Array(h),filename:f.filename.replace(/\.pdf$/i,"_numbered.pdf")}})}}}class fm extends K{category="Edit & Annotate";icon="ph-paragraph";description="Add header and footer text";constructor(){super("Header & Footer"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF with Header/Footer")),this.addControl("headerLeft",new $.InputControl("text",{initial:""})),this.addControl("headerCenter",new $.InputControl("text",{initial:""})),this.addControl("headerRight",new $.InputControl("text",{initial:""})),this.addControl("footerLeft",new $.InputControl("text",{initial:""})),this.addControl("footerCenter",new $.InputControl("text",{initial:"Page {page} of {total}"})),this.addControl("footerRight",new $.InputControl("text",{initial:""})),this.addControl("fontSize",new $.InputControl("number",{initial:10})),this.addControl("color",new $.InputControl("text",{initial:"#000000"}))}async data(e){const t=oe(e,"Header & Footer"),r=h=>this.controls[h]?.value||"",o=this.controls.fontSize,i=Math.max(4,Math.min(72,o?.value??10)),a=r("color")||"#000000",s=Ee(a),c=mt(s.r,s.g,s.b),p={headerLeft:r("headerLeft"),headerCenter:r("headerCenter"),headerRight:r("headerRight"),footerLeft:r("footerLeft"),footerCenter:r("footerCenter"),footerRight:r("footerRight")},f=Object.values(p).some(h=>h.length>0);return{pdf:await ce(t,async h=>{if(!f)return h;const u=await X.load(h.bytes),w=await u.embedFont(Vp.Helvetica),l=u.getPages(),b=l.length,d=36;for(let y=0;y<l.length;y++){const C=l[y],{width:I,height:S}=C.getSize(),B=y+1,O=g=>g.replace(/{page}/g,String(B)).replace(/{total}/g,String(b)),_={size:i,font:w,color:c};if(p.headerLeft&&C.drawText(O(p.headerLeft),{..._,x:d,y:S-d}),p.headerCenter){const g=O(p.headerCenter),k=w.widthOfTextAtSize(g,i);C.drawText(g,{..._,x:(I-k)/2,y:S-d})}if(p.headerRight){const g=O(p.headerRight),k=w.widthOfTextAtSize(g,i);C.drawText(g,{..._,x:I-d-k,y:S-d})}if(p.footerLeft&&C.drawText(O(p.footerLeft),{..._,x:d,y:d-i}),p.footerCenter){const g=O(p.footerCenter),k=w.widthOfTextAtSize(g,i);C.drawText(g,{..._,x:(I-k)/2,y:d-i})}if(p.footerRight){const g=O(p.footerRight),k=w.widthOfTextAtSize(g,i);C.drawText(g,{..._,x:I-d-k,y:d-i})}}const v=await u.save();return{type:"pdf",document:u,bytes:new Uint8Array(v),filename:h.filename.replace(/\.pdf$/i,"_hf.pdf")}})}}}const ta={light:{images:{quality:90,dpiTarget:150,dpiThreshold:200},scrub:{metadata:!1,thumbnails:!0},subsetFonts:!0},balanced:{images:{quality:75,dpiTarget:96,dpiThreshold:150},scrub:{metadata:!0,thumbnails:!0},subsetFonts:!0},aggressive:{images:{quality:50,dpiTarget:72,dpiThreshold:100},scrub:{metadata:!0,thumbnails:!0,xmlMetadata:!0},subsetFonts:!0},extreme:{images:{quality:30,dpiTarget:60,dpiThreshold:96},scrub:{metadata:!0,thumbnails:!0,xmlMetadata:!0},subsetFonts:!0}},na={light:{scale:2,quality:.85},balanced:{scale:1.5,quality:.65},aggressive:{scale:1.2,quality:.45},extreme:{scale:1,quality:.25}};async function dm(n,e,t){const r=await he(),o=ta[e]||ta.balanced,i=t?.dpiTarget??o.images.dpiTarget,a=t?.dpiThreshold??o.images.dpiThreshold,s=Math.max(a,i+10),c={images:{enabled:!0,quality:t?.imageQuality??o.images.quality,dpiTarget:i,dpiThreshold:s,convertToGray:t?.convertToGrayscale??!1},scrub:{metadata:t?.removeMetadata??o.scrub.metadata,thumbnails:t?.removeThumbnails??o.scrub.thumbnails,xmlMetadata:o.scrub.xmlMetadata??!1},subsetFonts:t?.subsetFonts??o.subsetFonts,save:{garbage:4,deflate:!0,clean:!0,useObjstms:!0}};try{return await r.compressPdf(n,c)}catch(p){const f=p?.message||String(p);if(f.includes("PatternType")||f.includes("pattern")){const h={...c,images:{...c.images,enabled:!1}};return{...await r.compressPdf(n,h),usedFallback:!0}}throw new Error(`PDF compression failed: ${f}`)}}async function bm(n,e){const t=await Rp({data:n}).promise,r=await X.create(),o=na[e]||na.balanced;for(let i=1;i<=t.numPages;i++){const a=await t.getPage(i),s=a.getViewport({scale:o.scale}),c=document.createElement("canvas"),p=c.getContext("2d");if(!p)throw new Error("Failed to create canvas context");c.height=s.height,c.width=s.width,await a.render({canvasContext:p,viewport:s,canvas:c}).promise;const f=await new Promise((l,b)=>c.toBlob(d=>{d?l(d):b(new Error("Failed to create JPEG blob"))},"image/jpeg",o.quality));c.width=0,c.height=0;const h=await f.arrayBuffer(),u=await r.embedJpg(h);r.addPage([s.width,s.height]).drawImage(u,{x:0,y:0,width:s.width,height:s.height})}return await r.save()}class mm extends K{category="Optimize & Repair";icon="ph-lightning";description="Reduce PDF file size";constructor(){super("Compress"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Compressed PDF")),this.addControl("algorithm",new $.InputControl("text",{initial:"condense"})),this.addControl("compressionLevel",new $.InputControl("text",{initial:"balanced"})),this.addControl("imageQuality",new $.InputControl("number",{initial:75})),this.addControl("dpiTarget",new $.InputControl("number",{initial:96})),this.addControl("dpiThreshold",new $.InputControl("number",{initial:150})),this.addControl("removeMetadata",new $.InputControl("text",{initial:"true"})),this.addControl("subsetFonts",new $.InputControl("text",{initial:"true"})),this.addControl("convertToGrayscale",new $.InputControl("text",{initial:"false"})),this.addControl("removeThumbnails",new $.InputControl("text",{initial:"true"}))}getTextControl(e,t){return this.controls[e]?.value??t}getNumberControl(e,t){return this.controls[e]?.value??t}async data(e){const t=oe(e,"Compress"),r=this.getTextControl("algorithm","condense"),o=this.getTextControl("compressionLevel","balanced"),i={imageQuality:this.getNumberControl("imageQuality",75),dpiTarget:this.getNumberControl("dpiTarget",96),dpiThreshold:this.getNumberControl("dpiThreshold",150),removeMetadata:this.getTextControl("removeMetadata","true")==="true",subsetFonts:this.getTextControl("subsetFonts","true")==="true",convertToGrayscale:this.getTextControl("convertToGrayscale","false")==="true",removeThumbnails:this.getTextControl("removeThumbnails","true")==="true"};return{pdf:await ce(t,async a=>{const s=a.bytes.buffer.slice(a.bytes.byteOffset,a.bytes.byteOffset+a.bytes.byteLength);let c;if(r==="condense"&&Xp()){const f=new Blob([s],{type:"application/pdf"}),h=await dm(f,o,i);c=new Uint8Array(await h.blob.arrayBuffer())}else c=await bm(s,o);return{type:"pdf",document:await X.load(c),bytes:c,filename:a.filename.replace(/\.pdf$/i,"_compressed.pdf")}})}}}class gm extends K{category="Optimize & Repair";icon="ph-image";description="Convert to image-based PDF";constructor(){super("Rasterize"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Rasterized PDF")),this.addControl("rasterizeDpi",new $.InputControl("text",{initial:"150"})),this.addControl("imageFormat",new $.InputControl("text",{initial:"png"})),this.addControl("grayscale",new $.InputControl("text",{initial:"false"}))}async data(e){const t=oe(e,"Rasterize"),r=(s,c)=>this.controls[s]?.value||c,o=Math.max(72,Math.min(600,parseInt(r("rasterizeDpi","150"))||150)),i=r("imageFormat","png")==="jpeg"?"jpeg":"png",a=r("grayscale","false")==="true";return{pdf:await ce(t,async s=>{const c=await he(),p=new Blob([new Uint8Array(s.bytes)],{type:"application/pdf"}),f=await c.rasterizePdf(p,{dpi:o,format:i,grayscale:a,quality:95}),h=new Uint8Array(await f.arrayBuffer());return{type:"pdf",document:await X.load(h),bytes:h,filename:s.filename.replace(/\.pdf$/i,"_rasterized.pdf")}})}}}class ym extends K{category="Organize & Manage";icon="ph-barcode";description="Add searchable text layer via OCR";constructor(){super("OCR"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Searchable PDF")),this.addControl("language",new $.InputControl("text",{initial:"eng"})),this.addControl("resolution",new $.InputControl("text",{initial:"3.0"})),this.addControl("binarize",new $.InputControl("text",{initial:"false"})),this.addControl("whitelist",new $.InputControl("text",{initial:""}))}async data(e){const t=oe(e,"OCR"),o=this.controls.language?.value||"eng",i=this.controls.resolution,a=Math.max(1,Math.min(4,parseFloat(i?.value??"3.0"))),c=(this.controls.binarize?.value??"false")==="true",f=this.controls.whitelist?.value||"";return{pdf:await ce(t,async h=>{const u=await Lp(h.bytes,{language:o,resolution:a,binarize:c,whitelist:f});return{type:"pdf",document:u.pdfDoc,bytes:u.pdfBytes,filename:h.filename.replace(/\.pdf$/i,"_ocr.pdf")}})}}}class vm extends K{category="Edit & Annotate";icon="ph-file-minus";description="Remove blank pages automatically";constructor(){super("Remove Blank Pages"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF")),this.addControl("threshold",new $.InputControl("number",{initial:250}))}async isPageBlank(e,t){const r=e.getViewport({scale:.5}),o=document.createElement("canvas");o.width=r.width,o.height=r.height;const i=o.getContext("2d");await e.render({canvasContext:i,viewport:r,canvas:o}).promise;const s=i.getImageData(0,0,o.width,o.height).data;let c=0;for(let f=0;f<s.length;f+=4)c+=(s[f]+s[f+1]+s[f+2])/3;return c/(s.length/4)>t}async data(e){const t=oe(e,"Remove Blank Pages"),r=this.controls.threshold,o=Math.max(200,Math.min(255,r?.value??250));return{pdf:await ce(t,async i=>{const a=await Oe({data:i.bytes}).promise,s=await X.load(i.bytes),c=[];for(let u=1;u<=a.numPages;u++){const w=await a.getPage(u);await this.isPageBlank(w,o)?console.log(`Page ${u} detected as blank, removing`):c.push(u-1)}if(c.length===0)throw new Error("All pages are blank");const p=await X.create();(await p.copyPages(s,c)).forEach(u=>p.addPage(u));const h=await p.save();return{type:"pdf",document:p,bytes:new Uint8Array(h),filename:i.filename.replace(/\.pdf$/i,"_cleaned.pdf")}})}}}class wm extends K{category="Edit & Annotate";icon="ph-eraser";description="Strip all annotations";constructor(){super("Remove Annotations"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Clean PDF"))}async data(e){const t=oe(e,"Remove Annotations");return{pdf:await ce(t,async r=>{const o=await X.load(r.bytes),i=o.getPages();for(const s of i)s.node.Annots()&&s.node.delete(Gp.of("Annots"));const a=await o.save();return{type:"pdf",document:o,bytes:new Uint8Array(a),filename:r.filename.replace(/\.pdf$/i,"_clean.pdf")}})}}}class km extends K{category="Secure PDF";icon="ph-stack";description="Flatten forms and annotations";constructor(){super("Flatten"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Flattened PDF"))}async data(e){const t=oe(e,"Flatten");return{pdf:await ce(t,async r=>{const o=await X.load(r.bytes);try{o.getForm().flatten()}catch(a){console.error("Flatten form error (may have no forms):",a)}const i=await o.save();return{type:"pdf",document:o,bytes:new Uint8Array(i),filename:r.filename.replace(/\.pdf$/i,"_flattened.pdf")}})}}}class Pm extends K{category="Organize & Manage";icon="ph-file-code";description="Edit PDF metadata";constructor(){super("Edit Metadata"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF")),this.addControl("title",new $.InputControl("text",{initial:""})),this.addControl("author",new $.InputControl("text",{initial:""})),this.addControl("subject",new $.InputControl("text",{initial:""})),this.addControl("keywords",new $.InputControl("text",{initial:""})),this.addControl("creator",new $.InputControl("text",{initial:""})),this.addControl("producer",new $.InputControl("text",{initial:""}))}async data(e){const t=oe(e,"Edit Metadata"),r=f=>this.controls[f]?.value||"",o=r("title"),i=r("author"),a=r("subject"),s=r("keywords"),c=r("creator"),p=r("producer");return{pdf:await ce(t,async f=>{const h=await X.load(f.bytes);o&&h.setTitle(o),i&&h.setAuthor(i),a&&h.setSubject(a),s&&h.setKeywords(s.split(",").map(w=>w.trim()).filter(Boolean)),c&&h.setCreator(c),p&&h.setProducer(p),h.setModificationDate(new Date);const u=await h.save();return{type:"pdf",document:h,bytes:new Uint8Array(u),filename:f.filename.replace(/\.pdf$/i,"_metadata.pdf")}})}}}class xm extends K{category="Secure PDF";icon="ph-broom";description="Remove metadata, scripts, and hidden data";constructor(){super("Sanitize"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Sanitized PDF")),this.addControl("flattenForms",new $.InputControl("text",{initial:"true"})),this.addControl("removeMetadata",new $.InputControl("text",{initial:"true"})),this.addControl("removeAnnotations",new $.InputControl("text",{initial:"true"})),this.addControl("removeJavascript",new $.InputControl("text",{initial:"true"})),this.addControl("removeEmbeddedFiles",new $.InputControl("text",{initial:"true"})),this.addControl("removeLayers",new $.InputControl("text",{initial:"true"})),this.addControl("removeLinks",new $.InputControl("text",{initial:"true"})),this.addControl("removeStructureTree",new $.InputControl("text",{initial:"true"})),this.addControl("removeMarkInfo",new $.InputControl("text",{initial:"true"})),this.addControl("removeFonts",new $.InputControl("text",{initial:"false"}))}async data(e){const t=oe(e,"Sanitize"),r=(i,a)=>(this.controls[i]?.value??a)==="true",o={flattenForms:r("flattenForms","true"),removeMetadata:r("removeMetadata","true"),removeAnnotations:r("removeAnnotations","true"),removeJavascript:r("removeJavascript","true"),removeEmbeddedFiles:r("removeEmbeddedFiles","true"),removeLayers:r("removeLayers","true"),removeLinks:r("removeLinks","true"),removeStructureTree:r("removeStructureTree","true"),removeMarkInfo:r("removeMarkInfo","true"),removeFonts:r("removeFonts","false")};return{pdf:await ce(t,async i=>{const a=await au(i.bytes,o);return{type:"pdf",document:a.pdfDoc,bytes:a.bytes,filename:i.filename.replace(/\.pdf$/i,"_sanitized.pdf")}})}}}class Cm extends K{category="Secure PDF";icon="ph-lock";description="Encrypt PDF with password";constructor(){super("Encrypt"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Encrypted PDF")),this.addControl("userPassword",new $.InputControl("text",{initial:""})),this.addControl("ownerPassword",new $.InputControl("text",{initial:""}))}async data(e){const t=oe(e,"Encrypt"),r=a=>this.controls[a]?.value||"",o=r("userPassword"),i=r("ownerPassword")||o;if(!o)throw new Error("User password is required for encryption");return{pdf:await ce(t,async a=>{const s=await Pt(),c=`${Date.now()}_${Math.random().toString(36).slice(2,9)}`,p=`/tmp/input_encrypt_${c}.pdf`,f=`/tmp/output_encrypt_${c}.pdf`;let h;try{s.FS.writeFile(p,a.bytes);const l=[p,"--encrypt",o,i,"256"];i!==o&&l.push("--modify=none","--extract=n","--print=none","--accessibility=n","--annotate=n","--assemble=n","--form=n","--modify-other=n"),l.push("--",f),s.callMain(l),h=s.FS.readFile(f,{encoding:"binary"})}finally{try{s.FS.unlink(p)}catch{}try{s.FS.unlink(f)}catch{}}const u=new Uint8Array(h);return{type:"pdf",document:await X.load(u,{ignoreEncryption:!0}),bytes:u,filename:a.filename.replace(/\.pdf$/i,"_encrypted.pdf")}})}}}class _m extends K{category="Secure PDF";icon="ph-lock-open";description="Remove PDF password protection";constructor(){super("Decrypt"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Decrypted PDF")),this.addControl("password",new $.InputControl("text",{initial:""}))}async data(e){const t=oe(e,"Decrypt"),o=this.controls.password?.value||"";return{pdf:await ce(t,async i=>{const a=await Pt(),s=`${Date.now()}_${Math.random().toString(36).slice(2,9)}`,c=`/tmp/input_decrypt_${s}.pdf`,p=`/tmp/output_decrypt_${s}.pdf`;let f;try{a.FS.writeFile(c,i.bytes);const w=o?[c,"--password="+o,"--decrypt",p]:[c,"--decrypt",p];a.callMain(w),f=a.FS.readFile(p,{encoding:"binary"})}finally{try{a.FS.unlink(c)}catch{}try{a.FS.unlink(p)}catch{}}const h=new Uint8Array(f);return{type:"pdf",document:await X.load(h),bytes:h,filename:i.filename.replace(/\.pdf$/i,"_decrypted.pdf")}})}}}class bp extends K{category="Secure PDF";icon="ph-certificate";description="Apply a digital signature to PDF";certFile=null;certData=null;certPassword="";constructor(){super("Digital Sign"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Signed PDF")),this.addControl("reason",new $.InputControl("text",{initial:""})),this.addControl("location",new $.InputControl("text",{initial:""})),this.addControl("contactInfo",new $.InputControl("text",{initial:""}))}setCertFile(e){this.certFile=e,this.certData=null}getCertFilename(){return this.certFile?.name??""}hasCert(){return this.certData!==null}hasCertFile(){return this.certFile!==null}removeCert(){this.certFile=null,this.certData=null,this.certPassword=""}async unlockCert(e){if(!this.certFile)return!1;this.certPassword=e;try{if(this.certFile.name.toLowerCase().endsWith(".pem")){const r=await this.certFile.text();this.certData=su(r,e||void 0)}else{const r=await this.certFile.arrayBuffer();this.certData=cu(r,e)}return!0}catch{return this.certData=null,!1}}needsPassword(){return this.certFile!==null&&this.certData===null}async data(e){const t=oe(e,"Digital Sign");if(!this.certData)throw new Error("No certificate loaded in Digital Sign node");const r=this.controls.reason,o=this.controls.location,i=this.controls.contactInfo,a=r?.value??"",s=o?.value??"",c=i?.value??"";return{pdf:await ce(t,async p=>{const f=await lu(p.bytes,this.certData,{signatureInfo:{...a?{reason:a}:{},...s?{location:s}:{},...c?{contactInfo:c}:{}}}),h=new Uint8Array(f);return{type:"pdf",document:await X.load(h),bytes:h,filename:p.filename.replace(/\.pdf$/i,"_signed.pdf")}})}}}class $m extends K{category="Secure PDF";icon="ph-eye-slash";description="Redact text from PDF";constructor(){super("Redact"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Redacted PDF")),this.addControl("redactMode",new $.InputControl("text",{initial:"text"})),this.addControl("text",new $.InputControl("text",{initial:""})),this.addControl("x0",new $.InputControl("number",{initial:0})),this.addControl("y0",new $.InputControl("number",{initial:0})),this.addControl("x1",new $.InputControl("number",{initial:200})),this.addControl("y1",new $.InputControl("number",{initial:50})),this.addControl("fillColor",new $.InputControl("text",{initial:"#000000"}))}getText(e,t){return this.controls[e]?.value||t}getNum(e,t){return this.controls[e]?.value??t}async data(e){const t=oe(e,"Redact"),r=this.getText("redactMode","text"),o=this.getText("text",""),i=Ee(this.getText("fillColor","#000000"));if(r==="text"&&!o)throw new Error("Redact: No text specified to redact");const a={x0:this.getNum("x0",0),y0:this.getNum("y0",0),x1:this.getNum("x1",200),y1:this.getNum("y1",50)};return{pdf:await ce(t,async s=>{const c=await he(),p=new Blob([new Uint8Array(s.bytes)],{type:"application/pdf"}),f=await c.open(p);for(const w of f.pages())if(r==="text"){const l=w.searchFor(o);for(const b of l)w.addRedaction(b,"",i);l.length>0&&w.applyRedactions()}else w.addRedaction(a,"",i),w.applyRedactions();const h=new Uint8Array(f.save());return f.close(),{type:"pdf",document:await X.load(h),bytes:h,filename:s.filename.replace(/\.pdf$/i,"_redacted.pdf")}})}}}class Em extends K{category="Optimize & Repair";icon="ph-wrench";description="Repair corrupted PDF";constructor(){super("Repair"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Repaired PDF"))}async data(e){const t=oe(e,"Repair");return{pdf:await ce(t,async r=>{const o=await Pt(),i=`${Date.now()}_${Math.random().toString(36).slice(2,9)}`,a=`/tmp/input_repair_${i}.pdf`,s=`/tmp/output_repair_${i}.pdf`;let c;try{o.FS.writeFile(a,r.bytes),o.callMain([a,"--decrypt",s]),c=o.FS.readFile(s,{encoding:"binary"})}finally{try{o.FS.unlink(a)}catch{}try{o.FS.unlink(s)}catch{}}const p=new Uint8Array(c);return{type:"pdf",document:await X.load(p,{ignoreEncryption:!0,throwOnInvalidObject:!1}),bytes:p,filename:r.filename.replace(/\.pdf$/i,"_repaired.pdf")}})}}}class Om extends K{category="Output";icon="ph-text-aa";description="Extract text from PDF";constructor(){super("PDF to Text"),this.addInput("pdf",new $.Input(M,"PDF"))}async extractText(e){const t=await he(),r=new Blob([new Uint8Array(e)],{type:"application/pdf"});return t.pdfToText(r)}async data(e){const t=oe(e,"PDF to Text"),r=ge(t);if(r.length===1){const o=await this.extractText(r[0].bytes),i=new Blob([o],{type:"text/plain"}),a=r[0].filename.replace(/\.pdf$/i,"")+".txt";be(i,a)}else{const o=(await xe(async()=>{const{default:s}=await import("./jszip.min-CX_3d3rd.js").then(c=>c.j);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default,i=new o;for(const s of r){const c=await this.extractText(s.bytes),p=s.filename.replace(/\.pdf$/i,"")+".txt";i.file(p,c)}const a=await i.generateAsync({type:"blob"});be(a,"text_files.zip")}return{}}}class Dm extends K{category="Output";icon="ph-microsoft-word-logo";description="Convert PDF to Word document";constructor(){super("PDF to Word"),this.addInput("pdf",new $.Input(M,"PDF"))}async data(e){const t=oe(e,"PDF to Word"),r=ge(t),o=await he();if(r.length===1){const i=new Blob([new Uint8Array(r[0].bytes)],{type:"application/pdf"}),a=await o.pdfToDocx(i),s=r[0].filename.replace(/\.pdf$/i,"")+".docx";be(a,s)}else{const i=(await xe(async()=>{const{default:c}=await import("./jszip.min-CX_3d3rd.js").then(p=>p.j);return{default:c}},__vite__mapDeps([0,1,2,3,4]))).default,a=new i;for(const c of r){const p=new Blob([new Uint8Array(c.bytes)],{type:"application/pdf"}),f=await o.pdfToDocx(p),h=c.filename.replace(/\.pdf$/i,"")+".docx",u=await f.arrayBuffer();a.file(h,u)}const s=await a.generateAsync({type:"blob"});be(s,"docx_files.zip")}return{}}}class Fm extends K{category="Output";icon="ph-microsoft-excel-logo";description="Extract tables from PDF to Excel";constructor(){super("PDF to Excel"),this.addInput("pdf",new $.Input(M,"PDF"))}async convertToXlsx(e,t){const r=await he(),o=new Blob([new Uint8Array(e)],{type:"application/pdf"}),i=await r.open(o),a=[];try{const u=i.pageCount;for(let w=0;w<u;w++)i.getPage(w).findTables().forEach(d=>{a.push({page:w+1,rows:d.rows})})}finally{i.close()}if(a.length===0)throw new Error(`No tables found in ${t}`);const s=await xe(()=>import("./xlsx-DLWyRTOj.js"),__vite__mapDeps([5,1,2,3])),c=s.utils.book_new();if(a.length===1){const u=s.utils.aoa_to_sheet(a[0].rows);s.utils.book_append_sheet(c,u,"Table")}else a.forEach((u,w)=>{const l=`Table ${w+1} (Page ${u.page})`.substring(0,31),b=s.utils.aoa_to_sheet(u.rows);s.utils.book_append_sheet(c,b,l)});const p=s.write(c,{bookType:"xlsx",type:"array"}),f=new Blob([p],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),h=t.replace(/\.pdf$/i,"")+".xlsx";return{blob:f,name:h}}async data(e){const t=oe(e,"PDF to Excel"),r=ge(t);if(r.length===1){const{blob:o,name:i}=await this.convertToXlsx(r[0].bytes,r[0].filename);be(o,i)}else{const o=(await xe(async()=>{const{default:s}=await import("./jszip.min-CX_3d3rd.js").then(c=>c.j);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default,i=new o;for(const s of r){const{blob:c,name:p}=await this.convertToXlsx(s.bytes,s.filename);i.file(p,c)}const a=await i.generateAsync({type:"blob"});be(a,"xlsx_files.zip")}return{}}}function ra(n){return n.map(e=>e.map(t=>{const r=String(t??"");return r.includes(",")||r.includes('"')||r.includes(`
`)?`"${r.replace(/"/g,'""')}"`:r}).join(",")).join(`
`)}class Sm extends K{category="Output";icon="ph-file-csv";description="Extract tables from PDF to CSV";constructor(){super("PDF to CSV"),this.addInput("pdf",new $.Input(M,"PDF"))}async extractTables(e){const t=await he(),r=new Blob([new Uint8Array(e)],{type:"application/pdf"}),o=await t.open(r),i=[];try{const a=o.pageCount;for(let s=0;s<a;s++)o.getPage(s).findTables().forEach(f=>{i.push(...f.rows)})}finally{o.close()}return i}async data(e){const t=oe(e,"PDF to CSV"),r=ge(t);if(r.length===1){const o=await this.extractTables(r[0].bytes);if(o.length===0)throw new Error("No tables found in PDF");const i=ra(o),a=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=r[0].filename.replace(/\.pdf$/i,"")+".csv";be(a,s)}else{const o=(await xe(async()=>{const{default:s}=await import("./jszip.min-CX_3d3rd.js").then(c=>c.j);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default,i=new o;for(const s of r){const c=await this.extractTables(s.bytes);if(c.length===0)continue;const p=ra(c),f=s.filename.replace(/\.pdf$/i,"")+".csv";i.file(f,p)}const a=await i.generateAsync({type:"blob"});be(a,"csv_files.zip")}return{}}}class Im extends K{category="Output";icon="ph-file-code";description="Convert PDF pages to SVG";constructor(){super("PDF to SVG"),this.addInput("pdf",new $.Input(M,"PDF"))}async data(e){const t=oe(e,"PDF to SVG"),r=ge(t),o=await he(),i=(await xe(async()=>{const{default:c}=await import("./jszip.min-CX_3d3rd.js").then(p=>p.j);return{default:c}},__vite__mapDeps([0,1,2,3,4]))).default,a=new i;for(const c of r){const p=new Blob([new Uint8Array(c.bytes)],{type:"application/pdf"}),f=await o.open(p);try{const h=f.pageCount,u=r.length>1?c.filename.replace(/\.pdf$/i,"")+"/":"";for(let w=0;w<h;w++){const b=f.getPage(w).toSvg();a.file(`${u}page_${w+1}.svg`,b)}}finally{f.close()}}const s=await a.generateAsync({type:"blob"});return be(s,"svg_pages.zip"),{}}}class jm extends K{category="Output";icon="ph-markdown-logo";description="Extract text from PDF as Markdown";constructor(){super("PDF to Markdown"),this.addInput("pdf",new $.Input(M,"PDF"))}async extractMarkdown(e){const t=await he(),r=new Blob([new Uint8Array(e)],{type:"application/pdf"});return t.pdfToMarkdown(r,{includeImages:!1})}async data(e){const t=oe(e,"PDF to Markdown"),r=ge(t);if(r.length===1){const o=await this.extractMarkdown(r[0].bytes),i=new Blob([o],{type:"text/markdown"}),a=r[0].filename.replace(/\.pdf$/i,"")+".md";be(i,a)}else{const o=(await xe(async()=>{const{default:s}=await import("./jszip.min-CX_3d3rd.js").then(c=>c.j);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default,i=new o;for(const s of r){const c=await this.extractMarkdown(s.bytes),p=s.filename.replace(/\.pdf$/i,"")+".md";i.file(p,c)}const a=await i.generateAsync({type:"blob"});be(a,"markdown_files.zip")}return{}}}class Nm extends K{category="Output";icon="ph-download-simple";description="Extract all images from PDF";constructor(){super("Extract Images"),this.addInput("pdf",new $.Input(M,"PDF"))}async data(e){const t=oe(e,"Extract Images"),r=ge(t),o=await he(),i=(await xe(async()=>{const{default:p}=await import("./jszip.min-CX_3d3rd.js").then(f=>f.j);return{default:p}},__vite__mapDeps([0,1,2,3,4]))).default,a=new i;let s=0;for(const p of r){const f=new Blob([new Uint8Array(p.bytes)],{type:"application/pdf"}),h=await o.open(f),u=h.pageCount,w=r.length>1?p.filename.replace(/\.pdf$/i,"")+"/":"";for(let l=0;l<u;l++){const b=h.getPage(l),d=b.getImages();for(const v of d)try{const y=b.extractImage(v.xref);y&&y.data&&(s++,a.file(`${w}image_${s}.${y.ext||"png"}`,y.data))}catch{continue}}h.close()}if(s===0)throw new Error("No images found in any of the connected PDFs");const c=await a.generateAsync({type:"blob"});return be(c,"extracted_images.zip"),{}}}class mp extends K{category="Input";icon="ph-microsoft-word-logo";description="Upload Word document and convert to PDF";files=[];constructor(){super("Word Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".doc")||r.endsWith(".docx")||r.endsWith(".odt")||r.endsWith(".rtf"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} documents`}async data(e){if(this.files.length===0)throw new Error("No documents uploaded in Word Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.[^.]+$/,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class gp extends K{category="Input";icon="ph-microsoft-excel-logo";description="Upload Excel spreadsheet and convert to PDF";files=[];constructor(){super("Excel Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".xlsx")||r.endsWith(".xls")||r.endsWith(".ods")||r.endsWith(".csv"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} spreadsheets`}async data(e){if(this.files.length===0)throw new Error("No spreadsheets uploaded in Excel Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.[^.]+$/,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class yp extends K{category="Input";icon="ph-microsoft-powerpoint-logo";description="Upload PowerPoint and convert to PDF";files=[];constructor(){super("PowerPoint Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".ppt")||r.endsWith(".pptx")||r.endsWith(".odp"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} presentations`}async data(e){if(this.files.length===0)throw new Error("No presentations uploaded in PowerPoint Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.[^.]+$/,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class vp extends K{category="Input";icon="ph-text-t";description="Upload text file and convert to PDF";files=[];constructor(){super("Text Input"),this.addOutput("pdf",new $.Output(M,"PDF")),this.addControl("fontSize",new $.InputControl("number",{initial:12})),this.addControl("fontFamily",new $.InputControl("text",{initial:"helv"})),this.addControl("fontColor",new $.InputControl("text",{initial:"#000000"}))}async addFiles(e){for(const t of e)(t.name.endsWith(".txt")||t.type==="text/plain")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} text files`}async data(e){if(this.files.length===0)throw new Error("No text files uploaded in Text Input node");const r=this.controls.fontSize?.value??12,i=this.controls.fontFamily?.value??"helv",s=this.controls.fontColor?.value??"#000000",c=await he(),p=[];for(const f of this.files){const h=await f.text(),u=await c.textToPdf(h,{fontSize:r,fontName:i,textColor:s,pageSize:"a4"}),w=new Uint8Array(await u.arrayBuffer()),l=await X.load(w);p.push({type:"pdf",document:l,bytes:w,filename:f.name.replace(/\.[^.]+$/,".pdf")})}return p.length===1?{pdf:p[0]}:{pdf:{type:"multi-pdf",items:p}}}}class wp extends K{category="Input";icon="ph-file-svg";description="Upload SVG files and convert to PDF";files=[];constructor(){super("SVG Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)(t.name.endsWith(".svg")||t.type==="image/svg+xml")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} SVG files`}async svgToPng(e){return new Promise((t,r)=>{const o=new Image,i=new Blob([e],{type:"image/svg+xml"}),a=URL.createObjectURL(i);o.onload=()=>{const s=document.createElement("canvas");s.width=o.naturalWidth||800,s.height=o.naturalHeight||600,s.getContext("2d").drawImage(o,0,0),URL.revokeObjectURL(a),s.toBlob(async p=>{if(!p){r(new Error("Failed to convert SVG"));return}t(new Uint8Array(await p.arrayBuffer()))},"image/png")},o.onerror=()=>{URL.revokeObjectURL(a),r(new Error("Failed to load SVG"))},o.src=a})}async data(e){if(this.files.length===0)throw new Error("No SVG files uploaded in SVG Input node");const t=await X.create();for(const i of this.files){const a=await i.text(),s=await this.svgToPng(a),c=await t.embedPng(s);t.addPage([c.width,c.height]).drawImage(c,{x:0,y:0,width:c.width,height:c.height})}const r=new Uint8Array(await t.save());return{pdf:{type:"pdf",document:t,bytes:r,filename:"svg_converted.pdf"}}}}class kp extends K{category="Input";icon="ph-book-open-text";description="Upload EPUB and convert to PDF";files=[];constructor(){super("EPUB Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.endsWith(".epub")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} EPUB files`}async data(e){if(this.files.length===0)throw new Error("No EPUB files uploaded in EPUB Input node");const t=await he(),r=[];for(const o of this.files){const i=await t.convertToPdf(o,{filetype:"epub"}),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.epub$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Am extends K{category="Optimize & Repair";icon="ph-gauge";description="Linearize PDF for fast web viewing";constructor(){super("Linearize"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Linearized PDF"))}async data(e){const t=oe(e,"Linearize");return{pdf:await ce(t,async r=>{const o=await Pt(),i=`${Date.now()}_${Math.random().toString(36).slice(2,9)}`,a=`/tmp/input_linearize_${i}.pdf`,s=`/tmp/output_linearize_${i}.pdf`;let c;try{o.FS.writeFile(a,r.bytes),o.callMain([a,"--linearize",s]),c=new Uint8Array(o.FS.readFile(s))}finally{try{o.FS.unlink(a)}catch{}try{o.FS.unlink(s)}catch{}}return{type:"pdf",document:await X.load(c),bytes:c,filename:r.filename.replace(/\.pdf$/i,"_linearized.pdf")}})}}}class Tm extends K{category="Optimize & Repair";icon="ph-perspective";description="Straighten skewed PDF pages";constructor(){super("Deskew"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Deskewed PDF")),this.addControl("skewThreshold",new $.InputControl("text",{initial:"0.5"})),this.addControl("processingDpi",new $.InputControl("text",{initial:"150"}))}async data(e){const t=oe(e,"Deskew"),r=(a,s)=>this.controls[a]?.value||s,o=parseFloat(r("skewThreshold","0.5")),i=parseInt(r("processingDpi","150"))||150;return{pdf:await ce(t,async a=>{const s=await he(),c=new Blob([new Uint8Array(a.bytes)],{type:"application/pdf"}),{pdf:p}=await s.deskewPdf(c,{threshold:o,dpi:i}),f=new Uint8Array(await p.arrayBuffer());return{type:"pdf",document:await X.load(f),bytes:f,filename:a.filename.replace(/\.pdf$/i,"_deskewed.pdf")}})}}}class Bm extends K{category="Optimize & Repair";icon="ph-archive";description="Convert PDF to PDF/A for archiving";constructor(){super("PDF to PDF/A"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF/A")),this.addControl("level",new $.InputControl("text",{initial:"PDF/A-2b"})),this.addControl("preFlatten",new $.InputControl("text",{initial:"false"}))}async data(e){const t=oe(e,"PDF to PDF/A"),r=(a,s)=>this.controls[a]?.value||s,o=r("level","PDF/A-2b"),i=r("preFlatten","false")==="true";return{pdf:await ce(t,async a=>{let s=a.bytes;if(i){const w=await he(),l=new Blob([new Uint8Array(s)],{type:"application/pdf"}),b=await w.rasterizePdf(l,{dpi:300,format:"png"});s=new Uint8Array(await b.arrayBuffer())}const c=await pu(),p=s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength),f=await c.convertToPDFA(p,o),h=new Uint8Array(f);return{type:"pdf",document:await X.load(h),bytes:h,filename:a.filename.replace(/\.pdf$/i,"_pdfa.pdf")}})}}}class zm extends K{category="Organize & Manage";icon="ph-notepad";description="Split pages into tile grid for poster printing";constructor(){super("Posterize"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Posterized PDF")),this.addControl("rows",new $.InputControl("number",{initial:2})),this.addControl("cols",new $.InputControl("number",{initial:2}))}async data(e){const t=oe(e,"Posterize"),r=this.controls.rows,o=this.controls.cols,i=Math.max(1,Math.min(8,r?.value??2)),a=Math.max(1,Math.min(8,o?.value??2));return{pdf:await ce(t,async s=>{const c=await Oe({data:s.bytes}).promise,p=await X.create();for(let h=1;h<=c.numPages;h++){const u=await c.getPage(h),w=u.getViewport({scale:2}),l=document.createElement("canvas");l.width=w.width,l.height=w.height;const b=l.getContext("2d");if(!b)throw new Error(`Failed to get canvas context for page ${h}`);await u.render({canvasContext:b,viewport:w,canvas:l}).promise;const d=w.width/a,v=w.height/i;for(let y=0;y<i;y++)for(let C=0;C<a;C++){const I=document.createElement("canvas");I.width=d,I.height=v;const S=I.getContext("2d");if(!S)throw new Error("Failed to get tile canvas context");S.drawImage(l,C*d,y*v,d,v,0,0,d,v);const B=await new Promise(k=>I.toBlob(k,"image/png"));if(!B)throw new Error(`Failed to render tile (row ${y}, col ${C}) of page ${h}`);const O=new Uint8Array(await B.arrayBuffer()),_=await p.embedPng(O);p.addPage([d/2,v/2]).drawImage(_,{x:0,y:0,width:d/2,height:v/2})}}const f=new Uint8Array(await p.save());return{type:"pdf",document:p,bytes:f,filename:s.filename.replace(/\.pdf$/i,"_posterized.pdf")}})}}}const Mm={Letter:He.Letter,A4:He.A4,A3:He.A3,Tabloid:He.Tabloid,Legal:He.Legal};class Rm extends K{category="Organize & Manage";icon="ph-book-open";description="Arrange pages for booklet printing";constructor(){super("Booklet"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Booklet PDF")),this.addControl("gridMode",new $.InputControl("text",{initial:"1x2"})),this.addControl("paperSize",new $.InputControl("text",{initial:"Letter"})),this.addControl("orientation",new $.InputControl("text",{initial:"auto"}))}async data(e){const t=oe(e,"Booklet"),r=(l,b)=>this.controls[l]?.value||b,o=r("gridMode","1x2"),i=r("paperSize","Letter"),a=r("orientation","auto");let s,c;switch(o){case"2x2":s=2,c=2;break;case"2x4":s=2,c=4;break;case"4x4":s=4,c=4;break;default:s=1,c=2;break}const p=s===1&&c===2,f=Mm[i]||He.Letter,h=a==="portrait"?"portrait":a==="landscape"||p?"landscape":"portrait",u=h==="landscape"?f[1]:f[0],w=h==="landscape"?f[0]:f[1];return{pdf:await ce(t,async l=>{const b=await X.load(l.bytes),d=b.getPageCount(),v=s*c,y=await X.create();let C,I;p?(I=Math.ceil(d/4)*4,C=Math.ceil(d/4)*2):(I=d,C=Math.ceil(d/v));const S=u/c,B=w/s,O=10;for(let g=0;g<C;g++){const k=y.addPage([u,w]);for(let F=0;F<s;F++)for(let x=0;x<c;x++){const N=F*c+x;let T;if(p){const z=Math.floor(g/2);g%2===0?T=x===0?I-2*z:2*z+1:T=x===0?2*z+2:I-2*z-1}else T=g*v+N+1;if(T>=1&&T<=d){const[z]=await y.embedPdf(b,[T-1]),{width:m,height:A}=z,D=S-O*2,P=B-O*2,R=Math.min(D/m,P/A),Z=m*R,Y=A*R,re=x*S+O+(D-Z)/2,U=w-(F+1)*B+O+(P-Y)/2;k.drawPage(z,{x:re,y:U,width:Z,height:Y})}}}const _=new Uint8Array(await y.save());return{type:"pdf",document:y,bytes:_,filename:l.filename.replace(/\.pdf$/i,"_booklet.pdf")}})}}}class Lm extends K{category="Optimize & Repair";icon="ph-text-outdent";description="Convert fonts to vector outlines";constructor(){super("Font to Outline"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"Outlined PDF"))}async data(e){const t=oe(e,"Font to Outline");return{pdf:await ce(t,async r=>{const o=await uu(new Uint8Array(r.bytes)),i=new Uint8Array(o);return{type:"pdf",document:await X.load(i),bytes:i,filename:r.filename.replace(/\.pdf$/i,"_outline.pdf")}})}}}class Um extends K{category="Organize & Manage";icon="ph-list";description="Generate table of contents from bookmarks";constructor(){super("Table of Contents"),this.addInput("pdf",new $.Input(M,"PDF")),this.addOutput("pdf",new $.Output(M,"PDF with TOC")),this.addControl("title",new $.InputControl("text",{initial:"Table of Contents"})),this.addControl("fontSize",new $.InputControl("number",{initial:12})),this.addControl("fontFamily",new $.InputControl("number",{initial:0})),this.addControl("addBookmark",new $.InputControl("text",{initial:"true"}))}async data(e){const t=oe(e,"Table of Contents"),r=this.controls.title,o=this.controls.fontSize,i=this.controls.fontFamily,a=this.controls.addBookmark,s=r?.value??"Table of Contents",c=o?.value??12,p=i?.value??0,f=(a?.value??"true")==="true",h=hu.getUrl("cpdf");if(!h)throw new Error("CoherentPDF is not configured. Please configure it in Advanced Settings.");return{pdf:await ce(t,async u=>{const w=await new Promise((d,v)=>{const y=new Worker("/bentopdf/workers/table-of-contents.worker.js");y.onmessage=I=>{y.terminate(),I.data.status==="success"?d(new Uint8Array(I.data.pdfBytes)):v(new Error(I.data.message||"Failed to generate table of contents"))},y.onerror=I=>{y.terminate(),v(new Error("Worker error: "+I.message))};const C=u.bytes.buffer.slice(u.bytes.byteOffset,u.bytes.byteOffset+u.bytes.byteLength);y.postMessage({command:"generate-toc",pdfData:C,title:s,fontSize:c,fontFamily:p,addBookmark:f,cpdfUrl:h+"coherentpdf.browser.min.js"},[C])}),l=new Uint8Array(w);return{type:"pdf",document:await X.load(l),bytes:l,filename:u.filename.replace(/\.pdf$/i,"_toc.pdf")}})}}}class Pp extends K{category="Input";icon="ph-envelope";description="Upload email files (.eml, .msg) and convert to PDF";files=[];constructor(){super("Email Input"),this.addOutput("pdf",new $.Output(M,"PDF")),this.addControl("pageSize",new $.InputControl("text",{initial:"a4"})),this.addControl("includeCcBcc",new $.InputControl("text",{initial:"true"})),this.addControl("includeAttachments",new $.InputControl("text",{initial:"true"}))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".eml")||r.endsWith(".msg"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} email files`}async data(e){if(this.files.length===0)throw new Error("No email files uploaded in Email Input node");const t=this.controls.pageSize,r=this.controls.includeCcBcc,o=this.controls.includeAttachments,i=t?.value??"a4",a=(r?.value??"true")==="true",s=(o?.value??"true")==="true",c=await he(),p=[];for(const f of this.files){const h=await fu(f),u=du(h,{includeCcBcc:a,includeAttachments:s}),w=await c.htmlToPdf(u,{pageSize:i,margins:{top:50,right:50,bottom:50,left:50},attachments:h.attachments.filter(d=>d.content).map(d=>({filename:d.filename,content:d.content}))}),l=new Uint8Array(await w.arrayBuffer()),b=await X.load(l);p.push({type:"pdf",document:b,bytes:l,filename:f.name.replace(/\.[^.]+$/,".pdf")})}return p.length===1?{pdf:p[0]}:{pdf:{type:"multi-pdf",items:p}}}}class xp extends K{category="Input";icon="ph-scan";description="Upload XPS/OXPS documents and convert to PDF";files=[];constructor(){super("XPS Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".xps")||r.endsWith(".oxps"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} XPS files`}async data(e){if(this.files.length===0)throw new Error("No XPS files uploaded in XPS Input node");const t=await he(),r=[];for(const o of this.files){const i=await t.convertToPdf(o,{filetype:"xps"}),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.(xps|oxps)$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Cp extends K{category="Input";icon="ph-book-open-text";description="Upload MOBI e-books and convert to PDF";files=[];constructor(){super("MOBI Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".mobi")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} MOBI files`}async data(e){if(this.files.length===0)throw new Error("No MOBI files uploaded in MOBI Input node");const t=await he(),r=[];for(const o of this.files){const i=await t.convertToPdf(o,{filetype:"mobi"}),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.mobi$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class _p extends K{category="Input";icon="ph-book-bookmark";description="Upload FB2 e-books and convert to PDF";files=[];constructor(){super("FB2 Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".fb2")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} FB2 files`}async data(e){if(this.files.length===0)throw new Error("No FB2 files uploaded in FB2 Input node");const t=await he(),r=[];for(const o of this.files){const i=await t.convertToPdf(o,{filetype:"fb2"}),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.fb2$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class $p extends K{category="Input";icon="ph-book-open";description="Upload comic book archives and convert to PDF";files=[];constructor(){super("CBZ Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".cbz")||r.endsWith(".cbr"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} comic archives`}async data(e){if(this.files.length===0)throw new Error("No comic archives uploaded in CBZ Input node");const t=await he(),r=[];for(const o of this.files){const i=await t.convertToPdf(o,{filetype:"cbz"}),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.(cbz|cbr)$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}const Wm=new bu({html:!0,linkify:!0,typographer:!0});class Ep extends K{category="Input";icon="ph-markdown-logo";description="Upload Markdown files and convert to PDF";files=[];constructor(){super("Markdown Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".md")||r.endsWith(".markdown"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} Markdown files`}async data(e){if(this.files.length===0)throw new Error("No Markdown files uploaded in Markdown Input node");const t=await he(),r=[];for(const o of this.files){const i=await o.text(),a=`<!DOCTYPE html><html><head><meta charset="utf-8"><style>
        body { font-family: sans-serif; font-size: 12pt; line-height: 1.6; max-width: 100%; padding: 0; }
        h1 { font-size: 24pt; } h2 { font-size: 20pt; } h3 { font-size: 16pt; }
        code { background: #f0f0f0; padding: 2px 4px; border-radius: 3px; font-size: 0.9em; }
        pre code { display: block; padding: 12px; overflow-x: auto; }
        blockquote { border-left: 3px solid #ccc; margin-left: 0; padding-left: 12px; color: #555; }
        table { border-collapse: collapse; width: 100%; } th, td { border: 1px solid #ccc; padding: 6px 12px; }
      </style></head><body>${Wm.render(i)}</body></html>`,s=await t.htmlToPdf(a,{pageSize:"a4"}),c=new Uint8Array(await s.arrayBuffer()),p=await X.load(c);r.push({type:"pdf",document:p,bytes:c,filename:o.name.replace(/\.(md|markdown)$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Op extends K{category="Input";icon="ph-file-code";description="Upload JSON files and convert to PDF";files=[];constructor(){super("JSON Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".json")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} JSON files`}async data(e){if(this.files.length===0)throw new Error("No JSON files uploaded in JSON Input node");const t=await he(),r=[];for(const o of this.files){const i=await o.text();let a;try{a=JSON.stringify(JSON.parse(i),null,2)}catch{a=i}const s=await t.textToPdf(a,{fontSize:10,fontName:"cour",pageSize:"a4"}),c=new Uint8Array(await s.arrayBuffer()),p=await X.load(c);r.push({type:"pdf",document:p,bytes:c,filename:o.name.replace(/\.json$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Dp extends K{category="Input";icon="ph-file-code";description="Upload XML files and convert to PDF";files=[];constructor(){super("XML Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".xml")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} XML files`}async data(e){if(this.files.length===0)throw new Error("No XML files uploaded in XML Input node");const t=await he(),r=[];for(const o of this.files){const i=await o.text(),a=await t.textToPdf(i,{fontSize:10,fontName:"cour",pageSize:"a4"}),s=new Uint8Array(await a.arrayBuffer()),c=await X.load(s);r.push({type:"pdf",document:c,bytes:s,filename:o.name.replace(/\.xml$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Fp extends K{category="Input";icon="ph-file-text";description="Upload WordPerfect documents and convert to PDF";files=[];constructor(){super("WPD Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".wpd")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} WPD files`}async data(e){if(this.files.length===0)throw new Error("No WPD files uploaded in WPD Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.wpd$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Sp extends K{category="Input";icon="ph-file-text";description="Upload WPS Office documents and convert to PDF";files=[];constructor(){super("WPS Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".wps")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} WPS files`}async data(e){if(this.files.length===0)throw new Error("No WPS files uploaded in WPS Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.wps$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Ip extends K{category="Input";icon="ph-file-text";description="Upload Apple Pages documents and convert to PDF";files=[];constructor(){super("Pages Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".pages")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} Pages files`}async data(e){if(this.files.length===0)throw new Error("No Pages files uploaded in Pages Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.pages$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class jp extends K{category="Input";icon="ph-image";description="Upload OpenDocument Graphics and convert to PDF";files=[];constructor(){super("ODG Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".odg")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} ODG files`}async data(e){if(this.files.length===0)throw new Error("No ODG files uploaded in ODG Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.odg$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Np extends K{category="Input";icon="ph-book-open";description="Upload Microsoft Publisher files and convert to PDF";files=[];constructor(){super("PUB Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e)t.name.toLowerCase().endsWith(".pub")&&this.files.push(t)}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} PUB files`}async data(e){if(this.files.length===0)throw new Error("No PUB files uploaded in PUB Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.pub$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}class Ap extends K{category="Input";icon="ph-git-branch";description="Upload Visio diagrams and convert to PDF";files=[];constructor(){super("VSD Input"),this.addOutput("pdf",new $.Output(M,"PDF"))}async addFiles(e){for(const t of e){const r=t.name.toLowerCase();(r.endsWith(".vsd")||r.endsWith(".vsdx"))&&this.files.push(t)}}removeFile(e){this.files.splice(e,1)}hasFile(){return this.files.length>0}getFileCount(){return this.files.length}getFilenames(){return this.files.map(e=>e.name)}getFilename(){return this.files.length===0?"":this.files.length===1?this.files[0].name:`${this.files.length} Visio files`}async data(e){if(this.files.length===0)throw new Error("No Visio files uploaded in VSD Input node");const t=_e();await t.initialize();const r=[];for(const o of this.files){const i=await t.convertToPdf(o),a=new Uint8Array(await i.arrayBuffer()),s=await X.load(a);r.push({type:"pdf",document:s,bytes:a,filename:o.name.replace(/\.(vsd|vsdx)$/i,".pdf")})}return r.length===1?{pdf:r[0]}:{pdf:{type:"multi-pdf",items:r}}}}const kt={PDFInputNode:{label:"PDF Input",category:"Input",icon:"ph-file-pdf",description:"Upload one or more PDF files",factory:()=>new fp},ImageInputNode:{label:"Image Input",category:"Input",icon:"ph-image",description:"Upload images and convert to PDF",factory:()=>new dp},WordToPdfNode:{label:"Word to PDF",category:"Input",icon:"ph-microsoft-word-logo",description:"Convert Word documents to PDF",factory:()=>new mp},ExcelToPdfNode:{label:"Excel to PDF",category:"Input",icon:"ph-microsoft-excel-logo",description:"Convert Excel spreadsheets to PDF",factory:()=>new gp},PowerPointToPdfNode:{label:"PowerPoint to PDF",category:"Input",icon:"ph-microsoft-powerpoint-logo",description:"Convert PowerPoint presentations to PDF",factory:()=>new yp},TextToPdfNode:{label:"Text to PDF",category:"Input",icon:"ph-text-t",description:"Convert plain text to PDF",factory:()=>new vp},SvgToPdfNode:{label:"SVG to PDF",category:"Input",icon:"ph-file-svg",description:"Convert SVG files to PDF",factory:()=>new wp},EpubToPdfNode:{label:"EPUB to PDF",category:"Input",icon:"ph-book-open-text",description:"Convert EPUB ebooks to PDF",factory:()=>new kp},EmailToPdfNode:{label:"Email to PDF",category:"Input",icon:"ph-envelope",description:"Convert email files (.eml, .msg) to PDF",factory:()=>new Pp},XpsToPdfNode:{label:"XPS to PDF",category:"Input",icon:"ph-scan",description:"Convert XPS/OXPS documents to PDF",factory:()=>new xp},MobiToPdfNode:{label:"MOBI to PDF",category:"Input",icon:"ph-book-open-text",description:"Convert MOBI e-books to PDF",factory:()=>new Cp},Fb2ToPdfNode:{label:"FB2 to PDF",category:"Input",icon:"ph-book-bookmark",description:"Convert FB2 e-books to PDF",factory:()=>new _p},CbzToPdfNode:{label:"CBZ to PDF",category:"Input",icon:"ph-book-open",description:"Convert comic book archives (CBZ/CBR) to PDF",factory:()=>new $p},MarkdownToPdfNode:{label:"Markdown to PDF",category:"Input",icon:"ph-markdown-logo",description:"Convert Markdown files to PDF",factory:()=>new Ep},JsonToPdfNode:{label:"JSON to PDF",category:"Input",icon:"ph-file-code",description:"Convert JSON files to PDF",factory:()=>new Op},XmlToPdfNode:{label:"XML to PDF",category:"Input",icon:"ph-file-code",description:"Convert XML documents to PDF",factory:()=>new Dp},WpdToPdfNode:{label:"WPD to PDF",category:"Input",icon:"ph-file-text",description:"Convert WordPerfect documents to PDF",factory:()=>new Fp},WpsToPdfNode:{label:"WPS to PDF",category:"Input",icon:"ph-file-text",description:"Convert WPS Office documents to PDF",factory:()=>new Sp},PagesToPdfNode:{label:"Pages to PDF",category:"Input",icon:"ph-file-text",description:"Convert Apple Pages documents to PDF",factory:()=>new Ip},OdgToPdfNode:{label:"ODG to PDF",category:"Input",icon:"ph-image",description:"Convert OpenDocument Graphics to PDF",factory:()=>new jp},PubToPdfNode:{label:"PUB to PDF",category:"Input",icon:"ph-book-open",description:"Convert Microsoft Publisher to PDF",factory:()=>new Np},VsdToPdfNode:{label:"VSD to PDF",category:"Input",icon:"ph-git-branch",description:"Convert Visio diagrams (VSD/VSDX) to PDF",factory:()=>new Ap},MergeNode:{label:"Merge PDFs",category:"Organize & Manage",icon:"ph-browsers",description:"Combine multiple PDFs into one",factory:()=>new Kb},SplitNode:{label:"Split PDF",category:"Organize & Manage",icon:"ph-scissors",description:"Extract a range of pages",factory:()=>new Jb},ExtractPagesNode:{label:"Extract Pages",category:"Organize & Manage",icon:"ph-squares-four",description:"Extract pages as separate PDFs",factory:()=>new Zb},RotateNode:{label:"Rotate",category:"Organize & Manage",icon:"ph-arrow-clockwise",description:"Rotate all pages",factory:()=>new Yb},DeletePagesNode:{label:"Delete Pages",category:"Organize & Manage",icon:"ph-trash",description:"Remove specific pages",factory:()=>new Qb},ReversePagesNode:{label:"Reverse Pages",category:"Organize & Manage",icon:"ph-sort-descending",description:"Reverse page order",factory:()=>new em},AddBlankPageNode:{label:"Add Blank Page",category:"Organize & Manage",icon:"ph-file-plus",description:"Insert blank pages",factory:()=>new tm},DividePagesNode:{label:"Divide Pages",category:"Organize & Manage",icon:"ph-columns",description:"Split pages vertically or horizontally",factory:()=>new nm},NUpNode:{label:"N-Up",category:"Organize & Manage",icon:"ph-squares-four",description:"Arrange multiple pages per sheet",factory:()=>new rm},CombineSinglePageNode:{label:"Combine to Single Page",category:"Organize & Manage",icon:"ph-arrows-out-line-vertical",description:"Stitch all pages into one continuous page",factory:()=>new om},BookletNode:{label:"Booklet",category:"Organize & Manage",icon:"ph-book-open",description:"Arrange pages for booklet printing",factory:()=>new Rm},PosterizeNode:{label:"Posterize",category:"Organize & Manage",icon:"ph-notepad",description:"Split pages into tile grid for poster printing",factory:()=>new zm},EditMetadataNode:{label:"Edit Metadata",category:"Organize & Manage",icon:"ph-file-code",description:"Edit PDF metadata",factory:()=>new Pm},TableOfContentsNode:{label:"Table of Contents",category:"Organize & Manage",icon:"ph-list",description:"Generate table of contents from bookmarks",factory:()=>new Um},OCRNode:{label:"OCR",category:"Organize & Manage",icon:"ph-barcode",description:"Add searchable text layer via OCR",factory:()=>new ym},CropNode:{label:"Crop",category:"Edit & Annotate",icon:"ph-crop",description:"Trim margins from all pages",factory:()=>new im},GreyscaleNode:{label:"Greyscale",category:"Edit & Annotate",icon:"ph-palette",description:"Convert to greyscale",factory:()=>new am},InvertColorsNode:{label:"Invert Colors",category:"Edit & Annotate",icon:"ph-circle-half",description:"Invert all colors",factory:()=>new sm},ScannerEffectNode:{label:"Scanner Effect",category:"Edit & Annotate",icon:"ph-scan",description:"Apply scanner simulation effect",factory:()=>new cm},AdjustColorsNode:{label:"Adjust Colors",category:"Edit & Annotate",icon:"ph-sliders-horizontal",description:"Adjust brightness, contrast, and colors",factory:()=>new lm},BackgroundColorNode:{label:"Background Color",category:"Edit & Annotate",icon:"ph-palette",description:"Change background color",factory:()=>new pm},WatermarkNode:{label:"Watermark",category:"Edit & Annotate",icon:"ph-drop",description:"Add text watermark",factory:()=>new um},PageNumbersNode:{label:"Page Numbers",category:"Edit & Annotate",icon:"ph-list-numbers",description:"Add page numbers",factory:()=>new hm},HeaderFooterNode:{label:"Header & Footer",category:"Edit & Annotate",icon:"ph-paragraph",description:"Add header and footer text",factory:()=>new fm},RemoveBlankPagesNode:{label:"Remove Blank Pages",category:"Edit & Annotate",icon:"ph-file-minus",description:"Remove blank pages automatically",factory:()=>new vm},RemoveAnnotationsNode:{label:"Remove Annotations",category:"Edit & Annotate",icon:"ph-eraser",description:"Strip all annotations",factory:()=>new wm},CompressNode:{label:"Compress",category:"Optimize & Repair",icon:"ph-lightning",description:"Reduce PDF file size",factory:()=>new mm},RasterizeNode:{label:"Rasterize",category:"Optimize & Repair",icon:"ph-image",description:"Convert to image-based PDF",factory:()=>new gm},LinearizeNode:{label:"Linearize",category:"Optimize & Repair",icon:"ph-gauge",description:"Optimize PDF for fast web viewing",factory:()=>new Am},DeskewNode:{label:"Deskew",category:"Optimize & Repair",icon:"ph-perspective",description:"Straighten skewed PDF pages",factory:()=>new Tm},PdfToPdfANode:{label:"PDF to PDF/A",category:"Optimize & Repair",icon:"ph-archive",description:"Convert PDF to PDF/A for archiving",factory:()=>new Bm},FontToOutlineNode:{label:"Font to Outline",category:"Optimize & Repair",icon:"ph-text-outdent",description:"Convert fonts to vector outlines",factory:()=>new Lm},RepairNode:{label:"Repair",category:"Optimize & Repair",icon:"ph-wrench",description:"Repair corrupted PDF",factory:()=>new Em},EncryptNode:{label:"Encrypt",category:"Secure PDF",icon:"ph-lock",description:"Encrypt PDF with password",factory:()=>new Cm},DecryptNode:{label:"Decrypt",category:"Secure PDF",icon:"ph-lock-open",description:"Remove PDF password protection",factory:()=>new _m},SanitizeNode:{label:"Sanitize",category:"Secure PDF",icon:"ph-broom",description:"Remove metadata, scripts, and hidden data",factory:()=>new xm},FlattenNode:{label:"Flatten",category:"Secure PDF",icon:"ph-stack",description:"Flatten forms and annotations",factory:()=>new km},DigitalSignNode:{label:"Digital Sign",category:"Secure PDF",icon:"ph-certificate",description:"Apply a digital signature to PDF",factory:()=>new bp},RedactNode:{label:"Redact",category:"Secure PDF",icon:"ph-eye-slash",description:"Redact text from PDF",factory:()=>new $m},DownloadNode:{label:"Download",category:"Output",icon:"ph-download-simple",description:"Download as PDF or ZIP automatically",factory:()=>new hr},DownloadPDFNode:{label:"Download",category:"Output",icon:"ph-download-simple",description:"Download as PDF or ZIP automatically",factory:()=>new hr,hidden:!0},DownloadZipNode:{label:"Download",category:"Output",icon:"ph-download-simple",description:"Download as PDF or ZIP automatically",factory:()=>new hr,hidden:!0},PdfToImagesNode:{label:"PDF to Images",category:"Output",icon:"ph-file-image",description:"Convert PDF pages to images (ZIP)",factory:()=>new Xb},PdfToTextNode:{label:"PDF to Text",category:"Output",icon:"ph-text-aa",description:"Extract text from PDF",factory:()=>new Om},PdfToDocxNode:{label:"PDF to DOCX",category:"Output",icon:"ph-microsoft-word-logo",description:"Convert PDF to Word document",factory:()=>new Dm},PdfToXlsxNode:{label:"PDF to XLSX",category:"Output",icon:"ph-microsoft-excel-logo",description:"Convert PDF tables to Excel",factory:()=>new Fm},PdfToCsvNode:{label:"PDF to CSV",category:"Output",icon:"ph-file-csv",description:"Convert PDF tables to CSV",factory:()=>new Sm},PdfToSvgNode:{label:"PDF to SVG",category:"Output",icon:"ph-file-code",description:"Convert PDF pages to SVG",factory:()=>new Im},PdfToMarkdownNode:{label:"PDF to Markdown",category:"Output",icon:"ph-markdown-logo",description:"Convert PDF to Markdown text",factory:()=>new jm},ExtractImagesNode:{label:"Extract Images",category:"Output",icon:"ph-download-simple",description:"Extract all images from PDF",factory:()=>new Nm}};function Hm(n){const e=kt[n];return e?e.factory():null}function qm(){const n={Input:[],"Edit & Annotate":[],"Organize & Manage":[],"Optimize & Repair":[],"Secure PDF":[],Output:[]};for(const e of Object.values(kt))e.hidden||n[e.category].push(e);return n}function Vm(n){return n.constructor.name||null}function Tp(n,e){const t=[],r=[];for(const o of n.getNodes()){const i=e.nodeViews.get(o.id),a=i?{x:i.position.x,y:i.position.y}:{x:0,y:0},s={};for(const[c,p]of Object.entries(o.controls))p&&"value"in p&&(s[c]=p.value);t.push({id:o.id,type:Vm(o)||"unknown",position:a,controls:s})}for(const o of n.getConnections())r.push({id:o.id,source:o.source,sourceOutput:o.sourceOutput,target:o.target,targetInput:o.targetInput});return{version:Rb,nodes:t,connections:r}}async function Bp(n,e,t){for(const i of e.getConnections())await e.removeConnection(i.id);for(const i of e.getNodes())await e.removeNode(i.id);const r=new Map,o=[];for(const i of n.nodes){const a=Hm(i.type);if(!a){o.push(i.type);continue}for(const[s,c]of Object.entries(i.controls||{})){const p=a.controls[s];p&&"value"in p&&(p.value=c)}await e.addNode(a),r.set(i.id,a.id),await t.translate(a.id,i.position)}for(const i of n.connections){const a=r.get(i.source),s=r.get(i.target);if(!a||!s)continue;const c=e.getNode(a),p=e.getNode(s);if(!c||!p)continue;const f=new $.Connection(c,i.sourceOutput,p,i.targetInput);await e.addConnection(f)}if(o.length>0)throw console.warn("Skipped unknown node types during load:",o),new Error(`Some nodes could not be loaded: ${o.join(", ")}. They may have been removed or renamed.`)}const qr="bento-pdf-workflow-templates";function $t(){const n=localStorage.getItem(qr);if(!n)return{};try{return JSON.parse(n)}catch{return{}}}function oa(){return Object.keys($t())}function Gm(n,e,t){const r=Tp(n,e),o=$t(),i=o[t];o[t]=r;try{localStorage.setItem(qr,JSON.stringify(o))}catch{throw i!==void 0?o[t]=i:delete o[t],new Error("Failed to save workflow: storage quota exceeded. Try deleting old templates.")}}function Xm(n){const e=$t();return n in e}async function Km(n,e,t){const o=$t()[t];if(!o)return!1;try{return await Bp(o,n,e),!0}catch(i){return console.error(`Failed to load workflow "${t}":`,i),!1}}function Jm(n){const e=$t();delete e[n],localStorage.setItem(qr,JSON.stringify(e))}function Zm(n,e){const t=Tp(n,e),r=JSON.stringify(t,null,2),o=new Blob([r],{type:"application/json"}),i=URL.createObjectURL(o);try{const a=document.createElement("a");a.href=i,a.download="workflow.json",a.click()}finally{URL.revokeObjectURL(i)}}async function Ym(n,e){return new Promise((t,r)=>{const o=document.createElement("input");o.type="file",o.accept=".json",o.onchange=async()=>{const i=o.files?.[0];if(!i){t();return}try{const a=await i.text(),s=JSON.parse(a);await Bp(s,n,e),t()}catch(a){const s=a instanceof Error?a.message:"Unknown error";r(new Error(`Failed to import workflow: ${s}`))}},o.click()})}let ve=null,Te=null;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ia):ia();async function ia(){const n=document.getElementById("rete-container");if(!n)return;ve=await Mb(n);const{editor:e,area:t,engine:r}=ve;ng(),e.addPipe(h=>{if((h.type==="nodecreated"||h.type==="noderemoved")&&bt(),h.type==="connectioncreated"||h.type==="connectionremoved"){const u=h.data;Ne(u.source,e,t),Ne(u.target,e,t)}return h}),document.getElementById("run-btn")?.addEventListener("click",async()=>{const h=e.getNodes();if(h.length===0){ke("Error","Add at least one node to run the workflow.");return}const u=h.some(d=>d.category==="Input"),w=h.some(d=>d.category==="Output");if(!u||!w){ke("Error","Your workflow needs at least one input node and one output node to run.");return}const l=document.getElementById("status-text"),b=document.getElementById("run-btn");b.disabled=!0,b.classList.add("opacity-50","pointer-events-none");try{await Hb(e,r,t,d=>{const v=d.message||`Processing ${d.nodeName}...`;l&&(l.textContent=v)}),l&&(l.textContent="Workflow completed")}catch(d){l&&(l.textContent="Error during execution"),ke("Error",d.message)}finally{b.disabled=!1,b.classList.remove("opacity-50","pointer-events-none")}}),document.getElementById("clear-btn")?.addEventListener("click",async()=>{await e.clear(),bt();const h=document.getElementById("status-text");h&&(h.textContent="Ready"),document.getElementById("settings-sidebar")?.classList.add("hidden")}),document.getElementById("close-settings")?.addEventListener("click",()=>{document.getElementById("settings-sidebar")?.classList.add("hidden")}),document.getElementById("save-btn")?.addEventListener("click",()=>{eg(e,t)}),document.getElementById("load-btn")?.addEventListener("click",()=>{tg(e,t)}),document.getElementById("export-btn")?.addEventListener("click",()=>{Zm(e,t)}),document.getElementById("import-btn")?.addEventListener("click",async()=>{await Ym(e,t),bt()});const o=document.getElementById("toolbox-sidebar"),i=document.getElementById("toolbox-backdrop");function a(){o?.classList.add("hidden"),o?.classList.remove("flex"),i?.classList.add("hidden")}function s(){o?.classList.remove("hidden"),o?.classList.add("flex"),i?.classList.remove("hidden")}document.getElementById("toolbox-toggle")?.addEventListener("click",()=>{o?.classList.contains("hidden")?s():a()}),i?.addEventListener("click",a),document.getElementById("node-search")?.addEventListener("input",h=>{const u=h.target.value.toLowerCase(),w=document.querySelectorAll(".toolbox-node-item"),l=document.querySelectorAll(".toolbox-category");w.forEach(b=>{const d=b.dataset.label?.toLowerCase()??"";b.style.display=d.includes(u)?"":"none"}),l.forEach(b=>{const d=b.querySelector(".toolbox-items");d&&(d.style.display="");const v=b.querySelectorAll('.toolbox-node-item:not([style*="display: none"])');b.style.display=v.length>0?"":"none"})});let c=!1,p=0,f=null;t.addPipe(h=>{if(h.type==="nodepicked"){const u=h.data.id;Te=u,c=!0,f=u,p=0}if(h.type==="nodetranslated"){const u=h.data.position.x-h.data.previous.x,w=h.data.position.y-h.data.previous.y;p+=Math.abs(u)+Math.abs(w)}if(h.type==="nodedragged"){if(f&&p<5){const u=e.getNode(f);u&&ye(u)}f=null}return h.type==="translated"&&n.classList.add("is-panning"),h}),n.addEventListener("mouseup",()=>n.classList.remove("is-panning")),n.addEventListener("mouseleave",()=>n.classList.remove("is-panning")),n.addEventListener("click",h=>{if(c){c=!1;return}h.target.closest('[data-testid="node"]')||(Te=null,document.getElementById("settings-sidebar")?.classList.add("hidden"))}),document.addEventListener("keydown",h=>{if(!(!Te||!ve)&&(h.key==="Delete"||h.key==="Backspace")){const u=h.target.tagName;if(u==="INPUT"||u==="TEXTAREA"||u==="SELECT")return;h.preventDefault(),Qm()}}),document.addEventListener("wf-delete-node",(h=>{const u=h.detail?.nodeId;u&&zp(u)}))}async function zp(n){if(!ve)return;const{editor:e}=ve,t=e.getConnections().filter(r=>r.source===n||r.target===n);for(const r of t)await e.removeConnection(r.id);await e.removeNode(n),Te===n&&(Te=null,document.getElementById("settings-sidebar")?.classList.add("hidden")),bt()}async function Qm(){Te&&await zp(Te)}function bt(){if(!ve)return;const n=ve.editor.getNodes().length,e=document.getElementById("node-count");e&&(e.textContent=`${n} node${n!==1?"s":""}`)}function eg(n,e){const t=document.getElementById("save-template-modal"),r=document.getElementById("save-template-name"),o=document.getElementById("save-template-error"),i=document.getElementById("save-template-confirm"),a=document.getElementById("save-template-cancel");r.value="",o.classList.add("hidden"),t.classList.remove("hidden"),r.focus();const s=()=>{t.classList.add("hidden"),i.replaceWith(i.cloneNode(!0)),a.replaceWith(a.cloneNode(!0)),r.removeEventListener("keydown",p)},c=()=>{const f=r.value.trim();if(!f){o.textContent="Please enter a name.",o.classList.remove("hidden");return}if(Xm(f)){o.textContent="A template with this name already exists.",o.classList.remove("hidden");return}Gm(n,e,f),s(),ke("Saved",`Template "${f}" saved.`,"success")},p=f=>{f.key==="Enter"&&c(),f.key==="Escape"&&s()};r.addEventListener("keydown",p),document.getElementById("save-template-confirm").addEventListener("click",c),document.getElementById("save-template-cancel").addEventListener("click",s)}function tg(n,e){const t=document.getElementById("load-template-modal"),r=document.getElementById("load-template-list"),o=document.getElementById("load-template-empty"),i=document.getElementById("load-template-cancel"),a=oa();if(r.innerHTML="",a.length===0)o.classList.remove("hidden");else{o.classList.add("hidden");for(const c of a){const p=document.createElement("div");p.className="group flex items-center gap-2 bg-gray-900/60 hover:bg-gray-700/50 rounded-lg px-3 py-2.5 border border-gray-700/50 transition-colors cursor-pointer";const f=document.createElement("i");f.className="ph ph-file-text text-base text-gray-500 flex-shrink-0",p.appendChild(f);const h=document.createElement("span");h.className="text-gray-200 text-sm truncate flex-1",h.textContent=c,p.appendChild(h);const u=document.createElement("button");u.className="bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-medium px-3 py-1.5 rounded-md transition-colors flex-shrink-0",u.textContent="Load",u.addEventListener("click",async()=>{const l=await Km(n,e,c);s(),l?(bt(),ke("Loaded",`Template "${c}" loaded.`,"success")):ke("Error","Failed to load template.")}),p.appendChild(u);const w=document.createElement("button");w.className="text-gray-600 hover:text-red-400 transition-colors flex-shrink-0",w.innerHTML='<i class="ph ph-trash text-sm"></i>',w.addEventListener("click",()=>{Jm(c),p.remove(),oa().length===0&&o.classList.remove("hidden")}),p.appendChild(w),r.appendChild(p)}}t.classList.remove("hidden");const s=()=>{t.classList.add("hidden"),i.replaceWith(i.cloneNode(!0))};document.getElementById("load-template-cancel").addEventListener("click",s)}function ng(){const n=document.getElementById("toolbox-categories");if(!n)return;const e=qm(),t=[{key:"Input",label:"Input",color:"text-blue-400"},{key:"Edit & Annotate",label:"Edit & Annotate",color:"text-indigo-300"},{key:"Organize & Manage",label:"Organize & Manage",color:"text-violet-300"},{key:"Optimize & Repair",label:"Optimize & Repair",color:"text-amber-300"},{key:"Secure PDF",label:"Secure PDF",color:"text-rose-300"},{key:"Output",label:"Output",color:"text-teal-300"}];for(const o of t){const i=e[o.key]??[];if(i.length===0)continue;const a=document.createElement("div");a.className="toolbox-category";const s=document.createElement("button");s.className=`w-full flex items-center justify-between text-xs font-bold uppercase tracking-wider ${o.color} mb-1.5 px-1 hover:opacity-80 transition-opacity`,s.type="button";const c=document.createElement("span");c.textContent=o.label,s.appendChild(c);const p=document.createElement("span");p.className="flex-shrink-0",p.innerHTML='<i class="ph ph-caret-down text-xs"></i>',s.appendChild(p);const f=document.createElement("div");f.className="toolbox-items",s.addEventListener("click",()=>{const h=f.style.display==="none";f.style.display=h?"":"none";const u=h?"ph-caret-down":"ph-caret-up";p.innerHTML=`<i class="ph ${u} text-xs"></i>`}),a.appendChild(s);for(const h of i){const u=document.createElement("button");u.className="toolbox-node-item w-full text-left px-2 py-1.5 rounded-md text-gray-300 hover:bg-gray-700 hover:text-white transition-colors text-xs flex items-center gap-2",u.dataset.label=h.label,u.dataset.type=Object.keys(kt).find(b=>kt[b]===h);const w=document.createElement("i");w.className=`ph ${h.icon} text-sm flex-shrink-0`,u.appendChild(w);const l=document.createElement("span");l.textContent=h.label,u.appendChild(l),u.addEventListener("click",()=>{aa(u.dataset.type),window.innerWidth<768&&(document.getElementById("toolbox-sidebar")?.classList.add("hidden"),document.getElementById("toolbox-sidebar")?.classList.remove("flex"),document.getElementById("toolbox-backdrop")?.classList.add("hidden"))}),u.draggable=!0,u.addEventListener("dragstart",b=>{b.dataTransfer?.setData("application/rete-node-type",u.dataset.type),b.dataTransfer.effectAllowed="copy"}),f.appendChild(u)}a.appendChild(f),n.appendChild(a)}const r=document.getElementById("rete-container");r&&(r.addEventListener("dragover",o=>{o.preventDefault(),o.dataTransfer.dropEffect="copy"}),r.addEventListener("drop",o=>{o.preventDefault();const i=o.dataTransfer?.getData("application/rete-node-type");if(!i||!ve)return;const{area:a}=ve,s=r.getBoundingClientRect(),{x:c,y:p,k:f}=a.area.transform,h=(o.clientX-s.left-c)/f,u=(o.clientY-s.top-p)/f;aa(i,{x:h,y:u})}))}async function aa(n,e){if(!ve)return;const{editor:t,area:r}=ve,o=kt[n];if(!o){console.error("Node type not found in registry:",n);return}try{const i=o.factory();await t.addNode(i);const a=e||rg(r);await r.translate(i.id,a)}catch(i){console.error("Failed to add node to canvas:",i)}}function rg(n){const t=n.container.getBoundingClientRect(),{x:r,y:o,k:i}=n.area.transform,a=(t.width/2-r)/i,s=(t.height/2-o)/i;return{x:a+(Math.random()-.5)*100,y:s+(Math.random()-.5)*100}}function fr(n,e,t){const r=document.createElement("div");r.className="flex flex-col gap-1.5 mb-2",e.forEach((o,i)=>{const a=document.createElement("div");a.className="flex items-center justify-between bg-gray-900 rounded-lg px-3 py-2";const s=document.createElement("span");s.className="text-sm text-white truncate flex-1 mr-2",s.textContent=o,a.appendChild(s);const c=document.createElement("button");c.className="text-gray-500 hover:text-red-400 text-lg leading-none flex-shrink-0",c.innerHTML="&times;",c.addEventListener("click",()=>t(i)),a.appendChild(c),r.appendChild(a)}),n.appendChild(r)}function og(n){return new Promise(e=>{const t=document.getElementById("pdf-password-modal"),r=document.getElementById("pdf-password-filename"),o=document.getElementById("pdf-password-input"),i=document.getElementById("pdf-password-error"),a=document.getElementById("pdf-password-skip"),s=document.getElementById("pdf-password-unlock");r.textContent=n,o.value="",i.classList.add("hidden"),t.classList.remove("hidden"),o.focus();const c=()=>{t.classList.add("hidden"),a.replaceWith(a.cloneNode(!0)),s.replaceWith(s.cloneNode(!0)),o.removeEventListener("keydown",p)},p=f=>{f.key==="Enter"&&(c(),e(o.value||null)),f.key==="Escape"&&(c(),e(null))};o.addEventListener("keydown",p),document.getElementById("pdf-password-skip").addEventListener("click",()=>{c(),e(null)}),document.getElementById("pdf-password-unlock").addEventListener("click",()=>{c(),e(o.value||null)})})}function ye(n){const e=document.getElementById("settings-sidebar"),t=document.getElementById("settings-title"),r=document.getElementById("settings-content");if(!e||!t||!r)return;if(e.classList.remove("hidden"),t.textContent=n.label,r.innerHTML="",n instanceof fp){const C=document.createElement("div"),I=document.createElement("label");I.className="block text-xs text-gray-400 mb-1",I.textContent="PDF Files",C.appendChild(I),n.hasFile()&&fr(C,n.getFilenames(),O=>{n.removeFile(O),ye(n)});const S=document.createElement("button");S.className="w-full bg-gray-700 hover:bg-gray-600 text-white text-xs px-3 py-2 rounded-lg transition-colors",S.textContent=n.hasFile()?"Add More Files":"Upload PDFs";const B=document.createElement("input");B.type="file",B.accept=".pdf",B.multiple=!0,B.className="hidden",B.addEventListener("change",async O=>{const _=Array.from(O.target.files??[]);if(_.length!==0){for(const g of _)try{await n.addFile(g)}catch(k){if(k instanceof hp){const F=await og(g.name);if(F)try{await n.addDecryptedFile(g,F)}catch{ke("Error",`Wrong password or failed to decrypt "${g.name}".`)}}else ke("Error","Failed to load PDF: "+k.message)}ye(n)}}),S.addEventListener("click",()=>B.click()),C.appendChild(S),C.appendChild(B),r.appendChild(C);return}if(n instanceof dp){const C=document.createElement("div"),I=document.createElement("label");I.className="block text-xs text-gray-400 mb-1",I.textContent="Images",C.appendChild(I);const S=document.createElement("p");S.className="text-[10px] text-gray-500 mb-2",S.textContent="Supported: JPG, PNG, BMP, GIF, TIFF, WebP, HEIC, PSD, SVG, PNM, PGM, PBM, PPM, PAM, JXR, JPX, JP2",C.appendChild(S),n.hasFile()&&fr(C,n.getFilenames(),_=>{n.removeFile(_),ye(n)});const B=document.createElement("button");B.className="w-full bg-gray-700 hover:bg-gray-600 text-white text-xs px-3 py-2 rounded-lg transition-colors",B.textContent=n.hasFile()?"Add More Images":"Upload Images";const O=document.createElement("input");O.type="file",O.accept="image/*",O.multiple=!0,O.className="hidden",O.addEventListener("change",async _=>{const g=Array.from(_.target.files??[]);if(g.length!==0)try{await n.addFiles(g),ye(n)}catch(k){ke("Error","Failed to load images: "+k.message)}}),B.addEventListener("click",()=>O.click()),C.appendChild(B),C.appendChild(O),r.appendChild(C);return}if(n instanceof bp){const C=document.createElement("div"),I=document.createElement("label");if(I.className="block text-xs text-gray-400 mb-1",I.textContent="Certificate (.pfx, .p12, .pem)",C.appendChild(I),n.hasCertFile()){const _=document.createElement("div");_.className="flex items-center justify-between bg-gray-700 px-3 py-2 rounded-lg mb-2";const g=document.createElement("span");g.className="text-xs text-gray-200 truncate flex-1",g.textContent=n.getCertFilename();const k=document.createElement("span");k.className=`w-2 h-2 rounded-full flex-shrink-0 mx-2 ${n.hasCert()?"bg-green-400":"bg-yellow-400"}`;const F=document.createElement("button");if(F.className="text-red-400 hover:text-red-300 text-xs flex-shrink-0",F.textContent="Remove",F.addEventListener("click",()=>{n.removeCert(),ye(n)}),_.append(g,k,F),C.appendChild(_),n.needsPassword()){const x=document.createElement("div");x.className="mb-2";const N=document.createElement("label");N.className="block text-xs text-gray-400 mb-1",N.textContent="Certificate Password",x.appendChild(N);const T=document.createElement("div");T.className="flex gap-2";const z=document.createElement("input");z.type="password",z.placeholder="Enter password...",z.className="flex-1 bg-gray-700 border border-gray-600 text-white text-xs px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500";const m=document.createElement("button");m.className="bg-indigo-600 hover:bg-indigo-500 text-white text-xs px-3 py-2 rounded-lg transition-colors flex-shrink-0",m.textContent="Unlock";const A=document.createElement("div");A.className="text-xs mt-1 hidden";const D=async()=>{const P=z.value;if(!P)return;m.textContent="Unlocking...",m.disabled=!0,await n.unlockCert(P)?ye(n):(m.textContent="Unlock",m.disabled=!1,A.textContent="Incorrect password",A.className="text-xs mt-1 text-red-400",A.classList.remove("hidden"))};m.addEventListener("click",D),z.addEventListener("keypress",P=>{P.key==="Enter"&&D()}),T.append(z,m),x.append(T,A),C.appendChild(x)}else if(n.hasCert()){const x=document.createElement("div");x.className="text-xs text-green-400 mb-2",x.textContent="Certificate unlocked",C.appendChild(x)}}const S=document.createElement("button");S.className="w-full bg-gray-700 hover:bg-gray-600 text-white text-xs px-3 py-2 rounded-lg transition-colors",S.textContent=n.hasCertFile()?"Change Certificate":"Upload Certificate";const B=document.createElement("input");B.type="file",B.accept=".pfx,.p12,.pem",B.className="hidden",B.addEventListener("change",_=>{const g=_.target.files?.[0];if(!g)return;n.setCertFile(g),g.name.toLowerCase().endsWith(".pem")?g.text().then(async F=>{F.includes("ENCRYPTED")||await n.unlockCert(""),ye(n)}):ye(n)}),S.addEventListener("click",()=>B.click()),C.append(S,B),r.appendChild(C);const O=document.createElement("div");O.className="border-t border-gray-700 my-3",r.appendChild(O)}const i=[{cls:mp,label:"Word Documents",accept:".doc,.docx,.odt,.rtf",btnLabel:"Documents",hint:"Supported: DOC, DOCX, ODT, RTF"},{cls:gp,label:"Spreadsheets",accept:".xlsx,.xls,.ods,.csv",btnLabel:"Spreadsheets",hint:"Supported: XLSX, XLS, ODS, CSV"},{cls:yp,label:"Presentations",accept:".ppt,.pptx,.odp",btnLabel:"Presentations",hint:"Supported: PPT, PPTX, ODP"},{cls:vp,label:"Text Files",accept:".txt",btnLabel:"Text Files"},{cls:wp,label:"SVG Files",accept:".svg",btnLabel:"SVG Files"},{cls:kp,label:"EPUB Files",accept:".epub",btnLabel:"EPUB Files"},{cls:Pp,label:"Email Files",accept:".eml,.msg",btnLabel:"Email Files",hint:"Supported: EML, MSG"},{cls:xp,label:"XPS Files",accept:".xps,.oxps",btnLabel:"XPS Files",hint:"Supported: XPS, OXPS"},{cls:Cp,label:"MOBI Files",accept:".mobi",btnLabel:"MOBI Files"},{cls:_p,label:"FB2 Files",accept:".fb2",btnLabel:"FB2 Files"},{cls:$p,label:"Comic Archives",accept:".cbz,.cbr",btnLabel:"Comics",hint:"Supported: CBZ, CBR"},{cls:Ep,label:"Markdown Files",accept:".md,.markdown",btnLabel:"Markdown Files"},{cls:Op,label:"JSON Files",accept:".json",btnLabel:"JSON Files"},{cls:Dp,label:"XML Files",accept:".xml",btnLabel:"XML Files"},{cls:Fp,label:"WordPerfect Files",accept:".wpd",btnLabel:"WPD Files"},{cls:Sp,label:"WPS Files",accept:".wps",btnLabel:"WPS Files"},{cls:Ip,label:"Pages Files",accept:".pages",btnLabel:"Pages Files"},{cls:jp,label:"ODG Files",accept:".odg",btnLabel:"ODG Files"},{cls:Np,label:"Publisher Files",accept:".pub",btnLabel:"PUB Files"},{cls:Ap,label:"Visio Files",accept:".vsd,.vsdx",btnLabel:"Visio Files",hint:"Supported: VSD, VSDX"}].find(C=>n instanceof C.cls);if(i){const C=n,I=document.createElement("div"),S=document.createElement("label");if(S.className="block text-xs text-gray-400 mb-1",S.textContent=i.label,I.appendChild(S),i.hint){const g=document.createElement("p");g.className="text-[10px] text-gray-500 mb-2",g.textContent=i.hint,I.appendChild(g)}C.hasFile()&&fr(I,C.getFilenames(),g=>{C.removeFile(g),ye(n)});const B=document.createElement("button");B.className="w-full bg-gray-700 hover:bg-gray-600 text-white text-xs px-3 py-2 rounded-lg transition-colors",B.textContent=C.hasFile()?`Add More ${i.btnLabel}`:`Upload ${i.btnLabel}`;const O=document.createElement("input");if(O.type="file",O.accept=i.accept,O.multiple=!0,O.className="hidden",O.addEventListener("change",async g=>{const k=Array.from(g.target.files??[]);if(k.length!==0)try{await C.addFiles(k),ye(n)}catch(F){ke("Error",`Failed to load files: ${F.message}`)}}),B.addEventListener("click",()=>O.click()),I.appendChild(B),I.appendChild(O),r.appendChild(I),Object.entries(n.controls).length>0){const g=document.createElement("div");g.className="border-t border-gray-700 my-3",r.appendChild(g)}else return}const a=Object.entries(n.controls);if(a.length===0){const C=document.createElement("p");C.className="text-xs text-gray-500",C.textContent="No configurable settings for this node.",r.appendChild(C);return}const s={format:[{label:"JPG",value:"jpg"},{label:"PNG",value:"png"},{label:"WebP",value:"webp"},{label:"SVG",value:"svg"}],position:[{label:"Bottom Center",value:"bottom-center"},{label:"Bottom Left",value:"bottom-left"},{label:"Bottom Right",value:"bottom-right"},{label:"Top Center",value:"top-center"},{label:"Top Left",value:"top-left"},{label:"Top Right",value:"top-right"}],orientation:[{label:"Vertical",value:"vertical"},{label:"Horizontal",value:"horizontal"},{label:"Auto",value:"auto"},{label:"Portrait",value:"portrait"},{label:"Landscape",value:"landscape"}],direction:[{label:"Vertical",value:"vertical"},{label:"Horizontal",value:"horizontal"}],pagesPerSheet:[{label:"2",value:"2"},{label:"4",value:"4"},{label:"9",value:"9"},{label:"16",value:"16"}],fontFamily:[{label:"Helvetica",value:"helv"},{label:"Times Roman",value:"times"},{label:"Courier",value:"cour"},{label:"Times Italic",value:"tiro"}],pageSize:[{label:"A4",value:"a4"},{label:"Letter",value:"letter"},{label:"Legal",value:"legal"}],numberFormat:[{label:"Simple (1, 2, 3)",value:"simple"},{label:"Page X of Y",value:"page_x_of_y"}],angle:[{label:"90 Clockwise",value:"90"},{label:"180",value:"180"},{label:"90 Counter-clockwise",value:"270"}],blankPosition:[{label:"End",value:"end"},{label:"Beginning",value:"start"},{label:"After Page...",value:"after"}],resolution:[{label:"Standard (192 DPI)",value:"2.0"},{label:"High (288 DPI)",value:"3.0"},{label:"Ultra (384 DPI)",value:"4.0"}],language:Object.entries(Up).map(([C,I])=>({label:I,value:C})),gridMode:[{label:"1x2 (Booklet)",value:"1x2"},{label:"2x2 (4-up)",value:"2x2"},{label:"2x4 (8-up)",value:"2x4"},{label:"4x4 (16-up)",value:"4x4"}],paperSize:[{label:"Letter",value:"Letter"},{label:"A4",value:"A4"},{label:"A3",value:"A3"},{label:"Tabloid",value:"Tabloid"},{label:"Legal",value:"Legal"}],rasterizeDpi:[{label:"72 (Screen)",value:"72"},{label:"150 (Default)",value:"150"},{label:"200 (Good)",value:"200"},{label:"300 (Print)",value:"300"},{label:"600 (High Quality)",value:"600"}],imageFormat:[{label:"PNG (Lossless)",value:"png"},{label:"JPEG (Smaller file size)",value:"jpeg"}],skewThreshold:[{label:"0.1 (Very Sensitive)",value:"0.1"},{label:"0.5 (Default)",value:"0.5"},{label:"1.0 (Normal)",value:"1.0"},{label:"2.0 (Less Sensitive)",value:"2.0"}],processingDpi:[{label:"100 (Fast)",value:"100"},{label:"150 (Default)",value:"150"},{label:"200 (Better)",value:"200"},{label:"300 (Best Quality)",value:"300"}],level:[{label:"PDF/A-1b (Strict, no transparency)",value:"PDF/A-1b"},{label:"PDF/A-2b (Recommended)",value:"PDF/A-2b"},{label:"PDF/A-3b (Modern, allows attachments)",value:"PDF/A-3b"}],algorithm:[{label:"Condense (Smart, requires PyMuPDF)",value:"condense"},{label:"Photon (Rasterize pages)",value:"photon"}],compressionLevel:[{label:"Light",value:"light"},{label:"Balanced",value:"balanced"},{label:"Aggressive",value:"aggressive"},{label:"Extreme",value:"extreme"}],redactMode:[{label:"Search Text",value:"text"},{label:"Area (Coordinates)",value:"area"}]},c=new Set(["grayscale","border","margins","separator","sepia","includeCcBcc","includeAttachments","binarize","preFlatten","flattenForms","removeMetadata","removeAnnotations","removeJavascript","removeEmbeddedFiles","removeLayers","removeLinks","removeStructureTree","removeMarkInfo","removeFonts","subsetFonts","convertToGrayscale","removeThumbnails"]),p=new Set(["language"]),f=new Set(["resolution","binarize","whitelist"]),h=new Set(["color","borderColor","backgroundColor","separatorColor","fontColor","fillColor"]),u={pages:"e.g. 1-3, 5, 7-9",whitelist:"Limit recognized characters (leave empty for all)",afterPage:"Insert blank pages after this page number",x0:"Left edge in points (1 inch = 72 pts)",y0:"Top edge in points",x1:"Right edge in points",y1:"Bottom edge in points"},w="w-full bg-gray-900 border border-gray-600 text-white rounded-md px-2 py-1.5 text-xs focus:border-indigo-500 focus:outline-none",l={redactMode:{text:["text"],area:["x0","y0","x1","y1"]}},b={},d=a.some(([C])=>f.has(C)),v=[];for(const[C,I]of a){const S=document.createElement("div");b[C]=S;const B=I,O=String(B.value??""),_=document.createElement("label");if(_.className="block text-xs text-gray-400 mb-1",_.textContent=ig(C),S.appendChild(_),s[C]&&p.has(C)){let g=function(){z.innerHTML="";for(const A of x){const D=s[C].find(Z=>Z.value===A);if(!D)continue;const P=document.createElement("span");P.className="inline-flex items-center gap-1 px-2 py-0.5 rounded bg-indigo-600 text-white text-[10px]",P.textContent=D.label;const R=document.createElement("button");R.type="button",R.textContent="",R.className="text-white/70 hover:text-white text-xs leading-none",R.addEventListener("click",()=>{x.delete(A),g(),k(),F(T.value)}),P.appendChild(R),z.appendChild(P)}},k=function(){B.value=Array.from(x).join("+")},F=function(A){m.innerHTML="";const D=A.toLowerCase();for(const P of s[C]){if(D&&!P.label.toLowerCase().includes(D))continue;const R=document.createElement("label");R.className="flex items-center gap-2 px-2 py-1 hover:bg-gray-700 cursor-pointer text-xs text-gray-300";const Z=document.createElement("input");Z.type="checkbox",Z.checked=x.has(P.value),Z.className="w-3 h-3 rounded text-indigo-600 bg-gray-700 border-gray-600",Z.addEventListener("change",()=>{Z.checked?x.add(P.value):x.delete(P.value),g(),k()}),R.appendChild(Z),R.appendChild(document.createTextNode(P.label)),m.appendChild(R)}};const x=new Set(O?O.split("+"):[]),N=document.createElement("div");N.className="flex flex-col gap-1";const T=document.createElement("input");T.type="text",T.placeholder="Search languages...",T.className=w,N.appendChild(T);const z=document.createElement("div");z.className="flex flex-wrap gap-1 min-h-[24px]",N.appendChild(z);const m=document.createElement("div");m.className="max-h-32 overflow-y-auto bg-gray-800 rounded border border-gray-600 mt-1",N.appendChild(m),T.addEventListener("input",()=>{F(T.value)}),g(),F(""),S.appendChild(N)}else if(s[C]){const g=document.createElement("select");g.className=w;for(const k of s[C]){const F=document.createElement("option");F.value=k.value,F.textContent=k.label,O===k.value&&(F.selected=!0),g.appendChild(F)}g.addEventListener("change",()=>{B.value=g.value,l[C]&&y(C,g.value)}),S.appendChild(g)}else if(c.has(C)){const g=document.createElement("button");g.type="button";const k=O==="true";g.className=`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ${k?"bg-indigo-500":"bg-gray-600"}`;const F=document.createElement("span");F.className=`pointer-events-none absolute top-[3px] left-[3px] h-[18px] w-[18px] rounded-full bg-white shadow-md transition-transform duration-200 ${k?"translate-x-5":"translate-x-0"}`,g.appendChild(F),g.addEventListener("click",()=>{const x=B.value==="true"?"false":"true";B.value=x;const N=x==="true";g.className=`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ${N?"bg-indigo-500":"bg-gray-600"}`,F.className=`pointer-events-none absolute top-[3px] left-[3px] h-[18px] w-[18px] rounded-full bg-white shadow-md transition-transform duration-200 ${N?"translate-x-5":"translate-x-0"}`}),S.appendChild(g)}else if(h.has(C)){const g=document.createElement("div");g.className="flex items-center gap-2";const k=document.createElement("input");k.type="color",k.value=O||"#000000",k.className="w-8 h-8 rounded bg-transparent cursor-pointer";const F=document.createElement("input");F.type="text",F.value=O||"#000000",F.className=w+" flex-1",k.addEventListener("input",()=>{F.value=k.value,B.value=k.value}),F.addEventListener("input",()=>{/^#[0-9a-fA-F]{6}$/.test(F.value)&&(k.value=F.value),B.value=F.value}),g.appendChild(k),g.appendChild(F),S.appendChild(g)}else if(B.type==="number"||typeof B.value=="number"){const g=document.createElement("input");g.type="number",g.className=w,g.value=O,g.addEventListener("input",()=>{const k=parseFloat(g.value);isNaN(k)||(B.value=k)}),S.appendChild(g)}else{const g=document.createElement("input"),k=C==="password"||C==="ownerPassword";g.type=k?"password":"text",g.className=w,g.value=O,g.addEventListener("input",()=>{B.value=g.value}),S.appendChild(g)}if(u[C]){const g=document.createElement("p");g.className="text-[10px] text-gray-500 mt-1",g.textContent=u[C],S.appendChild(g)}f.has(C)?v.push(S):r.appendChild(S)}function y(C,I){const S=l[C];if(!S)return;const B=new Set(Object.values(S).flat());for(const _ of B){const g=b[_];g&&(g.style.display="none")}const O=S[I]??[];for(const _ of O){const g=b[_];g&&(g.style.display="")}}for(const[C,I]of Object.entries(l)){const S=a.find(([B])=>B===C)?.[1];S&&y(C,String(S.value??""))}if(d&&v.length>0){const C=document.createElement("details");C.className="bg-gray-800/50 border border-gray-700 rounded-lg p-2 mt-1";const I=document.createElement("summary");I.className="text-xs font-medium text-gray-400 cursor-pointer select-none flex items-center justify-between";const S=document.createElement("span");S.textContent="Advanced Settings",I.appendChild(S);const B=document.createElement("i");B.className="ph ph-caret-down text-xs text-gray-500 transition-transform duration-200",I.appendChild(B),C.addEventListener("toggle",()=>{B.style.transform=C.open?"rotate(180deg)":"rotate(0deg)"}),C.appendChild(I);const O=document.createElement("div");O.className="mt-2 space-y-3";for(const _ of v)O.appendChild(_);C.appendChild(O),r.appendChild(C)}}function ig(n){return n.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}
