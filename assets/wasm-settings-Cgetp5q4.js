import{c as f,i as m}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{b as L,h as g,a}from"./main-DSprMeGA.js";import{W as e}from"./wasm-provider-BDZaM2k5.js";import{c as w}from"./pymupdf-loader-BmwcVkri.js";import{c as S}from"./ghostscript-dynamic-loader-CL_rxo7X.js";import"./mobileMenu-BoMunYmR.js";document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();function y(){f({icons:m}),document.querySelectorAll(".copy-btn").forEach(t=>{t.addEventListener("click",async()=>{const c=t.getAttribute("data-copy");if(c){await navigator.clipboard.writeText(c);const o=t.querySelector("svg");if(o){const r=document.createElement("i");r.setAttribute("data-lucide","check"),r.className="w-3.5 h-3.5",o.replaceWith(r),f({icons:m}),setTimeout(()=>{const s=t.querySelector("svg");if(s){const p=document.createElement("i");p.setAttribute("data-lucide","copy"),p.className="w-3.5 h-3.5",s.replaceWith(p),f({icons:m})}},1500)}}})});const i=document.getElementById("pymupdf-url"),v=document.getElementById("pymupdf-test"),h=document.getElementById("pymupdf-status"),l=document.getElementById("ghostscript-url"),E=document.getElementById("ghostscript-test"),x=document.getElementById("ghostscript-status"),u=document.getElementById("cpdf-url"),C=document.getElementById("cpdf-test"),U=document.getElementById("cpdf-status"),B=document.getElementById("save-btn"),b=document.getElementById("clear-btn");document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/"}),I();function I(){const t=[{name:"pymupdf",input:i},{name:"ghostscript",input:l},{name:"cpdf",input:u}],c=e.getAllProviders();for(const{name:o,input:r}of t){const s=c[o];s&&(e.isUserConfigured(o)?r.value=s:(r.value="",r.placeholder=`Using default: ${s}`),n(o,!0))}}function n(t,c,o=!1){const s={pymupdf:h,ghostscript:x,cpdf:U}[t];s&&(o?(s.textContent="Testing...",s.className="text-xs px-2 py-1 rounded-full bg-yellow-600/30 text-yellow-300"):c&&e.isUserConfigured(t)?(s.textContent="Custom Override",s.className="text-xs px-2 py-1 rounded-full bg-blue-600/30 text-blue-300"):c||e.hasEnvDefault(t)?(s.textContent="Pre-configured",s.className="text-xs px-2 py-1 rounded-full bg-green-600/30 text-green-300"):(s.textContent="Not Configured",s.className="text-xs px-2 py-1 rounded-full bg-gray-600 text-gray-300"))}async function d(t,c){if(!c.trim()){a("Empty URL","Please enter a URL to test.");return}n(t,!1,!0);const o=await e.validateUrl(t,c);o.valid?(n(t,!0),a("Success",`Connection to ${e.getPackageDisplayName(t)} successful!`,"success")):(n(t,!1),a("Connection Failed",o.error||"Could not connect to the URL."))}v?.addEventListener("click",()=>{d("pymupdf",i.value)}),E?.addEventListener("click",()=>{d("ghostscript",l.value)}),C?.addEventListener("click",()=>{d("cpdf",u.value)}),B?.addEventListener("click",async()=>{L("Saving configuration...");try{i.value.trim()?(e.setUrl("pymupdf",i.value.trim()),n("pymupdf",!0)):(e.removeUrl("pymupdf"),n("pymupdf",!1)),l.value.trim()?(e.setUrl("ghostscript",l.value.trim()),n("ghostscript",!0)):(e.removeUrl("ghostscript"),n("ghostscript",!1)),u.value.trim()?(e.setUrl("cpdf",u.value.trim()),n("cpdf",!0)):(e.removeUrl("cpdf"),n("cpdf",!1)),g(),a("Saved","Configuration saved successfully!","success")}catch(t){g();const c=t instanceof Error?t.message:"Unknown error";a("Error",`Failed to save configuration: ${c}`)}}),b?.addEventListener("click",()=>{e.clearAll(),w(),S();const t=e.getAllProviders();i.value=t.pymupdf||"",l.value=t.ghostscript||"",u.value=t.cpdf||"",n("pymupdf",e.isConfigured("pymupdf")),n("ghostscript",e.isConfigured("ghostscript")),n("cpdf",e.isConfigured("cpdf"));const c=e.hasEnvDefault("pymupdf")||e.hasEnvDefault("ghostscript")||e.hasEnvDefault("cpdf");a("Reset",c?"Custom overrides cleared. Pre-configured defaults are active.":"All configurations and cached modules have been cleared.","success")})}
