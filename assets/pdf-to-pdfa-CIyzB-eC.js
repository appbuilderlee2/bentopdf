const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-CX_3d3rd.js","assets/main-X9THBjap.js","assets/style-DHqpffR4.js","assets/style-Bksgp8bg.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as $,i as A}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{s as n,a as v,h as u,b as f,d as C,_ as k,f as B,r as T,c as z}from"./main-X9THBjap.js";import{c as x}from"./ghostscript-loader-CdhAqTpj.js";import{i as N,l as S}from"./pymupdf-loader-DSwOn04P.js";import{s as M}from"./wasm-provider-C9fvsoLq.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-cdn-config-DzU6jbwW.js";import"./PDFButton-B7ekbw-1.js";import"./index-YkV0U4e7.js";document.addEventListener("DOMContentLoaded",()=>{const m=document.getElementById("file-input"),d=document.getElementById("drop-zone"),p=document.getElementById("process-btn"),g=document.getElementById("file-display-area"),y=document.getElementById("options-container"),h=document.getElementById("file-controls"),w=document.getElementById("add-more-btn"),D=document.getElementById("clear-files-btn"),F=document.getElementById("back-to-tools"),E=document.getElementById("pdfa-level");F&&F.addEventListener("click",()=>{window.location.href="/bentopdf/"});const b=async()=>{if(!(!g||!y||!p||!h))if(n.files.length>0){g.innerHTML="";for(let e=0;e<n.files.length;e++){const t=n.files[e],i=document.createElement("div");i.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("div");o.className="flex flex-col overflow-hidden";const a=document.createElement("div");a.className="truncate font-medium text-gray-200 text-sm mb-1",a.textContent=t.name;const s=document.createElement("div");s.className="text-xs text-gray-400",s.textContent=`${B(t.size)} • Loading pages...`,o.append(a,s);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=()=>{n.files=n.files.filter((l,c)=>c!==e),b()},i.append(o,r),g.appendChild(i);try{const l=await T(t),c=await z({data:l}).promise;s.textContent=`${B(t.size)} • ${c.numPages} pages`}catch(l){console.error("Error loading PDF:",l),s.textContent=`${B(t.size)} • Could not load page count`}}$({icons:A}),h.classList.remove("hidden"),y.classList.remove("hidden"),p.disabled=!1}else g.innerHTML="",h.classList.add("hidden"),y.classList.add("hidden"),p.disabled=!0},L=()=>{n.files=[],n.pdfDoc=null,E&&(E.value="PDF/A-2b"),b()},I=async()=>{const e=E.value;try{if(n.files.length===0){v("No Files","Please select at least one PDF file."),u();return}if(n.files.length===1){const t=n.files[0],o=document.getElementById("pre-flatten")?.checked||!1;let a=t;if(o){if(!N()){M("pymupdf"),u();return}f("Pre-flattening PDF...");const c=await(await S()).rasterizePdf(t,{dpi:300,format:"png"});a=new File([c],t.name,{type:"application/pdf"})}f("Initializing Ghostscript...");const s=await x(a,e,l=>f(l)),r=t.name.replace(/\.pdf$/i,"")+"_pdfa.pdf";C(s,r),u(),v("Conversion Complete",`Successfully converted ${t.name} to ${e}.`,"success",()=>L())}else{f("Converting multiple PDFs to PDF/A...");const t=(await k(async()=>{const{default:a}=await import("./jszip.min-CX_3d3rd.js").then(s=>s.j);return{default:a}},__vite__mapDeps([0,1,2,3,4]))).default,i=new t;for(let a=0;a<n.files.length;a++){const s=n.files[a];f(`Converting ${a+1}/${n.files.length}: ${s.name}...`);const r=await x(s,e,_=>f(_)),l=s.name.replace(/\.pdf$/i,""),c=await r.arrayBuffer();i.file(`${l}_pdfa.pdf`,c)}const o=await i.generateAsync({type:"blob"});C(o,"pdfa-converted.zip"),u(),v("Conversion Complete",`Successfully converted ${n.files.length} PDF(s) to ${e}.`,"success",()=>L())}}catch(t){u(),v("Error",`An error occurred during conversion. Error: ${t.message}`)}},P=e=>{e&&e.length>0&&(n.files=[...n.files,...Array.from(e)],b())};m&&d&&(m.addEventListener("change",e=>{P(e.target.files)}),d.addEventListener("dragover",e=>{e.preventDefault(),d.classList.add("bg-gray-700")}),d.addEventListener("dragleave",e=>{e.preventDefault(),d.classList.remove("bg-gray-700")}),d.addEventListener("drop",e=>{e.preventDefault(),d.classList.remove("bg-gray-700");const t=e.dataTransfer?.files;if(t&&t.length>0){const i=Array.from(t).filter(o=>o.type==="application/pdf"||o.name.toLowerCase().endsWith(".pdf"));if(i.length>0){const o=new DataTransfer;i.forEach(a=>o.items.add(a)),P(o.files)}}}),m.addEventListener("click",()=>{m.value=""})),w&&w.addEventListener("click",()=>{m.click()}),D&&D.addEventListener("click",()=>{L()}),p&&p.addEventListener("click",I)});
