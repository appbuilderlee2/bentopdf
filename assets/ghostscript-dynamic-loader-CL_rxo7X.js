import{W as n}from"./wasm-provider-BDZaM2k5.js";let o=null,s=null;async function l(){return o||s||(s=(async()=>{const r=n.getUrl("ghostscript");if(!r)throw new Error("Ghostscript is not configured. Please configure it in Advanced Settings.");const e=r.endsWith("/")?r:`${r}/`;try{const i=`${e}gs.js`;await c(i);const t=typeof globalThis<"u"?globalThis:window;if(typeof t.loadGS=="function")o=await t.loadGS({baseUrl:e});else if(typeof t.GhostscriptWASM=="function")o=new t.GhostscriptWASM(e),await o.init?.();else throw new Error("Ghostscript wrapper did not expose expected interface. Expected loadGS() or GhostscriptWASM class.");return o}catch(i){throw s=null,new Error(`Failed to load Ghostscript from ${e}: ${i.message}`)}})(),s)}function c(r){return new Promise((e,i)=>{if(document.querySelector(`script[src="${r}"]`)){e();return}const t=document.createElement("script");t.src=r,t.type="text/javascript",t.async=!0,t.onload=()=>e(),t.onerror=()=>i(new Error(`Failed to load script: ${r}`)),document.head.appendChild(t)})}function p(){return n.isConfigured("ghostscript")}function d(){o=null,s=null}export{d as c,p as i,l};
