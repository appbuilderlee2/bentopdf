import{c as E,i as v}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{a as c,f as L,b as g,d as P,h as x}from"./main-X9THBjap.js";import{l as F}from"./pymupdf-loader-DSwOn04P.js";import{g as I,c as B}from"./image-compress-D5rNPUMg.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-provider-C9fvsoLq.js";const w=".jpg,.jpeg,.jp2,.jpx",b=["image/jpeg","image/jpg","image/jp2"];let s=[],p=null;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();function u(){E({icons:v});const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),n=document.getElementById("add-more-btn"),o=document.getElementById("clear-files-btn"),l=document.getElementById("process-btn");e&&e.addEventListener("change",D),t&&(t.addEventListener("dragover",i=>{i.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",()=>{t.classList.remove("bg-gray-700")}),t.addEventListener("drop",i=>{i.preventDefault(),t.classList.remove("bg-gray-700");const a=i.dataTransfer?.files;a&&a.length>0&&y(a)}),e?.addEventListener("click",()=>{e&&(e.value="")})),n&&n.addEventListener("click",()=>{e?.click()}),o&&o.addEventListener("click",()=>{s=[],r()}),l&&l.addEventListener("click",C),document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/bentopdf/"})}function D(e){const t=e.target;t.files&&t.files.length>0&&y(t.files)}function k(e){return"."+(e.split(".").pop()?.toLowerCase()||"")}function S(e){const t=k(e.name);return w.split(",").includes(t)||b.includes(e.type)}function y(e){const t=Array.from(e).filter(S);t.length<e.length&&c("Invalid Files","Some files were skipped. Only JPG, JPEG, JP2, and JPX files are allowed."),t.length>0&&(s=[...s,...t],r())}const j=()=>{s=[],r()};function r(){const e=document.getElementById("file-display-area"),t=document.getElementById("file-controls"),n=document.getElementById("jpg-to-pdf-options");!e||!t||!n||(e.innerHTML="",s.length>0?(t.classList.remove("hidden"),n.classList.remove("hidden"),s.forEach((o,l)=>{const i=document.createElement("div");i.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex items-center gap-2 overflow-hidden";const m=document.createElement("span");m.className="truncate font-medium text-gray-200",m.textContent=o.name;const f=document.createElement("span");f.className="flex-shrink-0 text-gray-400 text-xs",f.textContent=`(${L(o.size)})`,a.append(m,f);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=()=>{s=s.filter((M,h)=>h!==l),r()},i.append(a,d),e.appendChild(i)}),E({icons:v})):(t.classList.add("hidden"),n.classList.add("hidden")))}async function T(){return p||(p=await F()),p}async function C(){if(s.length===0){c("No Files","Please select at least one JPG or JPEG2000 image.");return}g("Loading engine...");try{const e=await T();g("Converting images to PDF...");const t=I(),n=[];for(const l of s)n.push(await B(l,t));const o=await e.imagesToPdf(n);P(o,"from_jpgs.pdf"),c("Success","PDF created successfully!","success",()=>{j()})}catch(e){console.error("[JpgToPdf]",e),c("Conversion Error",e.message||"Failed to convert images to PDF.")}finally{x()}}
