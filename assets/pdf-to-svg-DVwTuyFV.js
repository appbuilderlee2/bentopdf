import{c as L,i as B}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{a as m,b as g,d as y,h as $,f as C}from"./main-DSprMeGA.js";import{J as E}from"./jszip.min-DhcferR8.js";import{s as P}from"./wasm-provider-BDZaM2k5.js";import{i as S,l as I}from"./pymupdf-loader-BmwcVkri.js";import"./mobileMenu-BoMunYmR.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";let f=null,n=[];const h=()=>{const s=document.getElementById("file-display-area"),t=document.getElementById("options-panel"),a=document.getElementById("file-controls");!s||!t||(s.innerHTML="",n.length>0?(t.classList.remove("hidden"),a&&a.classList.remove("hidden"),n.forEach((r,i)=>{const c=document.createElement("div");c.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("div");o.className="flex flex-col overflow-hidden";const e=document.createElement("div");e.className="truncate font-medium text-gray-200 text-sm mb-1",e.textContent=r.name;const d=document.createElement("div");d.className="text-xs text-gray-400",d.textContent=C(r.size),o.append(e,d);const l=document.createElement("button");l.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",l.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',l.onclick=()=>{n=n.filter((u,v)=>v!==i),h()},c.append(o,l),s.appendChild(c)}),L({icons:B})):(t.classList.add("hidden"),a&&a.classList.add("hidden")))},p=()=>{n=[];const s=document.getElementById("file-input");s&&(s.value=""),h()};async function w(){if(n.length===0){m("No Files","Please upload at least one PDF file.");return}if(!S()){P("pymupdf");return}g("Loading Engine...");try{if(f||(f=await I()),n.length===1){const t=await f.open(n[0]),a=t.pageCount,r=n[0].name.replace(/\.[^/.]+$/,"");if(a===1){g("Converting to SVG...");const c=t.getPage(0).toSvg(),o=new Blob([c],{type:"image/svg+xml"});y(o,`${r}.svg`),m("Success","PDF converted to SVG successfully!","success",()=>p())}else{const i=new E;for(let o=0;o<a;o++){g(`Converting page ${o+1} of ${a}...`);const d=t.getPage(o).toSvg();i.file(`page_${o+1}.svg`,d)}g("Creating ZIP file...");const c=await i.generateAsync({type:"blob"});y(c,`${r}_svg.zip`),m("Success",`Converted ${a} pages to SVG!`,"success",()=>p())}}else{const t=new E;let a=0;for(let i=0;i<n.length;i++){const c=n[i];g(`Processing file ${i+1} of ${n.length}...`);const o=await f.open(c),e=o.pageCount,d=c.name.replace(/\.[^/.]+$/,"");for(let l=0;l<e;l++){g(`File ${i+1}/${n.length}: Page ${l+1}/${e}`);const v=o.getPage(l).toSvg(),b=e===1?`${d}.svg`:`${d}_page_${l+1}.svg`;t.file(b,v),a++}}g("Creating ZIP file...");const r=await t.generateAsync({type:"blob"});y(r,"pdf_to_svg.zip"),m("Success",`Converted ${n.length} files (${a} pages) to SVG!`,"success",()=>p())}}catch(s){console.error(s);const t=s instanceof Error?s.message:"Unknown error";m("Error",`Failed to convert PDF to SVG. ${t}`)}finally{$()}}document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("file-input"),t=document.getElementById("drop-zone"),a=document.getElementById("process-btn"),r=document.getElementById("back-to-tools"),i=document.getElementById("add-more-btn"),c=document.getElementById("clear-files-btn");r&&r.addEventListener("click",()=>{window.location.href="/"});const o=(e,d=!1)=>{if(!e||e.length===0)return;const l=Array.from(e).filter(u=>u.type==="application/pdf");if(l.length===0){m("Invalid Files","Please upload PDF files.");return}d?n=l:n=[...n,...l],h()};s&&t&&(s.addEventListener("change",e=>{o(e.target.files,n.length===0)}),t.addEventListener("dragover",e=>{e.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",e=>{e.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",e=>{e.preventDefault(),t.classList.remove("bg-gray-700"),o(e.dataTransfer?.files??null,n.length===0)}),s.addEventListener("click",()=>{s.value=""})),i&&i.addEventListener("click",()=>s?.click()),c&&c.addEventListener("click",p),a&&a.addEventListener("click",w)});
