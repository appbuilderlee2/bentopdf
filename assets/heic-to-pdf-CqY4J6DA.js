import{c as h,i as u}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{a as m,b as y,d as v,h as E,f as L}from"./main-X9THBjap.js";import{h as B}from"./heic2any-xTF0NWax.js";import{P as b}from"./PDFButton-B7ekbw-1.js";import"./mobileMenu-BoMunYmR.js";import"./index-YkV0U4e7.js";let o=[];const f=()=>{const t=document.getElementById("file-display-area"),n=document.getElementById("file-controls"),i=document.getElementById("process-btn");!t||!n||!i||(t.innerHTML="",o.length>0?(n.classList.remove("hidden"),i.classList.remove("hidden"),o.forEach((s,l)=>{const r=document.createElement("div");r.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex items-center gap-2 overflow-hidden";const e=document.createElement("span");e.className="truncate font-medium text-gray-200",e.textContent=s.name;const c=document.createElement("span");c.className="flex-shrink-0 text-gray-400 text-xs",c.textContent=`(${L(s.size)})`,a.append(e,c);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=()=>{o=o.filter((I,g)=>g!==l),f()},r.append(a,d),t.appendChild(r)}),h({icons:u})):(n.classList.add("hidden"),i.classList.add("hidden")))},p=()=>{o=[],f()};async function w(){if(o.length===0){m("No Files","Please select at least one HEIC file.");return}y("Converting HEIC to PDF...");try{const t=await b.create();for(const i of o){const s=await B({blob:i,toType:"image/png",quality:.92}),r=await(Array.isArray(s)?s[0]:s).arrayBuffer(),a=await t.embedPng(r);t.addPage([a.width,a.height]).drawImage(a,{x:0,y:0,width:a.width,height:a.height})}const n=await t.save();v(new Blob([new Uint8Array(n)],{type:"application/pdf"}),"from_heic.pdf"),m("Success","PDF created successfully!","success",()=>{p()})}catch(t){console.error(t),m("Error","Failed to convert HEIC to PDF. One of the files may be invalid.")}finally{E()}}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("file-input"),n=document.getElementById("drop-zone"),i=document.getElementById("add-more-btn"),s=document.getElementById("clear-files-btn"),l=document.getElementById("process-btn"),r=document.getElementById("back-to-tools");r&&r.addEventListener("click",()=>{window.location.href="/bentopdf/"});const a=e=>{if(!e||e.length===0)return;const c=Array.from(e).filter(d=>d.name.toLowerCase().endsWith(".heic")||d.name.toLowerCase().endsWith(".heif"));c.length<e.length&&m("Invalid Files","Some files were skipped. Only HEIC/HEIF files are allowed."),c.length>0&&(o=[...o,...c],f())};t&&n&&(t.addEventListener("change",e=>{a(e.target.files)}),n.addEventListener("dragover",e=>{e.preventDefault(),n.classList.add("bg-gray-700")}),n.addEventListener("dragleave",e=>{e.preventDefault(),n.classList.remove("bg-gray-700")}),n.addEventListener("drop",e=>{e.preventDefault(),n.classList.remove("bg-gray-700"),a(e.dataTransfer?.files??null)}),t.addEventListener("click",()=>{t.value=""})),i&&i.addEventListener("click",()=>{t?.click()}),s&&s.addEventListener("click",()=>{p()}),l&&l.addEventListener("click",w)});
