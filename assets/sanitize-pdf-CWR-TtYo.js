import{c as m,i as f}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{a as c,d as u,f as p}from"./main-DSprMeGA.js";import{s as v}from"./sanitize-CN_diyjl.js";import"./mobileMenu-BoMunYmR.js";import"./PDFButton-BowUC9ah.js";import"./index-YkV0U4e7.js";const a={file:null,pdfDoc:null};function l(){a.file=null,a.pdfDoc=null;const e=document.getElementById("file-display-area");e&&(e.innerHTML="");const t=document.getElementById("tool-options");t&&t.classList.add("hidden");const n=document.getElementById("file-input");n&&(n.value="")}async function y(){const e=document.getElementById("file-display-area"),t=document.getElementById("tool-options");if(e)if(e.innerHTML="",a.file){const n=document.createElement("div");n.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const d=document.createElement("div");d.className="flex flex-col overflow-hidden";const o=document.createElement("div");o.className="truncate font-medium text-gray-200 text-sm mb-1",o.textContent=a.file.name;const i=document.createElement("div");i.className="text-xs text-gray-400",i.textContent=p(a.file.size),d.append(o,i);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=function(){l()},n.append(d,r),e.appendChild(n),m({icons:f}),t&&t.classList.remove("hidden")}else t&&t.classList.add("hidden")}async function s(e){if(e&&e.length>0){const t=e[0];(t.type==="application/pdf"||t.name.toLowerCase().endsWith(".pdf"))&&(a.file=t,y())}}async function g(){if(!a.file){c("Error","No PDF document loaded.");return}const e=document.getElementById("loader-modal"),t=document.getElementById("loader-text");e&&e.classList.remove("hidden"),t&&(t.textContent="Sanitizing PDF...");try{const n={flattenForms:document.getElementById("flatten-forms").checked,removeMetadata:document.getElementById("remove-metadata").checked,removeAnnotations:document.getElementById("remove-annotations").checked,removeJavascript:document.getElementById("remove-javascript").checked,removeEmbeddedFiles:document.getElementById("remove-embedded-files").checked,removeLayers:document.getElementById("remove-layers").checked,removeLinks:document.getElementById("remove-links").checked,removeStructureTree:document.getElementById("remove-structure-tree").checked,removeMarkInfo:document.getElementById("remove-markinfo").checked,removeFonts:document.getElementById("remove-fonts").checked};if(!Object.values(n).some(Boolean)){c("No Changes","No items were selected for removal or none were found in the PDF."),e&&e.classList.add("hidden");return}const o=await a.file.arrayBuffer(),i=await v(new Uint8Array(o),n);u(new Blob([new Uint8Array(i.bytes)],{type:"application/pdf"}),"sanitized.pdf"),c("Success","PDF has been sanitized and downloaded.","success",()=>{l()})}catch(n){console.error("Sanitization Error:",n),c("Error",`An error occurred during sanitization: ${n.message}`)}finally{e&&e.classList.add("hidden")}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),n=document.getElementById("process-btn"),d=document.getElementById("back-to-tools");d&&d.addEventListener("click",function(){window.location.href="/"}),e&&t&&(e.addEventListener("change",function(o){s(o.target.files)}),t.addEventListener("dragover",function(o){o.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",function(o){o.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",function(o){o.preventDefault(),t.classList.remove("bg-gray-700"),s(o.dataTransfer?.files)}),e.addEventListener("click",function(){e.value=""})),n&&n.addEventListener("click",g)});
