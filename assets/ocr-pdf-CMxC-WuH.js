import{c as p,i as y}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{t as b,p as x}from"./ocr-BMyXq1N1.js";import{d as v,a as h,f as I}from"./main-DSprMeGA.js";import"./mobileMenu-BoMunYmR.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./PDFButton-BowUC9ah.js";import"./index-YkV0U4e7.js";const d={file:null,searchablePdfBytes:null},w={alphanumeric:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .,!?-'"`,"numbers-currency":"0123456789$€£¥.,- ","letters-only":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz ","numbers-only":"0123456789",invoice:"0123456789$.,/-#: ",forms:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .,()-_/@#:"};function k(t,n){const c=document.getElementById("progress-bar"),s=document.getElementById("progress-status"),o=document.getElementById("progress-log");if(!c||!s||!o)return;s.textContent=t,c.style.width=`${Math.min(100,n*100)}%`;const a=`Status: ${t}`;o.textContent+=a+`
`,o.scrollTop=o.scrollHeight}function C(){d.file=null,d.searchablePdfBytes=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML="");const n=document.getElementById("tool-options");n&&n.classList.add("hidden");const c=document.getElementById("ocr-progress");c&&c.classList.add("hidden");const s=document.getElementById("ocr-results");s&&s.classList.add("hidden");const o=document.getElementById("progress-log");o&&(o.textContent="");const a=document.getElementById("progress-bar");a&&(a.style.width="0%");const l=document.getElementById("file-input");l&&(l.value=""),document.querySelectorAll(".lang-checkbox").forEach(function(m){m.checked=!1});const i=document.getElementById("selected-langs-display");i&&(i.textContent="None");const f=document.getElementById("process-btn");f&&(f.disabled=!0)}async function S(){const t=Array.from(document.querySelectorAll(".lang-checkbox:checked")).map(function(u){return u.value}),n=parseFloat(document.getElementById("ocr-resolution").value),c=document.getElementById("ocr-binarize").checked,s=document.getElementById("ocr-whitelist").value;if(t.length===0){h("No Languages Selected","Please select at least one language for OCR.");return}if(!d.file){h("No File","Please upload a PDF file first.");return}const o=t.join("+"),a=document.getElementById("tool-options"),l=document.getElementById("ocr-progress");a&&a.classList.add("hidden"),l&&l.classList.remove("hidden");try{const u=await d.file.arrayBuffer(),i=await x(new Uint8Array(u),{language:o,resolution:n,binarize:c,whitelist:s,onProgress:k});d.searchablePdfBytes=i.pdfBytes;const f=document.getElementById("ocr-results");l&&l.classList.add("hidden"),f&&f.classList.remove("hidden"),p({icons:y});const m=document.getElementById("ocr-text-output");m&&(m.value=i.fullText.trim())}catch(u){console.error(u),h("OCR Error","An error occurred during the OCR process. The worker may have failed to load. Please try again."),a&&a.classList.remove("hidden"),l&&l.classList.add("hidden")}}async function T(){const t=document.getElementById("file-display-area"),n=document.getElementById("tool-options");if(t)if(t.innerHTML="",d.file){const c=document.createElement("div");c.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const s=document.createElement("div");s.className="flex flex-col overflow-hidden";const o=document.createElement("div");o.className="truncate font-medium text-gray-200 text-sm mb-1",o.textContent=d.file.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=I(d.file.size),s.append(o,a);const l=document.createElement("button");l.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",l.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',l.onclick=function(){C()},c.append(s,l),t.appendChild(c),p({icons:y}),n&&n.classList.remove("hidden")}else n&&n.classList.add("hidden")}function L(t){if(t&&t.length>0){const n=t[0];(n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf"))&&(d.file=n,T())}}function P(){const t=document.getElementById("lang-list");t&&(t.innerHTML="",Object.entries(b).forEach(function([n,c]){const s=document.createElement("label");s.className="flex items-center gap-2 p-2 rounded-md hover:bg-gray-700 cursor-pointer";const o=document.createElement("input");o.type="checkbox",o.value=n,o.className="lang-checkbox w-4 h-4 rounded text-indigo-600 bg-gray-700 border-gray-600 focus:ring-indigo-500",s.append(o),s.append(document.createTextNode(" "+c)),t.appendChild(s)}))}document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("file-input"),n=document.getElementById("drop-zone"),c=document.getElementById("process-btn"),s=document.getElementById("back-to-tools"),o=document.getElementById("lang-search"),a=document.getElementById("lang-list"),l=document.getElementById("selected-langs-display"),u=document.getElementById("whitelist-preset"),i=document.getElementById("ocr-whitelist"),f=document.getElementById("copy-text-btn"),m=document.getElementById("download-txt-btn"),E=document.getElementById("download-searchable-pdf");P(),s&&s.addEventListener("click",function(){window.location.href="/"}),t&&n&&(t.addEventListener("change",function(e){L(e.target.files)}),n.addEventListener("dragover",function(e){e.preventDefault(),n.classList.add("bg-gray-700")}),n.addEventListener("dragleave",function(e){e.preventDefault(),n.classList.remove("bg-gray-700")}),n.addEventListener("drop",function(e){e.preventDefault(),n.classList.remove("bg-gray-700");const r=e.dataTransfer?.files;if(r&&r.length>0){const B=Array.from(r).filter(function(g){return g.type==="application/pdf"||g.name.toLowerCase().endsWith(".pdf")});if(B.length>0){const g=new DataTransfer;g.items.add(B[0]),L(g.files)}}}),t.addEventListener("click",function(){t.value=""})),o&&a&&(o.addEventListener("input",function(){const e=o.value.toLowerCase();a.querySelectorAll("label").forEach(function(r){r.style.display=r.textContent?.toLowerCase().includes(e)?"":"none"})}),a.addEventListener("change",function(){const e=Array.from(a.querySelectorAll(".lang-checkbox:checked")).map(function(r){return b[r.value]});l&&(l.textContent=e.length>0?e.join(", "):"None"),c&&(c.disabled=e.length===0)})),u&&i&&u.addEventListener("change",function(){const e=u.value;e&&e!=="custom"?(i.value=w[e]||"",i.disabled=!0):(i.disabled=!1,e===""&&(i.value=""))}),document.querySelectorAll("details").forEach(function(e){e.addEventListener("toggle",function(){const r=e.querySelector(".details-icon");r&&(r.style.transform=e.open?"rotate(180deg)":"rotate(0deg)")})}),c&&c.addEventListener("click",S),f&&f.addEventListener("click",function(){const e=document.getElementById("ocr-text-output");e&&navigator.clipboard.writeText(e.value).then(function(){f.innerHTML='<i data-lucide="check" class="w-4 h-4 text-green-400"></i>',p({icons:y}),setTimeout(function(){f.innerHTML='<i data-lucide="clipboard-copy" class="w-4 h-4 text-gray-300"></i>',p({icons:y})},2e3)})}),m&&m.addEventListener("click",function(){const e=document.getElementById("ocr-text-output");if(e){const r=new Blob([e.value],{type:"text/plain"});v(r,"ocr-text.txt")}}),E&&E.addEventListener("click",function(){d.searchablePdfBytes&&v(new Blob([new Uint8Array(d.searchablePdfBytes)],{type:"application/pdf"}),"searchable.pdf")})});
