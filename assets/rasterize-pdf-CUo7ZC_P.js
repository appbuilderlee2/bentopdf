const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-CX_3d3rd.js","assets/main-X9THBjap.js","assets/style-DHqpffR4.js","assets/style-Bksgp8bg.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as C,i as k}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{s as a,a as g,b as E,d as $,h as b,_ as A,f as D,r as N,c as R}from"./main-X9THBjap.js";import{s as M}from"./wasm-provider-C9fvsoLq.js";import{i as S,l as T}from"./pymupdf-loader-DSwOn04P.js";import"./mobileMenu-BoMunYmR.js";document.addEventListener("DOMContentLoaded",()=>{const m=document.getElementById("file-input"),l=document.getElementById("drop-zone"),p=document.getElementById("process-btn"),y=document.getElementById("file-display-area"),h=document.getElementById("rasterize-options"),z=document.getElementById("file-controls"),w=document.getElementById("add-more-btn"),I=document.getElementById("clear-files-btn"),P=document.getElementById("back-to-tools");P&&P.addEventListener("click",()=>{window.location.href="/bentopdf/"});const L=async()=>{if(!(!y||!h||!p||!z))if(a.files.length>0){y.innerHTML="";for(let e=0;e<a.files.length;e++){const t=a.files[e],r=document.createElement("div");r.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const d=document.createElement("div");d.className="flex flex-col overflow-hidden";const c=document.createElement("div");c.className="truncate font-medium text-gray-200 text-sm mb-1",c.textContent=t.name;const n=document.createElement("div");n.className="text-xs text-gray-400",n.textContent=`${D(t.size)} • Loading pages...`,d.append(c,n);const i=document.createElement("button");i.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",i.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',i.onclick=()=>{a.files=a.files.filter((s,o)=>o!==e),L()},r.append(d,i),y.appendChild(r);try{const s=await N(t),o=await R({data:s}).promise;n.textContent=`${D(t.size)} • ${o.numPages} pages`}catch(s){console.error("Error loading PDF:",s),n.textContent=`${D(t.size)} • Could not load page count`}}C({icons:k}),z.classList.remove("hidden"),h.classList.remove("hidden"),p.disabled=!1}else y.innerHTML="",z.classList.add("hidden"),h.classList.add("hidden"),p.disabled=!0},v=()=>{a.files=[],a.pdfDoc=null,L()},_=async()=>{try{if(a.files.length===0){g("No Files","Please select at least one PDF file.");return}if(!S()){M("pymupdf");return}E("Loading engine...");const e=await T(),t=parseInt(document.getElementById("rasterize-dpi").value)||150,r=document.getElementById("rasterize-format").value,d=document.getElementById("rasterize-grayscale").checked,c=a.files.length;let n=0,i=0;if(c===1){const s=a.files[0];E(`Rasterizing ${s.name}...`);const o=await e.rasterizePdf(s,{dpi:t,format:r,grayscale:d,quality:95}),B=s.name.replace(/\.pdf$/i,"")+"_rasterized.pdf";$(o,B),b(),g("Rasterization Complete",`Successfully rasterized PDF at ${t} DPI.`,"success",()=>v())}else{const s=(await A(async()=>{const{default:f}=await import("./jszip.min-CX_3d3rd.js").then(u=>u.j);return{default:f}},__vite__mapDeps([0,1,2,3,4]))).default,o=new s;for(const f of a.files)try{E(`Rasterizing ${f.name} (${n+1}/${c})...`);const u=await e.rasterizePdf(f,{dpi:t,format:r,grayscale:d,quality:95}),F=f.name.replace(/\.pdf$/i,"")+"_rasterized.pdf";o.file(F,u),n++}catch(u){console.error(`Failed to rasterize ${f.name}:`,u),i++}E("Creating ZIP archive...");const B=await o.generateAsync({type:"blob"});$(B,"rasterized-pdfs.zip"),b(),i===0?g("Rasterization Complete",`Successfully rasterized ${n} PDF(s) at ${t} DPI.`,"success",()=>v()):g("Rasterization Partial",`Rasterized ${n} PDF(s), failed ${i}.`,"warning",()=>v())}}catch(e){b(),g("Error",`An error occurred during rasterization. Error: ${e.message}`)}},x=e=>{if(e&&e.length>0){const t=Array.from(e).filter(r=>r.type==="application/pdf"||r.name.toLowerCase().endsWith(".pdf"));t.length>0&&(a.files=[...a.files,...t],L())}};m&&l&&(m.addEventListener("change",e=>{x(e.target.files)}),l.addEventListener("dragover",e=>{e.preventDefault(),l.classList.add("bg-gray-700")}),l.addEventListener("dragleave",e=>{e.preventDefault(),l.classList.remove("bg-gray-700")}),l.addEventListener("drop",e=>{e.preventDefault(),l.classList.remove("bg-gray-700"),x(e.dataTransfer?.files??null)}),m.addEventListener("click",()=>{m.value=""})),w&&w.addEventListener("click",()=>{m.click()}),I&&I.addEventListener("click",v),p&&p.addEventListener("click",_)});
