import{c as f,i as u}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{G as w,a as r,b as v,r as D,c as L,h as d,f as x,m as P,d as b}from"./main-X9THBjap.js";import{P as I}from"./PDFButton-B7ekbw-1.js";import{d as B}from"./pdf-operations-C69fooj2.js";import"./mobileMenu-BoMunYmR.js";import"./index-YkV0U4e7.js";w.workerSrc=new URL("/bentopdf/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();const a={file:null,pdfDoc:null,pdfJsDoc:null,totalPages:0,pagesToDelete:new Set};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();function y(){f({icons:u});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),n=document.getElementById("process-btn"),o=document.getElementById("pages-to-delete");t&&t.addEventListener("change",T),e&&(e.addEventListener("dragover",s=>{s.preventDefault(),e.classList.add("bg-gray-700")}),e.addEventListener("dragleave",()=>{e.classList.remove("bg-gray-700")}),e.addEventListener("drop",s=>{s.preventDefault(),e.classList.remove("bg-gray-700");const l=s.dataTransfer?.files;l&&l.length>0&&h(l[0])}),t?.addEventListener("click",()=>{t&&(t.value="")})),n&&n.addEventListener("click",O),o&&o.addEventListener("input",A),document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/bentopdf/"})}function T(t){const e=t.target;e.files&&e.files.length>0&&h(e.files[0])}async function h(t){if(t.type!=="application/pdf"&&!t.name.toLowerCase().endsWith(".pdf")){r("Invalid File","Please select a PDF file.");return}v("Loading PDF..."),a.file=t;try{const e=await D(t);a.pdfDoc=await I.load(e,{ignoreEncryption:!0,throwOnInvalidObject:!1}),a.pdfJsDoc=await L({data:e.slice(0)}).promise,a.totalPages=a.pdfDoc.getPageCount(),a.pagesToDelete=new Set,S(),F(),await C(),d()}catch(e){console.error("Error loading PDF:",e),d(),r("Error","Failed to load PDF file.")}}function S(){const t=document.getElementById("file-display-area");if(!t||!a.file)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const n=document.createElement("div");n.className="flex flex-col flex-1 min-w-0";const o=document.createElement("div");o.className="truncate font-medium text-gray-200 text-sm mb-1",o.textContent=a.file.name;const s=document.createElement("div");s.className="text-xs text-gray-400",s.textContent=`${x(a.file.size)} â€¢ ${a.totalPages} pages`,n.append(o,s);const l=document.createElement("button");l.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",l.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',l.onclick=()=>E(),e.append(n,l),t.appendChild(e),f({icons:u})}function F(){const t=document.getElementById("delete-options"),e=document.getElementById("total-pages");t&&t.classList.remove("hidden"),e&&(e.textContent=a.totalPages.toString())}async function C(){const t=document.getElementById("delete-pages-preview");if(t){t.innerHTML="";for(let e=1;e<=a.totalPages;e++){const n=await a.pdfJsDoc.getPage(e),o=n.getViewport({scale:.3}),s=document.createElement("canvas");s.width=o.width,s.height=o.height;const l=s.getContext("2d");await n.render({canvasContext:l,viewport:o}).promise;const i=document.createElement("div");i.className="relative cursor-pointer group",i.dataset.page=e.toString();const c=document.createElement("div");c.className="w-full h-28 bg-gray-900 rounded-lg flex items-center justify-center overflow-hidden border-2 border-gray-600";const p=document.createElement("img");p.src=s.toDataURL(),p.className="max-w-full max-h-full object-contain";const m=document.createElement("span");m.className="absolute top-1 left-1 bg-gray-800 text-white text-xs px-1.5 py-0.5 rounded",m.textContent=`${e}`;const g=document.createElement("div");g.className="absolute inset-0 bg-red-500/50 hidden items-center justify-center rounded-lg",g.innerHTML='<i data-lucide="x" class="w-8 h-8 text-white"></i>',c.appendChild(p),i.append(c,m,g),t.appendChild(i),i.addEventListener("click",()=>N(e,i))}f({icons:u})}}function N(t,e){const n=e.querySelector(".bg-red-500\\/50");a.pagesToDelete.has(t)?(a.pagesToDelete.delete(t),n?.classList.add("hidden"),n?.classList.remove("flex")):(a.pagesToDelete.add(t),n?.classList.remove("hidden"),n?.classList.add("flex")),k()}function k(){const t=document.getElementById("pages-to-delete");if(t){const e=Array.from(a.pagesToDelete).sort((n,o)=>n-o);t.value=e.join(", ")}}function A(){const t=document.getElementById("pages-to-delete");if(!t)return;a.pagesToDelete=new Set(P(t.value,a.totalPages).map(n=>n+1));const e=document.getElementById("delete-pages-preview");e&&e.querySelectorAll("[data-page]").forEach(n=>{const o=parseInt(n.dataset.page||"0",10),s=n.querySelector(".bg-red-500\\/50");a.pagesToDelete.has(o)?(s?.classList.remove("hidden"),s?.classList.add("flex")):(s?.classList.add("hidden"),s?.classList.remove("flex"))})}async function O(){if(a.pagesToDelete.size===0){r("No Pages","Please select pages to delete.");return}if(a.pagesToDelete.size>=a.totalPages){r("Error","Cannot delete all pages.");return}v("Deleting pages...");try{const t=await a.pdfDoc.save(),e=await B(new Uint8Array(t),a.pagesToDelete),n=a.file?.name.replace(".pdf","")||"document";b(new Blob([e],{type:"application/pdf"}),`${n}_pages_removed.pdf`),d(),r("Success",`Deleted ${a.pagesToDelete.size} page(s) successfully!`,"success",()=>E())}catch(t){console.error("Error deleting pages:",t),d(),r("Error","Failed to delete pages.")}}function E(){a.file=null,a.pdfDoc=null,a.pdfJsDoc=null,a.totalPages=0,a.pagesToDelete=new Set,document.getElementById("delete-options")?.classList.add("hidden");const t=document.getElementById("file-display-area");t&&(t.innerHTML="");const e=document.getElementById("pages-to-delete");e&&(e.value="");const n=document.getElementById("delete-pages-preview");n&&(n.innerHTML="")}
