import{c as h,i as v}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{a as f,d as m,f as E}from"./main-DSprMeGA.js";import{a as u}from"./ghostscript-loader-BjoaF_wm.js";import{i as L}from"./ghostscript-dynamic-loader-CL_rxo7X.js";import{s as B}from"./wasm-provider-BDZaM2k5.js";import{J as b}from"./jszip.min-DhcferR8.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-cdn-config-qBeK0mSU.js";import"./PDFButton-BowUC9ah.js";import"./index-YkV0U4e7.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";const l={files:[]};function g(){l.files=[];const e=document.getElementById("file-display-area");e&&(e.innerHTML="");const t=document.getElementById("tool-options");t&&t.classList.add("hidden");const n=document.getElementById("file-controls");n&&n.classList.add("hidden");const o=document.getElementById("file-input");o&&(o.value="")}async function y(){const e=document.getElementById("file-display-area"),t=document.getElementById("tool-options"),n=document.getElementById("file-controls");e&&(e.innerHTML="",l.files.length>0?(l.files.forEach((o,i)=>{const a=document.createElement("div");a.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const s=document.createElement("div");s.className="flex flex-col overflow-hidden";const r=document.createElement("div");r.className="truncate font-medium text-gray-200 text-sm mb-1",r.textContent=o.name;const c=document.createElement("div");c.className="text-xs text-gray-400",c.textContent=E(o.size),s.append(r,c);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=function(){l.files.splice(i,1),y()},a.append(s,d),e.appendChild(a)}),h({icons:v}),t&&t.classList.remove("hidden"),n&&n.classList.remove("hidden")):(t&&t.classList.add("hidden"),n&&n.classList.add("hidden")))}function p(e){if(e&&e.length>0){const t=Array.from(e).filter(n=>n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf"));t.length>0&&(l.files.push(...t),y())}}async function x(){if(l.files.length===0){f("No Files","Please select at least one PDF file.");return}if(!L()){B("ghostscript");return}const e=document.getElementById("loader-modal"),t=document.getElementById("loader-text");try{if(l.files.length===1){e&&e.classList.remove("hidden"),t&&(t.textContent="Converting fonts to outlines...");const n=l.files[0],o=await u(n,a=>{t&&(t.textContent=a)}),i=n.name.replace(/\.pdf$/i,"");m(o,`${i}_outlined.pdf`),e&&e.classList.add("hidden")}else{e&&e.classList.remove("hidden"),t&&(t.textContent="Processing multiple PDFs...");const n=new b;let o=0;for(let i=0;i<l.files.length;i++){const a=l.files[i];t&&(t.textContent=`Processing ${i+1}/${l.files.length}: ${a.name}...`);try{const r=await(await u(a,()=>{})).arrayBuffer(),c=a.name.replace(/\.pdf$/i,"");n.file(`${c}_outlined.pdf`,r),o++}catch(s){console.error(`Error processing ${a.name}:`,s)}}if(o>0){const i=await n.generateAsync({type:"blob"});m(i,"outlined_pdfs.zip"),f("Success",`Processed ${o} PDFs.`,"success",()=>{g()})}else f("Error","No PDFs could be processed.");e&&e.classList.add("hidden")}}catch(n){console.error(n),e&&e.classList.add("hidden");const o=n instanceof Error?n.message:"An unexpected error occurred.";f("Error",o)}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),n=document.getElementById("process-btn"),o=document.getElementById("add-more-btn"),i=document.getElementById("clear-files-btn"),a=document.getElementById("back-to-tools");a&&a.addEventListener("click",function(){window.location.href="/"}),e&&t&&(e.addEventListener("change",function(s){p(s.target.files)}),t.addEventListener("dragover",function(s){s.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",function(s){s.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",function(s){s.preventDefault(),t.classList.remove("bg-gray-700"),p(s.dataTransfer?.files)}),e.addEventListener("click",function(){e.value=""})),n&&n.addEventListener("click",x),o&&o.addEventListener("click",function(){e.value="",e.click()}),i&&i.addEventListener("click",function(){g()})});
