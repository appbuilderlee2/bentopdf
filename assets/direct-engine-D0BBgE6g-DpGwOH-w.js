import{p as Ft}from"./main-DSprMeGA.js";import{s as sn,G as y,q as T,X as mt,C as qt,I as Qt,M as R,W as bn,y as fn,A as pn,_ as ce,R as ne,z as Xe,S as An,a as pe,V as Zt,K as en,Z as En,T as tn,Q as At,b as yn,Y as nn,x as Mn,N as Ye,$ as Gn,F as Sn,E as lt,D as Je,B as qe,c as rn,o as Cn,d as on,p as dt,e as ge,P as ie,f as Tn}from"./embedpdf-YjTIsOgS.js";import{h as xn,l as vn}from"./browser-awZxztMA-BIz7p1mk-C0XLyJTz.js";import"./style-BMqLG_Qf.js";var Et,On=(Et=import.meta.url,async function(z={}){var r,n,o,e=z,s=new Promise((t,a)=>{n=t,o=a});["_EPDF_GetMetaKeyCount","_EPDF_GetMetaKeyName","_EPDF_GetMetaTrapped","_EPDF_GetPageRotationByIndex","_EPDF_HasMetaText","_EPDF_IsEncrypted","_EPDF_IsOwnerUnlocked","_EPDF_PNG_EncodeRGBA","_EPDF_RemoveEncryption","_EPDF_RenderAnnotBitmap","_EPDF_SetEncryption","_EPDF_SetMetaText","_EPDF_SetMetaTrapped","_EPDF_UnlockOwnerPermissions","_EPDFAction_CreateGoTo","_EPDFAction_CreateGoToNamed","_EPDFAction_CreateLaunch","_EPDFAction_CreateRemoteGoToByName","_EPDFAction_CreateRemoteGoToDest","_EPDFAction_CreateURI","_EPDFAnnot_ClearColor","_EPDFAnnot_GenerateAppearance","_EPDFAnnot_GenerateAppearanceWithBlend","_EPDFAnnot_GetBlendMode","_EPDFAnnot_GetBorderDashPattern","_EPDFAnnot_GetBorderDashPatternCount","_EPDFAnnot_GetBorderEffect","_EPDFAnnot_GetBorderStyle","_EPDFAnnot_GetColor","_EPDFAnnot_GetDefaultAppearance","_EPDFAnnot_GetIcon","_EPDFAnnot_GetIntent","_EPDFAnnot_GetLineEndings","_EPDFAnnot_GetOpacity","_EPDFAnnot_GetRectangleDifferences","_EPDFAnnot_GetReplyType","_EPDFAnnot_GetRichContent","_EPDFAnnot_GetTextAlignment","_EPDFAnnot_GetVerticalAlignment","_EPDFAnnot_SetAction","_EPDFAnnot_SetBorderDashPattern","_EPDFAnnot_SetBorderStyle","_EPDFAnnot_SetColor","_EPDFAnnot_SetDefaultAppearance","_EPDFAnnot_SetIcon","_EPDFAnnot_SetIntent","_EPDFAnnot_SetLine","_EPDFAnnot_SetLineEndings","_EPDFAnnot_SetLinkedAnnot","_EPDFAnnot_SetOpacity","_EPDFAnnot_SetReplyType","_EPDFAnnot_SetTextAlignment","_EPDFAnnot_SetVerticalAlignment","_EPDFAnnot_SetVertices","_EPDFAnnot_UpdateAppearanceToRect","_EPDFAttachment_GetDescription","_EPDFAttachment_GetIntegerValue","_EPDFAttachment_SetDescription","_EPDFAttachment_SetSubtype","_EPDFBookmark_AppendChild","_EPDFBookmark_Clear","_EPDFBookmark_ClearTarget","_EPDFBookmark_Create","_EPDFBookmark_Delete","_EPDFBookmark_InsertAfter","_EPDFBookmark_SetAction","_EPDFBookmark_SetDest","_EPDFBookmark_SetTitle","_EPDFCatalog_GetLanguage","_EPDFDest_CreateRemoteView","_EPDFDest_CreateRemoteXYZ","_EPDFDest_CreateView","_EPDFDest_CreateXYZ","_EPDFNamedDest_Remove","_EPDFNamedDest_SetDest","_EPDFPage_CreateAnnot","_EPDFPage_GetAnnotByName","_EPDFPage_GetAnnotCountRaw","_EPDFPage_GetAnnotRaw","_EPDFPage_RemoveAnnotByName","_EPDFPage_RemoveAnnotRaw","_EPDFText_RedactInQuads","_EPDFText_RedactInRect","_FORM_CanRedo","_FORM_CanUndo","_FORM_DoDocumentAAction","_FORM_DoDocumentJSAction","_FORM_DoDocumentOpenAction","_FORM_DoPageAAction","_FORM_ForceToKillFocus","_FORM_GetFocusedAnnot","_FORM_GetFocusedText","_FORM_GetSelectedText","_FORM_IsIndexSelected","_FORM_OnAfterLoadPage","_FORM_OnBeforeClosePage","_FORM_OnChar","_FORM_OnFocus","_FORM_OnKeyDown","_FORM_OnKeyUp","_FORM_OnLButtonDoubleClick","_FORM_OnLButtonDown","_FORM_OnLButtonUp","_FORM_OnMouseMove","_FORM_OnMouseWheel","_FORM_OnRButtonDown","_FORM_OnRButtonUp","_FORM_Redo","_FORM_ReplaceAndKeepSelection","_FORM_ReplaceSelection","_FORM_SelectAllText","_FORM_SetFocusedAnnot","_FORM_SetIndexSelected","_FORM_Undo","_FPDF_AddInstalledFont","_FPDF_CloseDocument","_FPDF_ClosePage","_FPDF_CloseXObject","_FPDF_CopyViewerPreferences","_FPDF_CountNamedDests","_FPDF_CreateClipPath","_FPDF_CreateNewDocument","_FPDF_DestroyClipPath","_FPDF_DestroyLibrary","_FPDF_DeviceToPage","_FPDF_DocumentHasValidCrossReferenceTable","_FPDF_FFLDraw","_FPDF_FreeDefaultSystemFontInfo","_FPDF_GetDefaultSystemFontInfo","_FPDF_GetDefaultTTFMap","_FPDF_GetDefaultTTFMapCount","_FPDF_GetDefaultTTFMapEntry","_FPDF_GetDocPermissions","_FPDF_GetDocUserPermissions","_FPDF_GetFileIdentifier","_FPDF_GetFileVersion","_FPDF_GetFormType","_FPDF_GetLastError","_FPDF_GetMetaText","_FPDF_GetNamedDest","_FPDF_GetNamedDestByName","_FPDF_GetPageAAction","_FPDF_GetPageBoundingBox","_FPDF_GetPageCount","_FPDF_GetPageHeight","_FPDF_GetPageHeightF","_FPDF_GetPageLabel","_FPDF_GetPageSizeByIndex","_FPDF_GetPageSizeByIndexF","_FPDF_GetPageWidth","_FPDF_GetPageWidthF","_FPDF_GetSecurityHandlerRevision","_FPDF_GetSignatureCount","_FPDF_GetSignatureObject","_FPDF_GetTrailerEnds","_FPDF_GetXFAPacketContent","_FPDF_GetXFAPacketCount","_FPDF_GetXFAPacketName","_FPDF_ImportNPagesToOne","_FPDF_ImportPages","_FPDF_ImportPagesByIndex","_FPDF_InitLibrary","_FPDF_InitLibraryWithConfig","_FPDF_LoadCustomDocument","_FPDF_LoadDocument","_FPDF_LoadMemDocument","_FPDF_LoadMemDocument64","_FPDF_LoadPage","_FPDF_LoadXFA","_FPDF_MovePages","_FPDF_NewFormObjectFromXObject","_FPDF_NewXObjectFromPage","_FPDF_PageToDevice","_FPDF_RemoveFormFieldHighlight","_FPDF_RenderPage_Close","_FPDF_RenderPage_Continue","_FPDF_RenderPageBitmap","_FPDF_RenderPageBitmap_Start","_FPDF_RenderPageBitmapWithColorScheme_Start","_FPDF_RenderPageBitmapWithMatrix","_FPDF_SaveAsCopy","_FPDF_SaveWithVersion","_FPDF_SetFormFieldHighlightAlpha","_FPDF_SetFormFieldHighlightColor","_FPDF_SetSandBoxPolicy","_FPDF_SetSystemFontInfo","_FPDF_StructElement_Attr_CountChildren","_FPDF_StructElement_Attr_GetBlobValue","_FPDF_StructElement_Attr_GetBooleanValue","_FPDF_StructElement_Attr_GetChildAtIndex","_FPDF_StructElement_Attr_GetCount","_FPDF_StructElement_Attr_GetName","_FPDF_StructElement_Attr_GetNumberValue","_FPDF_StructElement_Attr_GetStringValue","_FPDF_StructElement_Attr_GetType","_FPDF_StructElement_Attr_GetValue","_FPDF_StructElement_CountChildren","_FPDF_StructElement_GetActualText","_FPDF_StructElement_GetAltText","_FPDF_StructElement_GetAttributeAtIndex","_FPDF_StructElement_GetAttributeCount","_FPDF_StructElement_GetChildAtIndex","_FPDF_StructElement_GetChildMarkedContentID","_FPDF_StructElement_GetID","_FPDF_StructElement_GetLang","_FPDF_StructElement_GetMarkedContentID","_FPDF_StructElement_GetMarkedContentIdAtIndex","_FPDF_StructElement_GetMarkedContentIdCount","_FPDF_StructElement_GetObjType","_FPDF_StructElement_GetParent","_FPDF_StructElement_GetStringAttribute","_FPDF_StructElement_GetTitle","_FPDF_StructElement_GetType","_FPDF_StructTree_Close","_FPDF_StructTree_CountChildren","_FPDF_StructTree_GetChildAtIndex","_FPDF_StructTree_GetForPage","_FPDF_VIEWERREF_GetDuplex","_FPDF_VIEWERREF_GetName","_FPDF_VIEWERREF_GetNumCopies","_FPDF_VIEWERREF_GetPrintPageRange","_FPDF_VIEWERREF_GetPrintPageRangeCount","_FPDF_VIEWERREF_GetPrintPageRangeElement","_FPDF_VIEWERREF_GetPrintScaling","_FPDFAction_GetDest","_FPDFAction_GetFilePath","_FPDFAction_GetType","_FPDFAction_GetURIPath","_FPDFAnnot_AddFileAttachment","_FPDFAnnot_AddInkStroke","_FPDFAnnot_AppendAttachmentPoints","_FPDFAnnot_AppendObject","_FPDFAnnot_CountAttachmentPoints","_FPDFAnnot_GetAP","_FPDFAnnot_GetAttachmentPoints","_FPDFAnnot_GetBorder","_FPDFAnnot_GetColor","_FPDFAnnot_GetFileAttachment","_FPDFAnnot_GetFlags","_FPDFAnnot_GetFocusableSubtypes","_FPDFAnnot_GetFocusableSubtypesCount","_FPDFAnnot_GetFontColor","_FPDFAnnot_GetFontSize","_FPDFAnnot_GetFormAdditionalActionJavaScript","_FPDFAnnot_GetFormControlCount","_FPDFAnnot_GetFormControlIndex","_FPDFAnnot_GetFormFieldAlternateName","_FPDFAnnot_GetFormFieldAtPoint","_FPDFAnnot_GetFormFieldExportValue","_FPDFAnnot_GetFormFieldFlags","_FPDFAnnot_GetFormFieldName","_FPDFAnnot_GetFormFieldType","_FPDFAnnot_GetFormFieldValue","_FPDFAnnot_GetInkListCount","_FPDFAnnot_GetInkListPath","_FPDFAnnot_GetLine","_FPDFAnnot_GetLink","_FPDFAnnot_GetLinkedAnnot","_FPDFAnnot_GetNumberValue","_FPDFAnnot_GetObject","_FPDFAnnot_GetObjectCount","_FPDFAnnot_GetOptionCount","_FPDFAnnot_GetOptionLabel","_FPDFAnnot_GetRect","_FPDFAnnot_GetStringValue","_FPDFAnnot_GetSubtype","_FPDFAnnot_GetValueType","_FPDFAnnot_GetVertices","_FPDFAnnot_HasAttachmentPoints","_FPDFAnnot_HasKey","_FPDFAnnot_IsChecked","_FPDFAnnot_IsObjectSupportedSubtype","_FPDFAnnot_IsOptionSelected","_FPDFAnnot_IsSupportedSubtype","_FPDFAnnot_RemoveInkList","_FPDFAnnot_RemoveObject","_FPDFAnnot_SetAP","_FPDFAnnot_SetAttachmentPoints","_FPDFAnnot_SetBorder","_FPDFAnnot_SetColor","_FPDFAnnot_SetFlags","_FPDFAnnot_SetFocusableSubtypes","_FPDFAnnot_SetFontColor","_FPDFAnnot_SetFormFieldFlags","_FPDFAnnot_SetRect","_FPDFAnnot_SetStringValue","_FPDFAnnot_SetURI","_FPDFAnnot_UpdateObject","_FPDFAttachment_GetFile","_FPDFAttachment_GetName","_FPDFAttachment_GetStringValue","_FPDFAttachment_GetSubtype","_FPDFAttachment_GetValueType","_FPDFAttachment_HasKey","_FPDFAttachment_SetFile","_FPDFAttachment_SetStringValue","_FPDFAvail_Create","_FPDFAvail_Destroy","_FPDFAvail_GetDocument","_FPDFAvail_GetFirstPageNum","_FPDFAvail_IsDocAvail","_FPDFAvail_IsFormAvail","_FPDFAvail_IsLinearized","_FPDFAvail_IsPageAvail","_FPDFBitmap_Create","_FPDFBitmap_CreateEx","_FPDFBitmap_Destroy","_FPDFBitmap_FillRect","_FPDFBitmap_GetBuffer","_FPDFBitmap_GetFormat","_FPDFBitmap_GetHeight","_FPDFBitmap_GetStride","_FPDFBitmap_GetWidth","_FPDFBookmark_Find","_FPDFBookmark_GetAction","_FPDFBookmark_GetCount","_FPDFBookmark_GetDest","_FPDFBookmark_GetFirstChild","_FPDFBookmark_GetNextSibling","_FPDFBookmark_GetTitle","_FPDFCatalog_IsTagged","_FPDFCatalog_SetLanguage","_FPDFClipPath_CountPaths","_FPDFClipPath_CountPathSegments","_FPDFClipPath_GetPathSegment","_FPDFDest_GetDestPageIndex","_FPDFDest_GetLocationInPage","_FPDFDest_GetView","_FPDFDoc_AddAttachment","_FPDFDoc_CloseJavaScriptAction","_FPDFDoc_DeleteAttachment","_FPDFDOC_ExitFormFillEnvironment","_FPDFDoc_GetAttachment","_FPDFDoc_GetAttachmentCount","_FPDFDoc_GetJavaScriptAction","_FPDFDoc_GetJavaScriptActionCount","_FPDFDoc_GetPageMode","_FPDFDOC_InitFormFillEnvironment","_FPDFFont_Close","_FPDFFont_GetAscent","_FPDFFont_GetBaseFontName","_FPDFFont_GetDescent","_FPDFFont_GetFamilyName","_FPDFFont_GetFlags","_FPDFFont_GetFontData","_FPDFFont_GetGlyphPath","_FPDFFont_GetGlyphWidth","_FPDFFont_GetIsEmbedded","_FPDFFont_GetItalicAngle","_FPDFFont_GetWeight","_FPDFFormObj_CountObjects","_FPDFFormObj_GetObject","_FPDFFormObj_RemoveObject","_FPDFGlyphPath_CountGlyphSegments","_FPDFGlyphPath_GetGlyphPathSegment","_FPDFImageObj_GetBitmap","_FPDFImageObj_GetIccProfileDataDecoded","_FPDFImageObj_GetImageDataDecoded","_FPDFImageObj_GetImageDataRaw","_FPDFImageObj_GetImageFilter","_FPDFImageObj_GetImageFilterCount","_FPDFImageObj_GetImageMetadata","_FPDFImageObj_GetImagePixelSize","_FPDFImageObj_GetRenderedBitmap","_FPDFImageObj_LoadJpegFile","_FPDFImageObj_LoadJpegFileInline","_FPDFImageObj_SetBitmap","_FPDFImageObj_SetMatrix","_FPDFJavaScriptAction_GetName","_FPDFJavaScriptAction_GetScript","_FPDFLink_CloseWebLinks","_FPDFLink_CountQuadPoints","_FPDFLink_CountRects","_FPDFLink_CountWebLinks","_FPDFLink_Enumerate","_FPDFLink_GetAction","_FPDFLink_GetAnnot","_FPDFLink_GetAnnotRect","_FPDFLink_GetDest","_FPDFLink_GetLinkAtPoint","_FPDFLink_GetLinkZOrderAtPoint","_FPDFLink_GetQuadPoints","_FPDFLink_GetRect","_FPDFLink_GetTextRange","_FPDFLink_GetURL","_FPDFLink_LoadWebLinks","_FPDFPage_CloseAnnot","_FPDFPage_CountObjects","_FPDFPage_CreateAnnot","_FPDFPage_Delete","_FPDFPage_Flatten","_FPDFPage_FormFieldZOrderAtPoint","_FPDFPage_GenerateContent","_FPDFPage_GetAnnot","_FPDFPage_GetAnnotCount","_FPDFPage_GetAnnotIndex","_FPDFPage_GetArtBox","_FPDFPage_GetBleedBox","_FPDFPage_GetCropBox","_FPDFPage_GetDecodedThumbnailData","_FPDFPage_GetMediaBox","_FPDFPage_GetObject","_FPDFPage_GetRawThumbnailData","_FPDFPage_GetRotation","_FPDFPage_GetThumbnailAsBitmap","_FPDFPage_GetTrimBox","_FPDFPage_HasFormFieldAtPoint","_FPDFPage_HasTransparency","_FPDFPage_InsertClipPath","_FPDFPage_InsertObject","_FPDFPage_InsertObjectAtIndex","_FPDFPage_New","_FPDFPage_RemoveAnnot","_FPDFPage_RemoveObject","_FPDFPage_SetArtBox","_FPDFPage_SetBleedBox","_FPDFPage_SetCropBox","_FPDFPage_SetMediaBox","_FPDFPage_SetRotation","_FPDFPage_SetTrimBox","_FPDFPage_TransformAnnots","_FPDFPage_TransFormWithClip","_FPDFPageObj_AddMark","_FPDFPageObj_CountMarks","_FPDFPageObj_CreateNewPath","_FPDFPageObj_CreateNewRect","_FPDFPageObj_CreateTextObj","_FPDFPageObj_Destroy","_FPDFPageObj_GetBounds","_FPDFPageObj_GetClipPath","_FPDFPageObj_GetDashArray","_FPDFPageObj_GetDashCount","_FPDFPageObj_GetDashPhase","_FPDFPageObj_GetFillColor","_FPDFPageObj_GetIsActive","_FPDFPageObj_GetLineCap","_FPDFPageObj_GetLineJoin","_FPDFPageObj_GetMark","_FPDFPageObj_GetMarkedContentID","_FPDFPageObj_GetMatrix","_FPDFPageObj_GetRotatedBounds","_FPDFPageObj_GetStrokeColor","_FPDFPageObj_GetStrokeWidth","_FPDFPageObj_GetType","_FPDFPageObj_HasTransparency","_FPDFPageObj_NewImageObj","_FPDFPageObj_NewTextObj","_FPDFPageObj_RemoveMark","_FPDFPageObj_SetBlendMode","_FPDFPageObj_SetDashArray","_FPDFPageObj_SetDashPhase","_FPDFPageObj_SetFillColor","_FPDFPageObj_SetIsActive","_FPDFPageObj_SetLineCap","_FPDFPageObj_SetLineJoin","_FPDFPageObj_SetMatrix","_FPDFPageObj_SetStrokeColor","_FPDFPageObj_SetStrokeWidth","_FPDFPageObj_Transform","_FPDFPageObj_TransformClipPath","_FPDFPageObj_TransformF","_FPDFPageObjMark_CountParams","_FPDFPageObjMark_GetName","_FPDFPageObjMark_GetParamBlobValue","_FPDFPageObjMark_GetParamIntValue","_FPDFPageObjMark_GetParamKey","_FPDFPageObjMark_GetParamStringValue","_FPDFPageObjMark_GetParamValueType","_FPDFPageObjMark_RemoveParam","_FPDFPageObjMark_SetBlobParam","_FPDFPageObjMark_SetIntParam","_FPDFPageObjMark_SetStringParam","_FPDFPath_BezierTo","_FPDFPath_Close","_FPDFPath_CountSegments","_FPDFPath_GetDrawMode","_FPDFPath_GetPathSegment","_FPDFPath_LineTo","_FPDFPath_MoveTo","_FPDFPath_SetDrawMode","_FPDFPathSegment_GetClose","_FPDFPathSegment_GetPoint","_FPDFPathSegment_GetType","_FPDFSignatureObj_GetByteRange","_FPDFSignatureObj_GetContents","_FPDFSignatureObj_GetDocMDPPermission","_FPDFSignatureObj_GetReason","_FPDFSignatureObj_GetSubFilter","_FPDFSignatureObj_GetTime","_FPDFText_ClosePage","_FPDFText_CountChars","_FPDFText_CountRects","_FPDFText_FindClose","_FPDFText_FindNext","_FPDFText_FindPrev","_FPDFText_FindStart","_FPDFText_GetBoundedText","_FPDFText_GetCharAngle","_FPDFText_GetCharBox","_FPDFText_GetCharIndexAtPos","_FPDFText_GetCharIndexFromTextIndex","_FPDFText_GetCharOrigin","_FPDFText_GetFillColor","_FPDFText_GetFontInfo","_FPDFText_GetFontSize","_FPDFText_GetFontWeight","_FPDFText_GetLooseCharBox","_FPDFText_GetMatrix","_FPDFText_GetRect","_FPDFText_GetSchCount","_FPDFText_GetSchResultIndex","_FPDFText_GetStrokeColor","_FPDFText_GetText","_FPDFText_GetTextIndexFromCharIndex","_FPDFText_GetTextObject","_FPDFText_GetUnicode","_FPDFText_HasUnicodeMapError","_FPDFText_IsGenerated","_FPDFText_IsHyphen","_FPDFText_LoadCidType2Font","_FPDFText_LoadFont","_FPDFText_LoadPage","_FPDFText_LoadStandardFont","_FPDFText_SetCharcodes","_FPDFText_SetText","_FPDFTextObj_GetFont","_FPDFTextObj_GetFontSize","_FPDFTextObj_GetRenderedBitmap","_FPDFTextObj_GetText","_FPDFTextObj_GetTextRenderMode","_FPDFTextObj_SetTextRenderMode","_PDFiumExt_CloseFileWriter","_PDFiumExt_CloseFormFillInfo","_PDFiumExt_ExitFormFillEnvironment","_PDFiumExt_GetFileWriterData","_PDFiumExt_GetFileWriterSize","_PDFiumExt_Init","_PDFiumExt_InitFormFillEnvironment","_PDFiumExt_OpenFileWriter","_PDFiumExt_OpenFormFillInfo","_PDFiumExt_SaveAsCopy","_malloc","_free","_memory","___indirect_function_table","onRuntimeInitialized"].forEach(t=>{Object.getOwnPropertyDescriptor(s,t)||Object.defineProperty(s,t,{get:()=>U("You are getting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>U("You are setting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})});var F=typeof window=="object",d=typeof importScripts=="function";typeof Ft=="object"&&typeof Ft.versions=="object"&&typeof Ft.versions.node=="string"&&Ft.type;var _,c,f=!F&&!d,p=Object.assign({},e),M="./this.program",E="";if(f){if(typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");c=t=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));let a=read(t,"binary");return C(typeof a=="object"),a},_=t=>new Promise((a,u)=>{setTimeout(()=>a(c(t)))}),globalThis.clearTimeout??=t=>{},globalThis.setTimeout??=t=>typeof t=="function"?t():U(),typeof print<"u"&&(globalThis.console??={},console.log=print,console.warn=console.error=globalThis.printErr??print)}else{if(!F&&!d)throw new Error("environment detection error");if(d?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),Et&&(E=Et),E=E.startsWith("blob:")?"":E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1),typeof window!="object"&&typeof importScripts!="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");d&&(c=t=>{var a=new XMLHttpRequest;return a.open("GET",t,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)}),_=t=>(C(!Se(t),"readAsync does not work with file:// URLs"),fetch(t,{credentials:"same-origin"}).then(a=>a.ok?a.arrayBuffer():Promise.reject(new Error(a.status+" : "+a.url))))}var G,N=e.print||console.log.bind(console),B=e.printErr||console.error.bind(console);Object.assign(e,p),p=null,G="fetchSettings",Object.getOwnPropertyDescriptor(e,G)&&U(`\`Module.${G}\` was supplied but \`${G}\` not included in INCOMING_MODULE_JS_API`),e.arguments&&e.arguments,je("arguments","arguments_"),e.thisProgram&&(M=e.thisProgram),je("thisProgram","thisProgram"),C(e.memoryInitializerPrefixURL===void 0,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),C(e.pthreadMainPrefixURL===void 0,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),C(e.cdInitializerPrefixURL===void 0,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),C(e.filePackagePrefixURL===void 0,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),C(e.read===void 0,"Module.read option was removed"),C(e.readAsync===void 0,"Module.readAsync option was removed (modify readAsync in JS)"),C(e.readBinary===void 0,"Module.readBinary option was removed (modify readBinary in JS)"),C(e.setWindowTitle===void 0,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),C(e.TOTAL_MEMORY===void 0,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),je("asm","wasmExports"),je("readAsync","readAsync"),je("readBinary","readBinary"),je("setWindowTitle","setWindowTitle");var L,K=e.wasmBinary;je("wasmBinary","wasmBinary"),typeof WebAssembly!="object"&&B("no native wasm support detected");var $,W,J,ae,x,H,ue,he,Ae=!1;function C(t,a){t||U("Assertion failed"+(a?": "+a:""))}function Re(){var t=L.buffer;e.HEAP8=$=new Int8Array(t),e.HEAP16=J=new Int16Array(t),e.HEAPU8=W=new Uint8Array(t),e.HEAPU16=ae=new Uint16Array(t),e.HEAP32=x=new Int32Array(t),e.HEAPU32=H=new Uint32Array(t),e.HEAPF32=ue=new Float32Array(t),e.HEAPF64=he=new Float64Array(t)}function Ee(){if(!Ae){var t=pt();t==0&&(t+=4);var a=H[t>>2],u=H[t+4>>2];a==34821223&&u==2310721022||U(`Stack overflow! Stack cookie has been overwritten at ${Qe(t)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Qe(u)} ${Qe(a)}`),H[0]!=1668509029&&U("Runtime error: The application has corrupted its heap memory area (address zero)!")}}C(!e.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),C(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),C(!e.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),C(!e.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var ze=[],_t=[],Ie=[],ye=!1;function rt(t){ze.unshift(t)}function ot(t){Ie.unshift(t)}C(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),C(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),C(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),C(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var de=0,_e=null,xe=null,Me={};function Be(t){for(var a=t;;){if(!Me[t])return t;t=a+Math.random()}}function ve(t){de++,e.monitorRunDependencies?.(de),t?(C(!Me[t]),Me[t]=1,_e===null&&typeof setInterval<"u"&&(_e=setInterval(()=>{if(Ae)return clearInterval(_e),void(_e=null);var a=!1;for(var u in Me)a||(a=!0,B("still waiting on run dependencies:")),B(`dependency: ${u}`);a&&B("(end of list)")},1e4))):B("warning: run dependency added without ID")}function Fe(t){if(de--,e.monitorRunDependencies?.(de),t?(C(Me[t]),delete Me[t]):B("warning: run dependency removed without ID"),de==0&&(_e!==null&&(clearInterval(_e),_e=null),xe)){var a=xe;xe=null,a()}}function U(t){e.onAbort?.(t),B(t="Aborted("+t+")"),Ae=!0;var a=new WebAssembly.RuntimeError(t);throw o(a),a}var Oe,j,Z,Ge=t=>t.startsWith("data:application/octet-stream;base64,"),Se=t=>t.startsWith("file://");function i(t,a){return(...u)=>{C(ye,`native function \`${t}\` called before runtime initialization`);var l=me[t];return C(l,`exported native function \`${t}\` not found`),C(u.length<=a,`native function \`${t}\` called with ${u.length} args but expects ${a}`),l(...u)}}function un(){if(e.locateFile){var t="pdfium.wasm";return Ge(t)?t:(a=t,e.locateFile?e.locateFile(a,E):E+a)}var a;return f?"pdfium.wasm":new URL("/assets/pdfium-f7AsCyoP.wasm",import.meta.url).href}function Ct(t){if(t==Oe&&K)return new Uint8Array(K);if(c)return c(t);throw"both async and sync fetching of the wasm failed"}function Tt(t,a,u){return(function(l){return K?Promise.resolve().then(()=>Ct(l)):_(l).then(P=>new Uint8Array(P),()=>Ct(l))})(t).then(l=>WebAssembly.instantiate(l,a)).then(u,l=>{B(`failed to asynchronously prepare wasm: ${l}`),Se(Oe)&&B(`warning: Loading from a file URI (${Oe}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),U(l)})}if((()=>{var t=new Int16Array(1),a=new Int8Array(t.buffer);if(t[0]=25459,a[0]!==115||a[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),e.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function je(t,a,u=!0){Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{configurable:!0,get(){U(`\`Module.${t}\` has been replaced by \`${a}\``+(u?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function xt(t){return t==="FS_createPath"||t==="FS_createDataFile"||t==="FS_createPreloadedFile"||t==="FS_unlink"||t==="addRunDependency"||t==="FS_createLazyFile"||t==="FS_createDevice"||t==="removeRunDependency"}function vt(t,a){typeof globalThis>"u"||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get(){a()}})}function Ot(t,a){vt(t,()=>{Le(`\`${t}\` is not longer defined by emscripten. ${a}`)})}function kt(t){Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{configurable:!0,get(){var a=`'${t}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;xt(t)&&(a+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),U(a)}})}Ot("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Ot("asm","Please use wasmExports instead");var Pt=t=>{t.forEach(a=>a(e))};e.noExitRuntime;var Qe=t=>(C(typeof t=="number"),"0x"+(t>>>=0).toString(16).padStart(8,"0")),De=t=>Kt(t),be=()=>Yt(),Le=t=>{Le.shown||={},Le.shown[t]||(Le.shown[t]=1,B(t))},wt=typeof TextDecoder<"u"?new TextDecoder:void 0,He=(t,a=0,u=NaN)=>{for(var l=a+u,P=a;t[P]&&!(P>=l);)++P;if(P-a>16&&t.buffer&&wt)return wt.decode(t.subarray(a,P));for(var g="";a<P;){var b=t[a++];if(128&b){var A=63&t[a++];if((224&b)!=192){var S=63&t[a++];if((240&b)==224?b=(15&b)<<12|A<<6|S:((248&b)!=240&&Le("Invalid UTF-8 leading byte "+Qe(b)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),b=(7&b)<<18|A<<12|S<<6|63&t[a++]),b<65536)g+=String.fromCharCode(b);else{var k=b-65536;g+=String.fromCharCode(55296|k>>10,56320|1023&k)}}else g+=String.fromCharCode((31&b)<<6|A)}else g+=String.fromCharCode(b)}return g},Ne=(t,a)=>(C(typeof t=="number",`UTF8ToString expects a number (got ${typeof t})`),t?He(W,t,a):"");function at(){C(X.varargs!=null);var t=x[+X.varargs>>2];return X.varargs+=4,t}var Ke=at,q={isAbs:t=>t.charAt(0)==="/",splitPath:t=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1),normalizeArray:(t,a)=>{for(var u=0,l=t.length-1;l>=0;l--){var P=t[l];P==="."?t.splice(l,1):P===".."?(t.splice(l,1),u++):u&&(t.splice(l,1),u--)}if(a)for(;u;u--)t.unshift("..");return t},normalize:t=>{var a=q.isAbs(t),u=t.substr(-1)==="/";return(t=q.normalizeArray(t.split("/").filter(l=>!!l),!a).join("/"))||a||(t="."),t&&u&&(t+="/"),(a?"/":"")+t},dirname:t=>{var a=q.splitPath(t),u=a[0],l=a[1];return u||l?(l&&(l=l.substr(0,l.length-1)),u+l):"."},basename:t=>{if(t==="/")return"/";var a=(t=(t=q.normalize(t)).replace(/\/$/,"")).lastIndexOf("/");return a===-1?t:t.substr(a+1)},join:(...t)=>q.normalize(t.join("/")),join2:(t,a)=>q.normalize(t+"/"+a)},Rt=t=>(Rt=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return a=>crypto.getRandomValues(a);U("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")})())(t),Ce={resolve:(...t)=>{for(var a="",u=!1,l=t.length-1;l>=-1&&!u;l--){var P=l>=0?t[l]:m.cwd();if(typeof P!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!P)return"";a=P+"/"+a,u=q.isAbs(P)}return(u?"/":"")+(a=q.normalizeArray(a.split("/").filter(g=>!!g),!u).join("/"))||"."},relative:(t,a)=>{function u(k){for(var w=0;w<k.length&&k[w]==="";w++);for(var v=k.length-1;v>=0&&k[v]==="";v--);return w>v?[]:k.slice(w,v-w+1)}t=Ce.resolve(t).substr(1),a=Ce.resolve(a).substr(1);for(var l=u(t.split("/")),P=u(a.split("/")),g=Math.min(l.length,P.length),b=g,A=0;A<g;A++)if(l[A]!==P[A]){b=A;break}var S=[];for(A=b;A<l.length;A++)S.push("..");return(S=S.concat(P.slice(b))).join("/")}},ct=[],Ze=t=>{for(var a=0,u=0;u<t.length;++u){var l=t.charCodeAt(u);l<=127?a++:l<=2047?a+=2:l>=55296&&l<=57343?(a+=4,++u):a+=3}return a},gt=(t,a,u,l)=>{if(C(typeof t=="string",`stringToUTF8Array expects a string (got ${typeof t})`),!(l>0))return 0;for(var P=u,g=u+l-1,b=0;b<t.length;++b){var A=t.charCodeAt(b);if(A>=55296&&A<=57343&&(A=65536+((1023&A)<<10)|1023&t.charCodeAt(++b)),A<=127){if(u>=g)break;a[u++]=A}else if(A<=2047){if(u+1>=g)break;a[u++]=192|A>>6,a[u++]=128|63&A}else if(A<=65535){if(u+2>=g)break;a[u++]=224|A>>12,a[u++]=128|A>>6&63,a[u++]=128|63&A}else{if(u+3>=g)break;A>1114111&&Le("Invalid Unicode code point "+Qe(A)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),a[u++]=240|A>>18,a[u++]=128|A>>12&63,a[u++]=128|A>>6&63,a[u++]=128|63&A}}return a[u]=0,u-P};function It(t,a,u){var l=Ze(t)+1,P=new Array(l),g=gt(t,P,0,P.length);return P.length=g,P}var ke,Ve,Ue={ttys:[],init(){},shutdown(){},register(t,a){Ue.ttys[t]={input:[],output:[],ops:a},m.registerDevice(t,Ue.stream_ops)},stream_ops:{open(t){var a=Ue.ttys[t.node.rdev];if(!a)throw new m.ErrnoError(43);t.tty=a,t.seekable=!1},close(t){t.tty.ops.fsync(t.tty)},fsync(t){t.tty.ops.fsync(t.tty)},read(t,a,u,l,P){if(!t.tty||!t.tty.ops.get_char)throw new m.ErrnoError(60);for(var g=0,b=0;b<l;b++){var A;try{A=t.tty.ops.get_char(t.tty)}catch{throw new m.ErrnoError(29)}if(A===void 0&&g===0)throw new m.ErrnoError(6);if(A==null)break;g++,a[u+b]=A}return g&&(t.node.timestamp=Date.now()),g},write(t,a,u,l,P){if(!t.tty||!t.tty.ops.put_char)throw new m.ErrnoError(60);try{for(var g=0;g<l;g++)t.tty.ops.put_char(t.tty,a[u+g])}catch{throw new m.ErrnoError(29)}return l&&(t.node.timestamp=Date.now()),g}},default_tty_ops:{get_char:t=>(()=>{if(!ct.length){var a=null;if(typeof window<"u"&&typeof window.prompt=="function"?(a=window.prompt("Input: "))!==null&&(a+=`
`):typeof readline=="function"&&(a=readline())&&(a+=`
`),!a)return null;ct=It(a)}return ct.shift()})(),put_char(t,a){a===null||a===10?(N(He(t.output)),t.output=[]):a!=0&&t.output.push(a)},fsync(t){t.output&&t.output.length>0&&(N(He(t.output)),t.output=[])},ioctl_tcgets:t=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(t,a,u)=>0,ioctl_tiocgwinsz:t=>[24,80]},default_tty1_ops:{put_char(t,a){a===null||a===10?(B(He(t.output)),t.output=[]):a!=0&&t.output.push(a)},fsync(t){t.output&&t.output.length>0&&(B(He(t.output)),t.output=[])}}},Bt=(t,a)=>(C(a,"alignment argument is required"),Math.ceil(t/a)*a),jt=t=>{t=Bt(t,65536);var a=gn(65536,t);return a&&((u,l)=>{W.fill(0,u,u+l)})(a,t),a},V={ops_table:null,mount:t=>V.createNode(null,"/",16895,0),createNode(t,a,u,l){if(m.isBlkdev(u)||m.isFIFO(u))throw new m.ErrnoError(63);V.ops_table||={dir:{node:{getattr:V.node_ops.getattr,setattr:V.node_ops.setattr,lookup:V.node_ops.lookup,mknod:V.node_ops.mknod,rename:V.node_ops.rename,unlink:V.node_ops.unlink,rmdir:V.node_ops.rmdir,readdir:V.node_ops.readdir,symlink:V.node_ops.symlink},stream:{llseek:V.stream_ops.llseek}},file:{node:{getattr:V.node_ops.getattr,setattr:V.node_ops.setattr},stream:{llseek:V.stream_ops.llseek,read:V.stream_ops.read,write:V.stream_ops.write,allocate:V.stream_ops.allocate,mmap:V.stream_ops.mmap,msync:V.stream_ops.msync}},link:{node:{getattr:V.node_ops.getattr,setattr:V.node_ops.setattr,readlink:V.node_ops.readlink},stream:{}},chrdev:{node:{getattr:V.node_ops.getattr,setattr:V.node_ops.setattr},stream:m.chrdev_stream_ops}};var P=m.createNode(t,a,u,l);return m.isDir(P.mode)?(P.node_ops=V.ops_table.dir.node,P.stream_ops=V.ops_table.dir.stream,P.contents={}):m.isFile(P.mode)?(P.node_ops=V.ops_table.file.node,P.stream_ops=V.ops_table.file.stream,P.usedBytes=0,P.contents=null):m.isLink(P.mode)?(P.node_ops=V.ops_table.link.node,P.stream_ops=V.ops_table.link.stream):m.isChrdev(P.mode)&&(P.node_ops=V.ops_table.chrdev.node,P.stream_ops=V.ops_table.chrdev.stream),P.timestamp=Date.now(),t&&(t.contents[a]=P,t.timestamp=P.timestamp),P},getFileDataAsTypedArray:t=>t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0),expandFileStorage(t,a){var u=t.contents?t.contents.length:0;if(!(u>=a)){a=Math.max(a,u*(u<1048576?2:1.125)>>>0),u!=0&&(a=Math.max(a,256));var l=t.contents;t.contents=new Uint8Array(a),t.usedBytes>0&&t.contents.set(l.subarray(0,t.usedBytes),0)}},resizeFileStorage(t,a){if(t.usedBytes!=a)if(a==0)t.contents=null,t.usedBytes=0;else{var u=t.contents;t.contents=new Uint8Array(a),u&&t.contents.set(u.subarray(0,Math.min(a,t.usedBytes))),t.usedBytes=a}},node_ops:{getattr(t){var a={};return a.dev=m.isChrdev(t.mode)?t.id:1,a.ino=t.id,a.mode=t.mode,a.nlink=1,a.uid=0,a.gid=0,a.rdev=t.rdev,m.isDir(t.mode)?a.size=4096:m.isFile(t.mode)?a.size=t.usedBytes:m.isLink(t.mode)?a.size=t.link.length:a.size=0,a.atime=new Date(t.timestamp),a.mtime=new Date(t.timestamp),a.ctime=new Date(t.timestamp),a.blksize=4096,a.blocks=Math.ceil(a.size/a.blksize),a},setattr(t,a){a.mode!==void 0&&(t.mode=a.mode),a.timestamp!==void 0&&(t.timestamp=a.timestamp),a.size!==void 0&&V.resizeFileStorage(t,a.size)},lookup(t,a){throw m.genericErrors[44]},mknod:(t,a,u,l)=>V.createNode(t,a,u,l),rename(t,a,u){if(m.isDir(t.mode)){var l;try{l=m.lookupNode(a,u)}catch{}if(l)for(var P in l.contents)throw new m.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=u,a.contents[u]=t,a.timestamp=t.parent.timestamp},unlink(t,a){delete t.contents[a],t.timestamp=Date.now()},rmdir(t,a){var u=m.lookupNode(t,a);for(var l in u.contents)throw new m.ErrnoError(55);delete t.contents[a],t.timestamp=Date.now()},readdir(t){var a=[".",".."];for(var u of Object.keys(t.contents))a.push(u);return a},symlink(t,a,u){var l=V.createNode(t,a,41471,0);return l.link=u,l},readlink(t){if(!m.isLink(t.mode))throw new m.ErrnoError(28);return t.link}},stream_ops:{read(t,a,u,l,P){var g=t.node.contents;if(P>=t.node.usedBytes)return 0;var b=Math.min(t.node.usedBytes-P,l);if(C(b>=0),b>8&&g.subarray)a.set(g.subarray(P,P+b),u);else for(var A=0;A<b;A++)a[u+A]=g[P+A];return b},write(t,a,u,l,P,g){if(C(!(a instanceof ArrayBuffer)),a.buffer===$.buffer&&(g=!1),!l)return 0;var b=t.node;if(b.timestamp=Date.now(),a.subarray&&(!b.contents||b.contents.subarray)){if(g)return C(P===0,"canOwn must imply no weird position inside the file"),b.contents=a.subarray(u,u+l),b.usedBytes=l,l;if(b.usedBytes===0&&P===0)return b.contents=a.slice(u,u+l),b.usedBytes=l,l;if(P+l<=b.usedBytes)return b.contents.set(a.subarray(u,u+l),P),l}if(V.expandFileStorage(b,P+l),b.contents.subarray&&a.subarray)b.contents.set(a.subarray(u,u+l),P);else for(var A=0;A<l;A++)b.contents[P+A]=a[u+A];return b.usedBytes=Math.max(b.usedBytes,P+l),l},llseek(t,a,u){var l=a;if(u===1?l+=t.position:u===2&&m.isFile(t.node.mode)&&(l+=t.node.usedBytes),l<0)throw new m.ErrnoError(28);return l},allocate(t,a,u){V.expandFileStorage(t.node,a+u),t.node.usedBytes=Math.max(t.node.usedBytes,a+u)},mmap(t,a,u,l,P){if(!m.isFile(t.node.mode))throw new m.ErrnoError(43);var g,b,A=t.node.contents;if(2&P||!A||A.buffer!==$.buffer){if(b=!0,!(g=jt(a)))throw new m.ErrnoError(48);A&&((u>0||u+a<A.length)&&(A=A.subarray?A.subarray(u,u+a):Array.prototype.slice.call(A,u,u+a)),$.set(A,g))}else b=!1,g=A.byteOffset;return{ptr:g,allocated:b}},msync:(t,a,u,l,P)=>(V.stream_ops.write(t,a,0,l,u,!1),0)}},Fn=e.preloadPlugins||[],ht=(t,a)=>{var u=0;return t&&(u|=365),a&&(u|=146),u},Lt={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},m={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{constructor(t){for(var a in super(ye?(u=>Ne(hn(u)))(t):""),this.name="ErrnoError",this.errno=t,Lt)if(Lt[a]===t){this.code=a;break}}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(t){this.node=t}get isRead(){return(2097155&this.flags)!=1}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(t){this.shared.flags=t}get position(){return this.shared.position}set position(t){this.shared.position=t}},FSNode:class{constructor(t,a,u,l){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=m.nextInode++,this.name=a,this.mode=u,this.node_ops={},this.stream_ops={},this.rdev=l,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(t){t?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(t){t?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return m.isDir(this.mode)}get isDevice(){return m.isChrdev(this.mode)}},lookupPath(t,a={}){if(!(t=Ce.resolve(t)))return{path:"",node:null};if((a=Object.assign({follow_mount:!0,recurse_count:0},a)).recurse_count>8)throw new m.ErrnoError(32);for(var u=t.split("/").filter(k=>!!k),l=m.root,P="/",g=0;g<u.length;g++){var b=g===u.length-1;if(b&&a.parent)break;if(l=m.lookupNode(l,u[g]),P=q.join2(P,u[g]),m.isMountpoint(l)&&(!b||b&&a.follow_mount)&&(l=l.mounted.root),!b||a.follow)for(var A=0;m.isLink(l.mode);){var S=m.readlink(P);if(P=Ce.resolve(q.dirname(P),S),l=m.lookupPath(P,{recurse_count:a.recurse_count+1}).node,A++>40)throw new m.ErrnoError(32)}}return{path:P,node:l}},getPath(t){for(var a;;){if(m.isRoot(t)){var u=t.mount.mountpoint;return a?u[u.length-1]!=="/"?`${u}/${a}`:u+a:u}a=a?`${t.name}/${a}`:t.name,t=t.parent}},hashName(t,a){for(var u=0,l=0;l<a.length;l++)u=(u<<5)-u+a.charCodeAt(l)|0;return(t+u>>>0)%m.nameTable.length},hashAddNode(t){var a=m.hashName(t.parent.id,t.name);t.name_next=m.nameTable[a],m.nameTable[a]=t},hashRemoveNode(t){var a=m.hashName(t.parent.id,t.name);if(m.nameTable[a]===t)m.nameTable[a]=t.name_next;else for(var u=m.nameTable[a];u;){if(u.name_next===t){u.name_next=t.name_next;break}u=u.name_next}},lookupNode(t,a){var u=m.mayLookup(t);if(u)throw new m.ErrnoError(u);for(var l=m.hashName(t.id,a),P=m.nameTable[l];P;P=P.name_next){var g=P.name;if(P.parent.id===t.id&&g===a)return P}return m.lookup(t,a)},createNode(t,a,u,l){C(typeof t=="object");var P=new m.FSNode(t,a,u,l);return m.hashAddNode(P),P},destroyNode(t){m.hashRemoveNode(t)},isRoot:t=>t===t.parent,isMountpoint:t=>!!t.mounted,isFile:t=>(61440&t)==32768,isDir:t=>(61440&t)==16384,isLink:t=>(61440&t)==40960,isChrdev:t=>(61440&t)==8192,isBlkdev:t=>(61440&t)==24576,isFIFO:t=>(61440&t)==4096,isSocket:t=>!(49152&~t),flagsToPermissionString(t){var a=["r","w","rw"][3&t];return 512&t&&(a+="w"),a},nodePermissions:(t,a)=>m.ignorePermissions||(!a.includes("r")||292&t.mode)&&(!a.includes("w")||146&t.mode)&&(!a.includes("x")||73&t.mode)?0:2,mayLookup(t){if(!m.isDir(t.mode))return 54;var a=m.nodePermissions(t,"x");return a||(t.node_ops.lookup?0:2)},mayCreate(t,a){try{return m.lookupNode(t,a),20}catch{}return m.nodePermissions(t,"wx")},mayDelete(t,a,u){var l;try{l=m.lookupNode(t,a)}catch(g){return g.errno}var P=m.nodePermissions(t,"wx");if(P)return P;if(u){if(!m.isDir(l.mode))return 54;if(m.isRoot(l)||m.getPath(l)===m.cwd())return 10}else if(m.isDir(l.mode))return 31;return 0},mayOpen:(t,a)=>t?m.isLink(t.mode)?32:m.isDir(t.mode)&&(m.flagsToPermissionString(a)!=="r"||512&a)?31:m.nodePermissions(t,m.flagsToPermissionString(a)):44,MAX_OPEN_FDS:4096,nextfd(){for(var t=0;t<=m.MAX_OPEN_FDS;t++)if(!m.streams[t])return t;throw new m.ErrnoError(33)},getStreamChecked(t){var a=m.getStream(t);if(!a)throw new m.ErrnoError(8);return a},getStream:t=>m.streams[t],createStream:(t,a=-1)=>(C(a>=-1),t=Object.assign(new m.FSStream,t),a==-1&&(a=m.nextfd()),t.fd=a,m.streams[a]=t,t),closeStream(t){m.streams[t]=null},dupStream(t,a=-1){var u=m.createStream(t,a);return u.stream_ops?.dup?.(u),u},chrdev_stream_ops:{open(t){var a=m.getDevice(t.node.rdev);t.stream_ops=a.stream_ops,t.stream_ops.open?.(t)},llseek(){throw new m.ErrnoError(70)}},major:t=>t>>8,minor:t=>255&t,makedev:(t,a)=>t<<8|a,registerDevice(t,a){m.devices[t]={stream_ops:a}},getDevice:t=>m.devices[t],getMounts(t){for(var a=[],u=[t];u.length;){var l=u.pop();a.push(l),u.push(...l.mounts)}return a},syncfs(t,a){typeof t=="function"&&(a=t,t=!1),m.syncFSRequests++,m.syncFSRequests>1&&B(`warning: ${m.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var u=m.getMounts(m.root.mount),l=0;function P(b){return C(m.syncFSRequests>0),m.syncFSRequests--,a(b)}function g(b){if(b)return g.errored?void 0:(g.errored=!0,P(b));++l>=u.length&&P(null)}u.forEach(b=>{if(!b.type.syncfs)return g(null);b.type.syncfs(b,t,g)})},mount(t,a,u){if(typeof t=="string")throw t;var l,P=u==="/",g=!u;if(P&&m.root)throw new m.ErrnoError(10);if(!P&&!g){var b=m.lookupPath(u,{follow_mount:!1});if(u=b.path,l=b.node,m.isMountpoint(l))throw new m.ErrnoError(10);if(!m.isDir(l.mode))throw new m.ErrnoError(54)}var A={type:t,opts:a,mountpoint:u,mounts:[]},S=t.mount(A);return S.mount=A,A.root=S,P?m.root=S:l&&(l.mounted=A,l.mount&&l.mount.mounts.push(A)),S},unmount(t){var a=m.lookupPath(t,{follow_mount:!1});if(!m.isMountpoint(a.node))throw new m.ErrnoError(28);var u=a.node,l=u.mounted,P=m.getMounts(l);Object.keys(m.nameTable).forEach(b=>{for(var A=m.nameTable[b];A;){var S=A.name_next;P.includes(A.mount)&&m.destroyNode(A),A=S}}),u.mounted=null;var g=u.mount.mounts.indexOf(l);C(g!==-1),u.mount.mounts.splice(g,1)},lookup:(t,a)=>t.node_ops.lookup(t,a),mknod(t,a,u){var l=m.lookupPath(t,{parent:!0}).node,P=q.basename(t);if(!P||P==="."||P==="..")throw new m.ErrnoError(28);var g=m.mayCreate(l,P);if(g)throw new m.ErrnoError(g);if(!l.node_ops.mknod)throw new m.ErrnoError(63);return l.node_ops.mknod(l,P,a,u)},create:(t,a)=>(a=a!==void 0?a:438,a&=4095,a|=32768,m.mknod(t,a,0)),mkdir:(t,a)=>(a=a!==void 0?a:511,a&=1023,a|=16384,m.mknod(t,a,0)),mkdirTree(t,a){for(var u=t.split("/"),l="",P=0;P<u.length;++P)if(u[P]){l+="/"+u[P];try{m.mkdir(l,a)}catch(g){if(g.errno!=20)throw g}}},mkdev:(t,a,u)=>(u===void 0&&(u=a,a=438),a|=8192,m.mknod(t,a,u)),symlink(t,a){if(!Ce.resolve(t))throw new m.ErrnoError(44);var u=m.lookupPath(a,{parent:!0}).node;if(!u)throw new m.ErrnoError(44);var l=q.basename(a),P=m.mayCreate(u,l);if(P)throw new m.ErrnoError(P);if(!u.node_ops.symlink)throw new m.ErrnoError(63);return u.node_ops.symlink(u,l,t)},rename(t,a){var u,l,P=q.dirname(t),g=q.dirname(a),b=q.basename(t),A=q.basename(a);if(u=m.lookupPath(t,{parent:!0}).node,l=m.lookupPath(a,{parent:!0}).node,!u||!l)throw new m.ErrnoError(44);if(u.mount!==l.mount)throw new m.ErrnoError(75);var S,k=m.lookupNode(u,b),w=Ce.relative(t,g);if(w.charAt(0)!==".")throw new m.ErrnoError(28);if((w=Ce.relative(a,P)).charAt(0)!==".")throw new m.ErrnoError(55);try{S=m.lookupNode(l,A)}catch{}if(k!==S){var v=m.isDir(k.mode),O=m.mayDelete(u,b,v);if(O)throw new m.ErrnoError(O);if(O=S?m.mayDelete(l,A,v):m.mayCreate(l,A))throw new m.ErrnoError(O);if(!u.node_ops.rename)throw new m.ErrnoError(63);if(m.isMountpoint(k)||S&&m.isMountpoint(S))throw new m.ErrnoError(10);if(l!==u&&(O=m.nodePermissions(u,"w")))throw new m.ErrnoError(O);m.hashRemoveNode(k);try{u.node_ops.rename(k,l,A),k.parent=l}catch(I){throw I}finally{m.hashAddNode(k)}}},rmdir(t){var a=m.lookupPath(t,{parent:!0}).node,u=q.basename(t),l=m.lookupNode(a,u),P=m.mayDelete(a,u,!0);if(P)throw new m.ErrnoError(P);if(!a.node_ops.rmdir)throw new m.ErrnoError(63);if(m.isMountpoint(l))throw new m.ErrnoError(10);a.node_ops.rmdir(a,u),m.destroyNode(l)},readdir(t){var a=m.lookupPath(t,{follow:!0}).node;if(!a.node_ops.readdir)throw new m.ErrnoError(54);return a.node_ops.readdir(a)},unlink(t){var a=m.lookupPath(t,{parent:!0}).node;if(!a)throw new m.ErrnoError(44);var u=q.basename(t),l=m.lookupNode(a,u),P=m.mayDelete(a,u,!1);if(P)throw new m.ErrnoError(P);if(!a.node_ops.unlink)throw new m.ErrnoError(63);if(m.isMountpoint(l))throw new m.ErrnoError(10);a.node_ops.unlink(a,u),m.destroyNode(l)},readlink(t){var a=m.lookupPath(t).node;if(!a)throw new m.ErrnoError(44);if(!a.node_ops.readlink)throw new m.ErrnoError(28);return Ce.resolve(m.getPath(a.parent),a.node_ops.readlink(a))},stat(t,a){var u=m.lookupPath(t,{follow:!a}).node;if(!u)throw new m.ErrnoError(44);if(!u.node_ops.getattr)throw new m.ErrnoError(63);return u.node_ops.getattr(u)},lstat:t=>m.stat(t,!0),chmod(t,a,u){var l;if(!(l=typeof t=="string"?m.lookupPath(t,{follow:!u}).node:t).node_ops.setattr)throw new m.ErrnoError(63);l.node_ops.setattr(l,{mode:4095&a|-4096&l.mode,timestamp:Date.now()})},lchmod(t,a){m.chmod(t,a,!0)},fchmod(t,a){var u=m.getStreamChecked(t);m.chmod(u.node,a)},chown(t,a,u,l){var P;if(!(P=typeof t=="string"?m.lookupPath(t,{follow:!l}).node:t).node_ops.setattr)throw new m.ErrnoError(63);P.node_ops.setattr(P,{timestamp:Date.now()})},lchown(t,a,u){m.chown(t,a,u,!0)},fchown(t,a,u){var l=m.getStreamChecked(t);m.chown(l.node,a,u)},truncate(t,a){if(a<0)throw new m.ErrnoError(28);var u;if(!(u=typeof t=="string"?m.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new m.ErrnoError(63);if(m.isDir(u.mode))throw new m.ErrnoError(31);if(!m.isFile(u.mode))throw new m.ErrnoError(28);var l=m.nodePermissions(u,"w");if(l)throw new m.ErrnoError(l);u.node_ops.setattr(u,{size:a,timestamp:Date.now()})},ftruncate(t,a){var u=m.getStreamChecked(t);if(!(2097155&u.flags))throw new m.ErrnoError(28);m.truncate(u.node,a)},utime(t,a,u){var l=m.lookupPath(t,{follow:!0}).node;l.node_ops.setattr(l,{timestamp:Math.max(a,u)})},open(t,a,u){if(t==="")throw new m.ErrnoError(44);var l;if(u=64&(a=typeof a=="string"?(A=>{var S={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[A];if(S===void 0)throw new Error(`Unknown file open mode: ${A}`);return S})(a):a)?4095&(u=u===void 0?438:u)|32768:0,typeof t=="object")l=t;else{t=q.normalize(t);try{l=m.lookupPath(t,{follow:!(131072&a)}).node}catch{}}var P=!1;if(64&a)if(l){if(128&a)throw new m.ErrnoError(20)}else l=m.mknod(t,u,0),P=!0;if(!l)throw new m.ErrnoError(44);if(m.isChrdev(l.mode)&&(a&=-513),65536&a&&!m.isDir(l.mode))throw new m.ErrnoError(54);if(!P){var g=m.mayOpen(l,a);if(g)throw new m.ErrnoError(g)}512&a&&!P&&m.truncate(l,0),a&=-131713;var b=m.createStream({node:l,path:m.getPath(l),flags:a,seekable:!0,position:0,stream_ops:l.stream_ops,ungotten:[],error:!1});return b.stream_ops.open&&b.stream_ops.open(b),!e.logReadFiles||1&a||t in m.readFiles||(m.readFiles[t]=1),b},close(t){if(m.isClosed(t))throw new m.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(a){throw a}finally{m.closeStream(t.fd)}t.fd=null},isClosed:t=>t.fd===null,llseek(t,a,u){if(m.isClosed(t))throw new m.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new m.ErrnoError(70);if(u!=0&&u!=1&&u!=2)throw new m.ErrnoError(28);return t.position=t.stream_ops.llseek(t,a,u),t.ungotten=[],t.position},read(t,a,u,l,P){if(C(u>=0),l<0||P<0)throw new m.ErrnoError(28);if(m.isClosed(t))throw new m.ErrnoError(8);if((2097155&t.flags)==1)throw new m.ErrnoError(8);if(m.isDir(t.node.mode))throw new m.ErrnoError(31);if(!t.stream_ops.read)throw new m.ErrnoError(28);var g=P!==void 0;if(g){if(!t.seekable)throw new m.ErrnoError(70)}else P=t.position;var b=t.stream_ops.read(t,a,u,l,P);return g||(t.position+=b),b},write(t,a,u,l,P,g){if(C(u>=0),l<0||P<0)throw new m.ErrnoError(28);if(m.isClosed(t))throw new m.ErrnoError(8);if(!(2097155&t.flags))throw new m.ErrnoError(8);if(m.isDir(t.node.mode))throw new m.ErrnoError(31);if(!t.stream_ops.write)throw new m.ErrnoError(28);t.seekable&&1024&t.flags&&m.llseek(t,0,2);var b=P!==void 0;if(b){if(!t.seekable)throw new m.ErrnoError(70)}else P=t.position;var A=t.stream_ops.write(t,a,u,l,P,g);return b||(t.position+=A),A},allocate(t,a,u){if(m.isClosed(t))throw new m.ErrnoError(8);if(a<0||u<=0)throw new m.ErrnoError(28);if(!(2097155&t.flags))throw new m.ErrnoError(8);if(!m.isFile(t.node.mode)&&!m.isDir(t.node.mode))throw new m.ErrnoError(43);if(!t.stream_ops.allocate)throw new m.ErrnoError(138);t.stream_ops.allocate(t,a,u)},mmap(t,a,u,l,P){if(2&l&&!(2&P)&&(2097155&t.flags)!=2)throw new m.ErrnoError(2);if((2097155&t.flags)==1)throw new m.ErrnoError(2);if(!t.stream_ops.mmap)throw new m.ErrnoError(43);if(!a)throw new m.ErrnoError(28);return t.stream_ops.mmap(t,a,u,l,P)},msync:(t,a,u,l,P)=>(C(u>=0),t.stream_ops.msync?t.stream_ops.msync(t,a,u,l,P):0),ioctl(t,a,u){if(!t.stream_ops.ioctl)throw new m.ErrnoError(59);return t.stream_ops.ioctl(t,a,u)},readFile(t,a={}){if(a.flags=a.flags||0,a.encoding=a.encoding||"binary",a.encoding!=="utf8"&&a.encoding!=="binary")throw new Error(`Invalid encoding type "${a.encoding}"`);var u,l=m.open(t,a.flags),P=m.stat(t).size,g=new Uint8Array(P);return m.read(l,g,0,P,0),a.encoding==="utf8"?u=He(g):a.encoding==="binary"&&(u=g),m.close(l),u},writeFile(t,a,u={}){u.flags=u.flags||577;var l=m.open(t,u.flags,u.mode);if(typeof a=="string"){var P=new Uint8Array(Ze(a)+1),g=gt(a,P,0,P.length);m.write(l,P,0,g,void 0,u.canOwn)}else{if(!ArrayBuffer.isView(a))throw new Error("Unsupported data type");m.write(l,a,0,a.byteLength,void 0,u.canOwn)}m.close(l)},cwd:()=>m.currentPath,chdir(t){var a=m.lookupPath(t,{follow:!0});if(a.node===null)throw new m.ErrnoError(44);if(!m.isDir(a.node.mode))throw new m.ErrnoError(54);var u=m.nodePermissions(a.node,"x");if(u)throw new m.ErrnoError(u);m.currentPath=a.path},createDefaultDirectories(){m.mkdir("/tmp"),m.mkdir("/home"),m.mkdir("/home/web_user")},createDefaultDevices(){m.mkdir("/dev"),m.registerDevice(m.makedev(1,3),{read:()=>0,write:(l,P,g,b,A)=>b}),m.mkdev("/dev/null",m.makedev(1,3)),Ue.register(m.makedev(5,0),Ue.default_tty_ops),Ue.register(m.makedev(6,0),Ue.default_tty1_ops),m.mkdev("/dev/tty",m.makedev(5,0)),m.mkdev("/dev/tty1",m.makedev(6,0));var t=new Uint8Array(1024),a=0,u=()=>(a===0&&(a=Rt(t).byteLength),t[--a]);m.createDevice("/dev","random",u),m.createDevice("/dev","urandom",u),m.mkdir("/dev/shm"),m.mkdir("/dev/shm/tmp")},createSpecialDirectories(){m.mkdir("/proc");var t=m.mkdir("/proc/self");m.mkdir("/proc/self/fd"),m.mount({mount(){var a=m.createNode(t,"fd",16895,73);return a.node_ops={lookup(u,l){var P=+l,g=m.getStreamChecked(P),b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>g.path}};return b.parent=b,b}},a}},{},"/proc/self/fd")},createStandardStreams(t,a,u){t?m.createDevice("/dev","stdin",t):m.symlink("/dev/tty","/dev/stdin"),a?m.createDevice("/dev","stdout",null,a):m.symlink("/dev/tty","/dev/stdout"),u?m.createDevice("/dev","stderr",null,u):m.symlink("/dev/tty1","/dev/stderr");var l=m.open("/dev/stdin",0),P=m.open("/dev/stdout",1),g=m.open("/dev/stderr",1);C(l.fd===0,`invalid handle for stdin (${l.fd})`),C(P.fd===1,`invalid handle for stdout (${P.fd})`),C(g.fd===2,`invalid handle for stderr (${g.fd})`)},staticInit(){[44].forEach(t=>{m.genericErrors[t]=new m.ErrnoError(t),m.genericErrors[t].stack="<generic error, no stack>"}),m.nameTable=new Array(4096),m.mount(V,{},"/"),m.createDefaultDirectories(),m.createDefaultDevices(),m.createSpecialDirectories(),m.filesystems={MEMFS:V}},init(t,a,u){C(!m.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),m.initialized=!0,t??=e.stdin,a??=e.stdout,u??=e.stderr,m.createStandardStreams(t,a,u)},quit(){m.initialized=!1,cn(0);for(var t=0;t<m.streams.length;t++){var a=m.streams[t];a&&m.close(a)}},findObject(t,a){var u=m.analyzePath(t,a);return u.exists?u.object:null},analyzePath(t,a){try{t=(l=m.lookupPath(t,{follow:!a})).path}catch{}var u={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var l=m.lookupPath(t,{parent:!0});u.parentExists=!0,u.parentPath=l.path,u.parentObject=l.node,u.name=q.basename(t),l=m.lookupPath(t,{follow:!a}),u.exists=!0,u.path=l.path,u.object=l.node,u.name=l.node.name,u.isRoot=l.path==="/"}catch(P){u.error=P.errno}return u},createPath(t,a,u,l){t=typeof t=="string"?t:m.getPath(t);for(var P=a.split("/").reverse();P.length;){var g=P.pop();if(g){var b=q.join2(t,g);try{m.mkdir(b)}catch{}t=b}}return b},createFile(t,a,u,l,P){var g=q.join2(typeof t=="string"?t:m.getPath(t),a),b=ht(l,P);return m.create(g,b)},createDataFile(t,a,u,l,P,g){var b=a;t&&(t=typeof t=="string"?t:m.getPath(t),b=a?q.join2(t,a):t);var A=ht(l,P),S=m.create(b,A);if(u){if(typeof u=="string"){for(var k=new Array(u.length),w=0,v=u.length;w<v;++w)k[w]=u.charCodeAt(w);u=k}m.chmod(S,146|A);var O=m.open(S,577);m.write(O,u,0,u.length,0,g),m.close(O),m.chmod(S,A)}},createDevice(t,a,u,l){var P=q.join2(typeof t=="string"?t:m.getPath(t),a),g=ht(!!u,!!l);m.createDevice.major??=64;var b=m.makedev(m.createDevice.major++,0);return m.registerDevice(b,{open(A){A.seekable=!1},close(A){l?.buffer?.length&&l(10)},read(A,S,k,w,v){for(var O=0,I=0;I<w;I++){var Q;try{Q=u()}catch{throw new m.ErrnoError(29)}if(Q===void 0&&O===0)throw new m.ErrnoError(6);if(Q==null)break;O++,S[k+I]=Q}return O&&(A.node.timestamp=Date.now()),O},write(A,S,k,w,v){for(var O=0;O<w;O++)try{l(S[k+O])}catch{throw new m.ErrnoError(29)}return w&&(A.node.timestamp=Date.now()),O}}),m.mkdev(P,g,b)},forceLoadFile(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{t.contents=c(t.url),t.usedBytes=t.contents.length}catch{throw new m.ErrnoError(29)}},createLazyFile(t,a,u,l,P){class g{constructor(){this.lengthKnown=!1,this.chunks=[]}get(v){if(!(v>this.length-1||v<0)){var O=v%this.chunkSize,I=v/this.chunkSize|0;return this.getter(I)[O]}}setDataGetter(v){this.getter=v}cacheLength(){var v=new XMLHttpRequest;if(v.open("HEAD",u,!1),v.send(null),!(v.status>=200&&v.status<300||v.status===304))throw new Error("Couldn't load "+u+". Status: "+v.status);var O,I=Number(v.getResponseHeader("Content-length")),Q=(O=v.getResponseHeader("Accept-Ranges"))&&O==="bytes",Y=(O=v.getResponseHeader("Content-Encoding"))&&O==="gzip",ee=1048576;Q||(ee=I);var te=this;te.setDataGetter(fe=>{var We=fe*ee,we=(fe+1)*ee-1;if(we=Math.min(we,I-1),te.chunks[fe]===void 0&&(te.chunks[fe]=((nt,ut)=>{if(nt>ut)throw new Error("invalid range ("+nt+", "+ut+") or no bytes requested!");if(ut>I-1)throw new Error("only "+I+" bytes available! programmer error!");var le=new XMLHttpRequest;if(le.open("GET",u,!1),I!==ee&&le.setRequestHeader("Range","bytes="+nt+"-"+ut),le.responseType="arraybuffer",le.overrideMimeType&&le.overrideMimeType("text/plain; charset=x-user-defined"),le.send(null),!(le.status>=200&&le.status<300||le.status===304))throw new Error("Couldn't load "+u+". Status: "+le.status);return le.response!==void 0?new Uint8Array(le.response||[]):It(le.responseText||"")})(We,we)),te.chunks[fe]===void 0)throw new Error("doXHR failed!");return te.chunks[fe]}),!Y&&I||(ee=I=1,I=this.getter(0).length,ee=I,N("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=I,this._chunkSize=ee,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!d)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var b={isDevice:!1,contents:new g}}else b={isDevice:!1,url:u};var A=m.createFile(t,a,b,l,P);b.contents?A.contents=b.contents:b.url&&(A.contents=null,A.url=b.url),Object.defineProperties(A,{usedBytes:{get:function(){return this.contents.length}}});var S={};function k(w,v,O,I,Q){var Y=w.node.contents;if(Q>=Y.length)return 0;var ee=Math.min(Y.length-Q,I);if(C(ee>=0),Y.slice)for(var te=0;te<ee;te++)v[O+te]=Y[Q+te];else for(te=0;te<ee;te++)v[O+te]=Y.get(Q+te);return ee}return Object.keys(A.stream_ops).forEach(w=>{var v=A.stream_ops[w];S[w]=(...O)=>(m.forceLoadFile(A),v(...O))}),S.read=(w,v,O,I,Q)=>(m.forceLoadFile(A),k(w,v,O,I,Q)),S.mmap=(w,v,O,I,Q)=>{m.forceLoadFile(A);var Y=jt(v);if(!Y)throw new m.ErrnoError(48);return k(w,$,Y,v,O),{ptr:Y,allocated:!0}},A.stream_ops=S,A},absolutePath(){U("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){U("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){U("FS.createLink has been removed; use FS.symlink instead")},joinPath(){U("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){U("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){U("FS.standardizePath has been removed; use PATH.normalize instead")}},X={DEFAULT_POLLMASK:5,calculateAt(t,a,u){if(q.isAbs(a))return a;var l;if(l=t===-100?m.cwd():X.getStreamFromFD(t).path,a.length==0){if(!u)throw new m.ErrnoError(44);return l}return q.join2(l,a)},doStat(t,a,u){var l=t(a);x[u>>2]=l.dev,x[u+4>>2]=l.mode,H[u+8>>2]=l.nlink,x[u+12>>2]=l.uid,x[u+16>>2]=l.gid,x[u+20>>2]=l.rdev,Z=[l.size>>>0,(j=l.size,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[u+24>>2]=Z[0],x[u+28>>2]=Z[1],x[u+32>>2]=4096,x[u+36>>2]=l.blocks;var P=l.atime.getTime(),g=l.mtime.getTime(),b=l.ctime.getTime();return Z=[Math.floor(P/1e3)>>>0,(j=Math.floor(P/1e3),+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[u+40>>2]=Z[0],x[u+44>>2]=Z[1],H[u+48>>2]=P%1e3*1e3*1e3,Z=[Math.floor(g/1e3)>>>0,(j=Math.floor(g/1e3),+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[u+56>>2]=Z[0],x[u+60>>2]=Z[1],H[u+64>>2]=g%1e3*1e3*1e3,Z=[Math.floor(b/1e3)>>>0,(j=Math.floor(b/1e3),+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[u+72>>2]=Z[0],x[u+76>>2]=Z[1],H[u+80>>2]=b%1e3*1e3*1e3,Z=[l.ino>>>0,(j=l.ino,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[u+88>>2]=Z[0],x[u+92>>2]=Z[1],0},doMsync(t,a,u,l,P){if(!m.isFile(a.node.mode))throw new m.ErrnoError(43);if(2&l)return 0;var g=W.slice(t,t+u);m.msync(a,g,P,u,l)},getStreamFromFD:t=>m.getStreamChecked(t),varargs:void 0,getStr:t=>Ne(t)},it=(t,a)=>(C(t==t>>>0||t==(0|t)),C(a===(0|a)),a+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*a:NaN),$e=(t,a,u)=>(C(typeof u=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),gt(t,W,a,u)),mn=[0,31,60,91,121,152,182,213,244,274,305,335],ln=[0,31,59,90,120,151,181,212,243,273,304,334],dn=t=>{var a=L.buffer,u=(t-a.byteLength+65535)/65536|0;try{return L.grow(u),Re(),1}catch(l){B(`growMemory: Attempted to grow heap from ${a.byteLength} bytes to ${t} bytes, but got error: ${l}`)}},Dt={},et=()=>{if(!et.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:M||"./this.program"};for(var a in Dt)Dt[a]===void 0?delete t[a]:t[a]=Dt[a];var u=[];for(var a in t)u.push(`${a}=${t[a]}`);et.strings=u}return et.strings},tt=[],Pe=t=>{var a=tt[t];return a||(t>=tt.length&&(tt.length=t+1),tt[t]=a=ke.get(t)),C(ke.get(t)==a,"JavaScript-side Wasm function table mirror is out of date!"),a},Nt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Vt=(t,a)=>{C(t<16384),t<128?a.push(t):a.push(t%128|128,t>>7)},_n=(t,a)=>{if(C(!a.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled"),typeof WebAssembly.Function=="function")return new WebAssembly.Function((g=>{C(!g.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled");for(var b={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},A={parameters:[],results:g[0]=="v"?[]:[b[g[0]]]},S=1;S<g.length;++S)C(g[S]in b,"invalid signature char: "+g[S]),A.parameters.push(b[g[S]]);return A})(a),t);var u=[1];((g,b)=>{var A=g.slice(0,1),S=g.slice(1),k={i:127,p:127,j:126,f:125,d:124,e:111};b.push(96),Vt(S.length,b);for(var w=0;w<S.length;++w)C(S[w]in k,"invalid signature char: "+S[w]),b.push(k[S[w]]);A=="v"?b.push(0):b.push(1,k[A])})(a,u);var l=[0,97,115,109,1,0,0,0,1];Vt(u.length,l),l.push(...u),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var P=new WebAssembly.Module(new Uint8Array(l));return new WebAssembly.Instance(P,{e:{f:t}}).exports.f},Pn=t=>(Ve||(Ve=new WeakMap,((a,u)=>{if(Ve)for(var l=a;l<a+u;l++){var P=Pe(l);P&&Ve.set(P,l)}})(0,ke.length)),Ve.get(t)||0),bt=[],ft=(t,a)=>{ke.set(t,a),tt[t]=ke.get(t)},Ut=t=>Xt(t),$t=(t,a,u,l,P)=>{var g={string:O=>{var I=0;return O!=null&&O!==0&&(I=(Q=>{var Y=Ze(Q)+1,ee=Ut(Y);return $e(Q,ee,Y),ee})(O)),I},array:O=>{var I,Q,Y=Ut(O.length);return Q=Y,C((I=O).length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),$.set(I,Q),Y}},b=(O=>{var I=e["_"+O];return C(I,"Cannot call unknown function "+O+", make sure it is exported"),I})(t),A=[],S=0;if(C(a!=="array",'Return type should not be "array".'),l)for(var k=0;k<l.length;k++){var w=g[u[k]];w?(S===0&&(S=be()),A[k]=w(l[k])):A[k]=l[k]}var v=b(...A);return v=(function(O){return S!==0&&De(S),(function(I){return a==="string"?Ne(I):a==="boolean"?!!I:I})(O)})(v)};m.createPreloadedFile=(t,a,u,l,P,g,b,A,S,k)=>{var w=a?Ce.resolve(q.join2(t,a)):t,v=Be(`cp ${w}`);function O(I){function Q(Y){k?.(),A||((ee,te,fe,We,we,nt)=>{m.createDataFile(ee,te,fe,We,we,nt)})(t,a,Y,l,P,S),g?.(),Fe(v)}((Y,ee,te,fe)=>{typeof Browser<"u"&&Browser.init();var We=!1;return Fn.forEach(we=>{We||we.canHandle(ee)&&(we.handle(Y,ee,te,fe),We=!0)}),We})(I,w,Q,()=>{b?.(),Fe(v)})||Q(I)}ve(v),typeof u=="string"?((I,Q,Y)=>{var ee=Be(`al ${I}`);_(I).then(te=>{C(te,`Loading data file "${I}" failed (no arrayBuffer).`),Q(new Uint8Array(te)),ee&&Fe(ee)},te=>{if(!Y)throw`Loading data file "${I}" failed.`;Y()}),ee&&ve(ee)})(u,O,b):O(u)},m.staticInit();var Wt={__assert_fail:(t,a,u,l)=>{U(`Assertion failed: ${Ne(t)}, at: `+[a?Ne(a):"unknown filename",u,l?Ne(l):"unknown function"])},__syscall_fcntl64:function(t,a,u){X.varargs=u;try{var l=X.getStreamFromFD(t);switch(a){case 0:if((P=at())<0)return-28;for(;m.streams[P];)P++;return m.dupStream(l,P).fd;case 1:case 2:case 13:case 14:return 0;case 3:return l.flags;case 4:var P=at();return l.flags|=P,0;case 12:return P=Ke(),J[P+0>>1]=2,0}return-28}catch(g){if(m===void 0||g.name!=="ErrnoError")throw g;return-g.errno}},__syscall_fstat64:function(t,a){try{var u=X.getStreamFromFD(t);return X.doStat(m.stat,u.path,a)}catch(l){if(m===void 0||l.name!=="ErrnoError")throw l;return-l.errno}},__syscall_ftruncate64:function(t,a,u){var l=it(a,u);try{return isNaN(l)?61:(m.ftruncate(t,l),0)}catch(P){if(m===void 0||P.name!=="ErrnoError")throw P;return-P.errno}},__syscall_getdents64:function(t,a,u){try{var l=X.getStreamFromFD(t);l.getdents||=m.readdir(l.path);for(var P=280,g=0,b=m.llseek(l,0,1),A=Math.floor(b/P);A<l.getdents.length&&g+P<=u;){var S,k,w=l.getdents[A];if(w===".")S=l.node.id,k=4;else if(w==="..")S=m.lookupPath(l.path,{parent:!0}).node.id,k=4;else{var v=m.lookupNode(l.node,w);S=v.id,k=m.isChrdev(v.mode)?2:m.isDir(v.mode)?4:m.isLink(v.mode)?10:8}C(S),Z=[S>>>0,(j=S,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[a+g>>2]=Z[0],x[a+g+4>>2]=Z[1],Z=[(A+1)*P>>>0,(j=(A+1)*P,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[a+g+8>>2]=Z[0],x[a+g+12>>2]=Z[1],J[a+g+16>>1]=280,$[a+g+18]=k,$e(w,a+g+19,256),g+=P,A+=1}return m.llseek(l,A*P,0),g}catch(O){if(m===void 0||O.name!=="ErrnoError")throw O;return-O.errno}},__syscall_ioctl:function(t,a,u){X.varargs=u;try{var l=X.getStreamFromFD(t);switch(a){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return l.tty?0:-59;case 21505:if(!l.tty)return-59;if(l.tty.ops.ioctl_tcgets){var P=l.tty.ops.ioctl_tcgets(l),g=Ke();x[g>>2]=P.c_iflag||0,x[g+4>>2]=P.c_oflag||0,x[g+8>>2]=P.c_cflag||0,x[g+12>>2]=P.c_lflag||0;for(var b=0;b<32;b++)$[g+b+17]=P.c_cc[b]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!l.tty)return-59;if(l.tty.ops.ioctl_tcsets){g=Ke();var A=x[g>>2],S=x[g+4>>2],k=x[g+8>>2],w=x[g+12>>2],v=[];for(b=0;b<32;b++)v.push($[g+b+17]);return l.tty.ops.ioctl_tcsets(l.tty,a,{c_iflag:A,c_oflag:S,c_cflag:k,c_lflag:w,c_cc:v})}return 0;case 21519:return l.tty?(g=Ke(),x[g>>2]=0,0):-59;case 21520:return l.tty?-28:-59;case 21531:return g=Ke(),m.ioctl(l,a,g);case 21523:if(!l.tty)return-59;if(l.tty.ops.ioctl_tiocgwinsz){var O=l.tty.ops.ioctl_tiocgwinsz(l.tty);g=Ke(),J[g>>1]=O[0],J[g+2>>1]=O[1]}return 0;default:return-28}}catch(I){if(m===void 0||I.name!=="ErrnoError")throw I;return-I.errno}},__syscall_lstat64:function(t,a){try{return t=X.getStr(t),X.doStat(m.lstat,t,a)}catch(u){if(m===void 0||u.name!=="ErrnoError")throw u;return-u.errno}},__syscall_newfstatat:function(t,a,u,l){try{a=X.getStr(a);var P=256&l,g=4096&l;return C(!(l&=-6401),`unknown flags in __syscall_newfstatat: ${l}`),a=X.calculateAt(t,a,g),X.doStat(P?m.lstat:m.stat,a,u)}catch(b){if(m===void 0||b.name!=="ErrnoError")throw b;return-b.errno}},__syscall_openat:function(t,a,u,l){X.varargs=l;try{a=X.getStr(a),a=X.calculateAt(t,a);var P=l?at():0;return m.open(a,u,P).fd}catch(g){if(m===void 0||g.name!=="ErrnoError")throw g;return-g.errno}},__syscall_rmdir:function(t){try{return t=X.getStr(t),m.rmdir(t),0}catch(a){if(m===void 0||a.name!=="ErrnoError")throw a;return-a.errno}},__syscall_stat64:function(t,a){try{return t=X.getStr(t),X.doStat(m.stat,t,a)}catch(u){if(m===void 0||u.name!=="ErrnoError")throw u;return-u.errno}},__syscall_unlinkat:function(t,a,u){try{return a=X.getStr(a),a=X.calculateAt(t,a),u===0?m.unlink(a):u===512?m.rmdir(a):U("Invalid flags passed to unlinkat"),0}catch(l){if(m===void 0||l.name!=="ErrnoError")throw l;return-l.errno}},_abort_js:()=>{U("native code called abort()")},_emscripten_memcpy_js:(t,a,u)=>W.copyWithin(t,a,a+u),_emscripten_throw_longjmp:()=>{throw 1/0},_gmtime_js:function(t,a,u){var l=it(t,a),P=new Date(1e3*l);x[u>>2]=P.getUTCSeconds(),x[u+4>>2]=P.getUTCMinutes(),x[u+8>>2]=P.getUTCHours(),x[u+12>>2]=P.getUTCDate(),x[u+16>>2]=P.getUTCMonth(),x[u+20>>2]=P.getUTCFullYear()-1900,x[u+24>>2]=P.getUTCDay();var g=Date.UTC(P.getUTCFullYear(),0,1,0,0,0,0),b=(P.getTime()-g)/864e5|0;x[u+28>>2]=b},_localtime_js:function(t,a,u){var l=it(t,a),P=new Date(1e3*l);x[u>>2]=P.getSeconds(),x[u+4>>2]=P.getMinutes(),x[u+8>>2]=P.getHours(),x[u+12>>2]=P.getDate(),x[u+16>>2]=P.getMonth(),x[u+20>>2]=P.getFullYear()-1900,x[u+24>>2]=P.getDay();var g=0|(w=>{var v;return((v=w.getFullYear())%4!=0||v%100==0&&v%400!=0?ln:mn)[w.getMonth()]+w.getDate()-1})(P);x[u+28>>2]=g,x[u+36>>2]=-60*P.getTimezoneOffset();var b=new Date(P.getFullYear(),0,1),A=new Date(P.getFullYear(),6,1).getTimezoneOffset(),S=b.getTimezoneOffset(),k=0|(A!=S&&P.getTimezoneOffset()==Math.min(S,A));x[u+32>>2]=k},_tzset_js:(t,a,u,l)=>{var P=new Date().getFullYear(),g=new Date(P,0,1),b=new Date(P,6,1),A=g.getTimezoneOffset(),S=b.getTimezoneOffset(),k=Math.max(A,S);H[t>>2]=60*k,x[a>>2]=+(A!=S);var w=I=>{var Q=I>=0?"-":"+",Y=Math.abs(I);return`UTC${Q}${String(Math.floor(Y/60)).padStart(2,"0")}${String(Y%60).padStart(2,"0")}`},v=w(A),O=w(S);C(v),C(O),C(Ze(v)<=16,`timezone name truncated to fit in TZNAME_MAX (${v})`),C(Ze(O)<=16,`timezone name truncated to fit in TZNAME_MAX (${O})`),S<A?($e(v,u,17),$e(O,l,17)):($e(v,l,17),$e(O,u,17))},emscripten_date_now:()=>Date.now(),emscripten_resize_heap:t=>{var a=W.length;C((t>>>=0)>a);var u=2147483648;if(t>u)return B(`Cannot enlarge memory, requested ${t} bytes, but the limit is 2147483648 bytes!`),!1;for(var l=1;l<=4;l*=2){var P=a*(1+.2/l);P=Math.min(P,t+100663296);var g=Math.min(u,Bt(Math.max(t,P),65536));if(dn(g))return!0}return B(`Failed to grow the heap from ${a} bytes to ${g} bytes, not enough memory!`),!1},environ_get:(t,a)=>{var u=0;return et().forEach((l,P)=>{var g=a+u;H[t+4*P>>2]=g,((b,A)=>{for(var S=0;S<b.length;++S)C(b.charCodeAt(S)===(255&b.charCodeAt(S))),$[A++]=b.charCodeAt(S);$[A]=0})(l,g),u+=l.length+1}),0},environ_sizes_get:(t,a)=>{var u=et();H[t>>2]=u.length;var l=0;return u.forEach(P=>l+=P.length+1),H[a>>2]=l,0},fd_close:function(t){try{var a=X.getStreamFromFD(t);return m.close(a),0}catch(u){if(m===void 0||u.name!=="ErrnoError")throw u;return u.errno}},fd_read:function(t,a,u,l){try{var P=((g,b,A,S)=>{for(var k=0,w=0;w<A;w++){var v=H[b>>2],O=H[b+4>>2];b+=8;var I=m.read(g,$,v,O,S);if(I<0)return-1;if(k+=I,I<O)break}return k})(X.getStreamFromFD(t),a,u);return H[l>>2]=P,0}catch(g){if(m===void 0||g.name!=="ErrnoError")throw g;return g.errno}},fd_seek:function(t,a,u,l,P){var g=it(a,u);try{if(isNaN(g))return 61;var b=X.getStreamFromFD(t);return m.llseek(b,g,l),Z=[b.position>>>0,(j=b.position,+Math.abs(j)>=1?j>0?+Math.floor(j/4294967296)>>>0:~~+Math.ceil((j-+(~~j>>>0))/4294967296)>>>0:0)],x[P>>2]=Z[0],x[P+4>>2]=Z[1],b.getdents&&g===0&&l===0&&(b.getdents=null),0}catch(A){if(m===void 0||A.name!=="ErrnoError")throw A;return A.errno}},fd_sync:function(t){try{var a=X.getStreamFromFD(t);return a.stream_ops?.fsync?a.stream_ops.fsync(a):0}catch(u){if(m===void 0||u.name!=="ErrnoError")throw u;return u.errno}},fd_write:function(t,a,u,l){try{var P=((g,b,A,S)=>{for(var k=0,w=0;w<A;w++){var v=H[b>>2],O=H[b+4>>2];b+=8;var I=m.write(g,$,v,O,S);if(I<0)return-1;if(k+=I,I<O)break}return k})(X.getStreamFromFD(t),a,u);return H[l>>2]=P,0}catch(g){if(m===void 0||g.name!=="ErrnoError")throw g;return g.errno}},invoke_ii:function(t,a){var u=be();try{return Pe(t)(a)}catch(l){if(De(u),l!==l+0)throw l;Te(1,0)}},invoke_iii:function(t,a,u){var l=be();try{return Pe(t)(a,u)}catch(P){if(De(l),P!==P+0)throw P;Te(1,0)}},invoke_iiii:function(t,a,u,l){var P=be();try{return Pe(t)(a,u,l)}catch(g){if(De(P),g!==g+0)throw g;Te(1,0)}},invoke_iiiii:function(t,a,u,l,P){var g=be();try{return Pe(t)(a,u,l,P)}catch(b){if(De(g),b!==b+0)throw b;Te(1,0)}},invoke_v:function(t){var a=be();try{Pe(t)()}catch(u){if(De(a),u!==u+0)throw u;Te(1,0)}},invoke_vii:function(t,a,u){var l=be();try{Pe(t)(a,u)}catch(P){if(De(l),P!==P+0)throw P;Te(1,0)}},invoke_viii:function(t,a,u,l){var P=be();try{Pe(t)(a,u,l)}catch(g){if(De(P),g!==g+0)throw g;Te(1,0)}},invoke_viiii:function(t,a,u,l,P){var g=be();try{Pe(t)(a,u,l,P)}catch(b){if(De(g),b!==b+0)throw b;Te(1,0)}},invoke_viiiiiiiii:function(t,a,u,l,P,g,b,A,S,k){var w=be();try{Pe(t)(a,u,l,P,g,b,A,S,k)}catch(v){if(De(w),v!==v+0)throw v;Te(1,0)}}},me=(function(){var t={env:Wt,wasi_snapshot_preview1:Wt};function a(A,S){var k;return me=A.exports,e.wasmExports=me,C(L=me.memory,"memory not found in wasm exports"),Re(),C(ke=me.__indirect_function_table,"table not found in wasm exports"),k=me.__wasm_call_ctors,_t.unshift(k),Fe("wasm-instantiate"),me}ve("wasm-instantiate");var u,l,P,g,b=e;if(e.instantiateWasm)try{return e.instantiateWasm(t,a)}catch(A){B(`Module.instantiateWasm callback failed with error: ${A}`),o(A)}return Oe??=un(),(u=K,l=Oe,P=t,g=function(A){C(e===b,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),b=null,a(A.instance)},u||typeof WebAssembly.instantiateStreaming!="function"||Ge(l)||typeof fetch!="function"?Tt(l,P,g):fetch(l,{credentials:"same-origin"}).then(A=>WebAssembly.instantiateStreaming(A,P).then(g,function(S){return B(`wasm streaming compile failed: ${S}`),B("falling back to ArrayBuffer instantiation"),Tt(l,P,g)}))).catch(o),{}})();e._PDFiumExt_Init=i("PDFiumExt_Init",0),e._FPDF_InitLibraryWithConfig=i("FPDF_InitLibraryWithConfig",1),e._PDFiumExt_OpenFileWriter=i("PDFiumExt_OpenFileWriter",0),e._PDFiumExt_GetFileWriterSize=i("PDFiumExt_GetFileWriterSize",1),e._PDFiumExt_GetFileWriterData=i("PDFiumExt_GetFileWriterData",3),e._PDFiumExt_CloseFileWriter=i("PDFiumExt_CloseFileWriter",1),e._PDFiumExt_SaveAsCopy=i("PDFiumExt_SaveAsCopy",2),e._FPDF_SaveAsCopy=i("FPDF_SaveAsCopy",3),e._PDFiumExt_OpenFormFillInfo=i("PDFiumExt_OpenFormFillInfo",0),e._PDFiumExt_CloseFormFillInfo=i("PDFiumExt_CloseFormFillInfo",1),e._PDFiumExt_InitFormFillEnvironment=i("PDFiumExt_InitFormFillEnvironment",2),e._FPDFDOC_InitFormFillEnvironment=i("FPDFDOC_InitFormFillEnvironment",2),e._PDFiumExt_ExitFormFillEnvironment=i("PDFiumExt_ExitFormFillEnvironment",1),e._FPDFDOC_ExitFormFillEnvironment=i("FPDFDOC_ExitFormFillEnvironment",1),e._EPDFNamedDest_SetDest=i("EPDFNamedDest_SetDest",3),e._EPDFNamedDest_Remove=i("EPDFNamedDest_Remove",2),e._EPDFDest_CreateView=i("EPDFDest_CreateView",4),e._EPDFDest_CreateXYZ=i("EPDFDest_CreateXYZ",7),e._EPDFDest_CreateRemoteView=i("EPDFDest_CreateRemoteView",5),e._EPDFDest_CreateRemoteXYZ=i("EPDFDest_CreateRemoteXYZ",8),e._EPDFAction_CreateGoTo=i("EPDFAction_CreateGoTo",2),e._EPDFAction_CreateGoToNamed=i("EPDFAction_CreateGoToNamed",2),e._EPDFAction_CreateLaunch=i("EPDFAction_CreateLaunch",2),e._EPDFAction_CreateRemoteGoToByName=i("EPDFAction_CreateRemoteGoToByName",3),e._EPDFAction_CreateRemoteGoToDest=i("EPDFAction_CreateRemoteGoToDest",3),e._EPDFAction_CreateURI=i("EPDFAction_CreateURI",2),e._EPDFBookmark_Create=i("EPDFBookmark_Create",2),e._EPDFBookmark_Delete=i("EPDFBookmark_Delete",2),e._EPDFBookmark_AppendChild=i("EPDFBookmark_AppendChild",3),e._EPDFBookmark_InsertAfter=i("EPDFBookmark_InsertAfter",4),e._EPDFBookmark_Clear=i("EPDFBookmark_Clear",1),e._EPDFBookmark_SetTitle=i("EPDFBookmark_SetTitle",2),e._EPDFBookmark_SetDest=i("EPDFBookmark_SetDest",3),e._EPDFBookmark_SetAction=i("EPDFBookmark_SetAction",3),e._EPDFBookmark_ClearTarget=i("EPDFBookmark_ClearTarget",1),e._EPDF_PNG_EncodeRGBA=i("EPDF_PNG_EncodeRGBA",6),e._FPDFAnnot_IsSupportedSubtype=i("FPDFAnnot_IsSupportedSubtype",1),e._FPDFPage_CreateAnnot=i("FPDFPage_CreateAnnot",2),e._FPDFPage_GetAnnotCount=i("FPDFPage_GetAnnotCount",1),e._FPDFPage_GetAnnot=i("FPDFPage_GetAnnot",2),e._FPDFPage_GetAnnotIndex=i("FPDFPage_GetAnnotIndex",2),e._FPDFPage_CloseAnnot=i("FPDFPage_CloseAnnot",1),e._FPDFPage_RemoveAnnot=i("FPDFPage_RemoveAnnot",2),e._FPDFAnnot_GetSubtype=i("FPDFAnnot_GetSubtype",1),e._FPDFAnnot_IsObjectSupportedSubtype=i("FPDFAnnot_IsObjectSupportedSubtype",1),e._FPDFAnnot_UpdateObject=i("FPDFAnnot_UpdateObject",2),e._FPDFAnnot_AddInkStroke=i("FPDFAnnot_AddInkStroke",3),e._FPDFAnnot_RemoveInkList=i("FPDFAnnot_RemoveInkList",1),e._FPDFAnnot_AppendObject=i("FPDFAnnot_AppendObject",2),e._FPDFAnnot_GetObjectCount=i("FPDFAnnot_GetObjectCount",1),e._FPDFAnnot_GetObject=i("FPDFAnnot_GetObject",2),e._FPDFAnnot_RemoveObject=i("FPDFAnnot_RemoveObject",2),e._FPDFAnnot_SetColor=i("FPDFAnnot_SetColor",6),e._FPDFAnnot_GetColor=i("FPDFAnnot_GetColor",6),e._FPDFAnnot_HasAttachmentPoints=i("FPDFAnnot_HasAttachmentPoints",1),e._FPDFAnnot_SetAttachmentPoints=i("FPDFAnnot_SetAttachmentPoints",3),e._FPDFAnnot_AppendAttachmentPoints=i("FPDFAnnot_AppendAttachmentPoints",2),e._FPDFAnnot_CountAttachmentPoints=i("FPDFAnnot_CountAttachmentPoints",1),e._FPDFAnnot_GetAttachmentPoints=i("FPDFAnnot_GetAttachmentPoints",3),e._FPDFAnnot_SetRect=i("FPDFAnnot_SetRect",2),e._FPDFAnnot_GetRect=i("FPDFAnnot_GetRect",2),e._FPDFAnnot_GetVertices=i("FPDFAnnot_GetVertices",3),e._FPDFAnnot_GetInkListCount=i("FPDFAnnot_GetInkListCount",1),e._FPDFAnnot_GetInkListPath=i("FPDFAnnot_GetInkListPath",4),e._FPDFAnnot_GetLine=i("FPDFAnnot_GetLine",3),e._FPDFAnnot_SetBorder=i("FPDFAnnot_SetBorder",4),e._FPDFAnnot_GetBorder=i("FPDFAnnot_GetBorder",4),e._FPDFAnnot_HasKey=i("FPDFAnnot_HasKey",2),e._FPDFAnnot_GetValueType=i("FPDFAnnot_GetValueType",2),e._FPDFAnnot_SetStringValue=i("FPDFAnnot_SetStringValue",3),e._FPDFAnnot_GetStringValue=i("FPDFAnnot_GetStringValue",4),e._FPDFAnnot_GetNumberValue=i("FPDFAnnot_GetNumberValue",3),e._FPDFAnnot_SetAP=i("FPDFAnnot_SetAP",3),e._FPDFAnnot_GetAP=i("FPDFAnnot_GetAP",4),e._FPDFAnnot_GetLinkedAnnot=i("FPDFAnnot_GetLinkedAnnot",2),e._FPDFAnnot_GetFlags=i("FPDFAnnot_GetFlags",1),e._FPDFAnnot_SetFlags=i("FPDFAnnot_SetFlags",2),e._FPDFAnnot_GetFormFieldFlags=i("FPDFAnnot_GetFormFieldFlags",2),e._FPDFAnnot_SetFormFieldFlags=i("FPDFAnnot_SetFormFieldFlags",3),e._FPDFAnnot_GetFormFieldAtPoint=i("FPDFAnnot_GetFormFieldAtPoint",3),e._FPDFAnnot_GetFormFieldName=i("FPDFAnnot_GetFormFieldName",4),e._FPDFAnnot_GetFormFieldType=i("FPDFAnnot_GetFormFieldType",2),e._FPDFAnnot_GetFormAdditionalActionJavaScript=i("FPDFAnnot_GetFormAdditionalActionJavaScript",5),e._FPDFAnnot_GetFormFieldAlternateName=i("FPDFAnnot_GetFormFieldAlternateName",4),e._FPDFAnnot_GetFormFieldValue=i("FPDFAnnot_GetFormFieldValue",4),e._FPDFAnnot_GetOptionCount=i("FPDFAnnot_GetOptionCount",2),e._FPDFAnnot_GetOptionLabel=i("FPDFAnnot_GetOptionLabel",5),e._FPDFAnnot_IsOptionSelected=i("FPDFAnnot_IsOptionSelected",3),e._FPDFAnnot_GetFontSize=i("FPDFAnnot_GetFontSize",3),e._FPDFAnnot_SetFontColor=i("FPDFAnnot_SetFontColor",5),e._FPDFAnnot_GetFontColor=i("FPDFAnnot_GetFontColor",5),e._FPDFAnnot_IsChecked=i("FPDFAnnot_IsChecked",2),e._FPDFAnnot_SetFocusableSubtypes=i("FPDFAnnot_SetFocusableSubtypes",3),e._FPDFAnnot_GetFocusableSubtypesCount=i("FPDFAnnot_GetFocusableSubtypesCount",1),e._FPDFAnnot_GetFocusableSubtypes=i("FPDFAnnot_GetFocusableSubtypes",3),e._FPDFAnnot_GetLink=i("FPDFAnnot_GetLink",1),e._FPDFAnnot_GetFormControlCount=i("FPDFAnnot_GetFormControlCount",2),e._FPDFAnnot_GetFormControlIndex=i("FPDFAnnot_GetFormControlIndex",2),e._FPDFAnnot_GetFormFieldExportValue=i("FPDFAnnot_GetFormFieldExportValue",4),e._FPDFAnnot_SetURI=i("FPDFAnnot_SetURI",2),e._EPDFAnnot_SetAction=i("EPDFAnnot_SetAction",2),e._FPDFAnnot_GetFileAttachment=i("FPDFAnnot_GetFileAttachment",1),e._FPDFAnnot_AddFileAttachment=i("FPDFAnnot_AddFileAttachment",2),e._EPDFAnnot_SetColor=i("EPDFAnnot_SetColor",5),e._EPDFAnnot_GetColor=i("EPDFAnnot_GetColor",5),e._EPDFAnnot_ClearColor=i("EPDFAnnot_ClearColor",2),e._EPDFAnnot_SetOpacity=i("EPDFAnnot_SetOpacity",2),e._EPDFAnnot_GetOpacity=i("EPDFAnnot_GetOpacity",2),e._EPDFAnnot_GetBorderEffect=i("EPDFAnnot_GetBorderEffect",2),e._EPDFAnnot_GetRectangleDifferences=i("EPDFAnnot_GetRectangleDifferences",5),e._EPDFAnnot_GetBorderDashPatternCount=i("EPDFAnnot_GetBorderDashPatternCount",1),e._EPDFAnnot_GetBorderDashPattern=i("EPDFAnnot_GetBorderDashPattern",3),e._EPDFAnnot_SetBorderDashPattern=i("EPDFAnnot_SetBorderDashPattern",3),e._EPDFAnnot_GetBorderStyle=i("EPDFAnnot_GetBorderStyle",2),e._EPDFAnnot_SetBorderStyle=i("EPDFAnnot_SetBorderStyle",3),e._EPDFAnnot_GenerateAppearance=i("EPDFAnnot_GenerateAppearance",1),e._EPDFAnnot_GenerateAppearanceWithBlend=i("EPDFAnnot_GenerateAppearanceWithBlend",2),e._EPDFAnnot_GetBlendMode=i("EPDFAnnot_GetBlendMode",1),e._EPDFAnnot_SetIntent=i("EPDFAnnot_SetIntent",2),e._EPDFAnnot_GetIntent=i("EPDFAnnot_GetIntent",3),e._EPDFAnnot_GetRichContent=i("EPDFAnnot_GetRichContent",3),e._EPDFAnnot_SetLineEndings=i("EPDFAnnot_SetLineEndings",3),e._EPDFAnnot_GetLineEndings=i("EPDFAnnot_GetLineEndings",3),e._EPDFAnnot_SetVertices=i("EPDFAnnot_SetVertices",3),e._EPDFAnnot_SetLine=i("EPDFAnnot_SetLine",3),e._EPDFAnnot_SetDefaultAppearance=i("EPDFAnnot_SetDefaultAppearance",6),e._EPDFAnnot_GetDefaultAppearance=i("EPDFAnnot_GetDefaultAppearance",6),e._EPDFAnnot_SetTextAlignment=i("EPDFAnnot_SetTextAlignment",2),e._EPDFAnnot_GetTextAlignment=i("EPDFAnnot_GetTextAlignment",1),e._EPDFAnnot_SetVerticalAlignment=i("EPDFAnnot_SetVerticalAlignment",2),e._EPDFAnnot_GetVerticalAlignment=i("EPDFAnnot_GetVerticalAlignment",1),e._EPDFPage_GetAnnotByName=i("EPDFPage_GetAnnotByName",2),e._EPDFPage_RemoveAnnotByName=i("EPDFPage_RemoveAnnotByName",2),e._EPDFAnnot_SetLinkedAnnot=i("EPDFAnnot_SetLinkedAnnot",3),e._EPDFPage_GetAnnotCountRaw=i("EPDFPage_GetAnnotCountRaw",2),e._EPDFPage_GetAnnotRaw=i("EPDFPage_GetAnnotRaw",3),e._EPDFPage_RemoveAnnotRaw=i("EPDFPage_RemoveAnnotRaw",3),e._EPDFAnnot_SetIcon=i("EPDFAnnot_SetIcon",2),e._EPDFAnnot_GetIcon=i("EPDFAnnot_GetIcon",1),e._EPDFAnnot_UpdateAppearanceToRect=i("EPDFAnnot_UpdateAppearanceToRect",2),e._EPDFPage_CreateAnnot=i("EPDFPage_CreateAnnot",2),e._EPDFAnnot_GetReplyType=i("EPDFAnnot_GetReplyType",1),e._EPDFAnnot_SetReplyType=i("EPDFAnnot_SetReplyType",2),e._FPDFDoc_GetAttachmentCount=i("FPDFDoc_GetAttachmentCount",1),e._FPDFDoc_AddAttachment=i("FPDFDoc_AddAttachment",2),e._FPDFDoc_GetAttachment=i("FPDFDoc_GetAttachment",2),e._FPDFDoc_DeleteAttachment=i("FPDFDoc_DeleteAttachment",2),e._FPDFAttachment_GetName=i("FPDFAttachment_GetName",3),e._FPDFAttachment_HasKey=i("FPDFAttachment_HasKey",2),e._FPDFAttachment_GetValueType=i("FPDFAttachment_GetValueType",2),e._FPDFAttachment_SetStringValue=i("FPDFAttachment_SetStringValue",3),e._FPDFAttachment_GetStringValue=i("FPDFAttachment_GetStringValue",4),e._FPDFAttachment_SetFile=i("FPDFAttachment_SetFile",4),e._FPDFAttachment_GetFile=i("FPDFAttachment_GetFile",4),e._FPDFAttachment_GetSubtype=i("FPDFAttachment_GetSubtype",3),e._EPDFAttachment_SetSubtype=i("EPDFAttachment_SetSubtype",2),e._EPDFAttachment_SetDescription=i("EPDFAttachment_SetDescription",2),e._EPDFAttachment_GetDescription=i("EPDFAttachment_GetDescription",3),e._EPDFAttachment_GetIntegerValue=i("EPDFAttachment_GetIntegerValue",3),e._FPDFCatalog_IsTagged=i("FPDFCatalog_IsTagged",1),e._FPDFCatalog_SetLanguage=i("FPDFCatalog_SetLanguage",2),e._EPDFCatalog_GetLanguage=i("EPDFCatalog_GetLanguage",3),e._FPDFAvail_Create=i("FPDFAvail_Create",2),e._FPDFAvail_Destroy=i("FPDFAvail_Destroy",1),e._FPDFAvail_IsDocAvail=i("FPDFAvail_IsDocAvail",2),e._FPDFAvail_GetDocument=i("FPDFAvail_GetDocument",2),e._FPDFAvail_GetFirstPageNum=i("FPDFAvail_GetFirstPageNum",1),e._FPDFAvail_IsPageAvail=i("FPDFAvail_IsPageAvail",3),e._FPDFAvail_IsFormAvail=i("FPDFAvail_IsFormAvail",2),e._FPDFAvail_IsLinearized=i("FPDFAvail_IsLinearized",1),e._FPDFBookmark_GetFirstChild=i("FPDFBookmark_GetFirstChild",2),e._FPDFBookmark_GetNextSibling=i("FPDFBookmark_GetNextSibling",2),e._FPDFBookmark_GetTitle=i("FPDFBookmark_GetTitle",3),e._FPDFBookmark_GetCount=i("FPDFBookmark_GetCount",1),e._FPDFBookmark_Find=i("FPDFBookmark_Find",2),e._FPDFBookmark_GetDest=i("FPDFBookmark_GetDest",2),e._FPDFBookmark_GetAction=i("FPDFBookmark_GetAction",1),e._FPDFAction_GetType=i("FPDFAction_GetType",1),e._FPDFAction_GetDest=i("FPDFAction_GetDest",2),e._FPDFAction_GetFilePath=i("FPDFAction_GetFilePath",3),e._FPDFAction_GetURIPath=i("FPDFAction_GetURIPath",4),e._FPDFDest_GetDestPageIndex=i("FPDFDest_GetDestPageIndex",2),e._FPDFDest_GetView=i("FPDFDest_GetView",3),e._FPDFDest_GetLocationInPage=i("FPDFDest_GetLocationInPage",7),e._FPDFLink_GetLinkAtPoint=i("FPDFLink_GetLinkAtPoint",3),e._FPDFLink_GetLinkZOrderAtPoint=i("FPDFLink_GetLinkZOrderAtPoint",3),e._FPDFLink_GetDest=i("FPDFLink_GetDest",2),e._FPDFLink_GetAction=i("FPDFLink_GetAction",1),e._FPDFLink_Enumerate=i("FPDFLink_Enumerate",3),e._FPDFLink_GetAnnot=i("FPDFLink_GetAnnot",2),e._FPDFLink_GetAnnotRect=i("FPDFLink_GetAnnotRect",2),e._FPDFLink_CountQuadPoints=i("FPDFLink_CountQuadPoints",1),e._FPDFLink_GetQuadPoints=i("FPDFLink_GetQuadPoints",3),e._FPDF_GetPageAAction=i("FPDF_GetPageAAction",2),e._FPDF_GetFileIdentifier=i("FPDF_GetFileIdentifier",4),e._FPDF_GetMetaText=i("FPDF_GetMetaText",4),e._FPDF_GetPageLabel=i("FPDF_GetPageLabel",4),e._EPDF_SetMetaText=i("EPDF_SetMetaText",3),e._EPDF_HasMetaText=i("EPDF_HasMetaText",2),e._EPDF_GetMetaTrapped=i("EPDF_GetMetaTrapped",1),e._EPDF_SetMetaTrapped=i("EPDF_SetMetaTrapped",2),e._EPDF_GetMetaKeyCount=i("EPDF_GetMetaKeyCount",2),e._EPDF_GetMetaKeyName=i("EPDF_GetMetaKeyName",5),e._FPDFPageObj_NewImageObj=i("FPDFPageObj_NewImageObj",1),e._FPDFImageObj_LoadJpegFile=i("FPDFImageObj_LoadJpegFile",4),e._FPDFImageObj_LoadJpegFileInline=i("FPDFImageObj_LoadJpegFileInline",4),e._FPDFImageObj_SetMatrix=i("FPDFImageObj_SetMatrix",7),e._FPDFImageObj_SetBitmap=i("FPDFImageObj_SetBitmap",4),e._FPDFImageObj_GetBitmap=i("FPDFImageObj_GetBitmap",1),e._FPDFImageObj_GetRenderedBitmap=i("FPDFImageObj_GetRenderedBitmap",3),e._FPDFImageObj_GetImageDataDecoded=i("FPDFImageObj_GetImageDataDecoded",3),e._FPDFImageObj_GetImageDataRaw=i("FPDFImageObj_GetImageDataRaw",3),e._FPDFImageObj_GetImageFilterCount=i("FPDFImageObj_GetImageFilterCount",1),e._FPDFImageObj_GetImageFilter=i("FPDFImageObj_GetImageFilter",4),e._FPDFImageObj_GetImageMetadata=i("FPDFImageObj_GetImageMetadata",3),e._FPDFImageObj_GetImagePixelSize=i("FPDFImageObj_GetImagePixelSize",3),e._FPDFImageObj_GetIccProfileDataDecoded=i("FPDFImageObj_GetIccProfileDataDecoded",5),e._FPDF_CreateNewDocument=i("FPDF_CreateNewDocument",0),e._FPDFPage_Delete=i("FPDFPage_Delete",2),e._FPDF_MovePages=i("FPDF_MovePages",4),e._FPDFPage_New=i("FPDFPage_New",4),e._FPDFPage_GetRotation=i("FPDFPage_GetRotation",1),e._FPDFPage_InsertObject=i("FPDFPage_InsertObject",2),e._FPDFPage_InsertObjectAtIndex=i("FPDFPage_InsertObjectAtIndex",3),e._FPDFPage_RemoveObject=i("FPDFPage_RemoveObject",2),e._FPDFPage_CountObjects=i("FPDFPage_CountObjects",1),e._FPDFPage_GetObject=i("FPDFPage_GetObject",2),e._FPDFPage_HasTransparency=i("FPDFPage_HasTransparency",1),e._FPDFPageObj_Destroy=i("FPDFPageObj_Destroy",1),e._FPDFPageObj_GetMarkedContentID=i("FPDFPageObj_GetMarkedContentID",1),e._FPDFPageObj_CountMarks=i("FPDFPageObj_CountMarks",1),e._FPDFPageObj_GetMark=i("FPDFPageObj_GetMark",2),e._FPDFPageObj_AddMark=i("FPDFPageObj_AddMark",2),e._FPDFPageObj_RemoveMark=i("FPDFPageObj_RemoveMark",2),e._FPDFPageObjMark_GetName=i("FPDFPageObjMark_GetName",4),e._FPDFPageObjMark_CountParams=i("FPDFPageObjMark_CountParams",1),e._FPDFPageObjMark_GetParamKey=i("FPDFPageObjMark_GetParamKey",5),e._FPDFPageObjMark_GetParamValueType=i("FPDFPageObjMark_GetParamValueType",2),e._FPDFPageObjMark_GetParamIntValue=i("FPDFPageObjMark_GetParamIntValue",3),e._FPDFPageObjMark_GetParamStringValue=i("FPDFPageObjMark_GetParamStringValue",5),e._FPDFPageObjMark_GetParamBlobValue=i("FPDFPageObjMark_GetParamBlobValue",5),e._FPDFPageObj_HasTransparency=i("FPDFPageObj_HasTransparency",1),e._FPDFPageObjMark_SetIntParam=i("FPDFPageObjMark_SetIntParam",5),e._FPDFPageObjMark_SetStringParam=i("FPDFPageObjMark_SetStringParam",5),e._FPDFPageObjMark_SetBlobParam=i("FPDFPageObjMark_SetBlobParam",6),e._FPDFPageObjMark_RemoveParam=i("FPDFPageObjMark_RemoveParam",3),e._FPDFPageObj_GetType=i("FPDFPageObj_GetType",1),e._FPDFPageObj_GetIsActive=i("FPDFPageObj_GetIsActive",2),e._FPDFPageObj_SetIsActive=i("FPDFPageObj_SetIsActive",2),e._FPDFPage_GenerateContent=i("FPDFPage_GenerateContent",1),e._FPDFPageObj_Transform=i("FPDFPageObj_Transform",7),e._FPDFPageObj_TransformF=i("FPDFPageObj_TransformF",2),e._FPDFPageObj_GetMatrix=i("FPDFPageObj_GetMatrix",2),e._FPDFPageObj_SetMatrix=i("FPDFPageObj_SetMatrix",2),e._FPDFPageObj_SetBlendMode=i("FPDFPageObj_SetBlendMode",2),e._FPDFPage_TransformAnnots=i("FPDFPage_TransformAnnots",7),e._FPDFPage_SetRotation=i("FPDFPage_SetRotation",2),e._FPDFPageObj_SetFillColor=i("FPDFPageObj_SetFillColor",5),e._FPDFPageObj_GetFillColor=i("FPDFPageObj_GetFillColor",5),e._FPDFPageObj_GetBounds=i("FPDFPageObj_GetBounds",5),e._FPDFPageObj_GetRotatedBounds=i("FPDFPageObj_GetRotatedBounds",2),e._FPDFPageObj_SetStrokeColor=i("FPDFPageObj_SetStrokeColor",5),e._FPDFPageObj_GetStrokeColor=i("FPDFPageObj_GetStrokeColor",5),e._FPDFPageObj_SetStrokeWidth=i("FPDFPageObj_SetStrokeWidth",2),e._FPDFPageObj_GetStrokeWidth=i("FPDFPageObj_GetStrokeWidth",2),e._FPDFPageObj_GetLineJoin=i("FPDFPageObj_GetLineJoin",1),e._FPDFPageObj_SetLineJoin=i("FPDFPageObj_SetLineJoin",2),e._FPDFPageObj_GetLineCap=i("FPDFPageObj_GetLineCap",1),e._FPDFPageObj_SetLineCap=i("FPDFPageObj_SetLineCap",2),e._FPDFPageObj_GetDashPhase=i("FPDFPageObj_GetDashPhase",2),e._FPDFPageObj_SetDashPhase=i("FPDFPageObj_SetDashPhase",2),e._FPDFPageObj_GetDashCount=i("FPDFPageObj_GetDashCount",1),e._FPDFPageObj_GetDashArray=i("FPDFPageObj_GetDashArray",3),e._FPDFPageObj_SetDashArray=i("FPDFPageObj_SetDashArray",4),e._FPDFFormObj_CountObjects=i("FPDFFormObj_CountObjects",1),e._FPDFFormObj_GetObject=i("FPDFFormObj_GetObject",2),e._FPDFFormObj_RemoveObject=i("FPDFFormObj_RemoveObject",2),e._FPDFPageObj_CreateNewPath=i("FPDFPageObj_CreateNewPath",2),e._FPDFPageObj_CreateNewRect=i("FPDFPageObj_CreateNewRect",4),e._FPDFPath_CountSegments=i("FPDFPath_CountSegments",1),e._FPDFPath_GetPathSegment=i("FPDFPath_GetPathSegment",2),e._FPDFPath_MoveTo=i("FPDFPath_MoveTo",3),e._FPDFPath_LineTo=i("FPDFPath_LineTo",3),e._FPDFPath_BezierTo=i("FPDFPath_BezierTo",7),e._FPDFPath_Close=i("FPDFPath_Close",1),e._FPDFPath_SetDrawMode=i("FPDFPath_SetDrawMode",3),e._FPDFPath_GetDrawMode=i("FPDFPath_GetDrawMode",3),e._FPDFPathSegment_GetPoint=i("FPDFPathSegment_GetPoint",3),e._FPDFPathSegment_GetType=i("FPDFPathSegment_GetType",1),e._FPDFPathSegment_GetClose=i("FPDFPathSegment_GetClose",1),e._FPDFPageObj_NewTextObj=i("FPDFPageObj_NewTextObj",3),e._FPDFText_SetText=i("FPDFText_SetText",2),e._FPDFText_SetCharcodes=i("FPDFText_SetCharcodes",3),e._FPDFText_LoadFont=i("FPDFText_LoadFont",5),e._FPDFText_LoadStandardFont=i("FPDFText_LoadStandardFont",2),e._FPDFText_LoadCidType2Font=i("FPDFText_LoadCidType2Font",6),e._FPDFTextObj_GetFontSize=i("FPDFTextObj_GetFontSize",2),e._FPDFTextObj_GetText=i("FPDFTextObj_GetText",4),e._FPDFTextObj_GetRenderedBitmap=i("FPDFTextObj_GetRenderedBitmap",4),e._FPDFFont_Close=i("FPDFFont_Close",1),e._FPDFPageObj_CreateTextObj=i("FPDFPageObj_CreateTextObj",3),e._FPDFTextObj_GetTextRenderMode=i("FPDFTextObj_GetTextRenderMode",1),e._FPDFTextObj_SetTextRenderMode=i("FPDFTextObj_SetTextRenderMode",2),e._FPDFTextObj_GetFont=i("FPDFTextObj_GetFont",1),e._FPDFFont_GetBaseFontName=i("FPDFFont_GetBaseFontName",3),e._FPDFFont_GetFamilyName=i("FPDFFont_GetFamilyName",3),e._FPDFFont_GetFontData=i("FPDFFont_GetFontData",4),e._FPDFFont_GetIsEmbedded=i("FPDFFont_GetIsEmbedded",1),e._FPDFFont_GetFlags=i("FPDFFont_GetFlags",1),e._FPDFFont_GetWeight=i("FPDFFont_GetWeight",1),e._FPDFFont_GetItalicAngle=i("FPDFFont_GetItalicAngle",2),e._FPDFFont_GetAscent=i("FPDFFont_GetAscent",3),e._FPDFFont_GetDescent=i("FPDFFont_GetDescent",3),e._FPDFFont_GetGlyphWidth=i("FPDFFont_GetGlyphWidth",4),e._FPDFFont_GetGlyphPath=i("FPDFFont_GetGlyphPath",3),e._FPDFGlyphPath_CountGlyphSegments=i("FPDFGlyphPath_CountGlyphSegments",1),e._FPDFGlyphPath_GetGlyphPathSegment=i("FPDFGlyphPath_GetGlyphPathSegment",2),e._EPDFText_RedactInRect=i("EPDFText_RedactInRect",4),e._EPDFText_RedactInQuads=i("EPDFText_RedactInQuads",5),e._FPDFDoc_GetPageMode=i("FPDFDoc_GetPageMode",1),e._FPDFPage_Flatten=i("FPDFPage_Flatten",2),e._FPDFPage_HasFormFieldAtPoint=i("FPDFPage_HasFormFieldAtPoint",4),e._FPDFPage_FormFieldZOrderAtPoint=i("FPDFPage_FormFieldZOrderAtPoint",4),e._malloc=i("malloc",1),e._free=i("free",1),e._FORM_OnMouseMove=i("FORM_OnMouseMove",5),e._FORM_OnMouseWheel=i("FORM_OnMouseWheel",6),e._FORM_OnFocus=i("FORM_OnFocus",5),e._FORM_OnLButtonDown=i("FORM_OnLButtonDown",5),e._FORM_OnLButtonUp=i("FORM_OnLButtonUp",5),e._FORM_OnLButtonDoubleClick=i("FORM_OnLButtonDoubleClick",5),e._FORM_OnRButtonDown=i("FORM_OnRButtonDown",5),e._FORM_OnRButtonUp=i("FORM_OnRButtonUp",5),e._FORM_OnKeyDown=i("FORM_OnKeyDown",4),e._FORM_OnKeyUp=i("FORM_OnKeyUp",4),e._FORM_OnChar=i("FORM_OnChar",4),e._FORM_GetFocusedText=i("FORM_GetFocusedText",4),e._FORM_GetSelectedText=i("FORM_GetSelectedText",4),e._FORM_ReplaceAndKeepSelection=i("FORM_ReplaceAndKeepSelection",3),e._FORM_ReplaceSelection=i("FORM_ReplaceSelection",3),e._FORM_SelectAllText=i("FORM_SelectAllText",2),e._FORM_CanUndo=i("FORM_CanUndo",2),e._FORM_CanRedo=i("FORM_CanRedo",2),e._FORM_Undo=i("FORM_Undo",2),e._FORM_Redo=i("FORM_Redo",2),e._FORM_ForceToKillFocus=i("FORM_ForceToKillFocus",1),e._FORM_GetFocusedAnnot=i("FORM_GetFocusedAnnot",3),e._FORM_SetFocusedAnnot=i("FORM_SetFocusedAnnot",2),e._FPDF_FFLDraw=i("FPDF_FFLDraw",9),e._FPDF_SetFormFieldHighlightColor=i("FPDF_SetFormFieldHighlightColor",3),e._FPDF_SetFormFieldHighlightAlpha=i("FPDF_SetFormFieldHighlightAlpha",2),e._FPDF_RemoveFormFieldHighlight=i("FPDF_RemoveFormFieldHighlight",1),e._FORM_OnAfterLoadPage=i("FORM_OnAfterLoadPage",2),e._FORM_OnBeforeClosePage=i("FORM_OnBeforeClosePage",2),e._FORM_DoDocumentJSAction=i("FORM_DoDocumentJSAction",1),e._FORM_DoDocumentOpenAction=i("FORM_DoDocumentOpenAction",1),e._FORM_DoDocumentAAction=i("FORM_DoDocumentAAction",2),e._FORM_DoPageAAction=i("FORM_DoPageAAction",3),e._FORM_SetIndexSelected=i("FORM_SetIndexSelected",4),e._FORM_IsIndexSelected=i("FORM_IsIndexSelected",3),e._FPDFDoc_GetJavaScriptActionCount=i("FPDFDoc_GetJavaScriptActionCount",1),e._FPDFDoc_GetJavaScriptAction=i("FPDFDoc_GetJavaScriptAction",2),e._FPDFDoc_CloseJavaScriptAction=i("FPDFDoc_CloseJavaScriptAction",1),e._FPDFJavaScriptAction_GetName=i("FPDFJavaScriptAction_GetName",3),e._FPDFJavaScriptAction_GetScript=i("FPDFJavaScriptAction_GetScript",3),e._FPDF_ImportPagesByIndex=i("FPDF_ImportPagesByIndex",5),e._FPDF_ImportPages=i("FPDF_ImportPages",4),e._FPDF_ImportNPagesToOne=i("FPDF_ImportNPagesToOne",5),e._FPDF_NewXObjectFromPage=i("FPDF_NewXObjectFromPage",3),e._FPDF_CloseXObject=i("FPDF_CloseXObject",1),e._FPDF_NewFormObjectFromXObject=i("FPDF_NewFormObjectFromXObject",1),e._FPDF_CopyViewerPreferences=i("FPDF_CopyViewerPreferences",2),e._FPDF_RenderPageBitmapWithColorScheme_Start=i("FPDF_RenderPageBitmapWithColorScheme_Start",10),e._FPDF_RenderPageBitmap_Start=i("FPDF_RenderPageBitmap_Start",9),e._FPDF_RenderPage_Continue=i("FPDF_RenderPage_Continue",2),e._FPDF_RenderPage_Close=i("FPDF_RenderPage_Close",1),e._FPDF_SaveWithVersion=i("FPDF_SaveWithVersion",4),e._FPDFText_GetCharIndexFromTextIndex=i("FPDFText_GetCharIndexFromTextIndex",2),e._FPDFText_GetTextIndexFromCharIndex=i("FPDFText_GetTextIndexFromCharIndex",2),e._FPDF_GetSignatureCount=i("FPDF_GetSignatureCount",1),e._FPDF_GetSignatureObject=i("FPDF_GetSignatureObject",2),e._FPDFSignatureObj_GetContents=i("FPDFSignatureObj_GetContents",3),e._FPDFSignatureObj_GetByteRange=i("FPDFSignatureObj_GetByteRange",3),e._FPDFSignatureObj_GetSubFilter=i("FPDFSignatureObj_GetSubFilter",3),e._FPDFSignatureObj_GetReason=i("FPDFSignatureObj_GetReason",3),e._FPDFSignatureObj_GetTime=i("FPDFSignatureObj_GetTime",3),e._FPDFSignatureObj_GetDocMDPPermission=i("FPDFSignatureObj_GetDocMDPPermission",1),e._FPDF_StructTree_GetForPage=i("FPDF_StructTree_GetForPage",1),e._FPDF_StructTree_Close=i("FPDF_StructTree_Close",1),e._FPDF_StructTree_CountChildren=i("FPDF_StructTree_CountChildren",1),e._FPDF_StructTree_GetChildAtIndex=i("FPDF_StructTree_GetChildAtIndex",2),e._FPDF_StructElement_GetAltText=i("FPDF_StructElement_GetAltText",3),e._FPDF_StructElement_GetActualText=i("FPDF_StructElement_GetActualText",3),e._FPDF_StructElement_GetID=i("FPDF_StructElement_GetID",3),e._FPDF_StructElement_GetLang=i("FPDF_StructElement_GetLang",3),e._FPDF_StructElement_GetAttributeCount=i("FPDF_StructElement_GetAttributeCount",1),e._FPDF_StructElement_GetAttributeAtIndex=i("FPDF_StructElement_GetAttributeAtIndex",2),e._FPDF_StructElement_GetStringAttribute=i("FPDF_StructElement_GetStringAttribute",4),e._FPDF_StructElement_GetMarkedContentID=i("FPDF_StructElement_GetMarkedContentID",1),e._FPDF_StructElement_GetType=i("FPDF_StructElement_GetType",3),e._FPDF_StructElement_GetObjType=i("FPDF_StructElement_GetObjType",3),e._FPDF_StructElement_GetTitle=i("FPDF_StructElement_GetTitle",3),e._FPDF_StructElement_CountChildren=i("FPDF_StructElement_CountChildren",1),e._FPDF_StructElement_GetChildAtIndex=i("FPDF_StructElement_GetChildAtIndex",2),e._FPDF_StructElement_GetChildMarkedContentID=i("FPDF_StructElement_GetChildMarkedContentID",2),e._FPDF_StructElement_GetParent=i("FPDF_StructElement_GetParent",1),e._FPDF_StructElement_Attr_GetCount=i("FPDF_StructElement_Attr_GetCount",1),e._FPDF_StructElement_Attr_GetName=i("FPDF_StructElement_Attr_GetName",5),e._FPDF_StructElement_Attr_GetValue=i("FPDF_StructElement_Attr_GetValue",2),e._FPDF_StructElement_Attr_GetType=i("FPDF_StructElement_Attr_GetType",1),e._FPDF_StructElement_Attr_GetBooleanValue=i("FPDF_StructElement_Attr_GetBooleanValue",2),e._FPDF_StructElement_Attr_GetNumberValue=i("FPDF_StructElement_Attr_GetNumberValue",2),e._FPDF_StructElement_Attr_GetStringValue=i("FPDF_StructElement_Attr_GetStringValue",4),e._FPDF_StructElement_Attr_GetBlobValue=i("FPDF_StructElement_Attr_GetBlobValue",4),e._FPDF_StructElement_Attr_CountChildren=i("FPDF_StructElement_Attr_CountChildren",1),e._FPDF_StructElement_Attr_GetChildAtIndex=i("FPDF_StructElement_Attr_GetChildAtIndex",2),e._FPDF_StructElement_GetMarkedContentIdCount=i("FPDF_StructElement_GetMarkedContentIdCount",1),e._FPDF_StructElement_GetMarkedContentIdAtIndex=i("FPDF_StructElement_GetMarkedContentIdAtIndex",2),e._FPDF_AddInstalledFont=i("FPDF_AddInstalledFont",3),e._FPDF_SetSystemFontInfo=i("FPDF_SetSystemFontInfo",1),e._FPDF_GetDefaultTTFMap=i("FPDF_GetDefaultTTFMap",0),e._FPDF_GetDefaultTTFMapCount=i("FPDF_GetDefaultTTFMapCount",0),e._FPDF_GetDefaultTTFMapEntry=i("FPDF_GetDefaultTTFMapEntry",1),e._FPDF_GetDefaultSystemFontInfo=i("FPDF_GetDefaultSystemFontInfo",0),e._FPDF_FreeDefaultSystemFontInfo=i("FPDF_FreeDefaultSystemFontInfo",1),e._FPDFText_LoadPage=i("FPDFText_LoadPage",1),e._FPDFText_ClosePage=i("FPDFText_ClosePage",1),e._FPDFText_CountChars=i("FPDFText_CountChars",1),e._FPDFText_GetUnicode=i("FPDFText_GetUnicode",2),e._FPDFText_GetTextObject=i("FPDFText_GetTextObject",2),e._FPDFText_IsGenerated=i("FPDFText_IsGenerated",2),e._FPDFText_IsHyphen=i("FPDFText_IsHyphen",2),e._FPDFText_HasUnicodeMapError=i("FPDFText_HasUnicodeMapError",2),e._FPDFText_GetFontSize=i("FPDFText_GetFontSize",2),e._FPDFText_GetFontInfo=i("FPDFText_GetFontInfo",5),e._FPDFText_GetFontWeight=i("FPDFText_GetFontWeight",2),e._FPDFText_GetFillColor=i("FPDFText_GetFillColor",6),e._FPDFText_GetStrokeColor=i("FPDFText_GetStrokeColor",6),e._FPDFText_GetCharAngle=i("FPDFText_GetCharAngle",2),e._FPDFText_GetCharBox=i("FPDFText_GetCharBox",6),e._FPDFText_GetLooseCharBox=i("FPDFText_GetLooseCharBox",3),e._FPDFText_GetMatrix=i("FPDFText_GetMatrix",3),e._FPDFText_GetCharOrigin=i("FPDFText_GetCharOrigin",4),e._FPDFText_GetCharIndexAtPos=i("FPDFText_GetCharIndexAtPos",5),e._FPDFText_GetText=i("FPDFText_GetText",4),e._FPDFText_CountRects=i("FPDFText_CountRects",3),e._FPDFText_GetRect=i("FPDFText_GetRect",6),e._FPDFText_GetBoundedText=i("FPDFText_GetBoundedText",7),e._FPDFText_FindStart=i("FPDFText_FindStart",4),e._FPDFText_FindNext=i("FPDFText_FindNext",1),e._FPDFText_FindPrev=i("FPDFText_FindPrev",1),e._FPDFText_GetSchResultIndex=i("FPDFText_GetSchResultIndex",1),e._FPDFText_GetSchCount=i("FPDFText_GetSchCount",1),e._FPDFText_FindClose=i("FPDFText_FindClose",1),e._FPDFLink_LoadWebLinks=i("FPDFLink_LoadWebLinks",1),e._FPDFLink_CountWebLinks=i("FPDFLink_CountWebLinks",1),e._FPDFLink_GetURL=i("FPDFLink_GetURL",4),e._FPDFLink_CountRects=i("FPDFLink_CountRects",2),e._FPDFLink_GetRect=i("FPDFLink_GetRect",7),e._FPDFLink_GetTextRange=i("FPDFLink_GetTextRange",4),e._FPDFLink_CloseWebLinks=i("FPDFLink_CloseWebLinks",1),e._FPDFPage_GetDecodedThumbnailData=i("FPDFPage_GetDecodedThumbnailData",3),e._FPDFPage_GetRawThumbnailData=i("FPDFPage_GetRawThumbnailData",3),e._FPDFPage_GetThumbnailAsBitmap=i("FPDFPage_GetThumbnailAsBitmap",1),e._FPDFPage_SetMediaBox=i("FPDFPage_SetMediaBox",5),e._FPDFPage_SetCropBox=i("FPDFPage_SetCropBox",5),e._FPDFPage_SetBleedBox=i("FPDFPage_SetBleedBox",5),e._FPDFPage_SetTrimBox=i("FPDFPage_SetTrimBox",5),e._FPDFPage_SetArtBox=i("FPDFPage_SetArtBox",5),e._FPDFPage_GetMediaBox=i("FPDFPage_GetMediaBox",5),e._FPDFPage_GetCropBox=i("FPDFPage_GetCropBox",5),e._FPDFPage_GetBleedBox=i("FPDFPage_GetBleedBox",5),e._FPDFPage_GetTrimBox=i("FPDFPage_GetTrimBox",5),e._FPDFPage_GetArtBox=i("FPDFPage_GetArtBox",5),e._FPDFPage_TransFormWithClip=i("FPDFPage_TransFormWithClip",3),e._FPDFPageObj_TransformClipPath=i("FPDFPageObj_TransformClipPath",7),e._FPDFPageObj_GetClipPath=i("FPDFPageObj_GetClipPath",1),e._FPDFClipPath_CountPaths=i("FPDFClipPath_CountPaths",1),e._FPDFClipPath_CountPathSegments=i("FPDFClipPath_CountPathSegments",2),e._FPDFClipPath_GetPathSegment=i("FPDFClipPath_GetPathSegment",3),e._FPDF_CreateClipPath=i("FPDF_CreateClipPath",4),e._FPDF_DestroyClipPath=i("FPDF_DestroyClipPath",1),e._FPDFPage_InsertClipPath=i("FPDFPage_InsertClipPath",2),e._FPDF_InitLibrary=i("FPDF_InitLibrary",0),e._FPDF_DestroyLibrary=i("FPDF_DestroyLibrary",0),e._FPDF_SetSandBoxPolicy=i("FPDF_SetSandBoxPolicy",2),e._FPDF_LoadDocument=i("FPDF_LoadDocument",2),e._FPDF_GetFormType=i("FPDF_GetFormType",1),e._FPDF_LoadXFA=i("FPDF_LoadXFA",1),e._FPDF_LoadMemDocument=i("FPDF_LoadMemDocument",3),e._FPDF_LoadMemDocument64=i("FPDF_LoadMemDocument64",3),e._FPDF_LoadCustomDocument=i("FPDF_LoadCustomDocument",2),e._FPDF_GetFileVersion=i("FPDF_GetFileVersion",2),e._FPDF_DocumentHasValidCrossReferenceTable=i("FPDF_DocumentHasValidCrossReferenceTable",1),e._FPDF_GetDocPermissions=i("FPDF_GetDocPermissions",1),e._FPDF_GetDocUserPermissions=i("FPDF_GetDocUserPermissions",1),e._FPDF_GetSecurityHandlerRevision=i("FPDF_GetSecurityHandlerRevision",1),e._EPDF_SetEncryption=i("EPDF_SetEncryption",4),e._EPDF_RemoveEncryption=i("EPDF_RemoveEncryption",1),e._EPDF_UnlockOwnerPermissions=i("EPDF_UnlockOwnerPermissions",2),e._EPDF_IsEncrypted=i("EPDF_IsEncrypted",1),e._EPDF_IsOwnerUnlocked=i("EPDF_IsOwnerUnlocked",1),e._FPDF_GetPageCount=i("FPDF_GetPageCount",1),e._FPDF_LoadPage=i("FPDF_LoadPage",2),e._FPDF_GetPageWidthF=i("FPDF_GetPageWidthF",1),e._FPDF_GetPageWidth=i("FPDF_GetPageWidth",1),e._FPDF_GetPageHeightF=i("FPDF_GetPageHeightF",1),e._FPDF_GetPageHeight=i("FPDF_GetPageHeight",1),e._FPDF_GetPageBoundingBox=i("FPDF_GetPageBoundingBox",2),e._FPDF_RenderPageBitmap=i("FPDF_RenderPageBitmap",8),e._FPDF_RenderPageBitmapWithMatrix=i("FPDF_RenderPageBitmapWithMatrix",5),e._EPDF_RenderAnnotBitmap=i("EPDF_RenderAnnotBitmap",6),e._FPDF_ClosePage=i("FPDF_ClosePage",1),e._FPDF_CloseDocument=i("FPDF_CloseDocument",1),e._FPDF_GetLastError=i("FPDF_GetLastError",0),e._FPDF_DeviceToPage=i("FPDF_DeviceToPage",10),e._FPDF_PageToDevice=i("FPDF_PageToDevice",10),e._FPDFBitmap_Create=i("FPDFBitmap_Create",3),e._FPDFBitmap_CreateEx=i("FPDFBitmap_CreateEx",5),e._FPDFBitmap_GetFormat=i("FPDFBitmap_GetFormat",1),e._FPDFBitmap_FillRect=i("FPDFBitmap_FillRect",6),e._FPDFBitmap_GetBuffer=i("FPDFBitmap_GetBuffer",1),e._FPDFBitmap_GetWidth=i("FPDFBitmap_GetWidth",1),e._FPDFBitmap_GetHeight=i("FPDFBitmap_GetHeight",1),e._FPDFBitmap_GetStride=i("FPDFBitmap_GetStride",1),e._FPDFBitmap_Destroy=i("FPDFBitmap_Destroy",1),e._FPDF_GetPageSizeByIndexF=i("FPDF_GetPageSizeByIndexF",3),e._EPDF_GetPageRotationByIndex=i("EPDF_GetPageRotationByIndex",2),e._FPDF_GetPageSizeByIndex=i("FPDF_GetPageSizeByIndex",4),e._FPDF_VIEWERREF_GetPrintScaling=i("FPDF_VIEWERREF_GetPrintScaling",1),e._FPDF_VIEWERREF_GetNumCopies=i("FPDF_VIEWERREF_GetNumCopies",1),e._FPDF_VIEWERREF_GetPrintPageRange=i("FPDF_VIEWERREF_GetPrintPageRange",1),e._FPDF_VIEWERREF_GetPrintPageRangeCount=i("FPDF_VIEWERREF_GetPrintPageRangeCount",1),e._FPDF_VIEWERREF_GetPrintPageRangeElement=i("FPDF_VIEWERREF_GetPrintPageRangeElement",2),e._FPDF_VIEWERREF_GetDuplex=i("FPDF_VIEWERREF_GetDuplex",1),e._FPDF_VIEWERREF_GetName=i("FPDF_VIEWERREF_GetName",4),e._FPDF_CountNamedDests=i("FPDF_CountNamedDests",1),e._FPDF_GetNamedDestByName=i("FPDF_GetNamedDestByName",2),e._FPDF_GetNamedDest=i("FPDF_GetNamedDest",4),e._FPDF_GetXFAPacketCount=i("FPDF_GetXFAPacketCount",1),e._FPDF_GetXFAPacketName=i("FPDF_GetXFAPacketName",4),e._FPDF_GetXFAPacketContent=i("FPDF_GetXFAPacketContent",5),e._FPDF_GetTrailerEnds=i("FPDF_GetTrailerEnds",3);var st,zt,cn=i("fflush",1),gn=i("emscripten_builtin_memalign",2),hn=i("strerror",1),Te=i("setThrew",2),Ht=()=>(Ht=me.emscripten_stack_init)(),pt=()=>(pt=me.emscripten_stack_get_end)(),Kt=t=>(Kt=me._emscripten_stack_restore)(t),Xt=t=>(Xt=me._emscripten_stack_alloc)(t),Yt=()=>(Yt=me.emscripten_stack_get_current)();function Dn(){var t;Ht(),C(!(3&(t=pt()))),t==0&&(t+=4),H[t>>2]=34821223,H[t+4>>2]=2310721022,H[0]=1668509029}function Jt(){var t;function a(){st||(st=1,e.calledRun=1,Ae||(C(!ye),ye=!0,Ee(),e.noFSInit||m.initialized||m.init(),m.ignorePermissions=!1,Pt(_t),n(e),e.onRuntimeInitialized?.(),C(!e._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),(function(){Ee();var u=e.postRun;u&&(typeof u=="function"&&(u=[u]),u.forEach(ot)),Pt(Ie)})()))}de>0||(Dn(),!zt&&(zt=1,(t=e.preRun)&&(typeof t=="function"&&(t=[t]),t.forEach(rt)),Pt(ze),de>0)||(e.setStatus?(e.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>e.setStatus(""),1),a()},1)):a(),Ee()))}if(e.dynCall_ji=i("dynCall_ji",2),e.dynCall_jij=i("dynCall_jij",4),e.dynCall_iiij=i("dynCall_iiij",5),e.dynCall_iij=i("dynCall_iij",4),e.dynCall_j=i("dynCall_j",1),e.dynCall_jji=i("dynCall_jji",4),e.dynCall_iji=i("dynCall_iji",4),e.dynCall_viijii=i("dynCall_viijii",7),e.dynCall_iiji=i("dynCall_iiji",5),e.dynCall_jiji=i("dynCall_jiji",5),e.dynCall_iiiiij=i("dynCall_iiiiij",7),e.dynCall_iiiiijj=i("dynCall_iiiiijj",9),e.dynCall_iiiiiijj=i("dynCall_iiiiiijj",10),e.dynCall_viji=i("dynCall_viji",5),e.wasmExports=me,e.ccall=$t,e.cwrap=(t,a,u,l)=>(...P)=>$t(t,a,u,P),e.addFunction=(t,a)=>{C(t!==void 0);var u=Pn(t);if(u)return u;var l=(()=>{if(bt.length)return bt.pop();try{ke.grow(1)}catch(g){throw g instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":g}return ke.length-1})();try{ft(l,t)}catch(g){if(!(g instanceof TypeError))throw g;C(a!==void 0,"Missing signature argument to addFunction: "+t);var P=_n(t,a);ft(l,P)}return Ve.set(t,l),l},e.removeFunction=t=>{Ve.delete(Pe(t)),ft(t,null),bt.push(t)},e.setValue=function(t,a,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":case"i8":$[t]=a;break;case"i16":J[t>>1]=a;break;case"i32":x[t>>2]=a;break;case"i64":U("to do setValue(i64) use WASM_BIGINT");case"float":ue[t>>2]=a;break;case"double":he[t>>3]=a;break;case"*":H[t>>2]=a;break;default:U(`invalid type for setValue: ${u}`)}},e.getValue=function(t,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":case"i8":return $[t];case"i16":return J[t>>1];case"i32":return x[t>>2];case"i64":U("to do getValue(i64) use WASM_BIGINT");case"float":return ue[t>>2];case"double":return he[t>>3];case"*":return H[t>>2];default:U(`invalid type for getValue: ${a}`)}},e.UTF8ToString=Ne,e.stringToUTF8=$e,e.UTF16ToString=(t,a)=>{C(t%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var u=t,l=u>>1,P=l+a/2;!(l>=P)&&ae[l];)++l;if((u=l<<1)-t>32&&Nt)return Nt.decode(W.subarray(t,u));for(var g="",b=0;!(b>=a/2);++b){var A=J[t+2*b>>1];if(A==0)break;g+=String.fromCharCode(A)}return g},e.stringToUTF16=(t,a,u)=>{if(C(a%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),C(typeof u=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),u??=2147483647,u<2)return 0;for(var l=a,P=(u-=2)<2*t.length?u/2:t.length,g=0;g<P;++g){var b=t.charCodeAt(g);J[a>>1]=b,a+=2}return J[a>>1]=0,a-l},["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","getTempRet0","setTempRet0","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","safeSetTimeout","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","safeRequestAnimationFrame","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"].forEach(function(t){vt(t,()=>{var a=`\`${t}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,u=t;u.startsWith("_")||(u="$"+t),a+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${u}')`,xt(t)&&(a+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Le(a)}),kt(t)}),["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","zeroMemory","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","initRandomFill","randomFill","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","getCFunc","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","getFunctionAddress","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","stringToUTF8Array","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","doReadv","doWritev","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","isLeapYear","ydayFromDate","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createDataFile","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"].forEach(kt),xe=function t(){st||Jt(),st||(xe=t)},e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();Jt(),r=s;for(const t of Object.keys(e))t in z||Object.defineProperty(z,t,{configurable:!0,get(){U(`Access to module property ('${t}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return r});const yt={EPDF_GetMetaKeyCount:[["number","boolean"],"number"],EPDF_GetMetaKeyName:[["number","number","boolean","number","number"],"number"],EPDF_GetMetaTrapped:[["number"],"number"],EPDF_GetPageRotationByIndex:[["number","number"],"number"],EPDF_HasMetaText:[["number","string"],"boolean"],EPDF_IsEncrypted:[["number"],"boolean"],EPDF_IsOwnerUnlocked:[["number"],"boolean"],EPDF_PNG_EncodeRGBA:[["number","number","number","number","number","number"],"number"],EPDF_RemoveEncryption:[["number"],"boolean"],EPDF_RenderAnnotBitmap:[["number","number","number","number","number","number"],"boolean"],EPDF_SetEncryption:[["number","string","string","number"],"boolean"],EPDF_SetMetaText:[["number","string","number"],"boolean"],EPDF_SetMetaTrapped:[["number","number"],"boolean"],EPDF_UnlockOwnerPermissions:[["number","string"],"boolean"],EPDFAction_CreateGoTo:[["number","number"],"number"],EPDFAction_CreateGoToNamed:[["number","string"],"number"],EPDFAction_CreateLaunch:[["number","number"],"number"],EPDFAction_CreateRemoteGoToByName:[["number","number","number"],"number"],EPDFAction_CreateRemoteGoToDest:[["number","number","number"],"number"],EPDFAction_CreateURI:[["number","string"],"number"],EPDFAnnot_ClearColor:[["number","number"],"boolean"],EPDFAnnot_GenerateAppearance:[["number"],"boolean"],EPDFAnnot_GenerateAppearanceWithBlend:[["number","number"],"boolean"],EPDFAnnot_GetBlendMode:[["number"],"number"],EPDFAnnot_GetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_GetBorderDashPatternCount:[["number"],"number"],EPDFAnnot_GetBorderEffect:[["number","number"],"boolean"],EPDFAnnot_GetBorderStyle:[["number","number"],"number"],EPDFAnnot_GetColor:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetDefaultAppearance:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_GetIcon:[["number"],"number"],EPDFAnnot_GetIntent:[["number","number","number"],"number"],EPDFAnnot_GetLineEndings:[["number","number","number"],"boolean"],EPDFAnnot_GetOpacity:[["number","number"],"boolean"],EPDFAnnot_GetRectangleDifferences:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetReplyType:[["number"],"number"],EPDFAnnot_GetRichContent:[["number","number","number"],"number"],EPDFAnnot_GetTextAlignment:[["number"],"number"],EPDFAnnot_GetVerticalAlignment:[["number"],"number"],EPDFAnnot_SetAction:[["number","number"],"boolean"],EPDFAnnot_SetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_SetBorderStyle:[["number","number","number"],"boolean"],EPDFAnnot_SetColor:[["number","number","number","number","number"],"boolean"],EPDFAnnot_SetDefaultAppearance:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_SetIcon:[["number","number"],"boolean"],EPDFAnnot_SetIntent:[["number","string"],"boolean"],EPDFAnnot_SetLine:[["number","number","number"],"boolean"],EPDFAnnot_SetLineEndings:[["number","number","number"],"boolean"],EPDFAnnot_SetLinkedAnnot:[["number","string","number"],"boolean"],EPDFAnnot_SetOpacity:[["number","number"],"boolean"],EPDFAnnot_SetReplyType:[["number","number"],"boolean"],EPDFAnnot_SetTextAlignment:[["number","number"],"boolean"],EPDFAnnot_SetVerticalAlignment:[["number","number"],"boolean"],EPDFAnnot_SetVertices:[["number","number","number"],"boolean"],EPDFAnnot_UpdateAppearanceToRect:[["number","number"],"boolean"],EPDFAttachment_GetDescription:[["number","number","number"],"number"],EPDFAttachment_GetIntegerValue:[["number","string","number"],"boolean"],EPDFAttachment_SetDescription:[["number","number"],"boolean"],EPDFAttachment_SetSubtype:[["number","string"],"boolean"],EPDFBookmark_AppendChild:[["number","number","number"],"number"],EPDFBookmark_Clear:[["number"],"boolean"],EPDFBookmark_ClearTarget:[["number"],"boolean"],EPDFBookmark_Create:[["number","number"],"number"],EPDFBookmark_Delete:[["number","number"],"boolean"],EPDFBookmark_InsertAfter:[["number","number","number","number"],"number"],EPDFBookmark_SetAction:[["number","number","number"],"boolean"],EPDFBookmark_SetDest:[["number","number","number"],"boolean"],EPDFBookmark_SetTitle:[["number","number"],"boolean"],EPDFCatalog_GetLanguage:[["number","number","number"],"number"],EPDFDest_CreateRemoteView:[["number","number","number","number","number"],"number"],EPDFDest_CreateRemoteXYZ:[["number","number","boolean","number","boolean","number","boolean","number"],"number"],EPDFDest_CreateView:[["number","number","number","number"],"number"],EPDFDest_CreateXYZ:[["number","boolean","number","boolean","number","boolean","number"],"number"],EPDFNamedDest_Remove:[["number","string"],"boolean"],EPDFNamedDest_SetDest:[["number","string","number"],"boolean"],EPDFPage_CreateAnnot:[["number","number"],"number"],EPDFPage_GetAnnotByName:[["number","number"],"number"],EPDFPage_GetAnnotCountRaw:[["number","number"],"number"],EPDFPage_GetAnnotRaw:[["number","number","number"],"number"],EPDFPage_RemoveAnnotByName:[["number","number"],"boolean"],EPDFPage_RemoveAnnotRaw:[["number","number","number"],"boolean"],EPDFText_RedactInQuads:[["number","number","number","boolean","boolean"],"boolean"],EPDFText_RedactInRect:[["number","number","boolean","boolean"],"boolean"],FORM_CanRedo:[["number","number"],"boolean"],FORM_CanUndo:[["number","number"],"boolean"],FORM_DoDocumentAAction:[["number","number"],null],FORM_DoDocumentJSAction:[["number"],null],FORM_DoDocumentOpenAction:[["number"],null],FORM_DoPageAAction:[["number","number","number"],null],FORM_ForceToKillFocus:[["number"],"boolean"],FORM_GetFocusedAnnot:[["number","number","number"],"boolean"],FORM_GetFocusedText:[["number","number","number","number"],"number"],FORM_GetSelectedText:[["number","number","number","number"],"number"],FORM_IsIndexSelected:[["number","number","number"],"boolean"],FORM_OnAfterLoadPage:[["number","number"],null],FORM_OnBeforeClosePage:[["number","number"],null],FORM_OnChar:[["number","number","number","number"],"boolean"],FORM_OnFocus:[["number","number","number","number","number"],"boolean"],FORM_OnKeyDown:[["number","number","number","number"],"boolean"],FORM_OnKeyUp:[["number","number","number","number"],"boolean"],FORM_OnLButtonDoubleClick:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonUp:[["number","number","number","number","number"],"boolean"],FORM_OnMouseMove:[["number","number","number","number","number"],"boolean"],FORM_OnMouseWheel:[["number","number","number","number","number","number"],"boolean"],FORM_OnRButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnRButtonUp:[["number","number","number","number","number"],"boolean"],FORM_Redo:[["number","number"],"boolean"],FORM_ReplaceAndKeepSelection:[["number","number","number"],null],FORM_ReplaceSelection:[["number","number","number"],null],FORM_SelectAllText:[["number","number"],"boolean"],FORM_SetFocusedAnnot:[["number","number"],"boolean"],FORM_SetIndexSelected:[["number","number","number","boolean"],"boolean"],FORM_Undo:[["number","number"],"boolean"],FPDF_AddInstalledFont:[["number","number","number"],null],FPDF_CloseDocument:[["number"],null],FPDF_ClosePage:[["number"],null],FPDF_CloseXObject:[["number"],null],FPDF_CopyViewerPreferences:[["number","number"],"boolean"],FPDF_CountNamedDests:[["number"],"number"],FPDF_CreateClipPath:[["number","number","number","number"],"number"],FPDF_CreateNewDocument:[[],"number"],FPDF_DestroyClipPath:[["number"],null],FPDF_DestroyLibrary:[[],null],FPDF_DeviceToPage:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_DocumentHasValidCrossReferenceTable:[["number"],"boolean"],FPDF_FFLDraw:[["number","number","number","number","number","number","number","number","number"],null],FPDF_FreeDefaultSystemFontInfo:[["number"],null],FPDF_GetDefaultSystemFontInfo:[[],"number"],FPDF_GetDefaultTTFMap:[[],"number"],FPDF_GetDefaultTTFMapCount:[[],"number"],FPDF_GetDefaultTTFMapEntry:[["number"],"number"],FPDF_GetDocPermissions:[["number"],"number"],FPDF_GetDocUserPermissions:[["number"],"number"],FPDF_GetFileIdentifier:[["number","number","number","number"],"number"],FPDF_GetFileVersion:[["number","number"],"boolean"],FPDF_GetFormType:[["number"],"number"],FPDF_GetLastError:[[],"number"],FPDF_GetMetaText:[["number","string","number","number"],"number"],FPDF_GetNamedDest:[["number","number","number","number"],"number"],FPDF_GetNamedDestByName:[["number","string"],"number"],FPDF_GetPageAAction:[["number","number"],"number"],FPDF_GetPageBoundingBox:[["number","number"],"boolean"],FPDF_GetPageCount:[["number"],"number"],FPDF_GetPageHeight:[["number"],"number"],FPDF_GetPageHeightF:[["number"],"number"],FPDF_GetPageLabel:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndex:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndexF:[["number","number","number"],"boolean"],FPDF_GetPageWidth:[["number"],"number"],FPDF_GetPageWidthF:[["number"],"number"],FPDF_GetSecurityHandlerRevision:[["number"],"number"],FPDF_GetSignatureCount:[["number"],"number"],FPDF_GetSignatureObject:[["number","number"],"number"],FPDF_GetTrailerEnds:[["number","number","number"],"number"],FPDF_GetXFAPacketContent:[["number","number","number","number","number"],"boolean"],FPDF_GetXFAPacketCount:[["number"],"number"],FPDF_GetXFAPacketName:[["number","number","number","number"],"number"],FPDF_ImportNPagesToOne:[["number","number","number","number","number"],"number"],FPDF_ImportPages:[["number","number","string","number"],"boolean"],FPDF_ImportPagesByIndex:[["number","number","number","number","number"],"boolean"],FPDF_InitLibrary:[[],null],FPDF_InitLibraryWithConfig:[["number"],null],FPDF_LoadCustomDocument:[["number","string"],"number"],FPDF_LoadDocument:[["number","string"],"number"],FPDF_LoadMemDocument:[["number","number","string"],"number"],FPDF_LoadMemDocument64:[["number","number","string"],"number"],FPDF_LoadPage:[["number","number"],"number"],FPDF_LoadXFA:[["number"],"boolean"],FPDF_MovePages:[["number","number","number","number"],"boolean"],FPDF_NewFormObjectFromXObject:[["number"],"number"],FPDF_NewXObjectFromPage:[["number","number","number"],"number"],FPDF_PageToDevice:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_RemoveFormFieldHighlight:[["number"],null],FPDF_RenderPage_Close:[["number"],null],FPDF_RenderPage_Continue:[["number","number"],"number"],FPDF_RenderPageBitmap:[["number","number","number","number","number","number","number","number"],null],FPDF_RenderPageBitmap_Start:[["number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithColorScheme_Start:[["number","number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithMatrix:[["number","number","number","number","number"],null],FPDF_SaveAsCopy:[["number","number","number"],"boolean"],FPDF_SaveWithVersion:[["number","number","number","number"],"boolean"],FPDF_SetFormFieldHighlightAlpha:[["number","number"],null],FPDF_SetFormFieldHighlightColor:[["number","number","number"],null],FPDF_SetSandBoxPolicy:[["number","boolean"],null],FPDF_SetSystemFontInfo:[["number"],null],FPDF_StructElement_Attr_CountChildren:[["number"],"number"],FPDF_StructElement_Attr_GetBlobValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetBooleanValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_Attr_GetCount:[["number"],"number"],FPDF_StructElement_Attr_GetName:[["number","number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetNumberValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetStringValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetType:[["number"],"number"],FPDF_StructElement_Attr_GetValue:[["number","string"],"number"],FPDF_StructElement_CountChildren:[["number"],"number"],FPDF_StructElement_GetActualText:[["number","number","number"],"number"],FPDF_StructElement_GetAltText:[["number","number","number"],"number"],FPDF_StructElement_GetAttributeAtIndex:[["number","number"],"number"],FPDF_StructElement_GetAttributeCount:[["number"],"number"],FPDF_StructElement_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_GetChildMarkedContentID:[["number","number"],"number"],FPDF_StructElement_GetID:[["number","number","number"],"number"],FPDF_StructElement_GetLang:[["number","number","number"],"number"],FPDF_StructElement_GetMarkedContentID:[["number"],"number"],FPDF_StructElement_GetMarkedContentIdAtIndex:[["number","number"],"number"],FPDF_StructElement_GetMarkedContentIdCount:[["number"],"number"],FPDF_StructElement_GetObjType:[["number","number","number"],"number"],FPDF_StructElement_GetParent:[["number"],"number"],FPDF_StructElement_GetStringAttribute:[["number","string","number","number"],"number"],FPDF_StructElement_GetTitle:[["number","number","number"],"number"],FPDF_StructElement_GetType:[["number","number","number"],"number"],FPDF_StructTree_Close:[["number"],null],FPDF_StructTree_CountChildren:[["number"],"number"],FPDF_StructTree_GetChildAtIndex:[["number","number"],"number"],FPDF_StructTree_GetForPage:[["number"],"number"],FPDF_VIEWERREF_GetDuplex:[["number"],"number"],FPDF_VIEWERREF_GetName:[["number","string","number","number"],"number"],FPDF_VIEWERREF_GetNumCopies:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRange:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeCount:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeElement:[["number","number"],"number"],FPDF_VIEWERREF_GetPrintScaling:[["number"],"boolean"],FPDFAction_GetDest:[["number","number"],"number"],FPDFAction_GetFilePath:[["number","number","number"],"number"],FPDFAction_GetType:[["number"],"number"],FPDFAction_GetURIPath:[["number","number","number","number"],"number"],FPDFAnnot_AddFileAttachment:[["number","number"],"number"],FPDFAnnot_AddInkStroke:[["number","number","number"],"number"],FPDFAnnot_AppendAttachmentPoints:[["number","number"],"boolean"],FPDFAnnot_AppendObject:[["number","number"],"boolean"],FPDFAnnot_CountAttachmentPoints:[["number"],"number"],FPDFAnnot_GetAP:[["number","number","number","number"],"number"],FPDFAnnot_GetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_GetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_GetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_GetFileAttachment:[["number"],"number"],FPDFAnnot_GetFlags:[["number"],"number"],FPDFAnnot_GetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_GetFocusableSubtypesCount:[["number"],"number"],FPDFAnnot_GetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_GetFontSize:[["number","number","number"],"boolean"],FPDFAnnot_GetFormAdditionalActionJavaScript:[["number","number","number","number","number"],"number"],FPDFAnnot_GetFormControlCount:[["number","number"],"number"],FPDFAnnot_GetFormControlIndex:[["number","number"],"number"],FPDFAnnot_GetFormFieldAlternateName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldAtPoint:[["number","number","number"],"number"],FPDFAnnot_GetFormFieldExportValue:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldFlags:[["number","number"],"number"],FPDFAnnot_GetFormFieldName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldType:[["number","number"],"number"],FPDFAnnot_GetFormFieldValue:[["number","number","number","number"],"number"],FPDFAnnot_GetInkListCount:[["number"],"number"],FPDFAnnot_GetInkListPath:[["number","number","number","number"],"number"],FPDFAnnot_GetLine:[["number","number","number"],"boolean"],FPDFAnnot_GetLink:[["number"],"number"],FPDFAnnot_GetLinkedAnnot:[["number","string"],"number"],FPDFAnnot_GetNumberValue:[["number","string","number"],"boolean"],FPDFAnnot_GetObject:[["number","number"],"number"],FPDFAnnot_GetObjectCount:[["number"],"number"],FPDFAnnot_GetOptionCount:[["number","number"],"number"],FPDFAnnot_GetOptionLabel:[["number","number","number","number","number"],"number"],FPDFAnnot_GetRect:[["number","number"],"boolean"],FPDFAnnot_GetStringValue:[["number","string","number","number"],"number"],FPDFAnnot_GetSubtype:[["number"],"number"],FPDFAnnot_GetValueType:[["number","string"],"number"],FPDFAnnot_GetVertices:[["number","number","number"],"number"],FPDFAnnot_HasAttachmentPoints:[["number"],"boolean"],FPDFAnnot_HasKey:[["number","string"],"boolean"],FPDFAnnot_IsChecked:[["number","number"],"boolean"],FPDFAnnot_IsObjectSupportedSubtype:[["number"],"boolean"],FPDFAnnot_IsOptionSelected:[["number","number","number"],"boolean"],FPDFAnnot_IsSupportedSubtype:[["number"],"boolean"],FPDFAnnot_RemoveInkList:[["number"],"boolean"],FPDFAnnot_RemoveObject:[["number","number"],"boolean"],FPDFAnnot_SetAP:[["number","number","number"],"boolean"],FPDFAnnot_SetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_SetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_SetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_SetFlags:[["number","number"],"boolean"],FPDFAnnot_SetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_SetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_SetFormFieldFlags:[["number","number","number"],"boolean"],FPDFAnnot_SetRect:[["number","number"],"boolean"],FPDFAnnot_SetStringValue:[["number","string","number"],"boolean"],FPDFAnnot_SetURI:[["number","number"],"boolean"],FPDFAnnot_UpdateObject:[["number","number"],"boolean"],FPDFAttachment_GetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_GetName:[["number","number","number"],"number"],FPDFAttachment_GetStringValue:[["number","string","number","number"],"number"],FPDFAttachment_GetSubtype:[["number","number","number"],"number"],FPDFAttachment_GetValueType:[["number","string"],"number"],FPDFAttachment_HasKey:[["number","string"],"boolean"],FPDFAttachment_SetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_SetStringValue:[["number","string","number"],"boolean"],FPDFAvail_Create:[["number","number"],"number"],FPDFAvail_Destroy:[["number"],null],FPDFAvail_GetDocument:[["number","string"],"number"],FPDFAvail_GetFirstPageNum:[["number"],"number"],FPDFAvail_IsDocAvail:[["number","number"],"number"],FPDFAvail_IsFormAvail:[["number","number"],"number"],FPDFAvail_IsLinearized:[["number"],"number"],FPDFAvail_IsPageAvail:[["number","number","number"],"number"],FPDFBitmap_Create:[["number","number","number"],"number"],FPDFBitmap_CreateEx:[["number","number","number","number","number"],"number"],FPDFBitmap_Destroy:[["number"],null],FPDFBitmap_FillRect:[["number","number","number","number","number","number"],"boolean"],FPDFBitmap_GetBuffer:[["number"],"number"],FPDFBitmap_GetFormat:[["number"],"number"],FPDFBitmap_GetHeight:[["number"],"number"],FPDFBitmap_GetStride:[["number"],"number"],FPDFBitmap_GetWidth:[["number"],"number"],FPDFBookmark_Find:[["number","number"],"number"],FPDFBookmark_GetAction:[["number"],"number"],FPDFBookmark_GetCount:[["number"],"number"],FPDFBookmark_GetDest:[["number","number"],"number"],FPDFBookmark_GetFirstChild:[["number","number"],"number"],FPDFBookmark_GetNextSibling:[["number","number"],"number"],FPDFBookmark_GetTitle:[["number","number","number"],"number"],FPDFCatalog_IsTagged:[["number"],"boolean"],FPDFCatalog_SetLanguage:[["number","string"],"boolean"],FPDFClipPath_CountPaths:[["number"],"number"],FPDFClipPath_CountPathSegments:[["number","number"],"number"],FPDFClipPath_GetPathSegment:[["number","number","number"],"number"],FPDFDest_GetDestPageIndex:[["number","number"],"number"],FPDFDest_GetLocationInPage:[["number","number","number","number","number","number","number"],"boolean"],FPDFDest_GetView:[["number","number","number"],"number"],FPDFDoc_AddAttachment:[["number","number"],"number"],FPDFDoc_CloseJavaScriptAction:[["number"],null],FPDFDoc_DeleteAttachment:[["number","number"],"boolean"],FPDFDOC_ExitFormFillEnvironment:[["number"],null],FPDFDoc_GetAttachment:[["number","number"],"number"],FPDFDoc_GetAttachmentCount:[["number"],"number"],FPDFDoc_GetJavaScriptAction:[["number","number"],"number"],FPDFDoc_GetJavaScriptActionCount:[["number"],"number"],FPDFDoc_GetPageMode:[["number"],"number"],FPDFDOC_InitFormFillEnvironment:[["number","number"],"number"],FPDFFont_Close:[["number"],null],FPDFFont_GetAscent:[["number","number","number"],"boolean"],FPDFFont_GetBaseFontName:[["number","number","number"],"number"],FPDFFont_GetDescent:[["number","number","number"],"boolean"],FPDFFont_GetFamilyName:[["number","number","number"],"number"],FPDFFont_GetFlags:[["number"],"number"],FPDFFont_GetFontData:[["number","number","number","number"],"boolean"],FPDFFont_GetGlyphPath:[["number","number","number"],"number"],FPDFFont_GetGlyphWidth:[["number","number","number","number"],"boolean"],FPDFFont_GetIsEmbedded:[["number"],"number"],FPDFFont_GetItalicAngle:[["number","number"],"boolean"],FPDFFont_GetWeight:[["number"],"number"],FPDFFormObj_CountObjects:[["number"],"number"],FPDFFormObj_GetObject:[["number","number"],"number"],FPDFFormObj_RemoveObject:[["number","number"],"boolean"],FPDFGlyphPath_CountGlyphSegments:[["number"],"number"],FPDFGlyphPath_GetGlyphPathSegment:[["number","number"],"number"],FPDFImageObj_GetBitmap:[["number"],"number"],FPDFImageObj_GetIccProfileDataDecoded:[["number","number","number","number","number"],"boolean"],FPDFImageObj_GetImageDataDecoded:[["number","number","number"],"number"],FPDFImageObj_GetImageDataRaw:[["number","number","number"],"number"],FPDFImageObj_GetImageFilter:[["number","number","number","number"],"number"],FPDFImageObj_GetImageFilterCount:[["number"],"number"],FPDFImageObj_GetImageMetadata:[["number","number","number"],"boolean"],FPDFImageObj_GetImagePixelSize:[["number","number","number"],"boolean"],FPDFImageObj_GetRenderedBitmap:[["number","number","number"],"number"],FPDFImageObj_LoadJpegFile:[["number","number","number","number"],"boolean"],FPDFImageObj_LoadJpegFileInline:[["number","number","number","number"],"boolean"],FPDFImageObj_SetBitmap:[["number","number","number","number"],"boolean"],FPDFImageObj_SetMatrix:[["number","number","number","number","number","number","number"],"boolean"],FPDFJavaScriptAction_GetName:[["number","number","number"],"number"],FPDFJavaScriptAction_GetScript:[["number","number","number"],"number"],FPDFLink_CloseWebLinks:[["number"],null],FPDFLink_CountQuadPoints:[["number"],"number"],FPDFLink_CountRects:[["number","number"],"number"],FPDFLink_CountWebLinks:[["number"],"number"],FPDFLink_Enumerate:[["number","number","number"],"boolean"],FPDFLink_GetAction:[["number"],"number"],FPDFLink_GetAnnot:[["number","number"],"number"],FPDFLink_GetAnnotRect:[["number","number"],"boolean"],FPDFLink_GetDest:[["number","number"],"number"],FPDFLink_GetLinkAtPoint:[["number","number","number"],"number"],FPDFLink_GetLinkZOrderAtPoint:[["number","number","number"],"number"],FPDFLink_GetQuadPoints:[["number","number","number"],"boolean"],FPDFLink_GetRect:[["number","number","number","number","number","number","number"],"boolean"],FPDFLink_GetTextRange:[["number","number","number","number"],"boolean"],FPDFLink_GetURL:[["number","number","number","number"],"number"],FPDFLink_LoadWebLinks:[["number"],"number"],FPDFPage_CloseAnnot:[["number"],null],FPDFPage_CountObjects:[["number"],"number"],FPDFPage_CreateAnnot:[["number","number"],"number"],FPDFPage_Delete:[["number","number"],null],FPDFPage_Flatten:[["number","number"],"number"],FPDFPage_FormFieldZOrderAtPoint:[["number","number","number","number"],"number"],FPDFPage_GenerateContent:[["number"],"boolean"],FPDFPage_GetAnnot:[["number","number"],"number"],FPDFPage_GetAnnotCount:[["number"],"number"],FPDFPage_GetAnnotIndex:[["number","number"],"number"],FPDFPage_GetArtBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetBleedBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetCropBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetDecodedThumbnailData:[["number","number","number"],"number"],FPDFPage_GetMediaBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetObject:[["number","number"],"number"],FPDFPage_GetRawThumbnailData:[["number","number","number"],"number"],FPDFPage_GetRotation:[["number"],"number"],FPDFPage_GetThumbnailAsBitmap:[["number"],"number"],FPDFPage_GetTrimBox:[["number","number","number","number","number"],"boolean"],FPDFPage_HasFormFieldAtPoint:[["number","number","number","number"],"number"],FPDFPage_HasTransparency:[["number"],"boolean"],FPDFPage_InsertClipPath:[["number","number"],null],FPDFPage_InsertObject:[["number","number"],null],FPDFPage_InsertObjectAtIndex:[["number","number","number"],"boolean"],FPDFPage_New:[["number","number","number","number"],"number"],FPDFPage_RemoveAnnot:[["number","number"],"boolean"],FPDFPage_RemoveObject:[["number","number"],"boolean"],FPDFPage_SetArtBox:[["number","number","number","number","number"],null],FPDFPage_SetBleedBox:[["number","number","number","number","number"],null],FPDFPage_SetCropBox:[["number","number","number","number","number"],null],FPDFPage_SetMediaBox:[["number","number","number","number","number"],null],FPDFPage_SetRotation:[["number","number"],null],FPDFPage_SetTrimBox:[["number","number","number","number","number"],null],FPDFPage_TransformAnnots:[["number","number","number","number","number","number","number"],null],FPDFPage_TransFormWithClip:[["number","number","number"],"boolean"],FPDFPageObj_AddMark:[["number","string"],"number"],FPDFPageObj_CountMarks:[["number"],"number"],FPDFPageObj_CreateNewPath:[["number","number"],"number"],FPDFPageObj_CreateNewRect:[["number","number","number","number"],"number"],FPDFPageObj_CreateTextObj:[["number","number","number"],"number"],FPDFPageObj_Destroy:[["number"],null],FPDFPageObj_GetBounds:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetClipPath:[["number"],"number"],FPDFPageObj_GetDashArray:[["number","number","number"],"boolean"],FPDFPageObj_GetDashCount:[["number"],"number"],FPDFPageObj_GetDashPhase:[["number","number"],"boolean"],FPDFPageObj_GetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetIsActive:[["number","number"],"boolean"],FPDFPageObj_GetLineCap:[["number"],"number"],FPDFPageObj_GetLineJoin:[["number"],"number"],FPDFPageObj_GetMark:[["number","number"],"number"],FPDFPageObj_GetMarkedContentID:[["number"],"number"],FPDFPageObj_GetMatrix:[["number","number"],"boolean"],FPDFPageObj_GetRotatedBounds:[["number","number"],"boolean"],FPDFPageObj_GetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_GetType:[["number"],"number"],FPDFPageObj_HasTransparency:[["number"],"boolean"],FPDFPageObj_NewImageObj:[["number"],"number"],FPDFPageObj_NewTextObj:[["number","string","number"],"number"],FPDFPageObj_RemoveMark:[["number","number"],"boolean"],FPDFPageObj_SetBlendMode:[["number","string"],null],FPDFPageObj_SetDashArray:[["number","number","number","number"],"boolean"],FPDFPageObj_SetDashPhase:[["number","number"],"boolean"],FPDFPageObj_SetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetIsActive:[["number","boolean"],"boolean"],FPDFPageObj_SetLineCap:[["number","number"],"boolean"],FPDFPageObj_SetLineJoin:[["number","number"],"boolean"],FPDFPageObj_SetMatrix:[["number","number"],"boolean"],FPDFPageObj_SetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_Transform:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformClipPath:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformF:[["number","number"],"boolean"],FPDFPageObjMark_CountParams:[["number"],"number"],FPDFPageObjMark_GetName:[["number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamBlobValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamIntValue:[["number","string","number"],"boolean"],FPDFPageObjMark_GetParamKey:[["number","number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamStringValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamValueType:[["number","string"],"number"],FPDFPageObjMark_RemoveParam:[["number","number","string"],"boolean"],FPDFPageObjMark_SetBlobParam:[["number","number","number","string","number","number"],"boolean"],FPDFPageObjMark_SetIntParam:[["number","number","number","string","number"],"boolean"],FPDFPageObjMark_SetStringParam:[["number","number","number","string","string"],"boolean"],FPDFPath_BezierTo:[["number","number","number","number","number","number","number"],"boolean"],FPDFPath_Close:[["number"],"boolean"],FPDFPath_CountSegments:[["number"],"number"],FPDFPath_GetDrawMode:[["number","number","number"],"boolean"],FPDFPath_GetPathSegment:[["number","number"],"number"],FPDFPath_LineTo:[["number","number","number"],"boolean"],FPDFPath_MoveTo:[["number","number","number"],"boolean"],FPDFPath_SetDrawMode:[["number","number","boolean"],"boolean"],FPDFPathSegment_GetClose:[["number"],"boolean"],FPDFPathSegment_GetPoint:[["number","number","number"],"boolean"],FPDFPathSegment_GetType:[["number"],"number"],FPDFSignatureObj_GetByteRange:[["number","number","number"],"number"],FPDFSignatureObj_GetContents:[["number","number","number"],"number"],FPDFSignatureObj_GetDocMDPPermission:[["number"],"number"],FPDFSignatureObj_GetReason:[["number","number","number"],"number"],FPDFSignatureObj_GetSubFilter:[["number","number","number"],"number"],FPDFSignatureObj_GetTime:[["number","number","number"],"number"],FPDFText_ClosePage:[["number"],null],FPDFText_CountChars:[["number"],"number"],FPDFText_CountRects:[["number","number","number"],"number"],FPDFText_FindClose:[["number"],null],FPDFText_FindNext:[["number"],"boolean"],FPDFText_FindPrev:[["number"],"boolean"],FPDFText_FindStart:[["number","number","number","number"],"number"],FPDFText_GetBoundedText:[["number","number","number","number","number","number","number"],"number"],FPDFText_GetCharAngle:[["number","number"],"number"],FPDFText_GetCharBox:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetCharIndexAtPos:[["number","number","number","number","number"],"number"],FPDFText_GetCharIndexFromTextIndex:[["number","number"],"number"],FPDFText_GetCharOrigin:[["number","number","number","number"],"boolean"],FPDFText_GetFillColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetFontInfo:[["number","number","number","number","number"],"number"],FPDFText_GetFontSize:[["number","number"],"number"],FPDFText_GetFontWeight:[["number","number"],"number"],FPDFText_GetLooseCharBox:[["number","number","number"],"boolean"],FPDFText_GetMatrix:[["number","number","number"],"boolean"],FPDFText_GetRect:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetSchCount:[["number"],"number"],FPDFText_GetSchResultIndex:[["number"],"number"],FPDFText_GetStrokeColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetText:[["number","number","number","number"],"number"],FPDFText_GetTextIndexFromCharIndex:[["number","number"],"number"],FPDFText_GetTextObject:[["number","number"],"number"],FPDFText_GetUnicode:[["number","number"],"number"],FPDFText_HasUnicodeMapError:[["number","number"],"number"],FPDFText_IsGenerated:[["number","number"],"number"],FPDFText_IsHyphen:[["number","number"],"number"],FPDFText_LoadCidType2Font:[["number","number","number","string","number","number"],"number"],FPDFText_LoadFont:[["number","number","number","number","boolean"],"number"],FPDFText_LoadPage:[["number"],"number"],FPDFText_LoadStandardFont:[["number","string"],"number"],FPDFText_SetCharcodes:[["number","number","number"],"boolean"],FPDFText_SetText:[["number","number"],"boolean"],FPDFTextObj_GetFont:[["number"],"number"],FPDFTextObj_GetFontSize:[["number","number"],"boolean"],FPDFTextObj_GetRenderedBitmap:[["number","number","number","number"],"number"],FPDFTextObj_GetText:[["number","number","number","number"],"number"],FPDFTextObj_GetTextRenderMode:[["number"],"number"],FPDFTextObj_SetTextRenderMode:[["number","number"],"boolean"],PDFiumExt_CloseFileWriter:[["number"],null],PDFiumExt_CloseFormFillInfo:[["number"],null],PDFiumExt_ExitFormFillEnvironment:[["number"],null],PDFiumExt_GetFileWriterData:[["number","number","number"],"number"],PDFiumExt_GetFileWriterSize:[["number"],"number"],PDFiumExt_Init:[[],null],PDFiumExt_InitFormFillEnvironment:[["number","number"],"number"],PDFiumExt_OpenFileWriter:[[],"number"],PDFiumExt_OpenFormFillInfo:[[],"number"],PDFiumExt_SaveAsCopy:[["number","number"],"number"]};async function kn(z){return(async function(r){const n={pdfium:r};for(const o in yt){const e=o,s=yt[e][0],F=yt[e][1];n[e]=r.cwrap(o,F,s)}return n})(await On(z))}function se(z,r,n,o=100){let e=z.wasmExports.malloc(o);for(let d=0;d<o;d++)z.HEAP8[e+d]=0;const s=r(e,o);let F;if(s>o){z.wasmExports.free(e),e=z.wasmExports.malloc(s);for(let d=0;d<s;d++)z.HEAP8[e+d]=0;r(e,s),F=n(e)}else F=n(e);return z.wasmExports.free(e),F}function Mt(z,r){const n=r(0,0),o=z.wasmExports.malloc(n);r(o,n);const e=new ArrayBuffer(n),s=new DataView(e);for(let F=0;F<n;F++)s.setInt8(F,z.getValue(o+F,"i8"));return z.wasmExports.free(o),e}const wn=new Set(["Title","Author","Subject","Keywords","Producer","Creator","CreationDate","ModDate","Trapped"]);function Rn(z){if(!z||z.length>127||wn.has(z)||z[0]==="/")return!1;for(let r=0;r<z.length;r++){const n=z.charCodeAt(r);if(n<32||n>126)return!1}return!0}const In={pageTtl:5e3,maxPagesPerDocument:10};class Bn{constructor(r,n,o={}){this.pdfium=r,this.memoryManager=n,this.docs=new Map,this.config={...In,...o}}setDocument(r,n,o){let e=this.docs.get(r);e||(e=new jn(n,o,this.pdfium,this.memoryManager,this.config),this.docs.set(r,e))}getContext(r){return this.docs.get(r)}closeDocument(r){const n=this.docs.get(r);return!!n&&(n.dispose(),this.docs.delete(r),!0)}closeAllDocuments(){for(const r of this.docs.values())r.dispose();this.docs.clear()}updateConfig(r){Object.assign(this.config,r);for(const n of this.docs.values())n.updateConfig(this.config)}getCacheStats(){const r={};let n=0;for(const[o,e]of this.docs.entries()){const s=e.getCacheSize();r[o]=s,n+=s}return{documents:this.docs.size,totalPages:n,pagesByDocument:r}}}class jn{constructor(r,n,o,e,s){this.filePtr=r,this.docPtr=n,this.memoryManager=e,this.pageCache=new Ln(o,n,s)}acquirePage(r){return this.pageCache.acquire(r)}borrowPage(r,n){return this.pageCache.borrowPage(r,n)}updateConfig(r){this.pageCache.updateConfig(r)}getCacheSize(){return this.pageCache.size()}dispose(){this.pageCache.forceReleaseAll(),this.pageCache.pdf.FPDF_CloseDocument(this.docPtr),this.memoryManager.free(this.filePtr)}}class Ln{constructor(r,n,o){this.pdf=r,this.docPtr=n,this.cache=new Map,this.accessOrder=[],this.config=o}acquire(r){let n=this.cache.get(r);if(!n){this.evictIfNeeded();const o=this.pdf.FPDF_LoadPage(this.docPtr,r);n=new Nn(this.pdf,this.docPtr,r,o,this.config.pageTtl,()=>{this.cache.delete(r),this.removeFromAccessOrder(r)}),this.cache.set(r,n)}return this.updateAccessOrder(r),n.clearExpiryTimer(),n.bumpRefCount(),n}borrowPage(r,n){const o=this.cache.has(r),e=this.acquire(r);try{return n(e)}finally{o?e.release():e.disposeImmediate()}}forceReleaseAll(){for(const r of this.cache.values())r.disposeImmediate();this.cache.clear(),this.accessOrder.length=0}updateConfig(r){this.config=r;for(const n of this.cache.values())n.updateTtl(r.pageTtl);this.evictIfNeeded()}size(){return this.cache.size}evictIfNeeded(){for(;this.cache.size>=this.config.maxPagesPerDocument;){const r=this.accessOrder[0];if(r===void 0)break;{const n=this.cache.get(r);if(n){if(n.getRefCount()!==0)break;n.disposeImmediate()}else this.removeFromAccessOrder(r)}}}updateAccessOrder(r){this.removeFromAccessOrder(r),this.accessOrder.push(r)}removeFromAccessOrder(r){const n=this.accessOrder.indexOf(r);n>-1&&this.accessOrder.splice(n,1)}}class Nn{constructor(r,n,o,e,s,F){this.pdf=r,this.docPtr=n,this.pageIdx=o,this.pagePtr=e,this.onFinalDispose=F,this.refCount=0,this.disposed=!1,this.ttl=s}bumpRefCount(){if(this.disposed)throw new Error("Context already disposed");this.refCount++}getRefCount(){return this.refCount}clearExpiryTimer(){this.expiryTimer&&(clearTimeout(this.expiryTimer),this.expiryTimer=void 0)}updateTtl(r){this.ttl=r,this.expiryTimer&&this.refCount===0&&(this.clearExpiryTimer(),this.expiryTimer=setTimeout(()=>this.disposeImmediate(),this.ttl))}release(){this.disposed||(this.refCount--,this.refCount===0&&(this.expiryTimer=setTimeout(()=>this.disposeImmediate(),this.ttl)))}disposeImmediate(){this.disposed||(this.disposed=!0,this.clearExpiryTimer(),this.textPagePtr!==void 0&&this.pdf.FPDFText_ClosePage(this.textPagePtr),this.formHandle!==void 0&&(this.pdf.FORM_OnBeforeClosePage(this.pagePtr,this.formHandle),this.pdf.PDFiumExt_ExitFormFillEnvironment(this.formHandle)),this.formInfoPtr!==void 0&&this.pdf.PDFiumExt_CloseFormFillInfo(this.formInfoPtr),this.pdf.FPDF_ClosePage(this.pagePtr),this.onFinalDispose())}getTextPage(){return this.ensureAlive(),this.textPagePtr===void 0&&(this.textPagePtr=this.pdf.FPDFText_LoadPage(this.pagePtr)),this.textPagePtr}getFormHandle(){return this.ensureAlive(),this.formHandle===void 0&&(this.formInfoPtr=this.pdf.PDFiumExt_OpenFormFillInfo(),this.formHandle=this.pdf.PDFiumExt_InitFormFillEnvironment(this.docPtr,this.formInfoPtr),this.pdf.FORM_OnAfterLoadPage(this.pagePtr,this.formHandle)),this.formHandle}withAnnotation(r,n){this.ensureAlive();const o=this.pdf.FPDFPage_GetAnnot(this.pagePtr,r);try{return n(o)}finally{this.pdf.FPDFPage_CloseAnnot(o)}}ensureAlive(){if(this.disposed)throw new Error("PageContext already disposed")}}const an={MAX_TOTAL_MEMORY:2147483648},Gt="PDFiumEngine",St="MemoryManager";class Vn{constructor(r,n){this.pdfiumModule=r,this.logger=n,this.allocations=new Map,this.totalAllocated=0}malloc(r){if(this.totalAllocated+r>an.MAX_TOTAL_MEMORY)throw new Error(`Total memory usage would exceed limit: ${this.totalAllocated+r} > ${an.MAX_TOTAL_MEMORY}`);const n=this.pdfiumModule.pdfium.wasmExports.malloc(r);if(!n)throw new Error(`Failed to allocate ${r} bytes`);const o={ptr:n,size:r,timestamp:Date.now(),stack:this.logger.isEnabled("debug")?new Error().stack:void 0};return this.allocations.set(n,o),this.totalAllocated+=r,n}free(r){const n=this.allocations.get(r);n?(this.totalAllocated-=n.size,this.allocations.delete(r)):this.logger.warn(Gt,St,`Freeing untracked pointer: ${r}`),this.pdfiumModule.pdfium.wasmExports.free(r)}getStats(){return{totalAllocated:this.totalAllocated,allocationCount:this.allocations.size,allocations:this.logger.isEnabled("debug")?Array.from(this.allocations.values()):[]}}checkLeaks(){if(this.allocations.size>0){this.logger.warn(Gt,St,`Potential memory leak: ${this.allocations.size} unfreed allocations`);for(const[r,n]of this.allocations)this.logger.warn(Gt,St,`  - ${r}: ${n.size} bytes`,n.stack)}}}const re="pdfium",oe="font-fallback";class Un{constructor(r,n=new sn){this.fontHandles=new Map,this.fontCache=new Map,this.nextHandleId=1,this.module=null,this.enabled=!1,this.structPtr=0,this.releaseFnPtr=0,this.enumFontsFnPtr=0,this.mapFontFnPtr=0,this.getFontFnPtr=0,this.getFontDataFnPtr=0,this.getFaceNameFnPtr=0,this.getFontCharsetFnPtr=0,this.deleteFontFnPtr=0,this.fontConfig=r,this.logger=n}initialize(r){if(this.enabled)return void this.logger.warn(re,oe,"Font fallback already initialized");this.module=r;const n=r.pdfium;if(typeof n.addFunction=="function")try{if(this.structPtr=n.wasmExports.malloc(36),!this.structPtr)throw new Error("Failed to allocate FPDF_SYSFONTINFO struct");for(let o=0;o<36;o++)n.setValue(this.structPtr+o,0,"i8");this.releaseFnPtr=n.addFunction(o=>{},"vi"),this.enumFontsFnPtr=n.addFunction((o,e)=>{},"vii"),this.mapFontFnPtr=n.addFunction((o,e,s,F,d,_,c)=>{const f=_?n.UTF8ToString(_):"",p=this.mapFont(e,s,F,d,f);return c&&n.setValue(c,0,"i32"),p},"iiiiiiii"),this.getFontFnPtr=n.addFunction((o,e)=>{const s=e?n.UTF8ToString(e):"";return this.mapFont(400,0,0,0,s)},"iii"),this.getFontDataFnPtr=n.addFunction((o,e,s,F,d)=>this.getFontData(e,s,F,d),"iiiiii"),this.getFaceNameFnPtr=n.addFunction((o,e,s,F)=>0,"iiiii"),this.getFontCharsetFnPtr=n.addFunction((o,e)=>{const s=this.fontHandles.get(e);return s?.charset??0},"iii"),this.deleteFontFnPtr=n.addFunction((o,e)=>{this.deleteFont(e)},"vii"),n.setValue(this.structPtr+0,1,"i32"),n.setValue(this.structPtr+4,this.releaseFnPtr,"i32"),n.setValue(this.structPtr+8,this.enumFontsFnPtr,"i32"),n.setValue(this.structPtr+12,this.mapFontFnPtr,"i32"),n.setValue(this.structPtr+16,this.getFontFnPtr,"i32"),n.setValue(this.structPtr+20,this.getFontDataFnPtr,"i32"),n.setValue(this.structPtr+24,this.getFaceNameFnPtr,"i32"),n.setValue(this.structPtr+28,this.getFontCharsetFnPtr,"i32"),n.setValue(this.structPtr+32,this.deleteFontFnPtr,"i32"),r.FPDF_SetSystemFontInfo(this.structPtr),this.enabled=!0,this.logger.info(re,oe,"Font fallback system initialized (pure TypeScript)",Object.keys(this.fontConfig.fonts))}catch(o){throw this.logger.error(re,oe,"Failed to initialize font fallback",o),this.cleanup(),o}else this.logger.error(re,oe,"addFunction not available. Make sure WASM is compiled with -sALLOW_TABLE_GROWTH")}disable(){this.enabled&&this.module&&(this.module.FPDF_SetSystemFontInfo(0),this.cleanup(),this.enabled=!1,this.logger.debug(re,oe,"Font fallback system disabled"))}cleanup(){if(!this.module)return;const r=this.module.pdfium;this.structPtr&&(r.wasmExports.free(this.structPtr),this.structPtr=0);const n=o=>{if(o&&typeof r.removeFunction=="function")try{r.removeFunction(o)}catch{}};n(this.releaseFnPtr),n(this.enumFontsFnPtr),n(this.mapFontFnPtr),n(this.getFontFnPtr),n(this.getFontDataFnPtr),n(this.getFaceNameFnPtr),n(this.getFontCharsetFnPtr),n(this.deleteFontFnPtr),this.releaseFnPtr=0,this.enumFontsFnPtr=0,this.mapFontFnPtr=0,this.getFontFnPtr=0,this.getFontDataFnPtr=0,this.getFaceNameFnPtr=0,this.getFontCharsetFnPtr=0,this.deleteFontFnPtr=0}isEnabled(){return this.enabled}getStats(){return{handleCount:this.fontHandles.size,cacheSize:this.fontCache.size,cachedUrls:Array.from(this.fontCache.keys())}}async preloadFonts(r){const n=r.map(e=>this.getFontUrlForCharset(e)).filter(e=>e!==null),o=[...new Set(n)];await Promise.all(o.map(async e=>{if(!this.fontCache.has(e))try{const s=await this.fetchFontAsync(e);s&&(this.fontCache.set(e,s),this.logger.debug(re,oe,`Pre-loaded font: ${e}`))}catch(s){this.logger.warn(re,oe,`Failed to pre-load font: ${e}`,s)}}))}mapFont(r,n,o,e,s){const F=n!==0;this.logger.debug(re,oe,"MapFont called",{weight:r,italic:F,charset:o,pitchFamily:e,face:s});const d=this.findBestFontMatch(o,r,F);if(!d)return this.logger.debug(re,oe,`No font configured for charset ${o}`),0;const _={id:this.nextHandleId++,charset:o,weight:r,italic:F,url:d.url,data:null};return this.fontHandles.set(_.id,_),this.logger.debug(re,oe,`Created font handle ${_.id} for ${d.url} (requested: weight=${r}, italic=${F}, matched: weight=${d.matchedWeight}, italic=${d.matchedItalic})`),_.id}getFontData(r,n,o,e){const s=this.fontHandles.get(r);if(!s)return this.logger.warn(re,oe,`Unknown font handle: ${r}`),0;if(s.data||(this.fontCache.has(s.url)?s.data=this.fontCache.get(s.url):(s.data=this.fetchFontSync(s.url),s.data&&this.fontCache.set(s.url,s.data))),!s.data)return this.logger.warn(re,oe,`Failed to load font: ${s.url}`),0;const F=s.data;return n!==0?(this.logger.debug(re,oe,`Table ${n} requested - returning 0 to request whole file`),0):(o===0||e<F.length||this.module&&(this.module.pdfium.HEAPU8.set(F,o),this.logger.debug(re,oe,`Copied ${F.length} bytes to buffer for handle ${r}`)),F.length)}deleteFont(r){this.fontHandles.get(r)&&(this.logger.debug(re,oe,`Deleting font handle ${r}`),this.fontHandles.delete(r))}findBestFontMatch(r,n,o){const{fonts:e,defaultFont:s,baseUrl:F}=this.fontConfig,d=e[r]??s;if(!d)return null;const _=this.normalizeToVariants(d);if(_.length===0)return null;const c=this.selectBestVariant(_,n,o);let f=c.url;return!F||f.startsWith("http://")||f.startsWith("https://")||f.startsWith("/")||(f=`${F}/${f}`),{url:f,matchedWeight:c.weight??400,matchedItalic:c.italic??!1}}normalizeToVariants(r){return typeof r=="string"?[{url:r,weight:400,italic:!1}]:Array.isArray(r)?r.map(n=>({url:n.url,weight:n.weight??400,italic:n.italic??!1})):[{url:r.url,weight:r.weight??400,italic:r.italic??!1}]}selectBestVariant(r,n,o){if(r.length===1)return r[0];const e=r.filter(_=>(_.italic??!1)===o),s=e.length>0?e:r;let F=s[0],d=Math.abs((F.weight??400)-n);for(const _ of s){const c=_.weight??400,f=Math.abs(c-n);if(f<d)F=_,d=f;else if(f===d){const p=F.weight??400;n>=500?c>p&&(F=_):c<p&&(F=_)}}return F}getFontUrlForCharset(r){const n=this.findBestFontMatch(r,400,!1);return n?.url??null}fetchFontSync(r){if(this.logger.debug(re,oe,`Fetching font synchronously: ${r}`),this.fontConfig.fontLoader)try{const n=this.fontConfig.fontLoader(r);return n?this.logger.info(re,oe,`Loaded font via custom loader: ${r} (${n.length} bytes)`):this.logger.warn(re,oe,`Custom font loader returned null for: ${r}`),n}catch(n){return this.logger.error(re,oe,`Error in custom font loader: ${r}`,n),null}try{const n=new XMLHttpRequest;if(n.open("GET",r,!1),n.responseType="arraybuffer",n.send(),n.status===200){const o=new Uint8Array(n.response);return this.logger.info(re,oe,`Loaded font: ${r} (${o.length} bytes)`),o}return this.logger.error(re,oe,`Failed to load font: ${r} (HTTP ${n.status})`),null}catch(n){return this.logger.error(re,oe,`Error fetching font: ${r}`,n),null}}async fetchFontAsync(r){if(this.fontConfig.fontLoader)try{return this.fontConfig.fontLoader(r)}catch{return null}try{const n=await fetch(r);if(n.ok){const o=await n.arrayBuffer();return new Uint8Array(o)}return null}catch{return null}}}const h="PDFiumEngine",D="Engine";class $n{constructor(r,n={}){this.pdfiumModule=r,this.memoryLeakCheckInterval=null,this.fontFallbackManager=null;const{logger:o=new sn,fontFallback:e}=n;this.logger=o,this.memoryManager=new Vn(this.pdfiumModule,this.logger),this.cache=new Bn(this.pdfiumModule,this.memoryManager),this.logger.isEnabled("debug")&&(this.memoryLeakCheckInterval=setInterval(()=>{this.memoryManager.checkLeaks()},1e4)),this.logger.debug(h,D,"initialize"),this.logger.perf(h,D,"Initialize","Begin","General"),this.pdfiumModule.PDFiumExt_Init(),this.logger.perf(h,D,"Initialize","End","General"),e&&(this.fontFallbackManager=new Un(e,this.logger),this.fontFallbackManager.initialize(this.pdfiumModule),this.logger.info(h,D,"Font fallback system enabled"))}destroy(){return this.logger.debug(h,D,"destroy"),this.logger.perf(h,D,"Destroy","Begin","General"),this.fontFallbackManager&&(this.fontFallbackManager.disable(),this.fontFallbackManager=null),this.pdfiumModule.FPDF_DestroyLibrary(),this.memoryLeakCheckInterval&&(clearInterval(this.memoryLeakCheckInterval),this.memoryLeakCheckInterval=null),this.logger.perf(h,D,"Destroy","End","General"),y.resolve(!0)}getFontFallbackManager(){return this.fontFallbackManager}withWString(r,n){const o=2*(r.length+1),e=this.memoryManager.malloc(o);try{return this.pdfiumModule.pdfium.stringToUTF16(r,e,o),n(e)}finally{this.memoryManager.free(e)}}withFloatArray(r,n){const o=r??[],e=4*o.length,s=e?this.memoryManager.malloc(e):0;try{if(e)for(let F=0;F<o.length;F++)this.pdfiumModule.pdfium.setValue(s+4*F,o[F],"float");return n(s,o.length)}finally{e&&this.memoryManager.free(s)}}openDocumentBuffer(r,n){this.logger.debug(h,D,"openDocumentBuffer",r,n),this.logger.perf(h,D,"OpenDocumentBuffer","Begin",r.id);const o=new Uint8Array(r.content),e=o.length,s=this.memoryManager.malloc(e);this.pdfiumModule.pdfium.HEAPU8.set(o,s);const F=this.pdfiumModule.FPDF_LoadMemDocument(s,e,n?.password??"");if(!F){const G=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(h,D,`FPDF_LoadMemDocument failed with ${G}`),this.memoryManager.free(s),this.logger.perf(h,D,"OpenDocumentBuffer","End",r.id),y.reject({code:G,message:"FPDF_LoadMemDocument failed"})}const d=this.pdfiumModule.FPDF_GetPageCount(F),_=[],c=this.memoryManager.malloc(8);for(let G=0;G<d;G++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(F,G,c)){const L=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(h,D,`FPDF_GetPageSizeByIndexF failed with ${L}`),this.memoryManager.free(c),this.pdfiumModule.FPDF_CloseDocument(F),this.memoryManager.free(s),this.logger.perf(h,D,"OpenDocumentBuffer","End",r.id),y.reject({code:L,message:"FPDF_GetPageSizeByIndexF failed"})}const N=this.pdfiumModule.EPDF_GetPageRotationByIndex(F,G),B={index:G,size:{width:this.pdfiumModule.pdfium.getValue(c,"float"),height:this.pdfiumModule.pdfium.getValue(c+4,"float")},rotation:N};_.push(B)}this.memoryManager.free(c);const f=this.pdfiumModule.EPDF_IsEncrypted(F),p=this.pdfiumModule.EPDF_IsOwnerUnlocked(F),M=this.pdfiumModule.FPDF_GetDocPermissions(F),E={id:r.id,pageCount:d,pages:_,isEncrypted:f,isOwnerUnlocked:p,permissions:M};return this.cache.setDocument(r.id,s,F),this.logger.perf(h,D,"OpenDocumentBuffer","End",r.id),y.resolve(E)}getMetadata(r){this.logger.debug(h,D,"getMetadata",r),this.logger.perf(h,D,"GetMetadata","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"GetMetadata","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.readMetaText(n.docPtr,"CreationDate"),e=this.readMetaText(n.docPtr,"ModDate"),s={title:this.readMetaText(n.docPtr,"Title"),author:this.readMetaText(n.docPtr,"Author"),subject:this.readMetaText(n.docPtr,"Subject"),keywords:this.readMetaText(n.docPtr,"Keywords"),producer:this.readMetaText(n.docPtr,"Producer"),creator:this.readMetaText(n.docPtr,"Creator"),creationDate:o?mt(o)??null:null,modificationDate:e?mt(e)??null:null,trapped:this.getMetaTrapped(n.docPtr),custom:this.readAllMeta(n.docPtr,!0)};return this.logger.perf(h,D,"GetMetadata","End",r.id),y.resolve(s)}setMetadata(r,n){this.logger.debug(h,D,"setMetadata",r,n),this.logger.perf(h,D,"SetMetadata","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"SetMetadata","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=[["title","Title"],["author","Author"],["subject","Subject"],["keywords","Keywords"],["producer","Producer"],["creator","Creator"]];let s=!0;for(const[d,_]of e){const c=n[d];if(c===void 0)continue;const f=c===null?null:c;this.setMetaText(o.docPtr,_,f)||(s=!1)}const F=(d,_)=>{const c=n[d];if(c===void 0)return;if(c===null)return void(this.setMetaText(o.docPtr,_,null)||(s=!1));const f=At(c);this.setMetaText(o.docPtr,_,f)||(s=!1)};if(F("creationDate","CreationDate"),F("modificationDate","ModDate"),n.trapped!==void 0&&(this.setMetaTrapped(o.docPtr,n.trapped??null)||(s=!1)),n.custom!==void 0)for(const[d,_]of Object.entries(n.custom))Rn(d)?this.setMetaText(o.docPtr,d,_??null)||(s=!1):this.logger.warn(h,D,"Invalid custom metadata key skipped",d);return this.logger.perf(h,D,"SetMetadata","End",r.id),s?y.resolve(!0):y.reject({code:T.Unknown,message:"one or more metadata fields could not be written"})}getDocPermissions(r){this.logger.debug(h,D,"getDocPermissions",r),this.logger.perf(h,D,"getDocPermissions","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"getDocPermissions","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.FPDF_GetDocPermissions(n.docPtr);return y.resolve(o)}getDocUserPermissions(r){this.logger.debug(h,D,"getDocUserPermissions",r),this.logger.perf(h,D,"getDocUserPermissions","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"getDocUserPermissions","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.FPDF_GetDocUserPermissions(n.docPtr);return y.resolve(o)}getSignatures(r){this.logger.debug(h,D,"getSignatures",r),this.logger.perf(h,D,"GetSignatures","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"GetSignatures","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=[],e=this.pdfiumModule.FPDF_GetSignatureCount(n.docPtr);for(let s=0;s<e;s++){const F=this.pdfiumModule.FPDF_GetSignatureObject(n.docPtr,s),d=Mt(this.pdfiumModule.pdfium,(E,G)=>this.pdfiumModule.FPDFSignatureObj_GetContents(F,E,G)),_=Mt(this.pdfiumModule.pdfium,(E,G)=>4*this.pdfiumModule.FPDFSignatureObj_GetByteRange(F,E,G)),c=Mt(this.pdfiumModule.pdfium,(E,G)=>this.pdfiumModule.FPDFSignatureObj_GetSubFilter(F,E,G)),f=se(this.pdfiumModule.pdfium,(E,G)=>this.pdfiumModule.FPDFSignatureObj_GetReason(F,E,G),this.pdfiumModule.pdfium.UTF16ToString),p=se(this.pdfiumModule.pdfium,(E,G)=>this.pdfiumModule.FPDFSignatureObj_GetTime(F,E,G),this.pdfiumModule.pdfium.UTF8ToString),M=this.pdfiumModule.FPDFSignatureObj_GetDocMDPPermission(F);o.push({contents:d,byteRange:_,subFilter:c,reason:f,time:p,docMDP:M})}return this.logger.perf(h,D,"GetSignatures","End",r.id),y.resolve(o)}getBookmarks(r){this.logger.debug(h,D,"getBookmarks",r),this.logger.perf(h,D,"GetBookmarks","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"getBookmarks","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.readPdfBookmarks(n.docPtr,0);return this.logger.perf(h,D,"GetBookmarks","End",r.id),y.resolve({bookmarks:o})}setBookmarks(r,n){this.logger.debug(h,D,"setBookmarks",r,n),this.logger.perf(h,D,"SetBookmarks","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"SetBookmarks","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});if(!this.pdfiumModule.EPDFBookmark_Clear(o.docPtr))return this.logger.perf(h,D,"SetBookmarks","End",r.id),y.reject({code:T.Unknown,message:"failed to clear existing bookmarks"});const e=(F,d)=>{var _;for(const c of d){const f=this.withWString(c.title??"",p=>this.pdfiumModule.EPDFBookmark_AppendChild(o.docPtr,F,p));if(!f||c.target&&!this.applyBookmarkTarget(o.docPtr,f,c.target)||(_=c.children)!=null&&_.length&&!e(f,c.children))return!1}return!0},s=e(0,n);return this.logger.perf(h,D,"SetBookmarks","End",r.id),s?y.resolve(!0):y.reject({code:T.Unknown,message:"failed to build bookmark tree"})}deleteBookmarks(r){this.logger.debug(h,D,"deleteBookmarks",r),this.logger.perf(h,D,"DeleteBookmarks","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"DeleteBookmarks","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.EPDFBookmark_Clear(n.docPtr);return this.logger.perf(h,D,"DeleteBookmarks","End",r.id),o?y.resolve(!0):y.reject({code:T.Unknown,message:"failed to clear bookmarks"})}renderPageRaw(r,n,o){this.logger.debug(h,D,"renderPage",r,n,o),this.logger.perf(h,D,"RenderPage","Begin",`${r.id}-${n.index}`);const e={origin:{x:0,y:0},size:n.size},s=this.renderRectEncoded(r,n,e,o);return this.logger.perf(h,D,"RenderPage","End",`${r.id}-${n.index}`),s}renderPageRect(r,n,o,e){this.logger.debug(h,D,"renderPageRect",r,n,o,e),this.logger.perf(h,D,"RenderPageRect","Begin",`${r.id}-${n.index}`);const s=this.renderRectEncoded(r,n,o,e);return this.logger.perf(h,D,"RenderPageRect","End",`${r.id}-${n.index}`),s}getPageAnnotations(r,n){this.logger.debug(h,D,"getPageAnnotations",r,n),this.logger.perf(h,D,"GetPageAnnotations","Begin",`${r.id}-${n.index}`);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"GetPageAnnotations","End",`${r.id}-${n.index}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=this.readPageAnnotations(o,n);return this.logger.perf(h,D,"GetPageAnnotations","End",`${r.id}-${n.index}`),this.logger.debug(h,D,"GetPageAnnotations",`${r.id}-${n.index}`,e),y.resolve(e)}createPageAnnotation(r,n,o,e){this.logger.debug(h,D,"createPageAnnotation",r,n,o),this.logger.perf(h,D,"CreatePageAnnotation","Begin",`${r.id}-${n.index}`);const s=this.cache.getContext(r.id);if(!s)return this.logger.perf(h,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const F=s.acquirePage(n.index),d=this.pdfiumModule.EPDFPage_CreateAnnot(F.pagePtr,o.type);if(!d)return this.logger.perf(h,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),F.release(),y.reject({code:T.CantCreateAnnot,message:"can not create annotation with specified type"});if(qt(o.id)||(o.id=Qt()),!this.setAnnotString(d,"NM",o.id))return this.pdfiumModule.FPDFPage_CloseAnnot(d),F.release(),y.reject({code:T.CantSetAnnotString,message:"can not set the name of the annotation"});if(!this.setPageAnnoRect(n,d,o.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(d),F.release(),this.logger.perf(h,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),y.reject({code:T.CantSetAnnotRect,message:"can not set the rect of the annotation"});let _=!1;switch(o.type){case R.INK:_=this.addInkStroke(n,F.pagePtr,d,o);break;case R.STAMP:_=this.addStampContent(s.docPtr,n,F.pagePtr,d,o,e?.imageData);break;case R.TEXT:_=this.addTextContent(n,F.pagePtr,d,o);break;case R.FREETEXT:_=this.addFreeTextContent(n,F.pagePtr,d,o);break;case R.LINE:_=this.addLineContent(n,F.pagePtr,d,o);break;case R.POLYLINE:case R.POLYGON:_=this.addPolyContent(n,F.pagePtr,d,o);break;case R.CIRCLE:case R.SQUARE:_=this.addShapeContent(n,F.pagePtr,d,o);break;case R.UNDERLINE:case R.STRIKEOUT:case R.SQUIGGLY:case R.HIGHLIGHT:_=this.addTextMarkupContent(n,F.pagePtr,d,o);break;case R.LINK:_=this.addLinkContent(s.docPtr,F.pagePtr,d,o)}return _?(o.blendMode!==void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(d,o.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(d),this.pdfiumModule.FPDFPage_GenerateContent(F.pagePtr),this.pdfiumModule.FPDFPage_CloseAnnot(d),F.release(),this.logger.perf(h,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),y.resolve(o.id)):(this.pdfiumModule.FPDFPage_RemoveAnnot(F.pagePtr,d),F.release(),this.logger.perf(h,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),y.reject({code:T.CantSetAnnotContent,message:"can not add content of the annotation"}))}updatePageAnnotation(r,n,o){this.logger.debug(h,D,"updatePageAnnotation",r,n,o),this.logger.perf(h,D,"UpdatePageAnnotation","Begin",`${r.id}-${n.index}`);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(h,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const s=e.acquirePage(n.index),F=this.getAnnotationByName(s.pagePtr,o.id);if(!F)return s.release(),this.logger.perf(h,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),y.reject({code:T.NotFound,message:"annotation not found"});if(!this.setPageAnnoRect(n,F,o.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(F),s.release(),this.logger.perf(h,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),y.reject({code:T.CantSetAnnotRect,message:"failed to move annotation"});let d=!1;switch(o.type){case R.INK:if(!this.pdfiumModule.FPDFAnnot_RemoveInkList(F))break;d=this.addInkStroke(n,s.pagePtr,F,o);break;case R.STAMP:d=this.addStampContent(e.docPtr,n,s.pagePtr,F,o);break;case R.TEXT:d=this.addTextContent(n,s.pagePtr,F,o);break;case R.FREETEXT:d=this.addFreeTextContent(n,s.pagePtr,F,o);break;case R.CIRCLE:case R.SQUARE:d=this.addShapeContent(n,s.pagePtr,F,o);break;case R.LINE:d=this.addLineContent(n,s.pagePtr,F,o);break;case R.POLYGON:case R.POLYLINE:d=this.addPolyContent(n,s.pagePtr,F,o);break;case R.HIGHLIGHT:case R.UNDERLINE:case R.STRIKEOUT:case R.SQUIGGLY:d=this.addTextMarkupContent(n,s.pagePtr,F,o);break;case R.LINK:d=this.addLinkContent(e.docPtr,s.pagePtr,F,o);break;default:d=!1}return d&&(o.blendMode!==void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(F,o.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(F),this.pdfiumModule.FPDFPage_GenerateContent(s.pagePtr)),this.pdfiumModule.FPDFPage_CloseAnnot(F),s.release(),this.logger.perf(h,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),d?y.resolve(!0):y.reject({code:T.CantSetAnnotContent,message:"failed to update annotation"})}removePageAnnotation(r,n,o){this.logger.debug(h,D,"removePageAnnotation",r,n,o),this.logger.perf(h,D,"RemovePageAnnotation","Begin",`${r.id}-${n.index}`);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(h,D,"RemovePageAnnotation","End",`${r.id}-${n.index}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const s=e.acquirePage(n.index);let F=!1;return F=this.removeAnnotationByName(s.pagePtr,o.id),F?(F=this.pdfiumModule.FPDFPage_GenerateContent(s.pagePtr),F||this.logger.error(h,D,"FPDFPage_GenerateContent Failed",`${r.id}-${n.index}`)):this.logger.error(h,D,"FPDFPage_RemoveAnnot Failed",`${r.id}-${n.index}`),s.release(),this.logger.perf(h,D,"RemovePageAnnotation","End",`${r.id}-${n.index}`),y.resolve(F)}getPageTextRects(r,n){this.logger.debug(h,D,"getPageTextRects",r,n),this.logger.perf(h,D,"GetPageTextRects","Begin",`${r.id}-${n.index}`);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"GetPageTextRects","End",`${r.id}-${n.index}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=o.acquirePage(n.index),s=this.pdfiumModule.FPDFText_LoadPage(e.pagePtr),F=this.readPageTextRects(n,e.docPtr,e.pagePtr,s);return this.pdfiumModule.FPDFText_ClosePage(s),e.release(),this.logger.perf(h,D,"GetPageTextRects","End",`${r.id}-${n.index}`),y.resolve(F)}renderThumbnailRaw(r,n,o){const{scaleFactor:e=1,...s}=o??{};if(this.logger.debug(h,D,"renderThumbnail",r,n,o),this.logger.perf(h,D,"RenderThumbnail","Begin",`${r.id}-${n.index}`),!this.cache.getContext(r.id))return this.logger.perf(h,D,"RenderThumbnail","End",`${r.id}-${n.index}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const F=this.renderPageRaw(r,n,{scaleFactor:Math.max(e,.5),...s});return this.logger.perf(h,D,"RenderThumbnail","End",`${r.id}-${n.index}`),F}getAttachments(r){this.logger.debug(h,D,"getAttachments",r),this.logger.perf(h,D,"GetAttachments","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"GetAttachments","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=[],e=this.pdfiumModule.FPDFDoc_GetAttachmentCount(n.docPtr);for(let s=0;s<e;s++){const F=this.readPdfAttachment(n.docPtr,s);o.push(F)}return this.logger.perf(h,D,"GetAttachments","End",r.id),y.resolve(o)}addAttachment(r,n){this.logger.debug(h,D,"addAttachment",r,n?.name),this.logger.perf(h,D,"AddAttachment","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"AddAttachment","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const{name:e,description:s,mimeType:F,data:d}=n??{};if(!e)return this.logger.perf(h,D,"AddAttachment","End",r.id),y.reject({code:T.NotFound,message:"attachment name is required"});if(!d||d.byteLength===0)return this.logger.perf(h,D,"AddAttachment","End",r.id),y.reject({code:T.NotFound,message:"attachment data is empty"});const _=this.withWString(e,M=>this.pdfiumModule.FPDFDoc_AddAttachment(o.docPtr,M));if(!_)return this.logger.perf(h,D,"AddAttachment","End",r.id),y.reject({code:T.Unknown,message:`An attachment named "${e}" already exists`});this.withWString(s,M=>this.pdfiumModule.EPDFAttachment_SetDescription(_,M)),this.pdfiumModule.EPDFAttachment_SetSubtype(_,F);const c=d instanceof Uint8Array?d:new Uint8Array(d),f=c.byteLength,p=this.memoryManager.malloc(f);try{if(this.pdfiumModule.pdfium.HEAPU8.set(c,p),!this.pdfiumModule.FPDFAttachment_SetFile(_,o.docPtr,p,f))return this.logger.perf(h,D,"AddAttachment","End",r.id),y.reject({code:T.Unknown,message:"failed to write attachment bytes"})}finally{this.memoryManager.free(p)}return this.logger.perf(h,D,"AddAttachment","End",r.id),y.resolve(!0)}removeAttachment(r,n){this.logger.debug(h,D,"deleteAttachment",r,n),this.logger.perf(h,D,"DeleteAttachment","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"DeleteAttachment","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDFDoc_GetAttachmentCount(o.docPtr);if(n.index<0||n.index>=e)return this.logger.perf(h,D,"DeleteAttachment","End",r.id),y.reject({code:T.Unknown,message:`attachment index ${n.index} out of range`});const s=this.pdfiumModule.FPDFDoc_DeleteAttachment(o.docPtr,n.index);return this.logger.perf(h,D,"DeleteAttachment","End",r.id),s?y.resolve(!0):y.reject({code:T.Unknown,message:"failed to delete attachment"})}readAttachmentContent(r,n){this.logger.debug(h,D,"readAttachmentContent",r,n),this.logger.perf(h,D,"ReadAttachmentContent","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"ReadAttachmentContent","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDFDoc_GetAttachment(o.docPtr,n.index),s=this.memoryManager.malloc(4);if(!this.pdfiumModule.FPDFAttachment_GetFile(e,0,0,s))return this.memoryManager.free(s),this.logger.perf(h,D,"ReadAttachmentContent","End",r.id),y.reject({code:T.CantReadAttachmentSize,message:"can not read attachment size"});const F=this.pdfiumModule.pdfium.getValue(s,"i32")>>>0,d=this.memoryManager.malloc(F);if(!this.pdfiumModule.FPDFAttachment_GetFile(e,d,F,s))return this.memoryManager.free(s),this.memoryManager.free(d),this.logger.perf(h,D,"ReadAttachmentContent","End",r.id),y.reject({code:T.CantReadAttachmentContent,message:"can not read attachment content"});const _=new ArrayBuffer(F),c=new DataView(_);for(let f=0;f<F;f++)c.setInt8(f,this.pdfiumModule.pdfium.getValue(d+f,"i8"));return this.memoryManager.free(s),this.memoryManager.free(d),this.logger.perf(h,D,"ReadAttachmentContent","End",r.id),y.resolve(_)}setFormFieldValue(r,n,o,e){this.logger.debug(h,D,"SetFormFieldValue",r,o,e),this.logger.perf(h,D,"SetFormFieldValue","Begin",`${r.id}-${o.id}`);const s=this.cache.getContext(r.id);if(!s)return this.logger.debug(h,D,"SetFormFieldValue","document is not opened"),this.logger.perf(h,D,"SetFormFieldValue","End",`${r.id}-${o.id}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const F=this.pdfiumModule.PDFiumExt_OpenFormFillInfo(),d=this.pdfiumModule.PDFiumExt_InitFormFillEnvironment(s.docPtr,F),_=s.acquirePage(n.index);this.pdfiumModule.FORM_OnAfterLoadPage(_.pagePtr,d);const c=this.getAnnotationByName(_.pagePtr,o.id);if(!c)return _.release(),this.logger.perf(h,D,"SetFormFieldValue","End",`${r.id}-${n.index}`),y.reject({code:T.NotFound,message:"annotation not found"});if(!this.pdfiumModule.FORM_SetFocusedAnnot(d,c))return this.logger.debug(h,D,"SetFormFieldValue","failed to set focused annotation"),this.logger.perf(h,D,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(F),y.reject({code:T.CantFocusAnnot,message:"failed to set focused annotation"});switch(e.kind){case"text":{if(!this.pdfiumModule.FORM_SelectAllText(d,_.pagePtr))return this.logger.debug(h,D,"SetFormFieldValue","failed to select all text"),this.logger.perf(h,D,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(F),y.reject({code:T.CantSelectText,message:"failed to select all text"});const f=2*(e.text.length+1),p=this.memoryManager.malloc(f);this.pdfiumModule.pdfium.stringToUTF16(e.text,p,f),this.pdfiumModule.FORM_ReplaceSelection(d,_.pagePtr,p),this.memoryManager.free(p)}break;case"selection":if(!this.pdfiumModule.FORM_SetIndexSelected(d,_.pagePtr,e.index,e.isSelected))return this.logger.debug(h,D,"SetFormFieldValue","failed to set index selected"),this.logger.perf(h,D,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(F),y.reject({code:T.CantSelectOption,message:"failed to set index selected"});break;case"checked":if(!this.pdfiumModule.FORM_OnChar(d,_.pagePtr,13,0))return this.logger.debug(h,D,"SetFormFieldValue","failed to set field checked"),this.logger.perf(h,D,"SetFormFieldValue","End",`${r.id}-${o.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(F),y.reject({code:T.CantCheckField,message:"failed to set field checked"})}return this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(F),y.resolve(!0)}flattenPage(r,n,o){const{flag:e=bn.Display}=o??{};this.logger.debug(h,D,"flattenPage",r,n,e),this.logger.perf(h,D,"flattenPage","Begin",r.id);const s=this.cache.getContext(r.id);if(!s)return this.logger.perf(h,D,"flattenPage","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const F=s.acquirePage(n.index),d=this.pdfiumModule.FPDFPage_Flatten(F.pagePtr,e);return F.release(),this.logger.perf(h,D,"flattenPage","End",r.id),y.resolve(d)}extractPages(r,n){this.logger.debug(h,D,"extractPages",r,n),this.logger.perf(h,D,"ExtractPages","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"ExtractPages","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDF_CreateNewDocument();if(!e)return this.logger.perf(h,D,"ExtractPages","End",r.id),y.reject({code:T.CantCreateNewDoc,message:"can not create new document"});const s=this.memoryManager.malloc(4*n.length);for(let d=0;d<n.length;d++)this.pdfiumModule.pdfium.setValue(s+4*d,n[d],"i32");if(!this.pdfiumModule.FPDF_ImportPagesByIndex(e,o.docPtr,s,n.length,0))return this.pdfiumModule.FPDF_CloseDocument(e),this.logger.perf(h,D,"ExtractPages","End",r.id),y.reject({code:T.CantImportPages,message:"can not import pages to new document"});const F=this.saveDocument(e);return this.pdfiumModule.FPDF_CloseDocument(e),this.logger.perf(h,D,"ExtractPages","End",r.id),y.resolve(F)}extractText(r,n){this.logger.debug(h,D,"extractText",r,n),this.logger.perf(h,D,"ExtractText","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"ExtractText","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=[];for(let F=0;F<n.length;F++){const d=o.acquirePage(n[F]),_=this.pdfiumModule.FPDFText_LoadPage(d.pagePtr),c=this.pdfiumModule.FPDFText_CountChars(_),f=this.memoryManager.malloc(2*(c+1));this.pdfiumModule.FPDFText_GetText(_,0,c,f);const p=this.pdfiumModule.pdfium.UTF16ToString(f);this.memoryManager.free(f),e.push(p),this.pdfiumModule.FPDFText_ClosePage(_),d.release()}const s=e.join(`

`);return this.logger.perf(h,D,"ExtractText","End",r.id),y.resolve(s)}getTextSlices(r,n){if(this.logger.debug(h,D,"getTextSlices",r,n),this.logger.perf(h,D,"GetTextSlices","Begin",r.id),n.length===0)return this.logger.perf(h,D,"GetTextSlices","End",r.id),y.resolve([]);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"GetTextSlices","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});try{const e=new Array(n.length),s=new Map;n.forEach((F,d)=>{(s.get(F.pageIndex)??s.set(F.pageIndex,[]).get(F.pageIndex)).push({slice:F,pos:d})});for(const[F,d]of s){const _=o.acquirePage(F),c=_.getTextPage();for(const{slice:f,pos:p}of d){const M=this.memoryManager.malloc(2*(f.charCount+1));this.pdfiumModule.FPDFText_GetText(c,f.charIndex,f.charCount,M),e[p]=fn(this.pdfiumModule.pdfium.UTF16ToString(M)),this.memoryManager.free(M)}_.release()}return this.logger.perf(h,D,"GetTextSlices","End",r.id),y.resolve(e)}catch(e){return this.logger.error(h,D,"getTextSlices error",e),this.logger.perf(h,D,"GetTextSlices","End",r.id),y.reject({code:T.Unknown,message:String(e)})}}merge(r){this.logger.debug(h,D,"merge",r);const n=r.map(d=>d.id).join(".");this.logger.perf(h,D,"Merge","Begin",n);const o=this.pdfiumModule.FPDF_CreateNewDocument();if(!o)return this.logger.perf(h,D,"Merge","End",n),y.reject({code:T.CantCreateNewDoc,message:"can not create new document"});const e=[];for(const d of r.reverse()){const _=new Uint8Array(d.content),c=_.length,f=this.memoryManager.malloc(c);this.pdfiumModule.pdfium.HEAPU8.set(_,f);const p=this.pdfiumModule.FPDF_LoadMemDocument(f,c,"");if(!p){const M=this.pdfiumModule.FPDF_GetLastError();this.logger.error(h,D,`FPDF_LoadMemDocument failed with ${M}`),this.memoryManager.free(f);for(const E of e)this.pdfiumModule.FPDF_CloseDocument(E.docPtr),this.memoryManager.free(E.filePtr);return this.logger.perf(h,D,"Merge","End",n),y.reject({code:M,message:"FPDF_LoadMemDocument failed"})}if(e.push({filePtr:f,docPtr:p}),!this.pdfiumModule.FPDF_ImportPages(o,p,"",0)){this.pdfiumModule.FPDF_CloseDocument(o);for(const M of e)this.pdfiumModule.FPDF_CloseDocument(M.docPtr),this.memoryManager.free(M.filePtr);return this.logger.perf(h,D,"Merge","End",n),y.reject({code:T.CantImportPages,message:"can not import pages to new document"})}}const s=this.saveDocument(o);this.pdfiumModule.FPDF_CloseDocument(o);for(const d of e)this.pdfiumModule.FPDF_CloseDocument(d.docPtr),this.memoryManager.free(d.filePtr);const F={id:`${Math.random()}`,content:s};return this.logger.perf(h,D,"Merge","End",n),y.resolve(F)}mergePages(r){const n=r.map(e=>`${e.docId}:${e.pageIndices.join(",")}`).join("|");this.logger.debug(h,D,"mergePages",r),this.logger.perf(h,D,"MergePages","Begin",n);const o=this.pdfiumModule.FPDF_CreateNewDocument();if(!o)return this.logger.perf(h,D,"MergePages","End",n),y.reject({code:T.CantCreateNewDoc,message:"Cannot create new document"});try{for(const F of[...r].reverse()){const d=this.cache.getContext(F.docId);if(!d){this.logger.warn(h,D,`Document ${F.docId} is not open, skipping`);continue}const _=this.pdfiumModule.FPDF_GetPageCount(d.docPtr),c=F.pageIndices.filter(p=>p>=0&&p<_);if(c.length===0)continue;const f=c.map(p=>p+1).join(",");if(!this.pdfiumModule.FPDF_ImportPages(o,d.docPtr,f,0))throw new Error(`Failed to import pages ${f} from document ${F.docId}`)}const e=this.saveDocument(o),s={id:`${Math.random()}`,content:e};return this.logger.perf(h,D,"MergePages","End",n),y.resolve(s)}catch(e){return this.logger.error(h,D,"mergePages failed",e),this.logger.perf(h,D,"MergePages","End",n),y.reject({code:T.CantImportPages,message:e instanceof Error?e.message:"Failed to merge pages"})}finally{o&&this.pdfiumModule.FPDF_CloseDocument(o)}}setDocumentEncryption(r,n,o,e){this.logger.debug(h,D,"setDocumentEncryption",r,e);const s=this.cache.getContext(r.id);if(!s)return y.reject({code:T.DocNotOpen,message:"document does not open"});const F=this.pdfiumModule.EPDF_SetEncryption(s.docPtr,n,o,e);return y.resolve(F)}removeEncryption(r){this.logger.debug(h,D,"removeEncryption",r);const n=this.cache.getContext(r.id);if(!n)return y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.EPDF_RemoveEncryption(n.docPtr);return y.resolve(o)}unlockOwnerPermissions(r,n){this.logger.debug(h,D,"unlockOwnerPermissions",r.id);const o=this.cache.getContext(r.id);if(!o)return y.reject({code:T.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.EPDF_UnlockOwnerPermissions(o.docPtr,n);return y.resolve(e)}isEncrypted(r){this.logger.debug(h,D,"isEncrypted",r.id);const n=this.cache.getContext(r.id);if(!n)return y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.EPDF_IsEncrypted(n.docPtr);return y.resolve(o)}isOwnerUnlocked(r){this.logger.debug(h,D,"isOwnerUnlocked",r.id);const n=this.cache.getContext(r.id);if(!n)return y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.pdfiumModule.EPDF_IsOwnerUnlocked(n.docPtr);return y.resolve(o)}saveAsCopy(r){this.logger.debug(h,D,"saveAsCopy",r),this.logger.perf(h,D,"SaveAsCopy","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(h,D,"SaveAsCopy","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const o=this.saveDocument(n.docPtr);return this.logger.perf(h,D,"SaveAsCopy","End",r.id),y.resolve(o)}closeDocument(r){this.logger.debug(h,D,"closeDocument",r),this.logger.perf(h,D,"CloseDocument","Begin",r.id);const n=this.cache.getContext(r.id);return n?(n.dispose(),this.logger.perf(h,D,"CloseDocument","End",r.id),y.resolve(!0)):y.resolve(!0)}closeAllDocuments(){return this.logger.debug(h,D,"closeAllDocuments"),this.logger.perf(h,D,"CloseAllDocuments","Begin"),this.cache.closeAllDocuments(),this.logger.perf(h,D,"CloseAllDocuments","End"),y.resolve(!0)}addTextContent(r,n,o,e){return!!this.setAnnotationIcon(o,e.icon||pn.Comment)&&!(e.state&&!this.setAnnotString(o,"State",e.state))&&!(e.stateModel&&!this.setAnnotString(o,"StateModel",e.stateModel))&&!(!e.flags&&!this.setAnnotationFlags(o,["print","noZoom","noRotate"]))&&this.applyBaseAnnotationProperties(n,o,e)}addFreeTextContent(r,n,o,e){if(!this.setBorderStyle(o,ce.SOLID,0)||!this.setAnnotationOpacity(o,e.opacity??1)||!this.setAnnotationTextAlignment(o,e.textAlign)||!this.setAnnotationVerticalAlignment(o,e.verticalAlign)||!this.setAnnotationDefaultAppearance(o,e.fontFamily,e.fontSize,e.fontColor)||e.intent&&!this.setAnnotIntent(o,e.intent))return!1;const s=e.color??e.backgroundColor;if(s&&s!=="transparent"){if(!this.setAnnotationColor(o,s??"#FFFFFF",ne.Color))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,ne.Color))return!1;return this.applyBaseAnnotationProperties(n,o,e)}addInkStroke(r,n,o,e){if(!this.setBorderStyle(o,ce.SOLID,e.strokeWidth)||!this.setInkList(r,o,e.inkList)||!this.setAnnotationOpacity(o,e.opacity??1))return!1;const s=e.strokeColor??e.color??"#FFFF00";return!!this.setAnnotationColor(o,s,ne.Color)&&this.applyBaseAnnotationProperties(n,o,e)}addLineContent(r,n,o,e){var s,F;if(!this.setLinePoints(r,o,e.linePoints.start,e.linePoints.end)||!this.setLineEndings(o,((s=e.lineEndings)==null?void 0:s.start)??Xe.None,((F=e.lineEndings)==null?void 0:F.end)??Xe.None)||!this.setBorderStyle(o,e.strokeStyle,e.strokeWidth)||!this.setBorderDashPattern(o,e.strokeDashArray??[])||e.intent&&!this.setAnnotIntent(o,e.intent))return!1;if(e.color&&e.color!=="transparent"){if(!this.setAnnotationColor(o,e.color??"#FFFF00",ne.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,ne.InteriorColor))return!1;return!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.strokeColor??"#FFFF00",ne.Color)&&this.applyBaseAnnotationProperties(n,o,e)}addPolyContent(r,n,o,e){var s,F;if(e.type===R.POLYLINE&&!this.setLineEndings(o,((s=e.lineEndings)==null?void 0:s.start)??Xe.None,((F=e.lineEndings)==null?void 0:F.end)??Xe.None)||!this.setPdfAnnoVertices(r,o,e.vertices)||!this.setBorderStyle(o,e.strokeStyle,e.strokeWidth)||!this.setBorderDashPattern(o,e.strokeDashArray??[])||e.intent&&!this.setAnnotIntent(o,e.intent))return!1;if(e.color&&e.color!=="transparent"){if(!this.setAnnotationColor(o,e.color??"#FFFF00",ne.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,ne.InteriorColor))return!1;return!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.strokeColor??"#FFFF00",ne.Color)&&this.applyBaseAnnotationProperties(n,o,e)}addLinkContent(r,n,o,e){const s=e.strokeStyle??ce.UNDERLINE,F=e.strokeWidth??2;return!!this.setBorderStyle(o,s,F)&&!(e.strokeDashArray&&!this.setBorderDashPattern(o,e.strokeDashArray))&&!(e.strokeColor&&!this.setAnnotationColor(o,e.strokeColor,ne.Color))&&!(e.target&&!this.applyLinkTarget(r,o,e.target))&&this.applyBaseAnnotationProperties(n,o,e)}addShapeContent(r,n,o,e){if(!this.setBorderStyle(o,e.strokeStyle,e.strokeWidth)||!this.setBorderDashPattern(o,e.strokeDashArray??[]))return!1;if(e.color&&e.color!=="transparent"){if(!this.setAnnotationColor(o,e.color??"#FFFF00",ne.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(o,ne.InteriorColor))return!1;return!!this.setAnnotationOpacity(o,e.opacity??1)&&!!this.setAnnotationColor(o,e.strokeColor??"#FFFF00",ne.Color)&&this.applyBaseAnnotationProperties(n,o,e)}addTextMarkupContent(r,n,o,e){if(!this.syncQuadPointsAnno(r,o,e.segmentRects)||!this.setAnnotationOpacity(o,e.opacity??1))return!1;const s=e.strokeColor??e.color??"#FFFF00";return!!this.setAnnotationColor(o,s,ne.Color)&&this.applyBaseAnnotationProperties(n,o,e)}addStampContent(r,n,o,e,s,F){if(s.icon&&!this.setAnnotationIcon(e,s.icon)||s.subject&&!this.setAnnotString(e,"Subj",s.subject))return!1;if(F){for(let d=this.pdfiumModule.FPDFAnnot_GetObjectCount(e)-1;d>=0;d--)this.pdfiumModule.FPDFAnnot_RemoveObject(e,d);if(!this.addImageObject(r,n,o,e,s.rect,F))return!1}return!!this.pdfiumModule.EPDFAnnot_UpdateAppearanceToRect(e,An.Cover)&&this.applyBaseAnnotationProperties(o,e,s)}addImageObject(r,n,o,e,s,F){const d=F.width*F.height,_=this.memoryManager.malloc(4*d);if(!_)return!1;for(let E=0;E<d;E++){const G=F.data[4*E],N=F.data[4*E+1],B=F.data[4*E+2],L=F.data[4*E+3];this.pdfiumModule.pdfium.setValue(_+4*E,B,"i8"),this.pdfiumModule.pdfium.setValue(_+4*E+1,N,"i8"),this.pdfiumModule.pdfium.setValue(_+4*E+2,G,"i8"),this.pdfiumModule.pdfium.setValue(_+4*E+3,L,"i8")}const c=this.pdfiumModule.FPDFBitmap_CreateEx(F.width,F.height,4,_,0);if(!c)return this.memoryManager.free(_),!1;const f=this.pdfiumModule.FPDFPageObj_NewImageObj(r);if(!f)return this.pdfiumModule.FPDFBitmap_Destroy(c),this.memoryManager.free(_),!1;if(!this.pdfiumModule.FPDFImageObj_SetBitmap(o,0,f,c))return this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(f),this.memoryManager.free(_),!1;const p=this.memoryManager.malloc(24);if(this.pdfiumModule.pdfium.setValue(p,F.width,"float"),this.pdfiumModule.pdfium.setValue(p+4,0,"float"),this.pdfiumModule.pdfium.setValue(p+8,0,"float"),this.pdfiumModule.pdfium.setValue(p+12,F.height,"float"),this.pdfiumModule.pdfium.setValue(p+16,0,"float"),this.pdfiumModule.pdfium.setValue(p+20,0,"float"),!this.pdfiumModule.FPDFPageObj_SetMatrix(f,p))return this.memoryManager.free(p),this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(f),this.memoryManager.free(_),!1;this.memoryManager.free(p);const M=this.convertDevicePointToPagePoint(n,{x:s.origin.x,y:s.origin.y+F.height});return this.pdfiumModule.FPDFPageObj_Transform(f,1,0,0,1,M.x,M.y),this.pdfiumModule.FPDFAnnot_AppendObject(e,f)?(this.pdfiumModule.FPDFBitmap_Destroy(c),this.memoryManager.free(_),!0):(this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(f),this.memoryManager.free(_),!1)}saveDocument(r){const n=this.pdfiumModule.PDFiumExt_OpenFileWriter();this.pdfiumModule.PDFiumExt_SaveAsCopy(r,n);const o=this.pdfiumModule.PDFiumExt_GetFileWriterSize(n),e=this.memoryManager.malloc(o);this.pdfiumModule.PDFiumExt_GetFileWriterData(n,e,o);const s=new ArrayBuffer(o),F=new DataView(s);for(let d=0;d<o;d++)F.setInt8(d,this.pdfiumModule.pdfium.getValue(e+d,"i8"));return this.memoryManager.free(e),this.pdfiumModule.PDFiumExt_CloseFileWriter(n),s}readCatalogLanguage(r){const n=this.pdfiumModule.EPDFCatalog_GetLanguage(r,0,0)>>>0;return n===0?null:n===2?"":se(this.pdfiumModule.pdfium,(o,e)=>this.pdfiumModule.EPDFCatalog_GetLanguage(r,o,e),this.pdfiumModule.pdfium.UTF16ToString,n)}readMetaText(r,n){if(!this.pdfiumModule.EPDF_HasMetaText(r,n))return null;const o=this.pdfiumModule.FPDF_GetMetaText(r,n,0,0);return o===2?"":se(this.pdfiumModule.pdfium,(e,s)=>this.pdfiumModule.FPDF_GetMetaText(r,n,e,s),this.pdfiumModule.pdfium.UTF16ToString,o)}setMetaText(r,n,o){if(o==null||o.length===0)return!!this.pdfiumModule.EPDF_SetMetaText(r,n,0);const e=2*(o.length+1),s=this.memoryManager.malloc(e);try{return this.pdfiumModule.pdfium.stringToUTF16(o,s,e),!!this.pdfiumModule.EPDF_SetMetaText(r,n,s)}finally{this.memoryManager.free(s)}}getMetaTrapped(r){const n=Number(this.pdfiumModule.EPDF_GetMetaTrapped(r));switch(n){case pe.NotSet:case pe.True:case pe.False:case pe.Unknown:return n;default:return pe.Unknown}}setMetaTrapped(r,n){const o=n==null||n===void 0?pe.NotSet:n;return!(o!==pe.NotSet&&o!==pe.True&&o!==pe.False&&o!==pe.Unknown)&&!!this.pdfiumModule.EPDF_SetMetaTrapped(r,o)}getMetaKeyCount(r,n){return 0|Number(this.pdfiumModule.EPDF_GetMetaKeyCount(r,n))}getMetaKeyName(r,n,o){const e=this.pdfiumModule.EPDF_GetMetaKeyName(r,n,o,0,0);return e?se(this.pdfiumModule.pdfium,(s,F)=>this.pdfiumModule.EPDF_GetMetaKeyName(r,n,o,s,F),this.pdfiumModule.pdfium.UTF8ToString,e):null}readAllMeta(r,n=!0){const o=this.getMetaKeyCount(r,n),e={};for(let s=0;s<o;s++){const F=this.getMetaKeyName(r,s,n);F&&(e[F]=this.readMetaText(r,F))}return e}readPdfBookmarks(r,n=0){let o=this.pdfiumModule.FPDFBookmark_GetFirstChild(r,n);const e=[];for(;o;){const s=this.readPdfBookmark(r,o);e.push(s),o=this.pdfiumModule.FPDFBookmark_GetNextSibling(r,o)}return e}readPdfBookmark(r,n){const o=se(this.pdfiumModule.pdfium,(s,F)=>this.pdfiumModule.FPDFBookmark_GetTitle(n,s,F),this.pdfiumModule.pdfium.UTF16ToString),e=this.readPdfBookmarks(r,n);return{title:o,target:this.readPdfBookmarkTarget(r,()=>this.pdfiumModule.FPDFBookmark_GetAction(n),()=>this.pdfiumModule.FPDFBookmark_GetDest(r,n)),children:e}}readPageTextRects(r,n,o,e){const s=this.pdfiumModule.FPDFText_CountRects(e,0,-1),F=[];for(let d=0;d<s;d++){const _=this.memoryManager.malloc(8),c=this.memoryManager.malloc(8),f=this.memoryManager.malloc(8),p=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(e,d,c,_,f,p)){this.memoryManager.free(c),this.memoryManager.free(_),this.memoryManager.free(f),this.memoryManager.free(p);continue}const M=this.pdfiumModule.pdfium.getValue(c,"double"),E=this.pdfiumModule.pdfium.getValue(_,"double"),G=this.pdfiumModule.pdfium.getValue(f,"double"),N=this.pdfiumModule.pdfium.getValue(p,"double");this.memoryManager.free(c),this.memoryManager.free(_),this.memoryManager.free(f),this.memoryManager.free(p);const B=this.memoryManager.malloc(4),L=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(o,0,0,r.size.width,r.size.height,0,M,E,B,L);const K=this.pdfiumModule.pdfium.getValue(B,"i32"),$=this.pdfiumModule.pdfium.getValue(L,"i32");this.memoryManager.free(B),this.memoryManager.free(L);const W={origin:{x:K,y:$},size:{width:Math.ceil(Math.abs(G-M)),height:Math.ceil(Math.abs(E-N))}},J=this.pdfiumModule.FPDFText_GetBoundedText(e,M,E,G,N,0,0),ae=2*(J+1),x=this.memoryManager.malloc(ae);this.pdfiumModule.FPDFText_GetBoundedText(e,M,E,G,N,x,J);const H=this.pdfiumModule.pdfium.UTF16ToString(x);this.memoryManager.free(x);const ue=this.pdfiumModule.FPDFText_GetCharIndexAtPos(e,M,E,2,2);let he="",Ae=W.size.height;if(ue>=0){Ae=this.pdfiumModule.FPDFText_GetFontSize(e,ue);const Re=this.pdfiumModule.FPDFText_GetFontInfo(e,ue,0,0,0)+1,Ee=this.memoryManager.malloc(Re),ze=this.memoryManager.malloc(4);this.pdfiumModule.FPDFText_GetFontInfo(e,ue,Ee,Re,ze),he=this.pdfiumModule.pdfium.UTF8ToString(Ee),this.memoryManager.free(Ee),this.memoryManager.free(ze)}const C={content:H,rect:W,font:{family:he,size:Ae}};F.push(C)}return F}getPageGeometry(r,n){const o="getPageGeometry";this.logger.perf(h,D,o,"Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(h,D,o,"End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const s=e.acquirePage(n.index),F=s.getTextPage(),d=this.pdfiumModule.FPDFText_CountChars(F),_=[];for(let f=0;f<d;f++){const p=this.readGlyphInfo(n,s.pagePtr,F,f);_.push(p)}const c=this.buildRunsFromGlyphs(_,F);return s.release(),this.logger.perf(h,D,o,"End",r.id),y.resolve({runs:c})}buildRunsFromGlyphs(r,n){const o=[];let e=null,s=null,F=null;for(let d=0;d<r.length;d++){const _=r[d],c=this.pdfiumModule.FPDFText_GetTextObject(n,d);if(c!==s&&(s=c,e={rect:{x:_.origin.x,y:_.origin.y,width:_.size.width,height:_.size.height},charStart:d,glyphs:[]},F={minX:_.origin.x,minY:_.origin.y,maxX:_.origin.x+_.size.width,maxY:_.origin.y+_.size.height},o.push(e)),e.glyphs.push({x:_.origin.x,y:_.origin.y,width:_.size.width,height:_.size.height,flags:_.isEmpty?2:_.isSpace?1:0}),_.isEmpty)continue;const f=_.origin.x+_.size.width,p=_.origin.y+_.size.height;F.minX=Math.min(F.minX,_.origin.x),F.minY=Math.min(F.minY,_.origin.y),F.maxX=Math.max(F.maxX,f),F.maxY=Math.max(F.maxY,p),e.rect.x=F.minX,e.rect.y=F.minY,e.rect.width=F.maxX-F.minX,e.rect.height=F.maxY-F.minY}return o}readGlyphInfo(r,n,o,e){const s=this.memoryManager.malloc(4),F=this.memoryManager.malloc(4),d=this.memoryManager.malloc(4),_=this.memoryManager.malloc(4),c=this.memoryManager.malloc(16);let f=0,p=0,M=0,E=0,G=!1;if(this.pdfiumModule.FPDFText_GetLooseCharBox(o,e,c)){const N=this.pdfiumModule.pdfium.getValue(c,"float"),B=this.pdfiumModule.pdfium.getValue(c+4,"float"),L=this.pdfiumModule.pdfium.getValue(c+8,"float"),K=this.pdfiumModule.pdfium.getValue(c+12,"float");if(N===L||B===K)return[c,s,F,d,_].forEach(x=>this.memoryManager.free(x)),{origin:{x:0,y:0},size:{width:0,height:0},isEmpty:!0};this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,N,B,s,F),this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,L,K,d,_);const $=this.pdfiumModule.pdfium.getValue(s,"i32"),W=this.pdfiumModule.pdfium.getValue(F,"i32"),J=this.pdfiumModule.pdfium.getValue(d,"i32"),ae=this.pdfiumModule.pdfium.getValue(_,"i32");f=Math.min($,J),p=Math.min(W,ae),M=Math.max(1,Math.abs(J-$)),E=Math.max(1,Math.abs(ae-W)),G=this.pdfiumModule.FPDFText_GetUnicode(o,e)===32}return[c,s,F,d,_].forEach(N=>this.memoryManager.free(N)),{origin:{x:f,y:p},size:{width:M,height:E},...G&&{isSpace:G}}}getPageGlyphs(r,n){this.logger.debug(h,D,"getPageGlyphs",r,n),this.logger.perf(h,D,"getPageGlyphs","Begin",r.id);const o=this.cache.getContext(r.id);if(!o)return this.logger.perf(h,D,"getPageGlyphs","End",r.id),y.reject({code:T.DocNotOpen,message:"document does not open"});const e=o.acquirePage(n.index),s=e.getTextPage(),F=this.pdfiumModule.FPDFText_CountChars(s),d=new Array(F);for(let _=0;_<F;_++){const c=this.readGlyphInfo(n,e.pagePtr,s,_);c.isEmpty||(d[_]={...c})}return e.release(),this.logger.perf(h,D,"getPageGlyphs","End",r.id),y.resolve(d)}readCharBox(r,n,o,e){const s=this.memoryManager.malloc(8),F=this.memoryManager.malloc(8),d=this.memoryManager.malloc(8),_=this.memoryManager.malloc(8);let c=0,f=0,p=0,M=0;if(this.pdfiumModule.FPDFText_GetCharBox(o,e,F,_,d,s)){const E=this.pdfiumModule.pdfium.getValue(s,"double"),G=this.pdfiumModule.pdfium.getValue(F,"double"),N=this.pdfiumModule.pdfium.getValue(d,"double"),B=this.pdfiumModule.pdfium.getValue(_,"double"),L=this.memoryManager.malloc(4),K=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,G,E,L,K),c=this.pdfiumModule.pdfium.getValue(L,"i32"),f=this.pdfiumModule.pdfium.getValue(K,"i32"),this.memoryManager.free(L),this.memoryManager.free(K),p=Math.ceil(Math.abs(B-G)),M=Math.ceil(Math.abs(E-N))}return this.memoryManager.free(s),this.memoryManager.free(F),this.memoryManager.free(d),this.memoryManager.free(_),{origin:{x:c,y:f},size:{width:p,height:M}}}readPageAnnotations(r,n){return r.borrowPage(n.index,o=>{const e=this.pdfiumModule.FPDFPage_GetAnnotCount(o.pagePtr),s=[];for(let F=0;F<e;F++)o.withAnnotation(F,d=>{const _=this.readPageAnnotation(r.docPtr,n,d,o);_&&s.push(_)});return s})}readPageAnnotationsRaw(r,n){const o=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(r.docPtr,n.index);if(o<=0)return[];const e=[];for(let s=0;s<o;++s){const F=this.pdfiumModule.EPDFPage_GetAnnotRaw(r.docPtr,n.index,s);if(F)try{const d=this.readPageAnnotation(r.docPtr,n,F);d&&e.push(d)}finally{this.pdfiumModule.FPDFPage_CloseAnnot(F)}}return e}getPageAnnotationsRaw(r,n){this.logger.debug(h,D,"getPageAnnotationsRaw",r,n),this.logger.perf(h,D,"GetPageAnnotationsRaw","Begin",`${r.id}-${n.index}`);const o=this.cache.getContext(r.id);if(!o)return y.reject({code:T.DocNotOpen,message:"document does not open"});const e=this.readPageAnnotationsRaw(o,n);return this.logger.perf(h,D,"GetPageAnnotationsRaw","End",`${r.id}-${n.index}`),this.logger.debug(h,D,"getPageAnnotationsRaw",`${r.id}-${n.index}`,e),y.resolve(e)}readPageAnnotation(r,n,o,e){let s=this.getAnnotString(o,"NM");s&&qt(s)||(s=Qt(),this.setAnnotString(o,"NM",s));const F=this.pdfiumModule.FPDFAnnot_GetSubtype(o);let d;switch(F){case R.TEXT:d=this.readPdfTextAnno(n,o,s);break;case R.FREETEXT:d=this.readPdfFreeTextAnno(n,o,s);break;case R.LINK:d=this.readPdfLinkAnno(n,r,o,s);break;case R.WIDGET:if(e)return this.readPdfWidgetAnno(n,o,e.getFormHandle(),s);case R.FILEATTACHMENT:d=this.readPdfFileAttachmentAnno(n,o,s);break;case R.INK:d=this.readPdfInkAnno(n,o,s);break;case R.POLYGON:d=this.readPdfPolygonAnno(n,o,s);break;case R.POLYLINE:d=this.readPdfPolylineAnno(n,o,s);break;case R.LINE:d=this.readPdfLineAnno(n,o,s);break;case R.HIGHLIGHT:d=this.readPdfHighlightAnno(n,o,s);break;case R.STAMP:d=this.readPdfStampAnno(n,o,s);break;case R.SQUARE:d=this.readPdfSquareAnno(n,o,s);break;case R.CIRCLE:d=this.readPdfCircleAnno(n,o,s);break;case R.UNDERLINE:d=this.readPdfUnderlineAnno(n,o,s);break;case R.SQUIGGLY:d=this.readPdfSquigglyAnno(n,o,s);break;case R.STRIKEOUT:d=this.readPdfStrikeOutAnno(n,o,s);break;case R.CARET:d=this.readPdfCaretAnno(n,o,s);break;default:d=this.readPdfAnno(n,F,o,s)}return d}readAnnotationColor(r,n=ne.Color){const o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),s=this.memoryManager.malloc(4);let F;return this.pdfiumModule.EPDFAnnot_GetColor(r,n,o,e,s)&&(F={red:255&this.pdfiumModule.pdfium.getValue(o,"i32"),green:255&this.pdfiumModule.pdfium.getValue(e,"i32"),blue:255&this.pdfiumModule.pdfium.getValue(s,"i32")}),this.memoryManager.free(o),this.memoryManager.free(e),this.memoryManager.free(s),F}getAnnotationColor(r,n=ne.Color){const o=this.readAnnotationColor(r,n);return o?Zt(o):void 0}setAnnotationColor(r,n,o=ne.Color){const e=en(n);return this.pdfiumModule.EPDFAnnot_SetColor(r,o,255&e.red,255&e.green,255&e.blue)}getAnnotationOpacity(r){const n=this.memoryManager.malloc(4),o=this.pdfiumModule.EPDFAnnot_GetOpacity(r,n)?this.pdfiumModule.pdfium.getValue(n,"i32"):255;return this.memoryManager.free(n),En(o)}setAnnotationOpacity(r,n){const o=Tn(n);return this.pdfiumModule.EPDFAnnot_SetOpacity(r,255&o)}getAnnotationTextAlignment(r){return this.pdfiumModule.EPDFAnnot_GetTextAlignment(r)}setAnnotationTextAlignment(r,n){return!!this.pdfiumModule.EPDFAnnot_SetTextAlignment(r,n)}getAnnotationVerticalAlignment(r){return this.pdfiumModule.EPDFAnnot_GetVerticalAlignment(r)}setAnnotationVerticalAlignment(r,n){return!!this.pdfiumModule.EPDFAnnot_SetVerticalAlignment(r,n)}getAnnotationDefaultAppearance(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),s=this.memoryManager.malloc(4),F=this.memoryManager.malloc(4);if(!this.pdfiumModule.EPDFAnnot_GetDefaultAppearance(r,n,o,e,s,F))return void[n,o,e,s,F].forEach(E=>this.memoryManager.free(E));const d=this.pdfiumModule.pdfium,_=d.getValue(n,"i32"),c=d.getValue(o,"float"),f=255&d.getValue(e,"i32"),p=255&d.getValue(s,"i32"),M=255&d.getValue(F,"i32");return[n,o,e,s,F].forEach(E=>this.memoryManager.free(E)),{fontFamily:_,fontSize:c,fontColor:Zt({red:f,green:p,blue:M})}}setAnnotationDefaultAppearance(r,n,o,e){const{red:s,green:F,blue:d}=en(e);return!!this.pdfiumModule.EPDFAnnot_SetDefaultAppearance(r,n,o,255&s,255&F,255&d)}getBorderStyle(r){const n=this.memoryManager.malloc(4);let o=0,e=ce.UNKNOWN,s=!1;return e=this.pdfiumModule.EPDFAnnot_GetBorderStyle(r,n),o=this.pdfiumModule.pdfium.getValue(n,"float"),s=e!==ce.UNKNOWN,this.memoryManager.free(n),{ok:s,style:e,width:o}}setBorderStyle(r,n,o){return this.pdfiumModule.EPDFAnnot_SetBorderStyle(r,n,o)}getAnnotationIcon(r){return this.pdfiumModule.EPDFAnnot_GetIcon(r)}setAnnotationIcon(r,n){return this.pdfiumModule.EPDFAnnot_SetIcon(r,n)}getReplyType(r){return this.pdfiumModule.EPDFAnnot_GetReplyType(r)}setReplyType(r,n){return this.pdfiumModule.EPDFAnnot_SetReplyType(r,n??tn.Unknown)}getBorderEffect(r){const n=this.memoryManager.malloc(4),o=!!this.pdfiumModule.EPDFAnnot_GetBorderEffect(r,n),e=o?this.pdfiumModule.pdfium.getValue(n,"float"):0;return this.memoryManager.free(n),{ok:o,intensity:e}}getRectangleDifferences(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),s=this.memoryManager.malloc(4),F=!!this.pdfiumModule.EPDFAnnot_GetRectangleDifferences(r,n,o,e,s),d=this.pdfiumModule.pdfium,_=d.getValue(n,"float"),c=d.getValue(o,"float"),f=d.getValue(e,"float"),p=d.getValue(s,"float");return this.memoryManager.free(n),this.memoryManager.free(o),this.memoryManager.free(e),this.memoryManager.free(s),{ok:F,left:_,top:c,right:f,bottom:p}}getAnnotationDate(r,n){const o=this.getAnnotString(r,n);return o?mt(o):void 0}setAnnotationDate(r,n,o){const e=At(o);return this.setAnnotString(r,n,e)}getAttachmentDate(r,n){const o=this.getAttachmentString(r,n);return o?mt(o):void 0}setAttachmentDate(r,n,o){const e=At(o);return this.setAttachmentString(r,n,e)}getBorderDashPattern(r){const n=this.pdfiumModule.EPDFAnnot_GetBorderDashPatternCount(r);if(n===0)return{ok:!1,pattern:[]};const o=this.memoryManager.malloc(4*n),e=!!this.pdfiumModule.EPDFAnnot_GetBorderDashPattern(r,o,n),s=[];if(e){const F=this.pdfiumModule.pdfium;for(let d=0;d<n;d++)s.push(F.getValue(o+4*d,"float"))}return this.memoryManager.free(o),{ok:e,pattern:s}}setBorderDashPattern(r,n){if(!n||n.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,0,0);const o=n.map(d=>Number.isFinite(d)&&d>0?d:0).filter(d=>d>0);if(o.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,0,0);const e=4*o.length,s=this.memoryManager.malloc(e);for(let d=0;d<o.length;d++)this.pdfiumModule.pdfium.setValue(s+4*d,o[d],"float");const F=!!this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,s,o.length);return this.memoryManager.free(s),F}getLineEndings(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4);if(!this.pdfiumModule.EPDFAnnot_GetLineEndings(r,n,o))return this.memoryManager.free(n),void this.memoryManager.free(o);const e=this.pdfiumModule.pdfium.getValue(n,"i32"),s=this.pdfiumModule.pdfium.getValue(o,"i32");return this.memoryManager.free(n),this.memoryManager.free(o),{start:e,end:s}}setLineEndings(r,n,o){return!!this.pdfiumModule.EPDFAnnot_SetLineEndings(r,n,o)}getLinePoints(r,n){const o=this.memoryManager.malloc(8),e=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFAnnot_GetLine(n,o,e))return this.memoryManager.free(o),void this.memoryManager.free(e);const s=this.pdfiumModule.pdfium,F=s.getValue(o+0,"float"),d=s.getValue(o+4,"float"),_=s.getValue(e+0,"float"),c=s.getValue(e+4,"float");return this.memoryManager.free(o),this.memoryManager.free(e),{start:this.convertPagePointToDevicePoint(r,{x:F,y:d}),end:this.convertPagePointToDevicePoint(r,{x:_,y:c})}}setLinePoints(r,n,o,e){const s=this.convertDevicePointToPagePoint(r,o),F=this.convertDevicePointToPagePoint(r,e);if(!s||!F)return!1;const d=this.memoryManager.malloc(16),_=this.pdfiumModule.pdfium;_.setValue(d+0,s.x,"float"),_.setValue(d+4,s.y,"float"),_.setValue(d+8,F.x,"float"),_.setValue(d+12,F.y,"float");const c=this.pdfiumModule.EPDFAnnot_SetLine(n,d,d+8);return this.memoryManager.free(d),!!c}getQuadPointsAnno(r,n){const o=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(n);if(o===0)return[];const e=[];for(let s=0;s<o;s++){const F=this.memoryManager.malloc(32);if(this.pdfiumModule.FPDFAnnot_GetAttachmentPoints(n,s,F)){const d=[],_=[];for(let E=0;E<4;E++){const G=F+8*E;d.push(this.pdfiumModule.pdfium.getValue(G,"float")),_.push(this.pdfiumModule.pdfium.getValue(G+4,"float"))}const c=this.convertPagePointToDevicePoint(r,{x:d[0],y:_[0]}),f=this.convertPagePointToDevicePoint(r,{x:d[1],y:_[1]}),p=this.convertPagePointToDevicePoint(r,{x:d[2],y:_[2]}),M=this.convertPagePointToDevicePoint(r,{x:d[3],y:_[3]});e.push({p1:c,p2:f,p3:p,p4:M})}this.memoryManager.free(F)}return e.map(yn)}syncQuadPointsAnno(r,n,o){const e=this.pdfiumModule.pdfium,s=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(n),F=this.memoryManager.malloc(32),d=c=>{const f=nn(c),p=this.convertDevicePointToPagePoint(r,f.p1),M=this.convertDevicePointToPagePoint(r,f.p2),E=this.convertDevicePointToPagePoint(r,f.p3),G=this.convertDevicePointToPagePoint(r,f.p4);e.setValue(F+0,p.x,"float"),e.setValue(F+4,p.y,"float"),e.setValue(F+8,M.x,"float"),e.setValue(F+12,M.y,"float"),e.setValue(F+16,G.x,"float"),e.setValue(F+20,G.y,"float"),e.setValue(F+24,E.x,"float"),e.setValue(F+28,E.y,"float")},_=Math.min(s,o.length);for(let c=0;c<_;c++)if(d(o[c]),!this.pdfiumModule.FPDFAnnot_SetAttachmentPoints(n,c,F))return this.memoryManager.free(F),!1;for(let c=s;c<o.length;c++)if(d(o[c]),!this.pdfiumModule.FPDFAnnot_AppendAttachmentPoints(n,F))return this.memoryManager.free(F),!1;return this.memoryManager.free(F),!0}redactTextInRects(r,n,o,e){const{recurseForms:s=!0,drawBlackBoxes:F=!1}=e??{};this.logger.debug("PDFiumEngine","Engine","redactTextInQuads",r.id,n.index,o.length);const d="RedactTextInQuads";this.logger.perf("PDFiumEngine","Engine",d,"Begin",`${r.id}-${n.index}`);const _=this.cache.getContext(r.id);if(!_)return this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const c=(o??[]).filter(G=>{var N,B,L,K;return G&&Number.isFinite((N=G.origin)==null?void 0:N.x)&&Number.isFinite((B=G.origin)==null?void 0:B.y)&&Number.isFinite((L=G.size)==null?void 0:L.width)&&Number.isFinite((K=G.size)==null?void 0:K.height)&&G.size.width>0&&G.size.height>0});if(c.length===0)return this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),y.resolve(!1);const f=_.acquirePage(n.index),{ptr:p,count:M}=this.allocFSQuadsBufferFromRects(n,c);let E=!1;try{E=!!this.pdfiumModule.EPDFText_RedactInQuads(f.pagePtr,p,M,!!s,!!F)}finally{this.memoryManager.free(p)}return E&&(E=!!this.pdfiumModule.FPDFPage_GenerateContent(f.pagePtr)),f.disposeImmediate(),this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),y.resolve(!!E)}allocFSQuadsBufferFromRects(r,n){const o=n.length,e=this.memoryManager.malloc(32*o),s=this.pdfiumModule.pdfium;for(let F=0;F<o;F++){const d=n[F],_=nn(d),c=this.convertDevicePointToPagePoint(r,_.p1),f=this.convertDevicePointToPagePoint(r,_.p2),p=this.convertDevicePointToPagePoint(r,_.p3),M=this.convertDevicePointToPagePoint(r,_.p4),E=e+32*F;s.setValue(E+0,c.x,"float"),s.setValue(E+4,c.y,"float"),s.setValue(E+8,f.x,"float"),s.setValue(E+12,f.y,"float"),s.setValue(E+16,M.x,"float"),s.setValue(E+20,M.y,"float"),s.setValue(E+24,p.x,"float"),s.setValue(E+28,p.y,"float")}return{ptr:e,count:o}}getInkList(r,n){const o=[],e=this.pdfiumModule.FPDFAnnot_GetInkListCount(n);if(e<=0)return o;const s=this.pdfiumModule.pdfium;for(let F=0;F<e;F++){const d=[],_=this.pdfiumModule.FPDFAnnot_GetInkListPath(n,F,0,0);if(_>0){const c=this.memoryManager.malloc(8*_);this.pdfiumModule.FPDFAnnot_GetInkListPath(n,F,c,_);for(let f=0;f<_;f++){const p=c+8*f,M=s.getValue(p+0,"float"),E=s.getValue(p+4,"float"),G=this.convertPagePointToDevicePoint(r,{x:M,y:E});d.push({x:G.x,y:G.y})}this.memoryManager.free(c)}o.push({points:d})}return o}setInkList(r,n,o){const e=this.pdfiumModule.pdfium;for(const s of o){const F=s.points.length;if(F===0)continue;const d=this.memoryManager.malloc(8*F);for(let c=0;c<F;c++){const f=s.points[c],p=this.convertDevicePointToPagePoint(r,f);e.setValue(d+8*c+0,p.x,"float"),e.setValue(d+8*c+4,p.y,"float")}const _=this.pdfiumModule.FPDFAnnot_AddInkStroke(n,d,F);if(this.memoryManager.free(d),_===-1)return!1}return!0}readPdfTextAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getAnnotString(n,"State"),d=this.getAnnotString(n,"StateModel"),_=this.getAnnotationColor(n),c=this.getAnnotationOpacity(n),f=this.getAnnotationIcon(n);return{pageIndex:r.index,id:o,type:R.TEXT,rect:s,color:_??"#FFFF00",opacity:c,state:F,stateModel:d,icon:f,...this.readBaseAnnotationProperties(n)}}readPdfFreeTextAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getAnnotString(n,"DS"),d=this.getAnnotationDefaultAppearance(n),_=this.getAnnotationColor(n),c=this.getAnnotationTextAlignment(n),f=this.getAnnotationVerticalAlignment(n),p=this.getAnnotationOpacity(n),M=this.getAnnotRichContent(n);return{pageIndex:r.index,id:o,type:R.FREETEXT,rect:s,fontFamily:d?.fontFamily??Mn.Unknown,fontSize:d?.fontSize??12,fontColor:d?.fontColor??"#000000",verticalAlign:f,color:_,backgroundColor:_,opacity:p,textAlign:c,defaultStyle:F,richContent:M,...this.readBaseAnnotationProperties(n)}}readPdfLinkAnno(r,n,o,e){const s=this.pdfiumModule.FPDFAnnot_GetLink(o);if(!s)return;const F=this.readPageAnnoRect(o),d=this.convertPageRectToDeviceRect(r,F),{style:_,width:c}=this.getBorderStyle(o),f=this.getAnnotationColor(o,ne.Color);let p;if(_===ce.DASHED){const{ok:E,pattern:G}=this.getBorderDashPattern(o);E&&(p=G)}const M=this.readPdfLinkAnnoTarget(n,()=>this.pdfiumModule.FPDFLink_GetAction(s),()=>this.pdfiumModule.FPDFLink_GetDest(n,s));return{pageIndex:r.index,id:e,type:R.LINK,rect:d,target:M,strokeColor:f,strokeWidth:c,strokeStyle:_,strokeDashArray:p,...this.readBaseAnnotationProperties(o)}}readPdfWidgetAnno(r,n,o,e){const s=this.readPageAnnoRect(n),F=this.convertPageRectToDeviceRect(r,s),d=this.readPdfWidgetAnnoField(o,n);return{pageIndex:r.index,id:e,type:R.WIDGET,rect:F,field:d,...this.readBaseAnnotationProperties(n)}}readPdfFileAttachmentAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e);return{pageIndex:r.index,id:o,type:R.FILEATTACHMENT,rect:s,...this.readBaseAnnotationProperties(n)}}readPdfInkAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getAnnotationColor(n)??"#FF0000",d=this.getAnnotationOpacity(n),{width:_}=this.getBorderStyle(n),c=this.getInkList(r,n),f=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),p=this.getAnnotIntent(n);return{pageIndex:r.index,id:o,type:R.INK,rect:s,...p&&{intent:p},blendMode:f,strokeColor:F,color:F,opacity:d,strokeWidth:_===0?1:_,inkList:c,...this.readBaseAnnotationProperties(n)}}readPdfPolygonAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.readPdfAnnoVertices(r,n),d=this.getAnnotationColor(n),_=this.getAnnotationColor(n,ne.InteriorColor),c=this.getAnnotationOpacity(n),{style:f,width:p}=this.getBorderStyle(n);let M;if(f===ce.DASHED){const{ok:E,pattern:G}=this.getBorderDashPattern(n);E&&(M=G)}if(F.length>1){const E=F[0],G=F[F.length-1];E.x===G.x&&E.y===G.y&&F.pop()}return{pageIndex:r.index,id:o,type:R.POLYGON,rect:s,strokeColor:d??"#FF0000",color:_??"transparent",opacity:c,strokeWidth:p===0?1:p,strokeStyle:f,strokeDashArray:M,vertices:F,...this.readBaseAnnotationProperties(n)}}readPdfPolylineAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.readPdfAnnoVertices(r,n),d=this.getAnnotationColor(n),_=this.getAnnotationColor(n,ne.InteriorColor),c=this.getAnnotationOpacity(n),{style:f,width:p}=this.getBorderStyle(n);let M;if(f===ce.DASHED){const{ok:G,pattern:N}=this.getBorderDashPattern(n);G&&(M=N)}const E=this.getLineEndings(n);return{pageIndex:r.index,id:o,type:R.POLYLINE,rect:s,strokeColor:d??"#FF0000",color:_??"transparent",opacity:c,strokeWidth:p===0?1:p,strokeStyle:f,strokeDashArray:M,lineEndings:E,vertices:F,...this.readBaseAnnotationProperties(n)}}readPdfLineAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getLinePoints(r,n),d=this.getLineEndings(n),_=this.getAnnotationColor(n),c=this.getAnnotationColor(n,ne.InteriorColor),f=this.getAnnotationOpacity(n),{style:p,width:M}=this.getBorderStyle(n);let E;if(p===ce.DASHED){const{ok:G,pattern:N}=this.getBorderDashPattern(n);G&&(E=N)}return{pageIndex:r.index,id:o,type:R.LINE,rect:s,strokeWidth:M===0?1:M,strokeStyle:p,strokeDashArray:E,strokeColor:_??"#FF0000",color:c??"transparent",opacity:f,linePoints:F||{start:{x:0,y:0},end:{x:0,y:0}},lineEndings:d||{start:Xe.None,end:Xe.None},...this.readBaseAnnotationProperties(n)}}readPdfHighlightAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getQuadPointsAnno(r,n),d=this.getAnnotationColor(n)??"#FFFF00",_=this.getAnnotationOpacity(n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:r.index,id:o,type:R.HIGHLIGHT,rect:s,blendMode:c,segmentRects:F,strokeColor:d,color:d,opacity:_,...this.readBaseAnnotationProperties(n)}}readPdfUnderlineAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getQuadPointsAnno(r,n),d=this.getAnnotationColor(n)??"#FF0000",_=this.getAnnotationOpacity(n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:r.index,id:o,type:R.UNDERLINE,rect:s,blendMode:c,segmentRects:F,strokeColor:d,color:d,opacity:_,...this.readBaseAnnotationProperties(n)}}readPdfStrikeOutAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getQuadPointsAnno(r,n),d=this.getAnnotationColor(n)??"#FF0000",_=this.getAnnotationOpacity(n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:r.index,id:o,type:R.STRIKEOUT,rect:s,blendMode:c,segmentRects:F,strokeColor:d,color:d,opacity:_,...this.readBaseAnnotationProperties(n)}}readPdfSquigglyAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getQuadPointsAnno(r,n),d=this.getAnnotationColor(n)??"#FF0000",_=this.getAnnotationOpacity(n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:r.index,id:o,type:R.SQUIGGLY,rect:s,blendMode:c,segmentRects:F,strokeColor:d,color:d,opacity:_,...this.readBaseAnnotationProperties(n)}}readPdfCaretAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e);return{pageIndex:r.index,id:o,type:R.CARET,rect:s,...this.readBaseAnnotationProperties(n)}}readPdfStampAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e);return{pageIndex:r.index,id:o,type:R.STAMP,rect:s,...this.readBaseAnnotationProperties(n)}}readPdfPageObject(r){switch(this.pdfiumModule.FPDFPageObj_GetType(r)){case Ye.PATH:return this.readPathObject(r);case Ye.IMAGE:return this.readImageObject(r);case Ye.FORM:return this.readFormObject(r)}}readPathObject(r){const n=this.pdfiumModule.FPDFPath_CountSegments(r),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),s=this.memoryManager.malloc(4),F=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPageObj_GetBounds(r,o,e,s,F);const d={left:this.pdfiumModule.pdfium.getValue(o,"float"),bottom:this.pdfiumModule.pdfium.getValue(e,"float"),right:this.pdfiumModule.pdfium.getValue(s,"float"),top:this.pdfiumModule.pdfium.getValue(F,"float")};this.memoryManager.free(o),this.memoryManager.free(e),this.memoryManager.free(s),this.memoryManager.free(F);const _=[];for(let f=0;f<n;f++){const p=this.readPdfSegment(r,f);_.push(p)}const c=this.readPdfPageObjectTransformMatrix(r);return{type:Ye.PATH,bounds:d,segments:_,matrix:c}}readPdfSegment(r,n){const o=this.pdfiumModule.FPDFPath_GetPathSegment(r,n),e=this.pdfiumModule.FPDFPathSegment_GetType(o),s=this.pdfiumModule.FPDFPathSegment_GetClose(o),F=this.memoryManager.malloc(4),d=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPathSegment_GetPoint(o,F,d);const _=this.pdfiumModule.pdfium.getValue(F,"float"),c=this.pdfiumModule.pdfium.getValue(d,"float");return this.memoryManager.free(F),this.memoryManager.free(d),{type:e,point:{x:_,y:c},isClosed:s}}readImageObject(r){const n=this.pdfiumModule.FPDFImageObj_GetBitmap(r),o=this.pdfiumModule.FPDFBitmap_GetBuffer(n),e=this.pdfiumModule.FPDFBitmap_GetWidth(n),s=this.pdfiumModule.FPDFBitmap_GetHeight(n),F=this.pdfiumModule.FPDFBitmap_GetFormat(n),d=e*s,_=new Uint8ClampedArray(4*d);for(let p=0;p<d;p++)if(F===2){const M=this.pdfiumModule.pdfium.getValue(o+3*p,"i8"),E=this.pdfiumModule.pdfium.getValue(o+3*p+1,"i8"),G=this.pdfiumModule.pdfium.getValue(o+3*p+2,"i8");_[4*p]=G,_[4*p+1]=E,_[4*p+2]=M,_[4*p+3]=100}const c={data:_,width:e,height:s},f=this.readPdfPageObjectTransformMatrix(r);return{type:Ye.IMAGE,imageData:c,matrix:f}}readFormObject(r){const n=this.pdfiumModule.FPDFFormObj_CountObjects(r),o=[];for(let s=0;s<n;s++){const F=this.pdfiumModule.FPDFFormObj_GetObject(r,s),d=this.readPdfPageObject(F);d&&o.push(d)}const e=this.readPdfPageObjectTransformMatrix(r);return{type:Ye.FORM,objects:o,matrix:e}}readPdfPageObjectTransformMatrix(r){const n=this.memoryManager.malloc(24);if(this.pdfiumModule.FPDFPageObj_GetMatrix(r,n)){const o=this.pdfiumModule.pdfium.getValue(n,"float"),e=this.pdfiumModule.pdfium.getValue(n+4,"float"),s=this.pdfiumModule.pdfium.getValue(n+8,"float"),F=this.pdfiumModule.pdfium.getValue(n+12,"float"),d=this.pdfiumModule.pdfium.getValue(n+16,"float"),_=this.pdfiumModule.pdfium.getValue(n+20,"float");return this.memoryManager.free(n),{a:o,b:e,c:s,d:F,e:d,f:_}}return this.memoryManager.free(n),{a:1,b:0,c:0,d:1,e:0,f:0}}readStampAnnotationContents(r){const n=[],o=this.pdfiumModule.FPDFAnnot_GetObjectCount(r);for(let e=0;e<o;e++){const s=this.pdfiumModule.FPDFAnnot_GetObject(r,e),F=this.readPdfPageObject(s);F&&n.push(F)}return n}getStrokeWidth(r){const n=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),s=this.pdfiumModule.FPDFAnnot_GetBorder(r,n,o,e)?this.pdfiumModule.pdfium.getValue(e,"float"):1;return this.memoryManager.free(n),this.memoryManager.free(o),this.memoryManager.free(e),s}getAnnotationFlags(r){const n=this.pdfiumModule.FPDFAnnot_GetFlags(r);return Gn(n)}setAnnotationFlags(r,n){const o=Sn(n);return this.pdfiumModule.FPDFAnnot_SetFlags(r,o)}readPdfCircleAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getAnnotationColor(n,ne.InteriorColor),d=this.getAnnotationColor(n),_=this.getAnnotationOpacity(n),{style:c,width:f}=this.getBorderStyle(n);let p;if(c===ce.DASHED){const{ok:M,pattern:E}=this.getBorderDashPattern(n);M&&(p=E)}return{pageIndex:r.index,id:o,type:R.CIRCLE,rect:s,color:F??"transparent",opacity:_,strokeWidth:f,strokeColor:d??"#FF0000",strokeStyle:c,...p!==void 0&&{strokeDashArray:p},...this.readBaseAnnotationProperties(n)}}readPdfSquareAnno(r,n,o){const e=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(r,e),F=this.getAnnotationColor(n,ne.InteriorColor),d=this.getAnnotationColor(n),_=this.getAnnotationOpacity(n),{style:c,width:f}=this.getBorderStyle(n);let p;if(c===ce.DASHED){const{ok:M,pattern:E}=this.getBorderDashPattern(n);M&&(p=E)}return{pageIndex:r.index,id:o,type:R.SQUARE,rect:s,color:F??"transparent",opacity:_,strokeColor:d??"#FF0000",strokeWidth:f,strokeStyle:c,...p!==void 0&&{strokeDashArray:p},...this.readBaseAnnotationProperties(n)}}readPdfAnno(r,n,o,e){const s=this.readPageAnnoRect(o),F=this.convertPageRectToDeviceRect(r,s);return{pageIndex:r.index,id:e,type:n,rect:F,...this.readBaseAnnotationProperties(o)}}getInReplyToId(r){const n=this.pdfiumModule.FPDFAnnot_GetLinkedAnnot(r,"IRT");if(n)return this.getAnnotString(n,"NM")}setInReplyToId(r,n,o){if(!o)return this.pdfiumModule.EPDFAnnot_SetLinkedAnnot(n,"IRT",0);const e=this.getAnnotationByName(r,o);return!!e&&this.pdfiumModule.EPDFAnnot_SetLinkedAnnot(n,"IRT",e)}applyBaseAnnotationProperties(r,n,o){return!!this.setAnnotString(n,"T",o.author||"")&&!!this.setAnnotString(n,"Contents",o.contents??"")&&!(o.modified&&!this.setAnnotationDate(n,"M",o.modified))&&!(o.created&&!this.setAnnotationDate(n,"CreationDate",o.created))&&!(o.flags&&!this.setAnnotationFlags(n,o.flags))&&!(o.custom&&!this.setAnnotCustom(n,o.custom))&&!!this.setInReplyToId(r,n,o.inReplyToId)&&!!this.setReplyType(n,o.replyType)}readBaseAnnotationProperties(r){const n=this.getAnnotString(r,"T"),o=this.getAnnotString(r,"Contents")||"",e=this.getAnnotationDate(r,"M"),s=this.getAnnotationDate(r,"CreationDate"),F=this.getAnnotationFlags(r),d=this.getAnnotCustom(r),_=this.getInReplyToId(r),c=this.getReplyType(r);return{author:n,contents:o,modified:e,created:s,flags:F,custom:d,..._&&{inReplyToId:_},...c&&c!==tn.Reply&&{replyType:c}}}getAnnotString(r,n){const o=this.pdfiumModule.FPDFAnnot_GetStringValue(r,n,0,0);if(o===0)return;const e=2*(o+1),s=this.memoryManager.malloc(e);this.pdfiumModule.FPDFAnnot_GetStringValue(r,n,s,e);const F=this.pdfiumModule.pdfium.UTF16ToString(s);return this.memoryManager.free(s),F||void 0}getAttachmentString(r,n){const o=this.pdfiumModule.FPDFAttachment_GetStringValue(r,n,0,0);if(o===0)return;const e=2*(o+1),s=this.memoryManager.malloc(e);this.pdfiumModule.FPDFAttachment_GetStringValue(r,n,s,e);const F=this.pdfiumModule.pdfium.UTF16ToString(s);return this.memoryManager.free(s),F||void 0}getAttachmentNumber(r,n){const o=this.memoryManager.malloc(4);try{return this.pdfiumModule.EPDFAttachment_GetIntegerValue(r,n,o)?this.pdfiumModule.pdfium.getValue(o,"i32")>>>0:void 0}finally{this.memoryManager.free(o)}}getAnnotCustom(r){const n=this.getAnnotString(r,"EPDFCustom");if(n)try{return JSON.parse(n)}catch(o){return console.warn("Failed to parse annotation custom data as JSON:",o),void console.warn("Invalid JSON string:",n)}}setAnnotCustom(r,n){if(n==null)return this.setAnnotString(r,"EPDFCustom","");try{const o=JSON.stringify(n);return this.setAnnotString(r,"EPDFCustom",o)}catch(o){return console.warn("Failed to stringify annotation custom data as JSON:",o),console.warn("Invalid data object:",n),!1}}getAnnotIntent(r){const n=this.pdfiumModule.EPDFAnnot_GetIntent(r,0,0);if(n===0)return;const o=2*(n+1),e=this.memoryManager.malloc(o);this.pdfiumModule.EPDFAnnot_GetIntent(r,e,o);const s=this.pdfiumModule.pdfium.UTF16ToString(e);return this.memoryManager.free(e),s&&s!=="undefined"?s:void 0}setAnnotIntent(r,n){return this.pdfiumModule.EPDFAnnot_SetIntent(r,n)}getAnnotRichContent(r){const n=this.pdfiumModule.EPDFAnnot_GetRichContent(r,0,0);if(n===0)return;const o=2*(n+1),e=this.memoryManager.malloc(o);this.pdfiumModule.EPDFAnnot_GetRichContent(r,e,o);const s=this.pdfiumModule.pdfium.UTF16ToString(e);return this.memoryManager.free(e),s||void 0}getAnnotationByName(r,n){return this.withWString(n,o=>this.pdfiumModule.EPDFPage_GetAnnotByName(r,o))}removeAnnotationByName(r,n){return this.withWString(n,o=>this.pdfiumModule.EPDFPage_RemoveAnnotByName(r,o))}setAnnotString(r,n,o){return this.withWString(o,e=>this.pdfiumModule.FPDFAnnot_SetStringValue(r,n,e))}setAttachmentString(r,n,o){return this.withWString(o,e=>this.pdfiumModule.FPDFAttachment_SetStringValue(r,n,e))}readPdfAnnoVertices(r,n){const o=[],e=this.pdfiumModule.FPDFAnnot_GetVertices(n,0,0),s=this.memoryManager.malloc(8*e);this.pdfiumModule.FPDFAnnot_GetVertices(n,s,e);for(let F=0;F<e;F++){const d=this.pdfiumModule.pdfium.getValue(s+8*F,"float"),_=this.pdfiumModule.pdfium.getValue(s+8*F+4,"float"),{x:c,y:f}=this.convertPagePointToDevicePoint(r,{x:d,y:_}),p=o[o.length-1];p&&p.x===c&&p.y===f||o.push({x:c,y:f})}return this.memoryManager.free(s),o}setPdfAnnoVertices(r,n,o){const e=this.pdfiumModule.pdfium,s=this.memoryManager.malloc(8*o.length);o.forEach((d,_)=>{const c=this.convertDevicePointToPagePoint(r,d);e.setValue(s+8*_+0,c.x,"float"),e.setValue(s+8*_+4,c.y,"float")});const F=this.pdfiumModule.EPDFAnnot_SetVertices(n,s,o.length);return this.memoryManager.free(s),F}readPdfBookmarkTarget(r,n,o){const e=n();if(e)return{type:"action",action:this.readPdfAction(r,e)};{const s=o();if(s)return{type:"destination",destination:this.readPdfDestination(r,s)}}}readPdfWidgetAnnoField(r,n){const o=this.pdfiumModule.FPDFAnnot_GetFormFieldFlags(r,n),e=this.pdfiumModule.FPDFAnnot_GetFormFieldType(r,n),s=se(this.pdfiumModule.pdfium,(f,p)=>this.pdfiumModule.FPDFAnnot_GetFormFieldName(r,n,f,p),this.pdfiumModule.pdfium.UTF16ToString),F=se(this.pdfiumModule.pdfium,(f,p)=>this.pdfiumModule.FPDFAnnot_GetFormFieldAlternateName(r,n,f,p),this.pdfiumModule.pdfium.UTF16ToString),d=se(this.pdfiumModule.pdfium,(f,p)=>this.pdfiumModule.FPDFAnnot_GetFormFieldValue(r,n,f,p),this.pdfiumModule.pdfium.UTF16ToString),_=[];if(e===lt.COMBOBOX||e===lt.LISTBOX){const f=this.pdfiumModule.FPDFAnnot_GetOptionCount(r,n);for(let p=0;p<f;p++){const M=se(this.pdfiumModule.pdfium,(G,N)=>this.pdfiumModule.FPDFAnnot_GetOptionLabel(r,n,p,G,N),this.pdfiumModule.pdfium.UTF16ToString),E=this.pdfiumModule.FPDFAnnot_IsOptionSelected(r,n,p);_.push({label:M,isSelected:E})}}let c=!1;return e!==lt.CHECKBOX&&e!==lt.RADIOBUTTON||(c=this.pdfiumModule.FPDFAnnot_IsChecked(r,n)),{flag:o,type:e,name:s,alternateName:F,value:d,isChecked:c,options:_}}renderPageAnnotationRaw(r,n,o,e){const{scaleFactor:s=1,rotation:F=qe.Degree0,dpr:d=1,mode:_=Je.Normal}=e??{};this.logger.debug(h,D,"renderPageAnnotation",r,n,o,e),this.logger.perf(h,D,"RenderPageAnnotation","Begin",`${r.id}-${n.index}-${o.id}`);const c=new dt,f=this.cache.getContext(r.id);if(!f)return this.logger.perf(h,D,"RenderPageAnnotation","End",`${r.id}-${n.index}-${o.id}`),y.reject({code:T.DocNotOpen,message:"document does not open"});const p=f.acquirePage(n.index),M=this.getAnnotationByName(p.pagePtr,o.id);if(!M)return this.logger.perf(h,D,"RenderPageAnnotation","End",`${r.id}-${n.index}-${o.id}`),p.release(),y.reject({code:T.NotFound,message:"annotation not found"});const E=Math.max(.01,s*d),G=rn(o.rect),N=rn(Cn(n.size,G,F,E)),B=Math.max(1,N.size.width),L=Math.max(1,N.size.height),K=4*B,$=K*L,W=this.memoryManager.malloc($),J=this.pdfiumModule.FPDFBitmap_CreateEx(B,L,4,W,K);this.pdfiumModule.FPDFBitmap_FillRect(J,0,0,B,L,0);const ae=on(G,F,B,L),x=this.memoryManager.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,x,6).set([ae.a,ae.b,ae.c,ae.d,ae.e,ae.f]);let H=!1;try{H=!!this.pdfiumModule.EPDF_RenderAnnotBitmap(J,p.pagePtr,M,_,x,16)}finally{this.memoryManager.free(x),this.pdfiumModule.FPDFBitmap_Destroy(J),this.pdfiumModule.FPDFPage_CloseAnnot(M),p.release()}if(!H)return this.memoryManager.free(W),this.logger.perf(h,D,"RenderPageAnnotation","End",`${r.id}-${n.index}-${o.id}`),y.reject({code:T.Unknown,message:"EPDF_RenderAnnotBitmap failed"});const ue=this.pdfiumModule.pdfium.HEAPU8.subarray(W,W+$),he={data:new Uint8ClampedArray(ue),width:B,height:L};return c.resolve(he),this.memoryManager.free(W),c}renderRectEncoded(r,n,o,e){const s=new dt,F=e?.rotation??qe.Degree0,d=this.cache.getContext(r.id);if(!d)return y.reject({code:T.DocNotOpen,message:"document does not open"});const _=Math.max(.01,e?.scaleFactor??1)*Math.max(1,e?.dpr??1),c=o.size.width,f=o.size.height,p=!(1&~F),M=Math.max(1,Math.round((p?f:c)*_)),E=Math.max(1,Math.round((p?c:f)*_)),G=4*M,N=G*E,B=d.acquirePage(n.index),L=e?.withForms??!1?B.getFormHandle():void 0,K=this.memoryManager.malloc(N),$=this.pdfiumModule.FPDFBitmap_CreateEx(M,E,4,K,G);this.pdfiumModule.FPDFBitmap_FillRect($,0,0,M,E,4294967295);const W=on(o,F,M,E),J=this.memoryManager.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,J,6).set([W.a,W.b,W.c,W.d,W.e,W.f]);const ae=this.memoryManager.malloc(16);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,ae,4).set([0,0,M,E]);let x=16;e?.withAnnotations&&(x|=1);try{if(this.pdfiumModule.FPDF_RenderPageBitmapWithMatrix($,B.pagePtr,J,ae,x),L!==void 0){const he=(function(Ie,ye,rt,ot){const de=ye.origin.x,_e=ye.origin.y,xe=de+ye.size.width,Me=_e+ye.size.height,Be=rt.width,ve=rt.height,Fe=Math.hypot(Ie.a,Ie.b),U=Math.hypot(Ie.c,Ie.d),Oe=!(1&~ot),j=Oe?Math.max(1,Math.round(ve*Fe)):Math.max(1,Math.round(Be*Fe)),Z=Oe?Math.max(1,Math.round(Be*U)):Math.max(1,Math.round(ve*U));let Ge,Se;switch(ot){case qe.Degree0:Ge=-Math.round(de*Fe),Se=-Math.round(_e*U);break;case qe.Degree90:Ge=Math.round((Me-ve)*Fe),Se=-Math.round(de*U);break;case qe.Degree180:Ge=Math.round((xe-Be)*Fe),Se=Math.round((Me-ve)*U);break;case qe.Degree270:Ge=-Math.round(_e*Fe),Se=Math.round((xe-Be)*U);break;default:Ge=-Math.round(de*Fe),Se=-Math.round(_e*U)}return{startX:Ge,startY:Se,formsWidth:j,formsHeight:Z,scaleX:Fe,scaleY:U}})(W,o,n.size,F),{startX:Ae,startY:C,formsWidth:Re,formsHeight:Ee,scaleX:ze,scaleY:_t}=he;this.pdfiumModule.FPDF_FFLDraw(L,$,B.pagePtr,Ae,C,Re,Ee,F,x)}}finally{B.release(),this.memoryManager.free(J),this.memoryManager.free(ae)}this.logger.perf(h,D,"RenderRectEncodedData","Begin",`${r.id}-${n.index}`);const H=this.pdfiumModule.pdfium.HEAPU8.subarray(K,K+N);this.logger.perf(h,D,"RenderRectEncodedData","End",`${r.id}-${n.index}`),this.logger.perf(h,D,"RenderRectEncodedImageData","Begin",`${r.id}-${n.index}`);const ue={data:new Uint8ClampedArray(H),width:M,height:E};return this.logger.perf(h,D,"RenderRectEncodedImageData","End",`${r.id}-${n.index}`),s.resolve(ue),this.pdfiumModule.FPDFBitmap_Destroy($),this.memoryManager.free(K),s}readPdfLinkAnnoTarget(r,n,o){const e=o();if(e)return{type:"destination",destination:this.readPdfDestination(r,e)};{const s=n();if(s)return{type:"action",action:this.readPdfAction(r,s)}}}createLocalDestPtr(r,n){var o,e;const s=this.pdfiumModule.FPDF_LoadPage(r,n.pageIndex);if(!s)return 0;try{if(n.zoom.mode===ge.XYZ){const{x:_,y:c,zoom:f}=n.zoom.params;return this.pdfiumModule.EPDFDest_CreateXYZ(s,!0,_,!0,c,!0,f)}let F,d=[];switch(n.zoom.mode){case ge.FitPage:F=ge.FitPage;break;case ge.FitHorizontal:F=ge.FitHorizontal,d=[((o=n.view)==null?void 0:o[0])??0];break;case ge.FitVertical:F=ge.FitVertical,d=[((e=n.view)==null?void 0:e[0])??0];break;case ge.FitRectangle:{const _=n.view??[];d=[_[0]??0,_[1]??0,_[2]??0,_[3]??0],F=ge.FitRectangle}break;case ge.Unknown:default:return 0}return this.withFloatArray(d,(_,c)=>this.pdfiumModule.EPDFDest_CreateView(s,F,_,c))}finally{this.pdfiumModule.FPDF_ClosePage(s)}}applyBookmarkTarget(r,n,o){if(o.type==="destination"){const s=this.createLocalDestPtr(r,o.destination);return s?!!this.pdfiumModule.EPDFBookmark_SetDest(r,n,s):!1}const e=o.action;switch(e.type){case ie.Goto:{const s=this.createLocalDestPtr(r,e.destination);if(!s)return!1;const F=this.pdfiumModule.EPDFAction_CreateGoTo(r,s);return!!F&&!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,F)}case ie.URI:{const s=this.pdfiumModule.EPDFAction_CreateURI(r,e.uri);return!!s&&!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,s)}case ie.LaunchAppOrOpenFile:{const s=this.withWString(e.path,F=>this.pdfiumModule.EPDFAction_CreateLaunch(r,F));return!!s&&!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,s)}case ie.RemoteGoto:case ie.Unsupported:default:return!1}}applyLinkTarget(r,n,o){if(o.type==="destination"){const s=this.createLocalDestPtr(r,o.destination);if(!s)return!1;const F=this.pdfiumModule.EPDFAction_CreateGoTo(r,s);return!!F&&!!this.pdfiumModule.EPDFAnnot_SetAction(n,F)}const e=o.action;switch(e.type){case ie.Goto:{const s=this.createLocalDestPtr(r,e.destination);if(!s)return!1;const F=this.pdfiumModule.EPDFAction_CreateGoTo(r,s);return!!F&&!!this.pdfiumModule.EPDFAnnot_SetAction(n,F)}case ie.URI:{const s=this.pdfiumModule.EPDFAction_CreateURI(r,e.uri);return!!s&&!!this.pdfiumModule.EPDFAnnot_SetAction(n,s)}case ie.LaunchAppOrOpenFile:{const s=this.withWString(e.path,F=>this.pdfiumModule.EPDFAction_CreateLaunch(r,F));return!!s&&!!this.pdfiumModule.EPDFAnnot_SetAction(n,s)}case ie.RemoteGoto:case ie.Unsupported:default:return!1}}readPdfAction(r,n){let o;switch(this.pdfiumModule.FPDFAction_GetType(n)){case ie.Unsupported:o={type:ie.Unsupported};break;case ie.Goto:{const e=this.pdfiumModule.FPDFAction_GetDest(r,n);if(e){const s=this.readPdfDestination(r,e);o={type:ie.Goto,destination:s}}else o={type:ie.Unsupported}}break;case ie.RemoteGoto:o={type:ie.Unsupported};break;case ie.URI:{const e=se(this.pdfiumModule.pdfium,(s,F)=>this.pdfiumModule.FPDFAction_GetURIPath(r,n,s,F),this.pdfiumModule.pdfium.UTF8ToString);o={type:ie.URI,uri:e}}break;case ie.LaunchAppOrOpenFile:{const e=se(this.pdfiumModule.pdfium,(s,F)=>this.pdfiumModule.FPDFAction_GetFilePath(n,s,F),this.pdfiumModule.pdfium.UTF8ToString);o={type:ie.LaunchAppOrOpenFile,path:e}}}return o}readPdfDestination(r,n){const o=this.pdfiumModule.FPDFDest_GetDestPageIndex(r,n),e=this.memoryManager.malloc(4),s=this.memoryManager.malloc(16),F=this.pdfiumModule.FPDFDest_GetView(n,e,s),d=this.pdfiumModule.pdfium.getValue(e,"i32"),_=[];for(let c=0;c<d;c++){const f=s+4*c;_.push(this.pdfiumModule.pdfium.getValue(f,"float"))}if(this.memoryManager.free(e),this.memoryManager.free(s),F===ge.XYZ){const c=this.memoryManager.malloc(1),f=this.memoryManager.malloc(1),p=this.memoryManager.malloc(1),M=this.memoryManager.malloc(4),E=this.memoryManager.malloc(4),G=this.memoryManager.malloc(4);if(this.pdfiumModule.FPDFDest_GetLocationInPage(n,c,f,p,M,E,G)){const N=this.pdfiumModule.pdfium.getValue(c,"i8"),B=this.pdfiumModule.pdfium.getValue(f,"i8"),L=this.pdfiumModule.pdfium.getValue(p,"i8"),K=N?this.pdfiumModule.pdfium.getValue(M,"float"):0,$=B?this.pdfiumModule.pdfium.getValue(E,"float"):0,W=L?this.pdfiumModule.pdfium.getValue(G,"float"):0;return this.memoryManager.free(c),this.memoryManager.free(f),this.memoryManager.free(p),this.memoryManager.free(M),this.memoryManager.free(E),this.memoryManager.free(G),{pageIndex:o,zoom:{mode:F,params:{x:K,y:$,zoom:W}},view:_}}return this.memoryManager.free(c),this.memoryManager.free(f),this.memoryManager.free(p),this.memoryManager.free(M),this.memoryManager.free(E),this.memoryManager.free(G),{pageIndex:o,zoom:{mode:F,params:{x:0,y:0,zoom:0}},view:_}}return{pageIndex:o,zoom:{mode:F},view:_}}readPdfAttachment(r,n){const o=this.pdfiumModule.FPDFDoc_GetAttachment(r,n),e=se(this.pdfiumModule.pdfium,(c,f)=>this.pdfiumModule.FPDFAttachment_GetName(o,c,f),this.pdfiumModule.pdfium.UTF16ToString),s=se(this.pdfiumModule.pdfium,(c,f)=>this.pdfiumModule.EPDFAttachment_GetDescription(o,c,f),this.pdfiumModule.pdfium.UTF16ToString),F=se(this.pdfiumModule.pdfium,(c,f)=>this.pdfiumModule.FPDFAttachment_GetSubtype(o,c,f),this.pdfiumModule.pdfium.UTF16ToString),d=this.getAttachmentDate(o,"CreationDate"),_=se(this.pdfiumModule.pdfium,(c,f)=>this.pdfiumModule.FPDFAttachment_GetStringValue(o,"Checksum",c,f),this.pdfiumModule.pdfium.UTF16ToString);return{index:n,name:e,description:s,mimeType:F,size:this.getAttachmentNumber(o,"Size"),creationDate:d,checksum:_}}convertDevicePointToPagePoint(r,n){const o=r.size.width,e=r.size.height,s=3&r.rotation;return s===0?{x:n.x,y:e-n.y}:s===1?{x:n.y,y:n.x}:s===2?{x:o-n.x,y:n.y}:{x:e-n.y,y:o-n.x}}convertPagePointToDevicePoint(r,n){const o=r.size.width,e=r.size.height,s=3&r.rotation;return s===0?{x:n.x,y:e-n.y}:s===1?{x:n.y,y:n.x}:s===2?{x:o-n.x,y:n.y}:{x:o-n.y,y:e-n.x}}convertPageRectToDeviceRect(r,n){const{x:o,y:e}=this.convertPagePointToDevicePoint(r,{x:n.left,y:n.top});return{origin:{x:o,y:e},size:{width:Math.abs(n.right-n.left),height:Math.abs(n.top-n.bottom)}}}readPageAnnoAppearanceStreams(r){return{normal:this.readPageAnnoAppearanceStream(r,Je.Normal),rollover:this.readPageAnnoAppearanceStream(r,Je.Rollover),down:this.readPageAnnoAppearanceStream(r,Je.Down)}}readPageAnnoAppearanceStream(r,n=Je.Normal){const o=2*(this.pdfiumModule.FPDFAnnot_GetAP(r,n,0,0)+1),e=this.memoryManager.malloc(o);this.pdfiumModule.FPDFAnnot_GetAP(r,n,e,o);const s=this.pdfiumModule.pdfium.UTF16ToString(e);return this.memoryManager.free(e),s}setPageAnnoAppearanceStream(r,n=Je.Normal,o){const e=2*(o.length+1),s=this.memoryManager.malloc(e);try{return this.pdfiumModule.pdfium.stringToUTF16(o,s,e),!!this.pdfiumModule.FPDFAnnot_SetAP(r,n,s)}finally{this.memoryManager.free(s)}}setPageAnnoRect(r,n,o){const e=Math.floor(o.origin.x),s=Math.floor(o.origin.y),F=Math.floor(o.origin.x+o.size.width),d=Math.floor(o.origin.y+o.size.height),_=this.convertDevicePointToPagePoint(r,{x:e,y:s}),c=this.convertDevicePointToPagePoint(r,{x:F,y:s}),f=this.convertDevicePointToPagePoint(r,{x:F,y:d}),p=this.convertDevicePointToPagePoint(r,{x:e,y:d});let M=Math.min(_.x,c.x,f.x,p.x),E=Math.max(_.x,c.x,f.x,p.x),G=Math.min(_.y,c.y,f.y,p.y),N=Math.max(_.y,c.y,f.y,p.y);M>E&&([M,E]=[E,M]),G>N&&([G,N]=[N,G]);const B=this.memoryManager.malloc(16),L=this.pdfiumModule.pdfium;L.setValue(B+0,M,"float"),L.setValue(B+4,N,"float"),L.setValue(B+8,E,"float"),L.setValue(B+12,G,"float");const K=this.pdfiumModule.FPDFAnnot_SetRect(n,B);return this.memoryManager.free(B),!!K}readPageAnnoRect(r){const n=this.memoryManager.malloc(16),o={left:0,top:0,right:0,bottom:0};return this.pdfiumModule.FPDFAnnot_GetRect(r,n)&&(o.left=this.pdfiumModule.pdfium.getValue(n,"float"),o.top=this.pdfiumModule.pdfium.getValue(n+4,"float"),o.right=this.pdfiumModule.pdfium.getValue(n+8,"float"),o.bottom=this.pdfiumModule.pdfium.getValue(n+12,"float")),this.memoryManager.free(n),o}getHighlightRects(r,n,o,e){const s=this.pdfiumModule.FPDFText_CountRects(n,o,e),F=[],d=this.memoryManager.malloc(8),_=this.memoryManager.malloc(8),c=this.memoryManager.malloc(8),f=this.memoryManager.malloc(8);for(let p=0;p<s;p++){if(!this.pdfiumModule.FPDFText_GetRect(n,p,d,_,c,f))continue;const M=this.pdfiumModule.pdfium.getValue(d,"double"),E=this.pdfiumModule.pdfium.getValue(_,"double"),G=this.pdfiumModule.pdfium.getValue(c,"double"),N=this.pdfiumModule.pdfium.getValue(f,"double"),B=this.convertPagePointToDevicePoint(r,{x:M,y:E}),L=this.convertPagePointToDevicePoint(r,{x:G,y:E}),K=this.convertPagePointToDevicePoint(r,{x:G,y:N}),$=this.convertPagePointToDevicePoint(r,{x:M,y:N}),W=[B.x,L.x,K.x,$.x],J=[B.y,L.y,K.y,$.y],ae=Math.min(...W),x=Math.min(...J),H=Math.max(...W)-ae,ue=Math.max(...J)-x;F.push({origin:{x:ae,y:x},size:{width:Math.ceil(H),height:Math.ceil(ue)}})}return this.memoryManager.free(d),this.memoryManager.free(_),this.memoryManager.free(c),this.memoryManager.free(f),F}searchInPage(r,n,o,e){this.logger.debug(h,D,"searchInPage",r,n,o,e),this.logger.perf(h,D,"SearchInPage","Begin",`${r.id}-${n.index}`);const s=this.cache.getContext(r.id);if(!s)return this.logger.perf(h,D,"PreparePrintDocument","End",r.id),y.reject({code:T.DocNotOpen,message:"Document is not open"});const F=2*(o.length+1),d=this.memoryManager.malloc(F);this.pdfiumModule.pdfium.stringToUTF16(o,d,F);try{const _=this.searchAllInPage(s,n,d,e);return y.resolve(_)}finally{this.memoryManager.free(d)}}getAnnotationsBatch(r,n){this.logger.debug(h,D,"getAnnotationsBatch",r.id,n.length);const o=new dt;return queueMicrotask(()=>{this.logger.perf(h,D,"GetAnnotationsBatch","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return void o.reject({code:T.DocNotOpen,message:"Document is not open"});const s={},F=n.length;for(let d=0;d<n.length;d++){const _=n[d],c=this.readPageAnnotationsRaw(e,_);s[_.index]=c,o.progress({pageIndex:_.index,result:c,completed:d+1,total:F})}this.logger.perf(h,D,"GetAnnotationsBatch","End",r.id),o.resolve(s)}),o}searchBatch(r,n,o,e){this.logger.debug(h,D,"searchBatch",r.id,n.length,o);const s=new dt;return queueMicrotask(()=>{this.logger.perf(h,D,"SearchBatch","Begin",r.id);const F=this.cache.getContext(r.id);if(!F)return void s.reject({code:T.DocNotOpen,message:"Document is not open"});const d=2*(o.length+1),_=this.memoryManager.malloc(d);this.pdfiumModule.pdfium.stringToUTF16(o,_,d);try{const c={},f=n.length;for(let p=0;p<n.length;p++){const M=n[p],E=this.searchAllInPage(F,M,_,e);c[M.index]=E,s.progress({pageIndex:M.index,result:E,completed:p+1,total:f})}this.logger.perf(h,D,"SearchBatch","End",r.id),s.resolve(c)}finally{this.memoryManager.free(_)}}),s}buildContext(r,n,o,e=30){const s=/[\s\u00A0.,;:!?()\[\]{}<>/\\\-"'`"\u2013\u2014]/;let F=n;for(;F>0&&s.test(r[F-1]);)F--;let d=0;for(;F>0&&d<e;)F--,s.test(r[F])||d++;F=(M=>{for(;M>0&&!s.test(r[M-1]);)M--;return M})(F);let _=n+o;for(;_<r.length&&s.test(r[_]);)_++;for(d=0;_<r.length&&d<e;)s.test(r[_])||d++,_++;_=(M=>{for(;M<r.length&&!s.test(r[M]);)M++;return M})(_);const c=r.slice(F,n).replace(/\s+/g," ").trimStart(),f=r.slice(n,n+o),p=r.slice(n+o,_).replace(/\s+/g," ").trimEnd();return{before:this.tidy(c),match:this.tidy(f),after:this.tidy(p),truncatedLeft:F>0,truncatedRight:_<r.length}}tidy(r){return r.replace(/-\uFFFE\s*/g,"").replace(/[\uFFFE\u00AD\u200B\u2060\uFEFF]/g,"").replace(/\s+/g," ")}searchAllInPage(r,n,o,e){return r.borrowPage(n.index,s=>{const F=s.getTextPage(),d=this.pdfiumModule.FPDFText_CountChars(F),_=this.memoryManager.malloc(2*(d+1));this.pdfiumModule.FPDFText_GetText(F,0,d,_);const c=this.pdfiumModule.pdfium.UTF16ToString(_);this.memoryManager.free(_);const f=[],p=this.pdfiumModule.FPDFText_FindStart(F,o,e,0);for(;this.pdfiumModule.FPDFText_FindNext(p);){const M=this.pdfiumModule.FPDFText_GetSchResultIndex(p),E=this.pdfiumModule.FPDFText_GetSchCount(p),G=this.getHighlightRects(n,F,M,E),N=this.buildContext(c,M,E);f.push({pageIndex:n.index,charIndex:M,charCount:E,rects:G,context:N})}return this.pdfiumModule.FPDFText_FindClose(p),f})}preparePrintDocument(r,n){const{includeAnnotations:o=!0,pageRange:e=null}=n??{};this.logger.debug(h,D,"preparePrintDocument",r,n),this.logger.perf(h,D,"PreparePrintDocument","Begin",r.id);const s=this.cache.getContext(r.id);if(!s)return this.logger.perf(h,D,"PreparePrintDocument","End",r.id),y.reject({code:T.DocNotOpen,message:"Document is not open"});const F=this.pdfiumModule.FPDF_CreateNewDocument();if(!F)return this.logger.perf(h,D,"PreparePrintDocument","End",r.id),y.reject({code:T.CantCreateNewDoc,message:"Cannot create print document"});try{const d=this.sanitizePageRange(e,r.pageCount);if(!this.pdfiumModule.FPDF_ImportPages(F,s.docPtr,d??"",0))return this.pdfiumModule.FPDF_CloseDocument(F),this.logger.error(h,D,"Failed to import pages for printing"),this.logger.perf(h,D,"PreparePrintDocument","End",r.id),y.reject({code:T.CantImportPages,message:"Failed to import pages for printing"});if(!o){const c=this.removeAnnotationsFromPrintDocument(F);if(!c.success)return this.pdfiumModule.FPDF_CloseDocument(F),this.logger.error(h,D,`Failed to remove annotations: ${c.error}`),this.logger.perf(h,D,"PreparePrintDocument","End",r.id),y.reject({code:T.Unknown,message:`Failed to prepare print document: ${c.error}`});this.logger.debug(h,D,`Removed ${c.annotationsRemoved} annotations from ${c.pagesProcessed} pages`)}const _=this.saveDocument(F);return this.pdfiumModule.FPDF_CloseDocument(F),this.logger.perf(h,D,"PreparePrintDocument","End",r.id),y.resolve(_)}catch(d){return F&&this.pdfiumModule.FPDF_CloseDocument(F),this.logger.error(h,D,"preparePrintDocument failed",d),this.logger.perf(h,D,"PreparePrintDocument","End",r.id),y.reject({code:T.Unknown,message:d instanceof Error?d.message:"Failed to prepare print document"})}}removeAnnotationsFromPrintDocument(r){let n=0,o=0;try{const e=this.pdfiumModule.FPDF_GetPageCount(r);for(let s=0;s<e;s++){const F=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(r,s);if(F<=0){o++;continue}let d=0;for(let _=F-1;_>=0;_--)this.pdfiumModule.EPDFPage_RemoveAnnotRaw(r,s,_)?(d++,n++):this.logger.warn(h,D,`Failed to remove annotation ${_} from page ${s}`);if(d>0){const _=this.pdfiumModule.FPDF_LoadPage(r,s);_&&(this.pdfiumModule.FPDFPage_GenerateContent(_),this.pdfiumModule.FPDF_ClosePage(_))}o++}return{success:!0,annotationsRemoved:n,pagesProcessed:o}}catch(e){return{success:!1,annotationsRemoved:n,pagesProcessed:o,error:e instanceof Error?e.message:"Unknown error during annotation removal"}}}sanitizePageRange(r,n){if(!r||r.trim()==="")return null;try{const o=[],e=r.split(",");for(const c of e){const f=c.trim();if(f.includes("-")){const[p,M]=f.split("-").map(L=>L.trim()),E=parseInt(p,10),G=parseInt(M,10);if(isNaN(E)||isNaN(G)){this.logger.warn(h,D,`Invalid range: ${f}`);continue}const N=Math.max(1,Math.min(E,n)),B=Math.max(1,Math.min(G,n));for(let L=N;L<=B;L++)o.includes(L)||o.push(L)}else{const p=parseInt(f,10);if(isNaN(p)){this.logger.warn(h,D,`Invalid page number: ${f}`);continue}const M=Math.max(1,Math.min(p,n));o.includes(M)||o.push(M)}}if(o.length===0)return this.logger.warn(h,D,"No valid pages in range, using all pages"),null;o.sort((c,f)=>c-f);const s=[];let F=o[0],d=o[0];for(let c=1;c<o.length;c++)o[c]===d+1||(F===d?s.push(F.toString()):d-F===1?(s.push(F.toString()),s.push(d.toString())):s.push(`${F}-${d}`),F=o[c]),d=o[c];F===d?s.push(F.toString()):d-F===1?(s.push(F.toString()),s.push(d.toString())):s.push(`${F}-${d}`);const _=s.join(",");return this.logger.debug(h,D,`Sanitized page range: "${r}" -> "${_}"`),_}catch(o){return this.logger.error(h,D,`Error sanitizing page range: ${o}`),null}}}async function Xn(z,r){const n=await fetch(z),o=await n.arrayBuffer(),e=await kn({wasmBinary:o}),s=new $n(e,{logger:r?.logger,fontFallback:r?.fontFallback});return new xn(s,{imageConverter:vn,logger:r?.logger})}export{Xn as createPdfiumEngine};
