import{c as r,i as c}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{a as l,b as f,h as m,f as y,n as v,d as E}from"./main-DSprMeGA.js";import{P as B}from"./PDFButton-BowUC9ah.js";import{a as h}from"./pdf-operations-BcGECRsE.js";import"./mobileMenu-BoMunYmR.js";import"./index-YkV0U4e7.js";const o={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s();function s(){r({icons:c});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),n=document.getElementById("back-to-tools"),i=document.getElementById("process-btn");t&&(t.addEventListener("change",x),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",a=>{a.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",a=>{a.preventDefault(),e.classList.remove("border-indigo-500"),a.dataTransfer?.files.length&&p(a.dataTransfer.files)})),n&&n.addEventListener("click",()=>{window.location.href="/"}),i&&i.addEventListener("click",L)}function x(t){const e=t.target;e.files?.length&&p(e.files)}async function p(t){const e=t[0];if(!e||e.type!=="application/pdf"){l("Invalid File","Please upload a valid PDF file.");return}f("Loading PDF...");try{const n=await e.arrayBuffer();o.pdfDoc=await B.load(n),o.file=e,D(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(n){console.error(n),l("Error","Failed to load PDF file.")}finally{m()}}function D(){const t=document.getElementById("file-display-area");if(!t||!o.file||!o.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const n=document.createElement("div");n.className="flex flex-col flex-1 min-w-0";const i=document.createElement("div");i.className="truncate font-medium text-gray-200 text-sm mb-1",i.textContent=o.file.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=`${y(o.file.size)} â€¢ ${o.pdfDoc.getPageCount()} pages`,n.append(i,a);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=u,e.append(n,d),t.appendChild(e),r({icons:c})}function u(){o.file=null,o.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function L(){if(!o.pdfDoc){l("Error","Please upload a PDF file first.");return}f("Adding page numbers...");try{const t=document.getElementById("position").value,e=parseInt(document.getElementById("font-size").value)||12,n=document.getElementById("number-format").value==="page_x_of_y"?"page_x_of_y":"simple",i=document.getElementById("text-color").value,a=v(i),d=new Uint8Array(await o.pdfDoc.save()),g=await h(d,{position:t,fontSize:e,format:n,color:a});E(new Blob([g],{type:"application/pdf"}),"paginated.pdf"),l("Success","Page numbers added successfully!","success",()=>{u()})}catch(t){console.error(t),l("Error","Could not add page numbers.")}finally{m()}}
