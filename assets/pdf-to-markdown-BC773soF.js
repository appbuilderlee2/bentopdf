const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-CX_3d3rd.js","assets/main-X9THBjap.js","assets/style-DHqpffR4.js","assets/style-Bksgp8bg.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as _,i as $}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{s as t,a as g,b as p,d as C,h as w,_ as F,f as L,r as P,c as M}from"./main-X9THBjap.js";import{l as A}from"./pymupdf-loader-DSwOn04P.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-provider-C9fvsoLq.js";document.addEventListener("DOMContentLoaded",()=>{const d=document.getElementById("file-input"),l=document.getElementById("drop-zone"),c=document.getElementById("process-btn"),u=document.getElementById("file-display-area"),v=document.getElementById("convert-options"),y=document.getElementById("file-controls"),b=document.getElementById("add-more-btn"),k=document.getElementById("clear-files-btn"),B=document.getElementById("back-to-tools"),I=document.getElementById("include-images");B&&B.addEventListener("click",()=>{window.location.href="/bentopdf/"});const h=async()=>{if(!(!u||!v||!c||!y))if(t.files.length>0){u.innerHTML="";for(let e=0;e<t.files.length;e++){const n=t.files[e],o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const i=document.createElement("div");i.className="flex flex-col overflow-hidden";const r=document.createElement("div");r.className="truncate font-medium text-gray-200 text-sm mb-1",r.textContent=n.name;const s=document.createElement("div");s.className="text-xs text-gray-400",s.textContent=`${L(n.size)} • Loading pages...`,i.append(r,s);const a=document.createElement("button");a.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",a.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',a.onclick=()=>{t.files=t.files.filter((m,f)=>f!==e),h()},o.append(i,a),u.appendChild(o);try{const m=await P(n),f=await M({data:m}).promise;s.textContent=`${L(n.size)} • ${f.numPages} pages`}catch{s.textContent=`${L(n.size)} • Could not load page count`}}_({icons:$}),y.classList.remove("hidden"),v.classList.remove("hidden"),c.disabled=!1}else u.innerHTML="",y.classList.add("hidden"),v.classList.add("hidden"),c.disabled=!0},E=()=>{t.files=[],t.pdfDoc=null,h()},D=async()=>{try{if(t.files.length===0){g("No Files","Please select at least one PDF file.");return}p("Loading PDF converter...");const e=await A(),n=I?.checked??!1;if(t.files.length===1){const o=t.files[0];p(`Converting ${o.name}...`);const i=await e.pdfToMarkdown(o,{includeImages:n}),r=o.name.replace(/\.pdf$/i,"")+".md",s=new Blob([i],{type:"text/markdown"});C(s,r),w(),g("Conversion Complete",`Successfully converted ${o.name} to Markdown.`,"success",()=>E())}else{p("Converting multiple PDFs...");const o=(await F(async()=>{const{default:s}=await import("./jszip.min-CX_3d3rd.js").then(a=>a.j);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default,i=new o;for(let s=0;s<t.files.length;s++){const a=t.files[s];p(`Converting ${s+1}/${t.files.length}: ${a.name}...`);const m=await e.pdfToMarkdown(a,{includeImages:n}),f=a.name.replace(/\.pdf$/i,"");i.file(`${f}.md`,m)}p("Creating ZIP archive...");const r=await i.generateAsync({type:"blob"});C(r,"markdown-files.zip"),w(),g("Conversion Complete",`Successfully converted ${t.files.length} PDF(s) to Markdown.`,"success",()=>E())}}catch(e){w(),g("Error",`An error occurred during conversion. Error: ${e.message}`)}},x=e=>{if(e&&e.length>0){const n=Array.from(e).filter(o=>o.type==="application/pdf"||o.name.toLowerCase().endsWith(".pdf"));t.files=[...t.files,...n],h()}};d&&l&&(d.addEventListener("change",e=>{x(e.target.files)}),l.addEventListener("dragover",e=>{e.preventDefault(),l.classList.add("bg-gray-700")}),l.addEventListener("dragleave",e=>{e.preventDefault(),l.classList.remove("bg-gray-700")}),l.addEventListener("drop",e=>{e.preventDefault(),l.classList.remove("bg-gray-700");const n=e.dataTransfer?.files;n&&n.length>0&&x(n)}),d.addEventListener("click",()=>{d.value=""})),b&&b.addEventListener("click",()=>{d.click()}),k&&k.addEventListener("click",()=>{E()}),c&&c.addEventListener("click",D)});
