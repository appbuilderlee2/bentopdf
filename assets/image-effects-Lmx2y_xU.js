function y(d){const o=d.data;for(let t=0;t<o.length;t+=4){const m=Math.round(.299*o[t]+.587*o[t+1]+.114*o[t+2]);o[t]=m,o[t+1]=m,o[t+2]=m}}function I(d){const o=d.data;for(let t=0;t<o.length;t+=4)o[t]=255-o[t],o[t+1]=255-o[t+1],o[t+2]=255-o[t+2]}function g(d,o,t){d/=255,o/=255,t/=255;const m=Math.max(d,o,t),x=Math.min(d,o,t),p=(m+x)/2;let n=0,e=0;if(m!==x){const h=m-x;e=p>.5?h/(2-m-x):h/(m+x),m===d?n=((o-t)/h+(o<t?6:0))/6:m===o?n=((t-d)/h+2)/6:n=((d-o)/h+4)/6}return[n,e,p]}function S(d,o,t){if(o===0){const n=Math.round(t*255);return[n,n,n]}const m=(n,e,h)=>(h<0&&(h+=1),h>1&&(h-=1),h<1/6?n+(e-n)*6*h:h<1/2?e:h<2/3?n+(e-n)*(2/3-h)*6:n),x=t<.5?t*(1+o):t+o-t*o,p=2*t-x;return[Math.round(m(p,x,d+1/3)*255),Math.round(m(p,x,d)*255),Math.round(m(p,x,d-1/3)*255)]}function R(d,o,t,m,x=1){const p=o.getContext("2d"),n=d.width,e=d.height,h=t.blur*x,b=t.noise*x,w=document.createElement("canvas");w.width=n,w.height=e;const r=w.getContext("2d");if(h>0&&(r.filter=`blur(${h}px)`),r.putImageData(d,0,0),h>0){const a=document.createElement("canvas");a.width=n,a.height=e;const c=a.getContext("2d");c.filter=`blur(${h}px)`,c.drawImage(w,0,0),r.filter="none",r.clearRect(0,0,n,e),r.drawImage(a,0,0)}const u=r.getImageData(0,0,n,e),l=u.data,M=t.contrast!==0?259*(t.contrast+255)/(255*(259-t.contrast)):1;for(let a=0;a<l.length;a+=4){let c=l[a],s=l[a+1],f=l[a+2];if(t.grayscale){const i=Math.round(.299*c+.587*s+.114*f);c=i,s=i,f=i}if(t.brightness!==0&&(c+=t.brightness,s+=t.brightness,f+=t.brightness),t.contrast!==0&&(c=M*(c-128)+128,s=M*(s-128)+128,f=M*(f-128)+128),t.yellowish>0){const i=t.yellowish/50;c+=20*i,s+=12*i,f-=15*i}if(b>0){const i=(Math.random()-.5)*b;c+=i,s+=i,f+=i}l[a]=Math.max(0,Math.min(255,c)),l[a+1]=Math.max(0,Math.min(255,s)),l[a+2]=Math.max(0,Math.min(255,f))}if(r.putImageData(u,0,0),t.border){const a=Math.max(n,e)*.02,c=r.createLinearGradient(0,0,a,0);c.addColorStop(0,"rgba(0,0,0,0.3)"),c.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=c,r.fillRect(0,0,a,e);const s=r.createLinearGradient(n,0,n-a,0);s.addColorStop(0,"rgba(0,0,0,0.3)"),s.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=s,r.fillRect(n-a,0,a,e);const f=r.createLinearGradient(0,0,0,a);f.addColorStop(0,"rgba(0,0,0,0.3)"),f.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=f,r.fillRect(0,0,n,a);const i=r.createLinearGradient(0,e,0,e-a);i.addColorStop(0,"rgba(0,0,0,0.3)"),i.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=i,r.fillRect(0,e-a,n,a)}if(m!==0){const a=m*Math.PI/180,c=Math.abs(Math.cos(a)),s=Math.abs(Math.sin(a)),f=Math.ceil(n*c+e*s),i=Math.ceil(n*s+e*c);o.width=f,o.height=i,p.fillStyle="#ffffff",p.fillRect(0,0,f,i),p.translate(f/2,i/2),p.rotate(a),p.drawImage(w,-n/2,-e/2),p.setTransform(1,0,0,1,0,0)}else o.width=n,o.height=e,p.drawImage(w,0,0)}function j(d,o,t){const m=o.getContext("2d"),x=d.width,p=d.height;o.width=x,o.height=p;const n=new ImageData(new Uint8ClampedArray(d.data),x,p),e=n.data,h=t.contrast!==0?259*(t.contrast+255)/(255*(259-t.contrast)):1,b=t.gamma!==1?1/t.gamma:1,w=t.sepia/100;for(let r=0;r<e.length;r+=4){let u=e[r],l=e[r+1],M=e[r+2];if(t.brightness!==0){const a=t.brightness*2.55;u+=a,l+=a,M+=a}if(t.contrast!==0&&(u=h*(u-128)+128,l=h*(l-128)+128,M=h*(M-128)+128),t.saturation!==0||t.hueShift!==0){const[a,c,s]=g(Math.max(0,Math.min(255,u)),Math.max(0,Math.min(255,l)),Math.max(0,Math.min(255,M)));let f=a;t.hueShift!==0&&(f=(a+t.hueShift/360)%1,f<0&&(f+=1));let i=c;if(t.saturation!==0){const C=t.saturation/100;i=C>0?c+(1-c)*C:c*(1+C),i=Math.max(0,Math.min(1,i))}[u,l,M]=S(f,i,s)}if(t.temperature!==0){const a=t.temperature/50;u+=30*a,M-=30*a}if(t.tint!==0){const a=t.tint/50;l+=30*a}if(t.gamma!==1&&(u=Math.pow(Math.max(0,Math.min(255,u))/255,b)*255,l=Math.pow(Math.max(0,Math.min(255,l))/255,b)*255,M=Math.pow(Math.max(0,Math.min(255,M))/255,b)*255),t.sepia>0){const a=.393*u+.769*l+.189*M,c=.349*u+.686*l+.168*M,s=.272*u+.534*l+.131*M;u=u+(a-u)*w,l=l+(c-l)*w,M=M+(s-M)*w}e[r]=Math.max(0,Math.min(255,u)),e[r+1]=Math.max(0,Math.min(255,l)),e[r+2]=Math.max(0,Math.min(255,M))}m.putImageData(n,0,0)}export{I as a,R as b,j as c,y as d};
