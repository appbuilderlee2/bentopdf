import{c as P,i as I}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{s as n,a as d,b as v,d as B,h as E,f as k}from"./main-X9THBjap.js";import{l as F}from"./pymupdf-loader-DSwOn04P.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-provider-C9fvsoLq.js";const T=[".psd"],C="PSD";let y=null;async function N(){return y||(y=await F()),y}document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("file-input"),s=document.getElementById("drop-zone"),r=document.getElementById("process-btn"),l=document.getElementById("file-display-area"),m=document.getElementById("file-controls"),L=document.getElementById("add-more-btn"),h=document.getElementById("clear-files-btn"),b=document.getElementById("back-to-tools");b&&b.addEventListener("click",()=>{window.location.href="/bentopdf/"});const f=async()=>{if(!(!l||!r||!m))if(n.files.length>0){l.innerHTML="";for(let e=0;e<n.files.length;e++){const t=n.files[e],o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex flex-col overflow-hidden";const u=document.createElement("div");u.className="truncate font-medium text-gray-200 text-sm mb-1",u.textContent=t.name;const g=document.createElement("div");g.className="text-xs text-gray-400",g.textContent=k(t.size),a.append(u,g);const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{n.files=n.files.filter((S,D)=>D!==e),f()},o.append(a,c),l.appendChild(o)}P({icons:I}),m.classList.remove("hidden"),r.classList.remove("hidden")}else l.innerHTML="",m.classList.add("hidden"),r.classList.add("hidden")},p=()=>{n.files=[],f()},w=async()=>{if(n.files.length===0){d("No Files",`Please select at least one ${C} file.`);return}try{v("Loading engine...");const e=await N();if(n.files.length===1){const t=n.files[0];v(`Converting ${t.name}...`);const o=await e.imageToPdf(t,{imageType:"psd"}),a=t.name.replace(/\.[^/.]+$/,"");B(o,`${a}.pdf`),E(),d("Conversion Complete",`Successfully converted ${t.name} to PDF.`,"success",()=>p())}else{v("Converting multiple files...");const t=await e.imagesToPdf(n.files);B(t,"psd_to_pdf.pdf"),E(),d("Conversion Complete",`Successfully converted ${n.files.length} PSD files to a single PDF.`,"success",()=>p())}}catch(e){E();const t=e instanceof Error?e.message:"Unknown error";console.error(`[${C}ToPDF] Error:`,e),d("Error",`An error occurred during conversion. Error: ${t}`)}},x=e=>{if(e&&e.length>0){const t=Array.from(e).filter(o=>{const a="."+o.name.split(".").pop()?.toLowerCase();return T.includes(a)});t.length>0&&(n.files=[...n.files,...t],f())}};i&&s&&(i.addEventListener("change",e=>x(e.target.files)),s.addEventListener("dragover",e=>{e.preventDefault(),s.classList.add("bg-gray-700")}),s.addEventListener("dragleave",e=>{e.preventDefault(),s.classList.remove("bg-gray-700")}),s.addEventListener("drop",e=>{e.preventDefault(),s.classList.remove("bg-gray-700"),x(e.dataTransfer?.files??null)}),i.addEventListener("click",()=>{i.value=""})),L&&L.addEventListener("click",()=>i.click()),h&&h.addEventListener("click",p),r&&r.addEventListener("click",w)});
