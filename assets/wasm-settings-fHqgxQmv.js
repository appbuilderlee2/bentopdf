import{c as f,i as m}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{b as L,h as g,a}from"./main-X9THBjap.js";import{W as e}from"./wasm-provider-C9fvsoLq.js";import{c as w}from"./pymupdf-loader-DSwOn04P.js";import{c as S}from"./ghostscript-dynamic-loader-CEQ1Fp2-.js";import"./mobileMenu-BoMunYmR.js";document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();function y(){f({icons:m}),document.querySelectorAll(".copy-btn").forEach(t=>{t.addEventListener("click",async()=>{const n=t.getAttribute("data-copy");if(n){await navigator.clipboard.writeText(n);const c=t.querySelector("svg");if(c){const r=document.createElement("i");r.setAttribute("data-lucide","check"),r.className="w-3.5 h-3.5",c.replaceWith(r),f({icons:m}),setTimeout(()=>{const s=t.querySelector("svg");if(s){const p=document.createElement("i");p.setAttribute("data-lucide","copy"),p.className="w-3.5 h-3.5",s.replaceWith(p),f({icons:m})}},1500)}}})});const i=document.getElementById("pymupdf-url"),v=document.getElementById("pymupdf-test"),h=document.getElementById("pymupdf-status"),l=document.getElementById("ghostscript-url"),E=document.getElementById("ghostscript-test"),x=document.getElementById("ghostscript-status"),u=document.getElementById("cpdf-url"),C=document.getElementById("cpdf-test"),U=document.getElementById("cpdf-status"),b=document.getElementById("save-btn"),B=document.getElementById("clear-btn");document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/bentopdf/"}),I();function I(){const t=[{name:"pymupdf",input:i},{name:"ghostscript",input:l},{name:"cpdf",input:u}],n=e.getAllProviders();for(const{name:c,input:r}of t){const s=n[c];s&&(e.isUserConfigured(c)?r.value=s:(r.value="",r.placeholder=`Using default: ${s}`),o(c,!0))}}function o(t,n,c=!1){const s={pymupdf:h,ghostscript:x,cpdf:U}[t];s&&(c?(s.textContent="Testing...",s.className="text-xs px-2 py-1 rounded-full bg-yellow-600/30 text-yellow-300"):n&&e.isUserConfigured(t)?(s.textContent="Custom Override",s.className="text-xs px-2 py-1 rounded-full bg-blue-600/30 text-blue-300"):n||e.hasEnvDefault(t)?(s.textContent="Pre-configured",s.className="text-xs px-2 py-1 rounded-full bg-green-600/30 text-green-300"):(s.textContent="Not Configured",s.className="text-xs px-2 py-1 rounded-full bg-gray-600 text-gray-300"))}async function d(t,n){if(!n.trim()){a("Empty URL","Please enter a URL to test.");return}o(t,!1,!0);const c=await e.validateUrl(t,n);c.valid?(o(t,!0),a("Success",`Connection to ${e.getPackageDisplayName(t)} successful!`,"success")):(o(t,!1),a("Connection Failed",c.error||"Could not connect to the URL."))}v?.addEventListener("click",()=>{d("pymupdf",i.value)}),E?.addEventListener("click",()=>{d("ghostscript",l.value)}),C?.addEventListener("click",()=>{d("cpdf",u.value)}),b?.addEventListener("click",async()=>{L("Saving configuration...");try{i.value.trim()?(e.setUrl("pymupdf",i.value.trim()),o("pymupdf",!0)):(e.removeUrl("pymupdf"),o("pymupdf",!1)),l.value.trim()?(e.setUrl("ghostscript",l.value.trim()),o("ghostscript",!0)):(e.removeUrl("ghostscript"),o("ghostscript",!1)),u.value.trim()?(e.setUrl("cpdf",u.value.trim()),o("cpdf",!0)):(e.removeUrl("cpdf"),o("cpdf",!1)),g(),a("Saved","Configuration saved successfully!","success")}catch(t){g();const n=t instanceof Error?t.message:"Unknown error";a("Error",`Failed to save configuration: ${n}`)}}),B?.addEventListener("click",()=>{e.clearAll(),w(),S();const t=e.getAllProviders();i.value=t.pymupdf||"",l.value=t.ghostscript||"",u.value=t.cpdf||"",o("pymupdf",e.isConfigured("pymupdf")),o("ghostscript",e.isConfigured("ghostscript")),o("cpdf",e.isConfigured("cpdf"));const n=e.hasEnvDefault("pymupdf")||e.hasEnvDefault("ghostscript")||e.hasEnvDefault("cpdf");a("Reset",n?"Custom overrides cleared. Pre-configured defaults are active.":"All configurations and cached modules have been cleared.","success")})}
