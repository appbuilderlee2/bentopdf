const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedpdf-gqMxolea.js","assets/main-X9THBjap.js","assets/style-DHqpffR4.js","assets/style-Bksgp8bg.css"])))=>i.map(i=>d[i]);
import{c as D,i as L}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{a as y,b as P,_ as F,d as C,h as k,f as A}from"./main-X9THBjap.js";import"./mobileMenu-BoMunYmR.js";const N=new URL("/bentopdf/assets/pdfium-f7AsCyoP.wasm",import.meta.url).href;let v=null,s=null,E=!1;const m=new Map;function x(){const n=document.getElementById("embed-pdf-wrapper"),e=document.getElementById("embed-pdf-container"),t=document.getElementById("download-edited-pdf"),a=document.getElementById("file-display-area"),d=document.getElementById("file-input");e&&(e.textContent=""),n&&n.classList.add("hidden"),t&&t.classList.add("hidden"),a&&(a.innerHTML=""),d&&(d.value=""),v=null,s=null,E=!1,m.clear()}function _(n){const e=m.get(n);e&&(e.remove(),m.delete(n)),m.size===0&&x()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h):h();function h(){D({icons:L});const n=document.getElementById("file-input"),e=document.getElementById("drop-zone");n&&n.addEventListener("change",M),e&&(e.addEventListener("dragover",t=>{t.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",t=>{t.preventDefault(),e.classList.remove("border-indigo-500");const a=t.dataTransfer?.files;a&&a.length>0&&I(a)}),n?.addEventListener("click",()=>{n&&(n.value="")})),document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/bentopdf/"})}async function M(n){const e=n.target;e.files&&e.files.length>0&&await I(e.files)}async function I(n){const e=Array.from(n).filter(t=>t.type==="application/pdf");if(e.length===0){y("Invalid File","Please upload a valid PDF file.");return}P("Loading PDF Editor...");try{const t=document.getElementById("embed-pdf-wrapper"),a=document.getElementById("embed-pdf-container"),d=document.getElementById("file-display-area");if(!t||!a||!d)return;if(E){B(d,e);for(const r of e){const c=await r.arrayBuffer();s.openDocumentBuffer({buffer:c,name:r.name,autoActivate:!0})}}else{const r=e[0],c=await r.arrayBuffer();a.textContent="",t.classList.remove("hidden");const{default:f}=await F(async()=>{const{default:o}=await import("./embedpdf-gqMxolea.js").then(i=>i.g);return{default:o}},__vite__mapDeps([0,1,2,3]));v=f.init({type:"container",target:a,worker:!0,wasmUrl:N,export:{defaultFileName:r.name},documentManager:{maxDocuments:10},tabBar:"always"});const w=await v.registry;s=w.getPlugin("document-manager").provides(),s.onDocumentClosed(o=>{const i=o?.id||o;_(i)}),s.onDocumentOpened(o=>{const i=o?.id,g=o?.name;if(!i)return;const p=d.querySelector(`[data-pending-name="${CSS.escape(g)}"]`);if(p){p.removeAttribute("data-pending-name"),m.set(i,p);const b=p.querySelector("[data-remove-btn]");b&&(b.onclick=()=>{s.closeDocument(i)})}}),B(d,e),s.openDocumentBuffer({buffer:c,name:r.name,autoActivate:!0});for(let o=1;o<e.length;o++){const i=await e[o].arrayBuffer();s.openDocumentBuffer({buffer:i,name:e[o].name,autoActivate:!1})}E=!0;let l=document.getElementById("download-edited-pdf");l||(l=document.createElement("button"),l.id="download-edited-pdf",l.className="btn-gradient w-full mt-6",l.textContent="Download Edited PDF",t.appendChild(l)),l.classList.remove("hidden"),l.onclick=async()=>{try{const i=await w.getPlugin("export").provides().saveAsCopy().toPromise(),g=new Blob([i],{type:"application/pdf"});C(g,"edited-document.pdf")}catch(o){console.error("Error downloading PDF:",o),y("Error","Failed to download the edited PDF.")}};const u=document.getElementById("back-to-tools");if(u){const o=u.cloneNode(!0);u.parentNode?.replaceChild(o,u),o.addEventListener("click",()=>{window.location.href="/bentopdf/"})}}}catch(t){console.error("Error loading PDF Editor:",t),y("Error","Failed to load the PDF Editor.")}finally{k()}}function B(n,e){for(const t of e){const a=document.createElement("div");a.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg",a.setAttribute("data-pending-name",t.name);const d=document.createElement("div");d.className="flex flex-col flex-1 min-w-0";const r=document.createElement("div");r.className="truncate font-medium text-gray-200 text-sm mb-1",r.textContent=t.name;const c=document.createElement("div");c.className="text-xs text-gray-400",c.textContent=A(t.size),d.append(r,c);const f=document.createElement("button");f.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",f.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',f.setAttribute("data-remove-btn","true"),f.onclick=()=>{a.remove(),n.children.length===0&&x()},a.append(d,f),n.appendChild(a)}D({icons:L})}
