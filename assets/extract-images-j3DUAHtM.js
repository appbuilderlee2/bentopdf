const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-DhcferR8.js","assets/main-DSprMeGA.js","assets/style-BMqLG_Qf.js","assets/style-CsosqKDh.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as N,i as P}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{s as o,a as E,b as w,h as b,_ as H,d as k,f as B,r as j,c as S}from"./main-DSprMeGA.js";import{l as O}from"./pymupdf-loader-BmwcVkri.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-provider-BDZaM2k5.js";let l=[];document.addEventListener("DOMContentLoaded",()=>{const p=document.getElementById("file-input"),m=document.getElementById("drop-zone"),h=document.getElementById("process-btn"),y=document.getElementById("file-display-area"),x=document.getElementById("extract-options"),v=document.getElementById("file-controls"),I=document.getElementById("add-more-btn"),C=document.getElementById("clear-files-btn"),D=document.getElementById("back-to-tools"),u=document.getElementById("images-container"),f=document.getElementById("images-grid"),F=document.getElementById("download-all-btn");D&&D.addEventListener("click",()=>{window.location.href="/"});const L=async()=>{if(!(!y||!x||!h||!v))if(l=[],u&&u.classList.add("hidden"),f&&(f.innerHTML=""),o.files.length>0){y.innerHTML="";for(let e=0;e<o.files.length;e++){const t=o.files[e],n=document.createElement("div");n.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex flex-col overflow-hidden";const s=document.createElement("div");s.className="truncate font-medium text-gray-200 text-sm mb-1",s.textContent=t.name;const d=document.createElement("div");d.className="text-xs text-gray-400",d.textContent=`${B(t.size)} • Loading pages...`,a.append(s,d);const i=document.createElement("button");i.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",i.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',i.onclick=()=>{o.files=o.files.filter((c,r)=>r!==e),L()},n.append(a,i),y.appendChild(n);try{const c=await j(t),r=await S({data:c}).promise;d.textContent=`${B(t.size)} • ${r.numPages} pages`}catch{d.textContent=`${B(t.size)} • Could not load page count`}}N({icons:P}),v.classList.remove("hidden"),x.classList.remove("hidden"),h.disabled=!1}else y.innerHTML="",v.classList.add("hidden"),x.classList.add("hidden"),h.disabled=!0},A=()=>{o.files=[],o.pdfDoc=null,l=[],u&&u.classList.add("hidden"),f&&(f.innerHTML=""),L()},M=()=>{!f||!u||(f.innerHTML="",l.forEach((e,t)=>{const n=new Blob([new Uint8Array(e.data)]),a=URL.createObjectURL(n),s=document.createElement("div");s.className="bg-gray-700 rounded-lg overflow-hidden";const d=document.createElement("img");d.src=a,d.className="w-full h-32 object-cover";const i=document.createElement("div");i.className="p-2 flex justify-between items-center";const c=document.createElement("span");c.className="text-xs text-gray-300 truncate",c.textContent=e.name;const r=document.createElement("button");r.className="text-indigo-400 hover:text-indigo-300",r.innerHTML='<i data-lucide="download" class="w-4 h-4"></i>',r.onclick=()=>{k(n,e.name)},i.append(c,r),s.append(d,i),f.appendChild(s)}),N({icons:P}),u.classList.remove("hidden"))},$=async()=>{try{if(o.files.length===0){E("No Files","Please select at least one PDF file.");return}w("Loading PDF processor...");const e=await O();l=[];let t=0;for(let n=0;n<o.files.length;n++){const a=o.files[n];w(`Extracting images from ${a.name}...`);const s=await e.open(a),d=s.pageCount;for(let i=0;i<d;i++){const c=s.getPage(i),r=c.getImages();for(const z of r)try{const g=c.extractImage(z.xref);g&&g.data&&(t++,l.push({data:g.data,name:`image_${t}.${g.ext||"png"}`,ext:g.ext||"png"}))}catch(g){console.warn("Failed to extract image:",g)}}s.close()}b(),l.length===0?E("No Images Found","No embedded images were found in the selected PDF(s)."):(M(),E("Extraction Complete",`Found ${l.length} image(s) in ${o.files.length} PDF(s).`,"success"))}catch(e){b(),E("Error",`An error occurred during extraction. Error: ${e.message}`)}},T=async()=>{if(l.length===0)return;w("Creating ZIP archive...");const e=(await H(async()=>{const{default:a}=await import("./jszip.min-DhcferR8.js").then(s=>s.j);return{default:a}},__vite__mapDeps([0,1,2,3,4]))).default,t=new e;l.forEach(a=>{t.file(a.name,a.data)});const n=await t.generateAsync({type:"blob"});k(n,"extracted-images.zip"),b()},_=e=>{if(e&&e.length>0){const t=Array.from(e).filter(n=>n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf"));o.files=[...o.files,...t],L()}};p&&m&&(p.addEventListener("change",e=>{_(e.target.files)}),m.addEventListener("dragover",e=>{e.preventDefault(),m.classList.add("bg-gray-700")}),m.addEventListener("dragleave",e=>{e.preventDefault(),m.classList.remove("bg-gray-700")}),m.addEventListener("drop",e=>{e.preventDefault(),m.classList.remove("bg-gray-700");const t=e.dataTransfer?.files;t&&t.length>0&&_(t)}),p.addEventListener("click",()=>{p.value=""})),I&&I.addEventListener("click",()=>{p.click()}),C&&C.addEventListener("click",()=>{A()}),h&&h.addEventListener("click",$),F&&F.addEventListener("click",T)});
