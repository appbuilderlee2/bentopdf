import{c as g,i as y}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{P as v,a as E}from"./PDFButton-B7ekbw-1.js";import"./mobileMenu-BoMunYmR.js";import"./main-X9THBjap.js";import"./index-YkV0U4e7.js";const o={pdfDoc:null,file:null};function m(e="Processing..."){const t=document.getElementById("loader-modal"),n=document.getElementById("loader-text");t&&t.classList.remove("hidden"),n&&(n.textContent=e)}function p(){const e=document.getElementById("loader-modal");e&&e.classList.add("hidden")}function s(e,t,n="error",i){const d=document.getElementById("alert-modal"),a=document.getElementById("alert-title"),l=document.getElementById("alert-message"),r=document.getElementById("alert-ok");if(a&&(a.textContent=e),l&&(l.textContent=t),d&&d.classList.remove("hidden"),r){const c=r.cloneNode(!0);r.replaceWith(c),c.addEventListener("click",()=>{d?.classList.add("hidden"),i&&i()})}}function L(e,t){const n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=t,i.click(),URL.revokeObjectURL(n)}function B(){const e=document.getElementById("file-display-area");if(!e||!o.file||!o.pdfDoc)return;const t=o.file.size<1024*1024?`${(o.file.size/1024).toFixed(1)} KB`:`${(o.file.size/1024/1024).toFixed(2)} MB`,n=o.pdfDoc.getPageCount();e.innerHTML=`
        <div class="bg-gray-700 p-3 rounded-lg border border-gray-600 hover:border-indigo-500 transition-colors">
            <div class="flex items-center justify-between">
                <div class="flex-1 min-w-0">
                    <p class="truncate font-medium text-white">${o.file.name}</p>
                    <p class="text-gray-400 text-sm">${t} â€¢ ${n} page${n!==1?"s":""}</p>
                </div>
                <button id="remove-file" class="text-red-400 hover:text-red-300 p-2 flex-shrink-0 ml-2" title="Remove file">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    `,g({icons:y}),document.getElementById("remove-file")?.addEventListener("click",()=>u())}function u(){o.pdfDoc=null,o.file=null;const e=document.getElementById("file-display-area");e&&(e.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const t=document.getElementById("file-input");t&&(t.value="")}async function f(e){if(!e||e.type!=="application/pdf"){s("Error","Please upload a valid PDF file.");return}m("Loading PDF...");try{const t=await e.arrayBuffer();o.pdfDoc=await v.load(t),o.file=e,B(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(t){console.error(t),s("Error","Failed to load PDF file.")}finally{p()}}async function h(){if(!o.pdfDoc){s("Error","Please upload a PDF file first.");return}m("Removing annotations...");try{const e=o.pdfDoc.getPages();for(let n=0;n<e.length;n++){const i=e[n];(i.node.Annots()?.asArray()||[]).length>0&&i.node.delete(E.of("Annots"))}const t=await o.pdfDoc.save();L(new Blob([new Uint8Array(t)],{type:"application/pdf"}),"annotations-removed.pdf"),s("Success","Annotations removed successfully!","success",()=>{u()})}catch(e){console.error(e),s("Error","Could not remove annotations.")}finally{p()}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),n=document.getElementById("process-btn"),i=document.getElementById("back-to-tools");e?.addEventListener("change",d=>{const a=d.target.files?.[0];a&&f(a)}),t?.addEventListener("dragover",d=>{d.preventDefault(),t.classList.add("border-indigo-500")}),t?.addEventListener("dragleave",()=>{t.classList.remove("border-indigo-500")}),t?.addEventListener("drop",d=>{d.preventDefault(),t.classList.remove("border-indigo-500");const a=d.dataTransfer?.files[0];a&&f(a)}),n?.addEventListener("click",h),i?.addEventListener("click",()=>{window.location.href="../../index.html"})});
