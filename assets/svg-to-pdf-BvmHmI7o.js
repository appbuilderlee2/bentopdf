import{c as h,i as v}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{a as m,f as w,b as E,d as L,h as b}from"./main-X9THBjap.js";import{P as B}from"./PDFButton-B7ekbw-1.js";import{g as x,a as I}from"./image-compress-D5rNPUMg.js";import"./mobileMenu-BoMunYmR.js";import"./index-YkV0U4e7.js";let r=[];document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();function u(){h({icons:v});const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),a=document.getElementById("add-more-btn"),n=document.getElementById("clear-files-btn"),d=document.getElementById("process-btn");e&&e.addEventListener("change",k),t&&(t.addEventListener("dragover",s=>{s.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",()=>{t.classList.remove("bg-gray-700")}),t.addEventListener("drop",s=>{s.preventDefault(),t.classList.remove("bg-gray-700");const o=s.dataTransfer?.files;o&&o.length>0&&y(o)}),e?.addEventListener("click",()=>{e&&(e.value="")})),a&&a.addEventListener("click",()=>{e?.click()}),n&&n.addEventListener("click",()=>{r=[],f()}),d&&d.addEventListener("click",S),document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/bentopdf/"})}function k(e){const t=e.target;t.files&&t.files.length>0&&y(t.files)}function y(e){const t=Array.from(e).filter(a=>a.type==="image/svg+xml"||a.name.toLowerCase().endsWith(".svg"));t.length<e.length&&m("Invalid Files","Some files were skipped. Only SVG graphics are allowed."),t.length>0&&(r=[...r,...t],f())}const C=()=>{r=[],f()};function f(){const e=document.getElementById("file-display-area"),t=document.getElementById("file-controls"),a=document.getElementById("jpg-to-pdf-options");!e||!t||!a||(e.innerHTML="",r.length>0?(t.classList.remove("hidden"),a.classList.remove("hidden"),r.forEach((n,d)=>{const s=document.createElement("div");s.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("div");o.className="flex items-center gap-2 overflow-hidden";const i=document.createElement("span");i.className="truncate font-medium text-gray-200",i.textContent=n.name;const l=document.createElement("span");l.className="flex-shrink-0 text-gray-400 text-xs",l.textContent=`(${w(n.size)})`,o.append(i,l);const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{r=r.filter((g,p)=>p!==d),f()},s.append(o,c),e.appendChild(s)}),h({icons:v})):(t.classList.add("hidden"),a.classList.add("hidden")))}function F(e){return new Promise((t,a)=>{const n=new Image,d=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(d);n.onload=()=>{const o=document.createElement("canvas"),i=n.naturalWidth||n.width||800,l=n.naturalHeight||n.height||600;o.width=i,o.height=l;const c=o.getContext("2d");if(!c)return URL.revokeObjectURL(s),a(new Error("Could not get canvas context"));c.fillStyle="white",c.fillRect(0,0,i,l),c.drawImage(n,0,0,i,l),o.toBlob(async g=>{if(URL.revokeObjectURL(s),!g)return a(new Error("Canvas toBlob conversion failed."));const p=await g.arrayBuffer();t(new Uint8Array(p))},"image/png")},n.onerror=()=>{URL.revokeObjectURL(s),a(new Error("Failed to load SVG image"))},n.src=s})}async function S(){if(r.length===0){m("No Files","Please select at least one SVG file.");return}E("Creating PDF from SVG files...");try{const e=await B.create();for(const a of r)try{const n=await a.text(),d=await F(n),s=x(),o=await I(d,s),i=o.type==="jpeg"?await e.embedJpg(o.bytes):await e.embedPng(o.bytes);e.addPage([i.width,i.height]).drawImage(i,{x:0,y:0,width:i.width,height:i.height})}catch(n){throw console.error(`Failed to process ${a.name}:`,n),new Error(`Could not process "${a.name}". The file may be corrupted.`)}const t=await e.save();L(new Blob([new Uint8Array(t)],{type:"application/pdf"}),"from_svgs.pdf"),m("Success","PDF created successfully!","success",()=>{C()})}catch(e){console.error(e),m("Conversion Error",e.message)}finally{b()}}
