import{c as y,i as w}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{G as x,a as l,b as p,h as v,f as I,c as b,d as F}from"./main-DSprMeGA.js";import{P as h}from"./PDFButton-BowUC9ah.js";import{a as C}from"./image-effects-Lmx2y_xU.js";import"./mobileMenu-BoMunYmR.js";import"./index-YkV0U4e7.js";x.workerSrc=new URL("/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();const o={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();function g(){y({icons:w});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),n=document.getElementById("back-to-tools"),i=document.getElementById("process-btn");t&&(t.addEventListener("change",k),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",a=>{a.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",a=>{a.preventDefault(),e.classList.remove("border-indigo-500"),a.dataTransfer?.files.length&&D(a.dataTransfer.files)})),n&&n.addEventListener("click",()=>{window.location.href="/"}),i&&i.addEventListener("click",A)}function k(t){const e=t.target;e.files?.length&&D(e.files)}async function D(t){const e=t[0];if(!e||e.type!=="application/pdf"){l("Invalid File","Please upload a valid PDF file.");return}p("Loading PDF...");try{const n=await e.arrayBuffer();o.pdfDoc=await h.load(n),o.file=e,S(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(n){console.error(n),l("Error","Failed to load PDF file.")}finally{v()}}function S(){const t=document.getElementById("file-display-area");if(!t||!o.file||!o.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const n=document.createElement("div");n.className="flex flex-col flex-1 min-w-0";const i=document.createElement("div");i.className="truncate font-medium text-gray-200 text-sm mb-1",i.textContent=o.file.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=`${I(o.file.size)} â€¢ ${o.pdfDoc.getPageCount()} pages`,n.append(i,a);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=E,e.append(n,r),t.appendChild(e),y({icons:w})}function E(){o.file=null,o.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function A(){if(!o.pdfDoc||!o.file){l("Error","Please upload a PDF file first.");return}p("Inverting PDF colors...");try{const t=await h.create(),e=await o.pdfDoc.save(),n=await b({data:e}).promise;for(let a=1;a<=n.numPages;a++){p(`Processing page ${a} of ${n.numPages}...`);const r=await n.getPage(a),c=r.getViewport({scale:1.5}),s=document.createElement("canvas");s.width=c.width,s.height=c.height;const f=s.getContext("2d");await r.render({canvasContext:f,viewport:c,canvas:s}).promise;const u=f.getImageData(0,0,s.width,s.height);C(u),f.putImageData(u,0,0);const P=await new Promise(L=>s.toBlob(B=>{const m=new FileReader;m.onload=()=>L(new Uint8Array(m.result)),m.readAsArrayBuffer(B)},"image/png")),d=await t.embedPng(P);t.addPage([d.width,d.height]).drawImage(d,{x:0,y:0,width:d.width,height:d.height})}const i=await t.save();F(new Blob([new Uint8Array(i)],{type:"application/pdf"}),"inverted.pdf"),l("Success","Colors inverted successfully!","success",()=>{E()})}catch(t){console.error(t),l("Error","Could not invert PDF colors.")}finally{v()}}
