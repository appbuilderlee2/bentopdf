const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/worker-engine-CXR2yBQy-DEDpPuPu.js","assets/browser-awZxztMA-BIz7p1mk-C0XLyJTz.js","assets/main-DSprMeGA.js","assets/style-BMqLG_Qf.js","assets/style-CsosqKDh.css","assets/direct-engine-D0BBgE6g-DpGwOH-w.js"])))=>i.map(i=>d[i]);
import{_ as Zr}from"./main-DSprMeGA.js";function ki(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function Yr(e,t,n,o,i,r,a){try{var s=e[r](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(o,i)}function ml(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(l){Yr(r,o,i,a,s,"next",l)}function s(l){Yr(r,o,i,a,s,"throw",l)}a(void 0)})}}function gl(e,t,n){return t=vo(t),(function(o,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r})(o)})(e,fl()?Reflect.construct(t,n||[],vo(e).constructor):t.apply(e,n))}function Ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t,n){return t&&(function(o,i){for(var r=0;r<i.length;r++){var a=i[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,vl(a.key),a)}})(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tr(e))||t){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return a=l.done,l},e:function(l){s=!0,r=l},f:function(){try{a||n.return==null||n.return()}finally{if(s)throw r}}}}function G(e,t,n){return(t=vl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vo(e){return vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vo(e)}function pl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Si(e,t)}function fl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fl=function(){return!!e})()}function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xr(Object(n),!0).forEach(function(o){G(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Oo(e,t){if(e==null)return{};var n,o,i=(function(a,s){if(a==null)return{};var l={};for(var c in a)if({}.hasOwnProperty.call(a,c)){if(s.indexOf(c)!==-1)continue;l[c]=a[c]}return l})(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nn(){var e,t,n=typeof Symbol=="function"?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(g,p,v,f){var y=p&&p.prototype instanceof s?p:s,b=Object.create(y.prototype);return tt(b,"_invoke",(function(w,x,C){var S,M,A,I=0,P=C||[],z=!1,D={p:0,n:0,v:e,a:T,f:T.bind(e,4),d:function(_,H){return S=_,M=0,A=e,D.n=H,a}};function T(_,H){for(M=_,A=H,t=0;!z&&I&&!$&&t<P.length;t++){var $,j=P[t],F=D.p,B=j[2];_>3?($=B===H)&&(A=j[(M=j[4])?5:(M=3,3)],j[4]=j[5]=e):j[0]<=F&&(($=_<2&&F<j[1])?(M=0,D.v=H,D.n=j[1]):F<B&&($=_<3||j[0]>H||H>B)&&(j[4]=_,j[5]=H,D.n=B,M=0))}if($||_>1)return a;throw z=!0,H}return function(_,H,$){if(I>1)throw TypeError("Generator is already running");for(z&&H===1&&T(H,$),M=H,A=$;(t=M<2?e:A)||!z;){S||(M?M<3?(M>1&&(D.n=-1),T(M,A)):D.n=A:D.v=A);try{if(I=2,S){if(M||(_="next"),t=S[_]){if(!(t=t.call(S,A)))throw TypeError("iterator result is not an object");if(!t.done)return t;A=t.value,M<2&&(M=0)}else M===1&&(t=S.return)&&t.call(S),M<2&&(A=TypeError("The iterator does not provide a '"+_+"' method"),M=1);S=e}else if((t=(z=D.n<0)?A:w.call(x,D))!==a)break}catch(j){S=e,M=1,A=j}finally{I=1}}return{value:t,done:z}}})(g,v,f),!0),b}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][o]?t(t([][o]())):(tt(t={},o,function(){return this}),t),h=c.prototype=s.prototype=Object.create(u);function m(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,c):(g.__proto__=c,tt(g,i,"GeneratorFunction")),g.prototype=Object.create(h),g}return l.prototype=c,tt(h,"constructor",c),tt(c,"constructor",l),l.displayName="GeneratorFunction",tt(c,i,"GeneratorFunction"),tt(h),tt(h,i,"Generator"),tt(h,o,function(){return this}),tt(h,"toString",function(){return"[object Generator]"}),(Nn=function(){return{w:r,m}})()}function tt(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}tt=function(r,a,s,l){function c(u,h){tt(r,u,function(m){return this._invoke(u,h,m)})}a?i?i(r,a,{value:s,enumerable:!l,configurable:!l,writable:!l}):r[a]=s:(c("next",0),c("throw",1),c("return",2))},tt(e,t,n,o)}function Si(e,t){return Si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Si(e,t)}function U(e,t){return(function(n){if(Array.isArray(n))return n})(e)||(function(n,o){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var r,a,s,l,c=[],u=!0,h=!1;try{if(s=(i=i.call(n)).next,o!==0)for(;!(u=(r=s.call(i)).done)&&(c.push(r.value),c.length!==o);u=!0);}catch(m){h=!0,a=m}finally{try{if(!u&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(h)throw a}}return c}})(e,t)||tr(e,t)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Lo(e){return(function(t){if(Array.isArray(t))return ki(t)})(e)||(function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)})(e)||tr(e)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function vl(e){var t=(function(n,o){if(typeof n!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,o);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(n)})(e,"string");return typeof t=="symbol"?t:t+""}function Qt(e){return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(e)}function tr(e,t){if(e){if(typeof e=="string")return ki(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ki(e,t):void 0}}var $o,ie,yl,Vt,Qr,bl,wl,xl,nr,Pi,Mi,Cl,On={},Il=[],qm=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bn=Array.isArray;function kt(e,t){for(var n in t)e[n]=t[n];return e}function or(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function d(e,t,n){var o,i,r,a={};for(r in t)r=="key"?o=t[r]:r=="ref"?i=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?$o.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)a[r]===void 0&&(a[r]=e.defaultProps[r]);return ho(e,a,o,i,null)}function ho(e,t,n,o,i){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++yl,__i:-1,__u:0};return i==null&&ie.vnode!=null&&ie.vnode(r),r}function te(e){return e.children}function ht(e,t){this.props=e,this.context=t}function yn(e,t){if(t==null)return e.__?yn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?yn(e):null}function kl(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return kl(e)}}function Di(e){(!e.__d&&(e.__d=!0)&&Vt.push(e)&&!yo.__r++||Qr!=ie.debounceRendering)&&((Qr=ie.debounceRendering)||bl)(yo)}function yo(){for(var e,t,n,o,i,r,a,s=1;Vt.length;)Vt.length>s&&Vt.sort(wl),e=Vt.shift(),s=Vt.length,e.__d&&(n=void 0,o=void 0,i=(o=(t=e).__v).__e,r=[],a=[],t.__P&&((n=kt({},o)).__v=o.__v+1,ie.vnode&&ie.vnode(n),ir(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[i]:null,r,i??yn(o),!!(32&o.__u),a),n.__v=o.__v,n.__.__k[n.__i]=n,Ml(r,n,a),o.__e=o.__=null,n.__e!=i&&kl(n)));yo.__r=0}function Sl(e,t,n,o,i,r,a,s,l,c,u){var h,m,g,p,v,f,y,b=o&&o.__k||Il,w=t.length;for(l=(function(x,C,S,M,A){var I,P,z,D,T,_=S.length,H=_,$=0;for(x.__k=new Array(A),I=0;I<A;I++)(P=C[I])!=null&&typeof P!="boolean"&&typeof P!="function"?(typeof P=="string"||typeof P=="number"||typeof P=="bigint"||P.constructor==String?P=x.__k[I]=ho(null,P,null,null,null):Bn(P)?P=x.__k[I]=ho(te,{children:P},null,null,null):P.constructor===void 0&&P.__b>0?P=x.__k[I]=ho(P.type,P.props,P.key,P.ref?P.ref:null,P.__v):x.__k[I]=P,D=I+$,P.__=x,P.__b=x.__b+1,z=null,(T=P.__i=Gm(P,S,D,H))!=-1&&(H--,(z=S[T])&&(z.__u|=2)),z==null||z.__v==null?(T==-1&&(A>_?$--:A<_&&$++),typeof P.type!="function"&&(P.__u|=4)):T!=D&&(T==D-1?$--:T==D+1?$++:(T>D?$--:$++,P.__u|=4))):x.__k[I]=null;if(H)for(I=0;I<_;I++)(z=S[I])!=null&&!(2&z.__u)&&(z.__e==M&&(M=yn(z)),Al(z,z));return M})(n,t,b,l,w),h=0;h<w;h++)(g=n.__k[h])!=null&&(m=g.__i==-1?On:b[g.__i]||On,g.__i=h,f=ir(e,g,m,i,r,a,s,l,c,u),p=g.__e,g.ref&&m.ref!=g.ref&&(m.ref&&rr(m.ref,null,g),u.push(g.ref,g.__c||p,g)),v==null&&p!=null&&(v=p),(y=!!(4&g.__u))||m.__k===g.__k?l=Pl(g,l,e,y):typeof g.type=="function"&&f!==void 0?l=f:p&&(l=p.nextSibling),g.__u&=-7);return n.__e=v,l}function Pl(e,t,n,o){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Pl(i[r],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=yn(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function bo(e,t){return t=t||[],e==null||typeof e=="boolean"||(Bn(e)?e.some(function(n){bo(n,t)}):t.push(e)),t}function Gm(e,t,n,o){var i,r,a,s=e.key,l=e.type,c=t[n],u=c!=null&&!(2&c.__u);if(c===null&&s==null||u&&s==c.key&&l==c.type)return n;if(o>(u?1:0)){for(i=n-1,r=n+1;i>=0||r<t.length;)if((c=t[a=i>=0?i--:r++])!=null&&!(2&c.__u)&&s==c.key&&l==c.type)return a}return-1}function Jr(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||qm.test(t)?n:n+"px"}function Yn(e,t,n,o,i){var r,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Jr(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||Jr(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(xl,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o?n.u=o.u:(n.u=nr,e.addEventListener(t,r?Mi:Pi,r)):e.removeEventListener(t,r?Mi:Pi,r);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ea(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=nr++;else if(t.t<n.u)return;return n(ie.event?ie.event(t):t)}}}function ir(e,t,n,o,i,r,a,s,l,c){var u,h,m,g,p,v,f,y,b,w,x,C,S,M,A,I,P,z=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),r=[s=t.__e=n.__e]),(u=ie.__b)&&u(t);e:if(typeof z=="function")try{if(y=t.props,b="prototype"in z&&z.prototype.render,w=(u=z.contextType)&&o[u.__c],x=u?w?w.props.value:u.__:o,n.__c?f=(h=t.__c=n.__c).__=h.__E:(b?t.__c=h=new z(y,x):(t.__c=h=new ht(y,x),h.constructor=z,h.render=Km),w&&w.sub(h),h.state||(h.state={}),h.__n=o,m=h.__d=!0,h.__h=[],h._sb=[]),b&&h.__s==null&&(h.__s=h.state),b&&z.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=kt({},h.__s)),kt(h.__s,z.getDerivedStateFromProps(y,h.__s))),g=h.props,p=h.state,h.__v=t,m)b&&z.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),b&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(b&&z.getDerivedStateFromProps==null&&y!==g&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(y,x),t.__v==n.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(y,h.__s,x)===!1){for(t.__v!=n.__v&&(h.props=y,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(D){D&&(D.__=t)}),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(y,h.__s,x),b&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(g,p,v)})}if(h.context=x,h.props=y,h.__P=e,h.__e=!1,S=ie.__r,M=0,b){for(h.state=h.__s,h.__d=!1,S&&S(t),u=h.render(h.props,h.state,h.context),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[]}else do h.__d=!1,S&&S(t),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++M<25);h.state=h.__s,h.getChildContext!=null&&(o=kt(kt({},o),h.getChildContext())),b&&!m&&h.getSnapshotBeforeUpdate!=null&&(v=h.getSnapshotBeforeUpdate(g,p)),I=u,u!=null&&u.type===te&&u.key==null&&(I=Dl(u.props.children)),s=Sl(e,Bn(I)?I:[I],t,n,o,i,r,a,s,l,c),h.base=t.__e,t.__u&=-161,h.__h.length&&a.push(h),f&&(h.__E=h.__=null)}catch(D){if(t.__v=null,l||r!=null)if(D.then){for(t.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;r[r.indexOf(s)]=null,t.__e=s}else{for(P=r.length;P--;)or(r[P]);Ai(t)}else t.__e=n.__e,t.__k=n.__k,D.then||Ai(t);ie.__e(D,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=Vm(n.__e,t,n,o,i,r,a,l,c);return(u=ie.diffed)&&u(t),128&t.__u?void 0:s}function Ai(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ai)}function Ml(e,t,n){for(var o=0;o<n.length;o++)rr(n[o],n[++o],n[++o]);ie.__c&&ie.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(r){r.call(i)})}catch(r){ie.__e(r,i.__v)}})}function Dl(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Bn(e)?e.map(Dl):kt({},e)}function Vm(e,t,n,o,i,r,a,s,l){var c,u,h,m,g,p,v,f=n.props||On,y=t.props,b=t.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((g=r[c])&&"setAttribute"in g==!!b&&(b?g.localName==b:g.nodeType==3)){e=g,r[c]=null;break}}if(e==null){if(b==null)return document.createTextNode(y);e=document.createElementNS(i,b,y.is&&y),s&&(ie.__m&&ie.__m(t,r),s=!1),r=null}if(b==null)f===y||s&&e.data==y||(e.data=y);else{if(r=r&&$o.call(e.childNodes),!s&&r!=null)for(f={},c=0;c<e.attributes.length;c++)f[(g=e.attributes[c]).name]=g.value;for(c in f)if(g=f[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=g;else if(!(c in y)){if(c=="value"&&"defaultValue"in y||c=="checked"&&"defaultChecked"in y)continue;Yn(e,c,null,g,i)}}for(c in y)g=y[c],c=="children"?m=g:c=="dangerouslySetInnerHTML"?u=g:c=="value"?p=g:c=="checked"?v=g:s&&typeof g!="function"||f[c]===g||Yn(e,c,g,f[c],i);if(u)s||h&&(u.__html==h.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),Sl(t.type=="template"?e.content:e,Bn(m)?m:[m],t,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,a,r?r[0]:n.__k&&yn(n,0),s,l),r!=null)for(c=r.length;c--;)or(r[c]);s||(c="value",b=="progress"&&p==null?e.removeAttribute("value"):p!=null&&(p!==e[c]||b=="progress"&&!p||b=="option"&&p!=f[c])&&Yn(e,c,p,f[c],i),c="checked",v!=null&&v!=e[c]&&Yn(e,c,v,f[c],i))}return e}function rr(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(i){ie.__e(i,n)}}function Al(e,t,n){var o,i;if(ie.unmount&&ie.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||rr(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){ie.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&Al(o[i],t,n||typeof e.type!="function");n||or(e.__e),e.__c=e.__=e.__e=void 0}function Km(e,t,n){return this.constructor(e,n)}function zi(e,t,n){var o,i,r;t==document&&(t=document.documentElement),ie.__&&ie.__(e,t),o=t.__k,i=[],r=[],ir(t,e=t.__k=d(te,null,[e]),o||On,On,t.namespaceURI,o?null:t.firstChild?$o.call(t.childNodes):null,i,o?o.__e:t.firstChild,!1,r),Ml(i,e,r)}function on(e){function t(n){var o,i;return this.getChildContext||(o=new Set,(i={})[t.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(r){this.props.value!=r.value&&o.forEach(function(a){a.__e=!0,Di(a)})},this.sub=function(r){o.add(r);var a=r.componentWillUnmount;r.componentWillUnmount=function(){o&&o.delete(r),a&&a.call(r)}}),n.children}return t.__c="__cC"+Cl++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}$o=Il.slice,ie={__e:function(e,t,n,o){for(var i,r,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),a=i.__d),a)return i.__E=i}catch(s){e=s}throw e}},yl=0,ht.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=kt({},this.state),typeof e=="function"&&(e=e(kt({},n),this.props)),e&&kt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Di(this))},ht.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Di(this))},ht.prototype.render=te,Vt=[],bl=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,wl=function(e,t){return e.__v.__b-t.__v.__b},yo.__r=0,xl=/(PointerCapture)$|Capture$/i,nr=0,Pi=ea(!1),Mi=ea(!0),Cl=0;var Jt,Se,ci,ta,Ln=0,zl=[],Ae=ie,na=Ae.__b,oa=Ae.__r,ia=Ae.diffed,ra=Ae.__c,aa=Ae.unmount,sa=Ae.__;function Wn(e,t){Ae.__h&&Ae.__h(Se,e,Ln||t),Ln=0;var n=Se.__H||(Se.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function R(e){return Ln=1,Tl(El,e)}function Tl(e,t,n){var o=Wn(Jt++,2);if(o.t=e,!o.__c&&(o.__=[El(void 0,t),function(s){var l=o.__N?o.__N[0]:o.__[0],c=o.t(l,s);l!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=Se,!Se.__f)){var i=function(s,l,c){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(m){return!!m.__c});if(u.every(function(m){return!m.__N}))return!r||r.call(this,s,l,c);var h=o.__c.props!==s;return u.forEach(function(m){if(m.__N){var g=m.__[0];m.__=m.__N,m.__N=void 0,g!==m.__[0]&&(h=!0)}}),r&&r.call(this,s,l,c)||h};Se.__f=!0;var r=Se.shouldComponentUpdate,a=Se.componentWillUpdate;Se.componentWillUpdate=function(s,l,c){if(this.__e){var u=r;r=void 0,i(s,l,c),r=u}a&&a.call(this,s,l,c)},Se.shouldComponentUpdate=i}return o.__N||o.__}function L(e,t){var n=Wn(Jt++,3);!Ae.__s&&ar(n.__H,t)&&(n.__=e,n.u=t,Se.__H.__h.push(n))}function Fo(e,t){var n=Wn(Jt++,4);!Ae.__s&&ar(n.__H,t)&&(n.__=e,n.u=t,Se.__h.push(n))}function V(e){return Ln=5,K(function(){return{current:e}},[])}function K(e,t){var n=Wn(Jt++,7);return ar(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Y(e,t){return Ln=8,K(function(){return e},t)}function rn(e){var t=Se.context[e.__c],n=Wn(Jt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(Se)),t.props.value):e.__}function Zm(){for(var e;e=zl.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(mo),e.__H.__h.forEach(Ti),e.__H.__h=[]}catch(t){e.__H.__h=[],Ae.__e(t,e.__v)}}Ae.__b=function(e){Se=null,na&&na(e)},Ae.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),sa&&sa(e,t)},Ae.__r=function(e){oa&&oa(e),Jt=0;var t=(Se=e.__c).__H;t&&(ci===Se?(t.__h=[],Se.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(mo),t.__h.forEach(Ti),t.__h=[],Jt=0)),ci=Se},Ae.diffed=function(e){ia&&ia(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(zl.push(t)!==1&&ta===Ae.requestAnimationFrame||((ta=Ae.requestAnimationFrame)||Ym)(Zm)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ci=Se=null},Ae.__c=function(e,t){t.some(function(n){try{n.__h.forEach(mo),n.__h=n.__h.filter(function(o){return!o.__||Ti(o)})}catch(o){t.some(function(i){i.__h&&(i.__h=[])}),t=[],Ae.__e(o,n.__v)}}),ra&&ra(e,t)},Ae.unmount=function(e){aa&&aa(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{mo(o)}catch(i){t=i}}),n.__H=void 0,t&&Ae.__e(t,n.__v))};var la=typeof requestAnimationFrame=="function";function Ym(e){var t,n=function(){clearTimeout(o),la&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);la&&(t=requestAnimationFrame(n))}function mo(e){var t=Se,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Se=t}function Ti(e){var t=Se;e.__c=e.__(),Se=t}function ar(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function El(e,t){return typeof t=="function"?t(e):t}var Xm=`/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties;
@layer theme, base, components, utilities;
@layer theme {
  :root, :host {
    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --color-red-500: oklch(63.7% 0.237 25.331);
    --color-yellow-500: oklch(79.5% 0.184 86.047);
    --color-green-500: oklch(72.3% 0.219 149.579);
    --color-teal-500: oklch(70.4% 0.14 182.503);
    --color-blue-500: oklch(62.3% 0.214 259.815);
    --color-indigo-500: oklch(58.5% 0.233 277.117);
    --color-purple-500: oklch(62.7% 0.265 303.9);
    --color-pink-500: oklch(65.6% 0.241 354.308);
    --color-gray-300: oklch(87.2% 0.01 258.338);
    --color-white: #fff;
    --spacing: 0.25rem;
    --container-sm: 24rem;
    --text-xs: 0.75rem;
    --text-xs--line-height: calc(1 / 0.75);
    --text-sm: 0.875rem;
    --text-sm--line-height: calc(1.25 / 0.875);
    --text-base: 1rem;
    --text-base--line-height: calc(1.5 / 1);
    --text-lg: 1.125rem;
    --text-lg--line-height: calc(1.75 / 1.125);
    --text-xl: 1.25rem;
    --text-xl--line-height: calc(1.75 / 1.25);
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --leading-relaxed: 1.625;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-2xl: 1rem;
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --animate-spin: spin 1s linear infinite;
    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    --default-transition-duration: 150ms;
    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    --default-font-family: var(--font-sans);
    --default-mono-font-family: var(--font-mono);
    --color-bg-app: var(--ep-background-app);
    --color-bg-surface: var(--ep-background-surface);
    --color-bg-surface-alt: var(--ep-background-surface-alt);
    --color-bg-elevated: var(--ep-background-elevated);
    --color-bg-overlay: var(--ep-background-overlay);
    --color-bg-input: var(--ep-background-input);
    --color-fg-primary: var(--ep-foreground-primary);
    --color-fg-secondary: var(--ep-foreground-secondary);
    --color-fg-muted: var(--ep-foreground-muted);
    --color-fg-disabled: var(--ep-foreground-disabled);
    --color-fg-on-accent: var(--ep-foreground-on-accent);
    --color-border-default: var(--ep-border-default);
    --color-border-subtle: var(--ep-border-subtle);
    --color-border-strong: var(--ep-border-strong);
    --color-accent: var(--ep-accent-primary);
    --color-accent-hover: var(--ep-accent-primary-hover);
    --color-accent-light: var(--ep-accent-primary-light);
    --color-accent-fg: var(--ep-accent-primary-foreground);
    --color-interactive-hover: var(--ep-interactive-hover);
    --color-interactive-active: var(--ep-interactive-active);
    --color-interactive-selected: var(--ep-interactive-selected);
    --color-interactive-focus-ring: var(--ep-interactive-focus-ring);
    --color-state-error: var(--ep-state-error);
    --color-state-error-light: var(--ep-state-error-light);
    --color-state-warning: var(--ep-state-warning);
    --color-state-warning-light: var(--ep-state-warning-light);
    --color-state-success: var(--ep-state-success);
    --color-state-success-light: var(--ep-state-success-light);
    --color-state-info-light: var(--ep-state-info-light);
    --color-tooltip-bg: var(--ep-tooltip-background);
    --color-tooltip-fg: var(--ep-tooltip-foreground);
  }
}
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid;
  }
  html, :host {
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -moz-tab-size: 4;
      -o-tab-size: 4;
         tab-size: 4;
    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
    font-feature-settings: var(--default-font-feature-settings, normal);
    font-variation-settings: var(--default-font-variation-settings, normal);
    -webkit-tap-highlight-color: transparent;
  }
  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }
  abbr:where([title]) {
    -webkit-text-decoration: underline dotted;
    text-decoration: underline dotted;
  }
  h1, h2, h3, h4, h5, h6 {
    font-size: inherit;
    font-weight: inherit;
  }
  a {
    color: inherit;
    -webkit-text-decoration: inherit;
    text-decoration: inherit;
  }
  b, strong {
    font-weight: bolder;
  }
  code, kbd, samp, pre {
    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
    font-feature-settings: var(--default-mono-font-feature-settings, normal);
    font-variation-settings: var(--default-mono-font-variation-settings, normal);
    font-size: 1em;
  }
  small {
    font-size: 80%;
  }
  sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }
  sub {
    bottom: -0.25em;
  }
  sup {
    top: -0.5em;
  }
  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }
  :-moz-focusring {
    outline: auto;
  }
  progress {
    vertical-align: baseline;
  }
  summary {
    display: list-item;
  }
  ol, ul, menu {
    list-style: none;
  }
  img, svg, video, canvas, audio, iframe, embed, object {
    display: block;
    vertical-align: middle;
  }
  img, video {
    max-width: 100%;
    height: auto;
  }
  button, input, select, optgroup, textarea, ::file-selector-button {
    font: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    letter-spacing: inherit;
    color: inherit;
    border-radius: 0;
    background-color: transparent;
    opacity: 1;
  }
  :where(select:is([multiple], [size])) optgroup {
    font-weight: bolder;
  }
  :where(select:is([multiple], [size])) optgroup option {
    padding-inline-start: 20px;
  }
  ::file-selector-button {
    margin-inline-end: 4px;
  }
  ::-moz-placeholder {
    opacity: 1;
  }
  ::placeholder {
    opacity: 1;
  }
  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {
    ::-moz-placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
    ::placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
  }
  textarea {
    resize: vertical;
  }
  ::-webkit-search-decoration {
    -webkit-appearance: none;
  }
  ::-webkit-date-and-time-value {
    min-height: 1lh;
    text-align: inherit;
  }
  ::-webkit-datetime-edit {
    display: inline-flex;
  }
  ::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
  }
  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
    padding-block: 0;
  }
  ::-webkit-calendar-picker-indicator {
    line-height: 1;
  }
  :-moz-ui-invalid {
    box-shadow: none;
  }
  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {
    -webkit-appearance: button;
       -moz-appearance: button;
            appearance: button;
  }
  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
    height: auto;
  }
  [hidden]:where(:not([hidden="until-found"])) {
    display: none !important;
  }
}
@layer utilities {
  .pointer-events-auto {
    pointer-events: auto;
  }
  .pointer-events-none {
    pointer-events: none;
  }
  .invisible {
    visibility: hidden;
  }
  .visible {
    visibility: visible;
  }
  .absolute {
    position: absolute;
  }
  .fixed {
    position: fixed;
  }
  .relative {
    position: relative;
  }
  .static {
    position: static;
  }
  .sticky {
    position: sticky;
  }
  .inset-0 {
    inset: calc(var(--spacing) * 0);
  }
  .inset-x-0 {
    inset-inline: calc(var(--spacing) * 0);
  }
  .inset-y-0 {
    inset-block: calc(var(--spacing) * 0);
  }
  .top-0 {
    top: calc(var(--spacing) * 0);
  }
  .top-1\\/2 {
    top: calc(1/2 * 100%);
  }
  .top-4 {
    top: calc(var(--spacing) * 4);
  }
  .top-6 {
    top: calc(var(--spacing) * 6);
  }
  .right-0 {
    right: calc(var(--spacing) * 0);
  }
  .right-1 {
    right: calc(var(--spacing) * 1);
  }
  .right-2 {
    right: calc(var(--spacing) * 2);
  }
  .right-4 {
    right: calc(var(--spacing) * 4);
  }
  .bottom-0 {
    bottom: calc(var(--spacing) * 0);
  }
  .left-0 {
    left: calc(var(--spacing) * 0);
  }
  .left-1\\/2 {
    left: calc(1/2 * 100%);
  }
  .z-10 {
    z-index: 10;
  }
  .z-40 {
    z-index: 40;
  }
  .z-50 {
    z-index: 50;
  }
  .z-100 {
    z-index: 100;
  }
  .col-start-1 {
    grid-column-start: 1;
  }
  .row-start-1 {
    grid-row-start: 1;
  }
  .container {
    width: 100%;
    @media (width >= 40rem) {
      max-width: 40rem;
    }
    @media (width >= 48rem) {
      max-width: 48rem;
    }
    @media (width >= 64rem) {
      max-width: 64rem;
    }
    @media (width >= 80rem) {
      max-width: 80rem;
    }
    @media (width >= 96rem) {
      max-width: 96rem;
    }
  }
  .mx-4 {
    margin-inline: calc(var(--spacing) * 4);
  }
  .my-2 {
    margin-block: calc(var(--spacing) * 2);
  }
  .my-4 {
    margin-block: calc(var(--spacing) * 4);
  }
  .-mt-1 {
    margin-top: calc(var(--spacing) * -1);
  }
  .mt-0\\.5 {
    margin-top: calc(var(--spacing) * 0.5);
  }
  .mt-1 {
    margin-top: calc(var(--spacing) * 1);
  }
  .mt-2 {
    margin-top: calc(var(--spacing) * 2);
  }
  .mt-3 {
    margin-top: calc(var(--spacing) * 3);
  }
  .mt-4 {
    margin-top: calc(var(--spacing) * 4);
  }
  .mt-5 {
    margin-top: calc(var(--spacing) * 5);
  }
  .mt-6 {
    margin-top: calc(var(--spacing) * 6);
  }
  .-mr-1 {
    margin-right: calc(var(--spacing) * -1);
  }
  .mr-1\\.5 {
    margin-right: calc(var(--spacing) * 1.5);
  }
  .mr-2 {
    margin-right: calc(var(--spacing) * 2);
  }
  .mr-3 {
    margin-right: calc(var(--spacing) * 3);
  }
  .mr-4 {
    margin-right: calc(var(--spacing) * 4);
  }
  .mb-1 {
    margin-bottom: calc(var(--spacing) * 1);
  }
  .mb-1\\.5 {
    margin-bottom: calc(var(--spacing) * 1.5);
  }
  .mb-2 {
    margin-bottom: calc(var(--spacing) * 2);
  }
  .mb-3 {
    margin-bottom: calc(var(--spacing) * 3);
  }
  .mb-4 {
    margin-bottom: calc(var(--spacing) * 4);
  }
  .mb-6 {
    margin-bottom: calc(var(--spacing) * 6);
  }
  .ml-1 {
    margin-left: calc(var(--spacing) * 1);
  }
  .block {
    display: block;
  }
  .contents {
    display: contents;
  }
  .flex {
    display: flex;
  }
  .grid {
    display: grid;
  }
  .hidden {
    display: none;
  }
  .inline {
    display: inline;
  }
  .inline-block {
    display: inline-block;
  }
  .inline-flex {
    display: inline-flex;
  }
  .h-1 {
    height: calc(var(--spacing) * 1);
  }
  .h-1\\.5 {
    height: calc(var(--spacing) * 1.5);
  }
  .h-2 {
    height: calc(var(--spacing) * 2);
  }
  .h-3 {
    height: calc(var(--spacing) * 3);
  }
  .h-3\\.5 {
    height: calc(var(--spacing) * 3.5);
  }
  .h-4 {
    height: calc(var(--spacing) * 4);
  }
  .h-5 {
    height: calc(var(--spacing) * 5);
  }
  .h-6 {
    height: calc(var(--spacing) * 6);
  }
  .h-7 {
    height: calc(var(--spacing) * 7);
  }
  .h-8 {
    height: calc(var(--spacing) * 8);
  }
  .h-9 {
    height: calc(var(--spacing) * 9);
  }
  .h-10 {
    height: calc(var(--spacing) * 10);
  }
  .h-16 {
    height: calc(var(--spacing) * 16);
  }
  .h-18 {
    height: calc(var(--spacing) * 18);
  }
  .h-\\[32px\\] {
    height: 32px;
  }
  .h-full {
    height: 100%;
  }
  .h-px {
    height: 1px;
  }
  .max-h-48 {
    max-height: calc(var(--spacing) * 48);
  }
  .max-h-60 {
    max-height: calc(var(--spacing) * 60);
  }
  .min-h-0 {
    min-height: calc(var(--spacing) * 0);
  }
  .\\!w-full {
    width: 100% !important;
  }
  .w-2 {
    width: calc(var(--spacing) * 2);
  }
  .w-3 {
    width: calc(var(--spacing) * 3);
  }
  .w-3\\.5 {
    width: calc(var(--spacing) * 3.5);
  }
  .w-4 {
    width: calc(var(--spacing) * 4);
  }
  .w-5 {
    width: calc(var(--spacing) * 5);
  }
  .w-6 {
    width: calc(var(--spacing) * 6);
  }
  .w-8 {
    width: calc(var(--spacing) * 8);
  }
  .w-9 {
    width: calc(var(--spacing) * 9);
  }
  .w-10 {
    width: calc(var(--spacing) * 10);
  }
  .w-12 {
    width: calc(var(--spacing) * 12);
  }
  .w-16 {
    width: calc(var(--spacing) * 16);
  }
  .w-18 {
    width: calc(var(--spacing) * 18);
  }
  .w-32 {
    width: calc(var(--spacing) * 32);
  }
  .w-\\[32px\\] {
    width: 32px;
  }
  .w-auto {
    width: auto;
  }
  .w-full {
    width: 100%;
  }
  .w-px {
    width: 1px;
  }
  .max-w-\\[150px\\] {
    max-width: 150px;
  }
  .max-w-\\[240px\\] {
    max-width: 240px;
  }
  .max-w-sm {
    max-width: var(--container-sm);
  }
  .min-w-0 {
    min-width: calc(var(--spacing) * 0);
  }
  .min-w-\\[8rem\\] {
    min-width: 8rem;
  }
  .min-w-\\[32px\\] {
    min-width: 32px;
  }
  .min-w-\\[120px\\] {
    min-width: 120px;
  }
  .min-w-\\[200px\\] {
    min-width: 200px;
  }
  .flex-1 {
    flex: 1;
  }
  .flex-shrink-0 {
    flex-shrink: 0;
  }
  .shrink-0 {
    flex-shrink: 0;
  }
  .-translate-x-1\\/2 {
    --tw-translate-x: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-x-\\[1px\\] {
    --tw-translate-x: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .-translate-y-1\\/2 {
    --tw-translate-y: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-y-\\[1px\\] {
    --tw-translate-y: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .scale-95 {
    --tw-scale-x: 95%;
    --tw-scale-y: 95%;
    --tw-scale-z: 95%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .scale-100 {
    --tw-scale-x: 100%;
    --tw-scale-y: 100%;
    --tw-scale-z: 100%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .rotate-45 {
    rotate: 45deg;
  }
  .transform {
    transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);
  }
  .animate-pulse {
    animation: var(--animate-pulse);
  }
  .animate-spin {
    animation: var(--animate-spin);
  }
  .cursor-default {
    cursor: default;
  }
  .cursor-grab {
    cursor: grab;
  }
  .cursor-not-allowed {
    cursor: not-allowed;
  }
  .cursor-pointer {
    cursor: pointer;
  }
  .touch-none {
    touch-action: none;
  }
  .resize {
    resize: both;
  }
  .appearance-none {
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
  }
  .grid-cols-1 {
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }
  .grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .grid-cols-6 {
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }
  .flex-col {
    flex-direction: column;
  }
  .flex-row {
    flex-direction: row;
  }
  .flex-wrap {
    flex-wrap: wrap;
  }
  .items-center {
    align-items: center;
  }
  .items-end {
    align-items: flex-end;
  }
  .items-start {
    align-items: flex-start;
  }
  .justify-between {
    justify-content: space-between;
  }
  .justify-center {
    justify-content: center;
  }
  .justify-end {
    justify-content: flex-end;
  }
  .justify-start {
    justify-content: flex-start;
  }
  .gap-1 {
    gap: calc(var(--spacing) * 1);
  }
  .gap-2 {
    gap: calc(var(--spacing) * 2);
  }
  .gap-3 {
    gap: calc(var(--spacing) * 3);
  }
  .gap-4 {
    gap: calc(var(--spacing) * 4);
  }
  .space-y-2 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-3 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 3) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-4 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-5 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 5) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 5) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-6 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 6) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .gap-x-1 {
    -moz-column-gap: calc(var(--spacing) * 1);
         column-gap: calc(var(--spacing) * 1);
  }
  .space-x-2 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 2) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .space-x-3 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 3) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .gap-y-4 {
    row-gap: calc(var(--spacing) * 4);
  }
  .divide-y {
    :where(& > :not(:last-child)) {
      --tw-divide-y-reverse: 0;
      border-bottom-style: var(--tw-border-style);
      border-top-style: var(--tw-border-style);
      border-top-width: calc(1px * var(--tw-divide-y-reverse));
      border-bottom-width: calc(1px * calc(1 - var(--tw-divide-y-reverse)));
    }
  }
  .divide-border-subtle {
    :where(& > :not(:last-child)) {
      border-color: var(--color-border-subtle);
    }
  }
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .overflow-auto {
    overflow: auto;
  }
  .overflow-hidden {
    overflow: hidden;
  }
  .overflow-x-auto {
    overflow-x: auto;
  }
  .overflow-y-auto {
    overflow-y: auto;
  }
  .rounded {
    border-radius: 0.25rem;
  }
  .rounded-\\[3px\\] {
    border-radius: 3px;
  }
  .rounded-full {
    border-radius: calc(infinity * 1px);
  }
  .rounded-lg {
    border-radius: var(--radius-lg);
  }
  .rounded-md {
    border-radius: var(--radius-md);
  }
  .rounded-none {
    border-radius: 0;
  }
  .rounded-xl {
    border-radius: var(--radius-xl);
  }
  .rounded-t-2xl {
    border-top-left-radius: var(--radius-2xl);
    border-top-right-radius: var(--radius-2xl);
  }
  .rounded-t-lg {
    border-top-left-radius: var(--radius-lg);
    border-top-right-radius: var(--radius-lg);
  }
  .rounded-l-md {
    border-top-left-radius: var(--radius-md);
    border-bottom-left-radius: var(--radius-md);
  }
  .rounded-r-md {
    border-top-right-radius: var(--radius-md);
    border-bottom-right-radius: var(--radius-md);
  }
  .border {
    border-style: var(--tw-border-style);
    border-width: 1px;
  }
  .border-0 {
    border-style: var(--tw-border-style);
    border-width: 0px;
  }
  .border-2 {
    border-style: var(--tw-border-style);
    border-width: 2px;
  }
  .border-3 {
    border-style: var(--tw-border-style);
    border-width: 3px;
  }
  .border-4 {
    border-style: var(--tw-border-style);
    border-width: 4px;
  }
  .border-t {
    border-top-style: var(--tw-border-style);
    border-top-width: 1px;
  }
  .border-r {
    border-right-style: var(--tw-border-style);
    border-right-width: 1px;
  }
  .border-r-0 {
    border-right-style: var(--tw-border-style);
    border-right-width: 0px;
  }
  .border-b {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 1px;
  }
  .border-b-2 {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 2px;
  }
  .border-l {
    border-left-style: var(--tw-border-style);
    border-left-width: 1px;
  }
  .border-none {
    --tw-border-style: none;
    border-style: none;
  }
  .border-\\[\\#cfd4da\\] {
    border-color: #cfd4da;
  }
  .border-accent {
    border-color: var(--color-accent);
  }
  .border-border-default {
    border-color: var(--color-border-default);
  }
  .border-border-strong {
    border-color: var(--color-border-strong);
  }
  .border-border-subtle {
    border-color: var(--color-border-subtle);
  }
  .border-gray-300 {
    border-color: var(--color-gray-300);
  }
  .border-state-error {
    border-color: var(--color-state-error);
  }
  .border-transparent {
    border-color: transparent;
  }
  .border-t-accent {
    border-top-color: var(--color-accent);
  }
  .border-r-accent {
    border-right-color: var(--color-accent);
  }
  .border-b-accent {
    border-bottom-color: var(--color-accent);
  }
  .border-b-transparent {
    border-bottom-color: transparent;
  }
  .bg-\\[\\#f8f9fa\\] {
    background-color: #f8f9fa;
  }
  .bg-accent {
    background-color: var(--color-accent);
  }
  .bg-accent-light {
    background-color: var(--color-accent-light);
  }
  .bg-accent\\/10 {
    background-color: var(--color-accent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-accent) 10%, transparent);
    }
  }
  .bg-bg-app {
    background-color: var(--color-bg-app);
  }
  .bg-bg-elevated {
    background-color: var(--color-bg-elevated);
  }
  .bg-bg-input {
    background-color: var(--color-bg-input);
  }
  .bg-bg-overlay {
    background-color: var(--color-bg-overlay);
  }
  .bg-bg-surface {
    background-color: var(--color-bg-surface);
  }
  .bg-bg-surface-alt {
    background-color: var(--color-bg-surface-alt);
  }
  .bg-bg-surface\\/80 {
    background-color: var(--color-bg-surface);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-bg-surface) 80%, transparent);
    }
  }
  .bg-blue-500 {
    background-color: var(--color-blue-500);
  }
  .bg-border-default {
    background-color: var(--color-border-default);
  }
  .bg-border-subtle {
    background-color: var(--color-border-subtle);
  }
  .bg-green-500 {
    background-color: var(--color-green-500);
  }
  .bg-indigo-500 {
    background-color: var(--color-indigo-500);
  }
  .bg-inherit {
    background-color: inherit;
  }
  .bg-interactive-hover {
    background-color: var(--color-interactive-hover);
  }
  .bg-interactive-selected {
    background-color: var(--color-interactive-selected);
  }
  .bg-pink-500 {
    background-color: var(--color-pink-500);
  }
  .bg-purple-500 {
    background-color: var(--color-purple-500);
  }
  .bg-red-500 {
    background-color: var(--color-red-500);
  }
  .bg-state-error {
    background-color: var(--color-state-error);
  }
  .bg-state-error-light {
    background-color: var(--color-state-error-light);
  }
  .bg-state-info-light {
    background-color: var(--color-state-info-light);
  }
  .bg-state-success-light {
    background-color: var(--color-state-success-light);
  }
  .bg-state-warning-light {
    background-color: var(--color-state-warning-light);
  }
  .bg-teal-500 {
    background-color: var(--color-teal-500);
  }
  .bg-tooltip-bg {
    background-color: var(--color-tooltip-bg);
  }
  .bg-transparent {
    background-color: transparent;
  }
  .bg-white {
    background-color: var(--color-white);
  }
  .bg-yellow-500 {
    background-color: var(--color-yellow-500);
  }
  .p-0 {
    padding: calc(var(--spacing) * 0);
  }
  .p-1 {
    padding: calc(var(--spacing) * 1);
  }
  .p-1\\.5 {
    padding: calc(var(--spacing) * 1.5);
  }
  .p-2 {
    padding: calc(var(--spacing) * 2);
  }
  .p-3 {
    padding: calc(var(--spacing) * 3);
  }
  .p-4 {
    padding: calc(var(--spacing) * 4);
  }
  .p-5 {
    padding: calc(var(--spacing) * 5);
  }
  .p-6 {
    padding: calc(var(--spacing) * 6);
  }
  .p-8 {
    padding: calc(var(--spacing) * 8);
  }
  .p-\\[5px\\] {
    padding: 5px;
  }
  .px-1 {
    padding-inline: calc(var(--spacing) * 1);
  }
  .px-2 {
    padding-inline: calc(var(--spacing) * 2);
  }
  .px-3 {
    padding-inline: calc(var(--spacing) * 3);
  }
  .px-4 {
    padding-inline: calc(var(--spacing) * 4);
  }
  .px-5 {
    padding-inline: calc(var(--spacing) * 5);
  }
  .px-6 {
    padding-inline: calc(var(--spacing) * 6);
  }
  .py-1 {
    padding-block: calc(var(--spacing) * 1);
  }
  .py-1\\.5 {
    padding-block: calc(var(--spacing) * 1.5);
  }
  .py-2 {
    padding-block: calc(var(--spacing) * 2);
  }
  .py-2\\.5 {
    padding-block: calc(var(--spacing) * 2.5);
  }
  .py-3 {
    padding-block: calc(var(--spacing) * 3);
  }
  .py-4 {
    padding-block: calc(var(--spacing) * 4);
  }
  .pt-2 {
    padding-top: calc(var(--spacing) * 2);
  }
  .pt-4 {
    padding-top: calc(var(--spacing) * 4);
  }
  .pr-2 {
    padding-right: calc(var(--spacing) * 2);
  }
  .pr-3 {
    padding-right: calc(var(--spacing) * 3);
  }
  .pr-7 {
    padding-right: calc(var(--spacing) * 7);
  }
  .pr-9 {
    padding-right: calc(var(--spacing) * 9);
  }
  .pr-10 {
    padding-right: calc(var(--spacing) * 10);
  }
  .pb-3 {
    padding-bottom: calc(var(--spacing) * 3);
  }
  .pb-4 {
    padding-bottom: calc(var(--spacing) * 4);
  }
  .pl-2 {
    padding-left: calc(var(--spacing) * 2);
  }
  .pl-3 {
    padding-left: calc(var(--spacing) * 3);
  }
  .pl-4 {
    padding-left: calc(var(--spacing) * 4);
  }
  .pl-6 {
    padding-left: calc(var(--spacing) * 6);
  }
  .pl-8 {
    padding-left: calc(var(--spacing) * 8);
  }
  .text-center {
    text-align: center;
  }
  .text-left {
    text-align: left;
  }
  .text-right {
    text-align: right;
  }
  .text-base {
    font-size: var(--text-base);
    line-height: var(--tw-leading, var(--text-base--line-height));
  }
  .text-lg {
    font-size: var(--text-lg);
    line-height: var(--tw-leading, var(--text-lg--line-height));
  }
  .text-sm {
    font-size: var(--text-sm);
    line-height: var(--tw-leading, var(--text-sm--line-height));
  }
  .text-xl {
    font-size: var(--text-xl);
    line-height: var(--tw-leading, var(--text-xl--line-height));
  }
  .text-xs {
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
  }
  .text-\\[13px\\] {
    font-size: 13px;
  }
  .leading-none {
    --tw-leading: 1;
    line-height: 1;
  }
  .leading-relaxed {
    --tw-leading: var(--leading-relaxed);
    line-height: var(--leading-relaxed);
  }
  .font-bold {
    --tw-font-weight: var(--font-weight-bold);
    font-weight: var(--font-weight-bold);
  }
  .font-medium {
    --tw-font-weight: var(--font-weight-medium);
    font-weight: var(--font-weight-medium);
  }
  .font-semibold {
    --tw-font-weight: var(--font-weight-semibold);
    font-weight: var(--font-weight-semibold);
  }
  .whitespace-nowrap {
    white-space: nowrap;
  }
  .text-accent {
    color: var(--color-accent);
  }
  .text-accent-fg {
    color: var(--color-accent-fg);
  }
  .text-fg-disabled {
    color: var(--color-fg-disabled);
  }
  .text-fg-muted {
    color: var(--color-fg-muted);
  }
  .text-fg-on-accent {
    color: var(--color-fg-on-accent);
  }
  .text-fg-primary {
    color: var(--color-fg-primary);
  }
  .text-fg-secondary {
    color: var(--color-fg-secondary);
  }
  .text-state-error {
    color: var(--color-state-error);
  }
  .text-state-success {
    color: var(--color-state-success);
  }
  .text-state-warning {
    color: var(--color-state-warning);
  }
  .text-tooltip-fg {
    color: var(--color-tooltip-fg);
  }
  .text-white {
    color: var(--color-white);
  }
  .uppercase {
    text-transform: uppercase;
  }
  .italic {
    font-style: italic;
  }
  .underline {
    text-decoration-line: underline;
  }
  .placeholder-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .accent-accent {
    accent-color: var(--color-accent);
  }
  .opacity-0 {
    opacity: 0%;
  }
  .opacity-50 {
    opacity: 50%;
  }
  .opacity-100 {
    opacity: 100%;
  }
  .shadow {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-2xl {
    --tw-shadow: 0 25px 50px -12px var(--tw-shadow-color, rgb(0 0 0 / 0.25));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-lg {
    --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-md {
    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-sm {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-1 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-2 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-accent {
    --tw-ring-color: var(--color-accent);
  }
  .ring-border-default {
    --tw-ring-color: var(--color-border-default);
  }
  .ring-interactive-focus-ring {
    --tw-ring-color: var(--color-interactive-focus-ring);
  }
  .outline {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-1 {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-2 {
    outline-style: var(--tw-outline-style);
    outline-width: 2px;
  }
  .-outline-offset-1 {
    outline-offset: calc(1px * -1);
  }
  .outline-offset-2 {
    outline-offset: 2px;
  }
  .outline-accent {
    outline-color: var(--color-accent);
  }
  .outline-border-default {
    outline-color: var(--color-border-default);
  }
  .backdrop-blur {
    --tw-backdrop-blur: blur(8px);
    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
  }
  .transition {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, backdrop-filter, display, content-visibility, overlay, pointer-events;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-\\[height\\] {
    transition-property: height;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-all {
    transition-property: all;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-colors {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-opacity {
    transition-property: opacity;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-transform {
    transition-property: transform, translate, scale, rotate;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .duration-150 {
    --tw-duration: 150ms;
    transition-duration: 150ms;
  }
  .duration-200 {
    --tw-duration: 200ms;
    transition-duration: 200ms;
  }
  .duration-300 {
    --tw-duration: 300ms;
    transition-duration: 300ms;
  }
  .ease-in-out {
    --tw-ease: var(--ease-in-out);
    transition-timing-function: var(--ease-in-out);
  }
  .ease-out {
    --tw-ease: var(--ease-out);
    transition-timing-function: var(--ease-out);
  }
  .outline-none {
    --tw-outline-style: none;
    outline-style: none;
  }
  .select-none {
    -webkit-user-select: none;
    -moz-user-select: none;
         user-select: none;
  }
  .group-hover\\:opacity-100 {
    &:is(:where(.group):hover *) {
      @media (hover: hover) {
        opacity: 100%;
      }
    }
  }
  .peer-checked\\:opacity-100 {
    &:is(:where(.peer):checked ~ *) {
      opacity: 100%;
    }
  }
  .placeholder\\:text-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .first\\:mt-0 {
    &:first-child {
      margin-top: calc(var(--spacing) * 0);
    }
  }
  .checked\\:border-accent {
    &:checked {
      border-color: var(--color-accent);
    }
  }
  .checked\\:bg-accent {
    &:checked {
      background-color: var(--color-accent);
    }
  }
  .hover\\:border-accent {
    &:hover {
      @media (hover: hover) {
        border-color: var(--color-accent);
      }
    }
  }
  .hover\\:border-state-error {
    &:hover {
      @media (hover: hover) {
        border-color: var(--color-state-error);
      }
    }
  }
  .hover\\:border-b-accent {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-accent);
      }
    }
  }
  .hover\\:border-b-fg-muted {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-fg-muted);
      }
    }
  }
  .hover\\:\\!bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover) !important;
      }
    }
  }
  .hover\\:bg-accent {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent);
      }
    }
  }
  .hover\\:bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:bg-bg-surface {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-bg-surface);
      }
    }
  }
  .hover\\:bg-border-default {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-border-default);
      }
    }
  }
  .hover\\:bg-interactive-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-interactive-hover);
      }
    }
  }
  .hover\\:bg-state-error-light {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-state-error-light);
      }
    }
  }
  .hover\\:bg-state-error\\/90 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-state-error);
        @supports (color: color-mix(in lab, red, red)) {
          background-color: color-mix(in oklab, var(--color-state-error) 90%, transparent);
        }
      }
    }
  }
  .hover\\:bg-transparent {
    &:hover {
      @media (hover: hover) {
        background-color: transparent;
      }
    }
  }
  .hover\\:text-accent-hover {
    &:hover {
      @media (hover: hover) {
        color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:text-fg-on-accent {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-on-accent);
      }
    }
  }
  .hover\\:text-fg-primary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-primary);
      }
    }
  }
  .hover\\:text-fg-secondary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-secondary);
      }
    }
  }
  .hover\\:shadow-md {
    &:hover {
      @media (hover: hover) {
        --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-0 {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-accent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: var(--color-accent);
      }
    }
  }
  .hover\\:ring-transparent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: transparent;
      }
    }
  }
  .focus\\:border-accent {
    &:focus {
      border-color: var(--color-accent);
    }
  }
  .focus\\:border-blue-500 {
    &:focus {
      border-color: var(--color-blue-500);
    }
  }
  .focus\\:border-state-error {
    &:focus {
      border-color: var(--color-state-error);
    }
  }
  .focus\\:border-transparent {
    &:focus {
      border-color: transparent;
    }
  }
  .focus\\:ring-1 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-2 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-accent {
    &:focus {
      --tw-ring-color: var(--color-accent);
    }
  }
  .focus\\:ring-blue-500 {
    &:focus {
      --tw-ring-color: var(--color-blue-500);
    }
  }
  .focus\\:outline-none {
    &:focus {
      --tw-outline-style: none;
      outline-style: none;
    }
  }
  .active\\:cursor-grabbing {
    &:active {
      cursor: grabbing;
    }
  }
  .active\\:bg-interactive-active {
    &:active {
      background-color: var(--color-interactive-active);
    }
  }
  .disabled\\:cursor-not-allowed {
    &:disabled {
      cursor: not-allowed;
    }
  }
  .disabled\\:opacity-40 {
    &:disabled {
      opacity: 40%;
    }
  }
  .disabled\\:opacity-50 {
    &:disabled {
      opacity: 50%;
    }
  }
  .disabled\\:hover\\:bg-transparent {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          background-color: transparent;
        }
      }
    }
  }
  .disabled\\:hover\\:ring-0 {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
          box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        }
      }
    }
  }
  .sm\\:grid-cols-2 {
    @media (width >= 40rem) {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
  .md\\:flex {
    @media (width >= 48rem) {
      display: flex;
    }
  }
  .md\\:h-auto {
    @media (width >= 48rem) {
      height: auto;
    }
  }
  .md\\:max-h-\\[80vh\\] {
    @media (width >= 48rem) {
      max-height: 80vh;
    }
  }
  .md\\:w-\\[28rem\\] {
    @media (width >= 48rem) {
      width: 28rem;
    }
  }
  .md\\:w-\\[32rem\\] {
    @media (width >= 48rem) {
      width: 32rem;
    }
  }
  .md\\:w-\\[36rem\\] {
    @media (width >= 48rem) {
      width: 36rem;
    }
  }
  .md\\:w-\\[48rem\\] {
    @media (width >= 48rem) {
      width: 48rem;
    }
  }
  .md\\:max-w-\\[90vw\\] {
    @media (width >= 48rem) {
      max-width: 90vw;
    }
  }
  .md\\:flex-none {
    @media (width >= 48rem) {
      flex: none;
    }
  }
  .md\\:items-center {
    @media (width >= 48rem) {
      align-items: center;
    }
  }
  .md\\:justify-center {
    @media (width >= 48rem) {
      justify-content: center;
    }
  }
  .md\\:rounded-lg {
    @media (width >= 48rem) {
      border-radius: var(--radius-lg);
    }
  }
  .md\\:border {
    @media (width >= 48rem) {
      border-style: var(--tw-border-style);
      border-width: 1px;
    }
  }
  .md\\:border-border-subtle {
    @media (width >= 48rem) {
      border-color: var(--color-border-subtle);
    }
  }
  .md\\:shadow-lg {
    @media (width >= 48rem) {
      --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
}
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');
:host {
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-translate-z: 0;
  --tw-rotate-x: rotateX(0);
  --tw-rotate-y: rotateY(0);
  --tw-rotate-z: rotateZ(0);
  --tw-skew-x: skewX(0);
  --tw-skew-y: skewY(0);
  --tw-border-style: solid;
  --tw-gradient-from: #0000;
  --tw-gradient-via: #0000;
  --tw-gradient-to: #0000;
  --tw-gradient-from-position: 0%;
  --tw-gradient-via-position: 50%;
  --tw-gradient-to-position: 100%;
  --tw-shadow: 0 0 #0000;
  --tw-inset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-inset-ring-shadow: 0 0 #0000;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-outline-style: solid;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  width: 100%;
  height: 100%;
  font-family: 'Open Sans', system-ui, sans-serif;
  color: var(--ep-foreground-primary);
  background-color: var(--ep-background-surface);
}
:host *::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
:host *::-webkit-scrollbar-track {
  background: var(--ep-scrollbar-track);
}
:host *::-webkit-scrollbar-thumb {
  background: var(--ep-scrollbar-thumb);
  border-radius: 4px;
}
:host *::-webkit-scrollbar-thumb:hover {
  background: var(--ep-scrollbar-thumb-hover);
}
@property --tw-translate-x {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-y {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-z {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-scale-x {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-y {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-z {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-rotate-x {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-y {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-z {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-x {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-y {
  syntax: "*";
  inherits: false;
}
@property --tw-space-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-space-x-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-divide-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-border-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-leading {
  syntax: "*";
  inherits: false;
}
@property --tw-font-weight {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-inset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-ring-inset {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-offset-width {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --tw-ring-offset-color {
  syntax: "*";
  inherits: false;
  initial-value: #fff;
}
@property --tw-ring-offset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-outline-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-backdrop-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-duration {
  syntax: "*";
  inherits: false;
}
@property --tw-ease {
  syntax: "*";
  inherits: false;
}
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
@keyframes pulse {
  50% {
    opacity: 0.5;
  }
}
@layer properties {
  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
    *, ::before, ::after, ::backdrop {
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-translate-z: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-scale-z: 1;
      --tw-rotate-x: initial;
      --tw-rotate-y: initial;
      --tw-rotate-z: initial;
      --tw-skew-x: initial;
      --tw-skew-y: initial;
      --tw-space-y-reverse: 0;
      --tw-space-x-reverse: 0;
      --tw-divide-y-reverse: 0;
      --tw-border-style: solid;
      --tw-leading: initial;
      --tw-font-weight: initial;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-color: initial;
      --tw-shadow-alpha: 100%;
      --tw-inset-shadow: 0 0 #0000;
      --tw-inset-shadow-color: initial;
      --tw-inset-shadow-alpha: 100%;
      --tw-ring-color: initial;
      --tw-ring-shadow: 0 0 #0000;
      --tw-inset-ring-color: initial;
      --tw-inset-ring-shadow: 0 0 #0000;
      --tw-ring-inset: initial;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-outline-style: solid;
      --tw-backdrop-blur: initial;
      --tw-backdrop-brightness: initial;
      --tw-backdrop-contrast: initial;
      --tw-backdrop-grayscale: initial;
      --tw-backdrop-hue-rotate: initial;
      --tw-backdrop-invert: initial;
      --tw-backdrop-opacity: initial;
      --tw-backdrop-saturate: initial;
      --tw-backdrop-sepia: initial;
      --tw-duration: initial;
      --tw-ease: initial;
    }
  }
}
`,Qm=0;function k(e,t,n,o,i,r){t||(t={});var a,s,l=t;if("ref"in l)for(s in l={},t)s=="ref"?a=t[s]:l[s]=t[s];var c={type:e,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Qm,__i:-1,__u:0,__source:i,__self:r};if(typeof e=="function"&&(a=e.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return ie.vnode&&ie.vnode(c),c}var Lt=(e=>(e[e.Degree0=0]="Degree0",e[e.Degree90=1]="Degree90",e[e.Degree180=2]="Degree180",e[e.Degree270=3]="Degree270",e))(Lt||{});function Jm(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function eg(e){return{width:Math.ceil(e.width),height:Math.ceil(e.height)}}function c0(e){return{origin:Jm(e.origin),size:eg(e.size)}}function Ei(e){const{width:t,height:n}=e;return{width:n,height:t}}function wo(e,t,n){return{width:(e=t%2==0?e:Ei(e)).width*n,height:e.height*n}}function d0(e){const t=[e.p1.x,e.p2.x,e.p3.x,e.p4.x],n=[e.p1.y,e.p2.y,e.p3.y,e.p4.y];return{origin:{x:Math.min(...t),y:Math.min(...n)},size:{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}}}function u0(e){return{p1:{x:e.origin.x,y:e.origin.y},p2:{x:e.origin.x+e.size.width,y:e.origin.y},p3:{x:e.origin.x+e.size.width,y:e.origin.y+e.size.height},p4:{x:e.origin.x,y:e.origin.y+e.size.height}}}function Rl(e,t,n){let o=t.x,i=t.y;switch(n){case 0:o=t.x,i=t.y;break;case 1:o=e.height-t.y,i=t.x;break;case 2:o=e.width-t.x,i=e.height-t.y;break;case 3:o=t.y,i=e.width-t.x}return{x:o,y:i}}function go(e,t){return{x:e.x*t,y:e.y*t}}function Nt(e){if(e.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};const t=e.map(r=>r.x),n=e.map(r=>r.y),o=Math.min(...t),i=Math.min(...n);return{origin:{x:o,y:i},size:{width:Math.max(...t)-o,height:Math.max(...n)-i}}}function Ot(e,t){return{origin:{x:e.origin.x-t,y:e.origin.y-t},size:{width:e.size.width+2*t,height:e.size.height+2*t}}}function sr(e,t,n){let o=t.origin.x,i=t.origin.y,r=t.size;switch(n){case 0:break;case 1:o=e.height-t.origin.y-t.size.height,i=t.origin.x,r=Ei(t.size);break;case 2:o=e.width-t.origin.x-t.size.width,i=e.height-t.origin.y-t.size.height;break;case 3:o=t.origin.y,i=e.width-t.origin.x-t.size.width,r=Ei(t.size)}return{origin:{x:o,y:i},size:{width:r.width,height:r.height}}}function _l(e,t){return{origin:{x:e.origin.x*t,y:e.origin.y*t},size:{width:e.size.width*t,height:e.size.height*t}}}function tg(e,t,n,o){return _l(sr(e,t,n),o)}const ng={origin:{x:0,y:0},size:{width:0,height:0}};function lr(e){if(e.length===0)return null;let t=e[0].origin.x,n=e[0].origin.y,o=e[0].origin.x+e[0].size.width,i=e[0].origin.y+e[0].size.height;for(const r of e)t=Math.min(t,r.origin.x),n=Math.min(n,r.origin.y),o=Math.max(o,r.origin.x+r.size.width),i=Math.max(i,r.origin.y+r.size.height);return{origin:{x:t,y:n},size:{width:o-t,height:i-n}}}function h0(e,t,n,o){const i=e.origin.x,r=e.origin.y,a=e.size.width,s=e.size.height,l=n/a,c=o/s,u=n/s,h=o/a;switch(t){case 0:return{a:l,b:0,c:0,d:c,e:-l*i,f:-c*r};case 3:return{a:0,b:-h,c:u,d:0,e:-u*r,f:h*(i+a)};case 2:return{a:-l,b:0,c:0,d:-c,e:l*(i+a),f:c*(r+s)};case 1:return{a:0,b:h,c:-u,d:0,e:u*(r+s),f:-h*i}}}class Nl{isEnabled(){return!1}debug(){}info(){}warn(){}error(){}perf(){}}class Ol{isEnabled(){return!0}debug(t,n,...o){console.debug(`${t}.${n}`,...o)}info(t,n,...o){console.info(`${t}.${n}`,...o)}warn(t,n,...o){console.warn(`${t}.${n}`,...o)}error(t,n,...o){console.error(`${t}.${n}`,...o)}perf(t,n,o,i,...r){console.info(`${t}.${n}.${o}.${i}`,...r)}}class og{constructor(t,n){this.logger=t,this.level=n}isEnabled(t){return this.level<={debug:0,info:1,warn:2,error:3}[t]}debug(t,n,...o){this.level<=0&&this.logger.debug(t,n,...o)}info(t,n,...o){this.level<=1&&this.logger.info(t,n,...o)}warn(t,n,...o){this.level<=2&&this.logger.warn(t,n,...o)}error(t,n,...o){this.level<=3&&this.logger.error(t,n,...o)}perf(t,n,o,i,...r){this.logger.perf(t,n,o,i,...r)}}class Ll{constructor(){this.marks=new Map}isEnabled(){return!1}debug(t,n,...o){}info(t,n,...o){}warn(t,n,...o){}error(t,n,...o){}perf(t,n,o,i,r,...a){const s=`${t}.${n}.${o}.${i}.${r}`;switch(i){case"Begin":globalThis.performance.mark(s,{detail:a}),this.marks.set(`${t}.${n}.${o}.${r}`,Date.now());break;case"End":globalThis.performance.mark(s,{detail:a});const l=`${t}.${n}.${o}.Measure.${r}`,c=`${t}.${n}.${o}.Begin.${r}`;globalThis.performance.measure(l,c,s);const u=this.marks.get(`${t}.${n}.${o}.${r}`);if(u){const h=Date.now()-u;console.info(` ${t}.${n}.${o}.${r}: ${h}ms`),this.marks.delete(`${t}.${n}.${o}.${r}`)}}}}class $l{constructor(t){this.loggers=t}isEnabled(t){return this.loggers.some(n=>n.isEnabled(t))}debug(t,n,...o){for(const i of this.loggers)i.debug(t,n,...o)}info(t,n,...o){for(const i of this.loggers)i.info(t,n,...o)}warn(t,n,...o){for(const i of this.loggers)i.warn(t,n,...o)}error(t,n,...o){for(const i of this.loggers)i.error(t,n,...o)}perf(t,n,o,i,...r){for(const a of this.loggers)a.perf(t,n,o,i,...r)}}var un=(e=>(e[e.Pending=0]="Pending",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected",e[e.Aborted=3]="Aborted",e))(un||{});class ig extends Error{constructor(t){super(`Task aborted: ${JSON.stringify(t)}`),this.name="TaskAbortedError",this.reason=t}}class rg extends Error{constructor(t){super(`Task rejected: ${JSON.stringify(t)}`),this.name="TaskRejectedError",this.reason=t}}class fe{constructor(){this.state={stage:0},this.resolvedCallbacks=[],this.rejectedCallbacks=[],this._promise=null,this.progressCbs=[]}toPromise(){return this._promise||(this._promise=new Promise((t,n)=>{this.wait(o=>t(o),o=>{o.type==="abort"?n(new ig(o.reason)):n(new rg(o.reason))})})),this._promise}wait(t,n){switch(this.state.stage){case 0:this.resolvedCallbacks.push(t),this.rejectedCallbacks.push(n);break;case 1:t(this.state.result);break;case 2:n({type:"reject",reason:this.state.reason});break;case 3:n({type:"abort",reason:this.state.reason})}}resolve(t){if(this.state.stage===0){this.state={stage:1,result:t};for(const n of this.resolvedCallbacks)try{n(t)}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}reject(t){if(this.state.stage===0){this.state={stage:2,reason:t};for(const n of this.rejectedCallbacks)try{n({type:"reject",reason:t})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}abort(t){if(this.state.stage===0){this.state={stage:3,reason:t};for(const n of this.rejectedCallbacks)try{n({type:"abort",reason:t})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}fail(t){t.type==="abort"?this.abort(t.reason):this.reject(t.reason)}onProgress(t){this.progressCbs.push(t)}progress(t){for(const n of this.progressCbs)n(t)}static all(t){const n=new fe;if(t.length===0)return n.resolve([]),n;const o=new Array(t.length);let i=0,r=!1;return t.forEach((a,s)=>{a.wait(l=>{r||(o[s]=l,i++,i===t.length&&(r=!0,n.resolve(o)))},l=>{r||(r=!0,l.type==="abort"?n.abort(l.reason):n.reject(l.reason))})}),n}static allSettled(t){const n=new fe;if(t.length===0)return n.resolve([]),n;const o=new Array(t.length);let i=0;return t.forEach((r,a)=>{r.wait(s=>{o[a]={status:"resolved",value:s},i++,i===t.length&&n.resolve(o)},s=>{o[a]={status:s.type==="abort"?"aborted":"rejected",reason:s.reason},i++,i===t.length&&n.resolve(o)})}),n}static race(t){const n=new fe;if(t.length===0)return n.reject("No tasks provided"),n;let o=!1;return t.forEach(i=>{i.wait(r=>{o||(o=!0,n.resolve(r))},r=>{o||(o=!0,r.type==="abort"?n.abort(r.reason):n.reject(r.reason))})}),n}static withProgress(t,n){const o=fe.all(t);if(n){let i=0;t.forEach(r=>{r.wait(()=>{i++,n(i,t.length)},()=>{i++,n(i,t.length)})})}return o}}const ag=Object.freeze(["","","","\uFEFF","",""]),sg=new RegExp(`[${ag.join("")}]`,"g");function m0(e){return e.replace(sg,"")}var cr=(e=>(e[e.Unknown=0]="Unknown",e[e.XYZ=1]="XYZ",e[e.FitPage=2]="FitPage",e[e.FitHorizontal=3]="FitHorizontal",e[e.FitVertical=4]="FitVertical",e[e.FitRectangle=5]="FitRectangle",e[e.FitBoundingBox=6]="FitBoundingBox",e[e.FitBoundingBoxHorizontal=7]="FitBoundingBoxHorizontal",e[e.FitBoundingBoxVertical=8]="FitBoundingBoxVertical",e))(cr||{}),lg=(e=>(e[e.NotSet=0]="NotSet",e[e.True=1]="True",e[e.False=2]="False",e[e.Unknown=3]="Unknown",e))(lg||{}),Ee=(e=>(e[e.Unknown=-1]="Unknown",e[e.Courier=0]="Courier",e[e.Courier_Bold=1]="Courier_Bold",e[e.Courier_BoldOblique=2]="Courier_BoldOblique",e[e.Courier_Oblique=3]="Courier_Oblique",e[e.Helvetica=4]="Helvetica",e[e.Helvetica_Bold=5]="Helvetica_Bold",e[e.Helvetica_BoldOblique=6]="Helvetica_BoldOblique",e[e.Helvetica_Oblique=7]="Helvetica_Oblique",e[e.Times_Roman=8]="Times_Roman",e[e.Times_Bold=9]="Times_Bold",e[e.Times_BoldItalic=10]="Times_BoldItalic",e[e.Times_Italic=11]="Times_Italic",e[e.Symbol=12]="Symbol",e[e.ZapfDingbats=13]="ZapfDingbats",e))(Ee||{}),Ge=(e=>(e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right",e))(Ge||{}),nt=(e=>(e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom",e))(nt||{}),Z=(e=>(e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay",e[e.Darken=4]="Darken",e[e.Lighten=5]="Lighten",e[e.ColorDodge=6]="ColorDodge",e[e.ColorBurn=7]="ColorBurn",e[e.HardLight=8]="HardLight",e[e.SoftLight=9]="SoftLight",e[e.Difference=10]="Difference",e[e.Exclusion=11]="Exclusion",e[e.Hue=12]="Hue",e[e.Saturation=13]="Saturation",e[e.Color=14]="Color",e[e.Luminosity=15]="Luminosity",e))(Z||{}),cg=(e=>(e[e.Contain=0]="Contain",e[e.Cover=1]="Cover",e[e.Stretch=2]="Stretch",e))(cg||{}),Zt=(e=>(e[e.Unsupported=0]="Unsupported",e[e.Goto=1]="Goto",e[e.RemoteGoto=2]="RemoteGoto",e[e.URI=3]="URI",e[e.LaunchAppOrOpenFile=4]="LaunchAppOrOpenFile",e))(Zt||{}),E=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.LINK=2]="LINK",e[e.FREETEXT=3]="FREETEXT",e[e.LINE=4]="LINE",e[e.SQUARE=5]="SQUARE",e[e.CIRCLE=6]="CIRCLE",e[e.POLYGON=7]="POLYGON",e[e.POLYLINE=8]="POLYLINE",e[e.HIGHLIGHT=9]="HIGHLIGHT",e[e.UNDERLINE=10]="UNDERLINE",e[e.SQUIGGLY=11]="SQUIGGLY",e[e.STRIKEOUT=12]="STRIKEOUT",e[e.STAMP=13]="STAMP",e[e.CARET=14]="CARET",e[e.INK=15]="INK",e[e.POPUP=16]="POPUP",e[e.FILEATTACHMENT=17]="FILEATTACHMENT",e[e.SOUND=18]="SOUND",e[e.MOVIE=19]="MOVIE",e[e.WIDGET=20]="WIDGET",e[e.SCREEN=21]="SCREEN",e[e.PRINTERMARK=22]="PRINTERMARK",e[e.TRAPNET=23]="TRAPNET",e[e.WATERMARK=24]="WATERMARK",e[e.THREED=25]="THREED",e[e.RICHMEDIA=26]="RICHMEDIA",e[e.XFAWIDGET=27]="XFAWIDGET",e[e.REDACT=28]="REDACT",e))(E||{}),dg=(e=>(e[e.Normal=0]="Normal",e[e.Rollover=1]="Rollover",e[e.Down=2]="Down",e))(dg||{}),dr=(e=>(e[e.Unknown=-1]="Unknown",e[e.Comment=0]="Comment",e[e.Key=1]="Key",e[e.Note=2]="Note",e[e.Help=3]="Help",e[e.NewParagraph=4]="NewParagraph",e[e.Paragraph=5]="Paragraph",e[e.Insert=6]="Insert",e[e.Graph=7]="Graph",e[e.PushPin=8]="PushPin",e[e.Paperclip=9]="Paperclip",e[e.Tag=10]="Tag",e[e.Speaker=11]="Speaker",e[e.Mic=12]="Mic",e[e.Approved=13]="Approved",e[e.Experimental=14]="Experimental",e[e.NotApproved=15]="NotApproved",e[e.AsIs=16]="AsIs",e[e.Expired=17]="Expired",e[e.NotForPublicRelease=18]="NotForPublicRelease",e[e.Confidential=19]="Confidential",e[e.Final=20]="Final",e[e.Sold=21]="Sold",e[e.Departmental=22]="Departmental",e[e.ForComment=23]="ForComment",e[e.TopSecret=24]="TopSecret",e[e.Draft=25]="Draft",e[e.ForPublicRelease=26]="ForPublicRelease",e))(dr||{}),Q=(e=>(e[e.None=0]="None",e[e.Square=1]="Square",e[e.Circle=2]="Circle",e[e.Diamond=3]="Diamond",e[e.OpenArrow=4]="OpenArrow",e[e.ClosedArrow=5]="ClosedArrow",e[e.Butt=6]="Butt",e[e.ROpenArrow=7]="ROpenArrow",e[e.RClosedArrow=8]="RClosedArrow",e[e.Slash=9]="Slash",e[e.Unknown=10]="Unknown",e))(Q||{}),St=(e=>(e[e.Unknown=0]="Unknown",e[e.Reply=1]="Reply",e[e.Group=2]="Group",e))(St||{}),ug=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PUSHBUTTON=1]="PUSHBUTTON",e[e.CHECKBOX=2]="CHECKBOX",e[e.RADIOBUTTON=3]="RADIOBUTTON",e[e.COMBOBOX=4]="COMBOBOX",e[e.LISTBOX=5]="LISTBOX",e[e.TEXTFIELD=6]="TEXTFIELD",e[e.SIGNATURE=7]="SIGNATURE",e[e.XFA=8]="XFA",e[e.XFA_CHECKBOX=9]="XFA_CHECKBOX",e[e.XFA_COMBOBOX=10]="XFA_COMBOBOX",e[e.XFA_IMAGEFIELD=11]="XFA_IMAGEFIELD",e[e.XFA_LISTBOX=12]="XFA_LISTBOX",e[e.XFA_PUSHBUTTON=13]="XFA_PUSHBUTTON",e[e.XFA_SIGNATURE=14]="XFA_SIGNATURE",e[e.XFA_TEXTFIELD=15]="XFA_TEXTFIELD",e))(ug||{}),hg=(e=>(e[e.Color=0]="Color",e[e.InteriorColor=1]="InteriorColor",e))(hg||{}),he=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.SOLID=1]="SOLID",e[e.DASHED=2]="DASHED",e[e.BEVELED=3]="BEVELED",e[e.INSET=4]="INSET",e[e.UNDERLINE=5]="UNDERLINE",e[e.CLOUDY=6]="CLOUDY",e))(he||{}),mg=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.PATH=2]="PATH",e[e.IMAGE=3]="IMAGE",e[e.SHADING=4]="SHADING",e[e.FORM=5]="FORM",e))(mg||{});const Ri=Object.freeze({1:"invisible",2:"hidden",4:"print",8:"noZoom",16:"noRotate",32:"noView",64:"readOnly",128:"locked",256:"toggleNoView"}),gg=Object.entries(Ri).reduce((e,[t,n])=>(e[n]=Number(t),e),{});function g0(e){return Object.keys(Ri).filter(t=>(e&t)!==0).map(t=>Ri[t])}function p0(e){return e.reduce((t,n)=>t|gg[n],0)}var pg=(e=>(e[e.Create=0]="Create",e[e.Read=1]="Read",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e))(pg||{}),En=(e=>(e[e.None=0]="None",e[e.MatchCase=1]="MatchCase",e[e.MatchWholeWord=2]="MatchWholeWord",e[e.MatchConsecutive=4]="MatchConsecutive",e))(En||{}),N=(e=>(e[e.Print=4]="Print",e[e.ModifyContents=8]="ModifyContents",e[e.CopyContents=16]="CopyContents",e[e.ModifyAnnotations=32]="ModifyAnnotations",e[e.FillForms=256]="FillForms",e[e.ExtractForAccessibility=512]="ExtractForAccessibility",e[e.AssembleDocument=1024]="AssembleDocument",e[e.PrintHighQuality=2048]="PrintHighQuality",e[e.AllowAll=3900]="AllowAll",e))(N||{});class fg extends Error{constructor(t,n){const o=t.map(i=>N[i]).join(", ");super(`Permission denied. Required: ${o}`),this.requiredFlags=t,this.currentPermissions=n,this.name="PermissionDeniedError"}}var vg=(e=>(e[e.Display=0]="Display",e[e.Print=1]="Print",e))(vg||{}),J=(e=>(e[e.Ok=0]="Ok",e[e.Unknown=1]="Unknown",e[e.NotFound=2]="NotFound",e[e.WrongFormat=3]="WrongFormat",e[e.Password=4]="Password",e[e.Security=5]="Security",e[e.PageError=6]="PageError",e[e.XFALoad=7]="XFALoad",e[e.XFALayout=8]="XFALayout",e[e.Cancelled=9]="Cancelled",e[e.Initialization=10]="Initialization",e[e.NotReady=11]="NotReady",e[e.NotSupport=12]="NotSupport",e[e.LoadDoc=13]="LoadDoc",e[e.DocNotOpen=14]="DocNotOpen",e[e.CantCloseDoc=15]="CantCloseDoc",e[e.CantCreateNewDoc=16]="CantCreateNewDoc",e[e.CantImportPages=17]="CantImportPages",e[e.CantCreateAnnot=18]="CantCreateAnnot",e[e.CantSetAnnotRect=19]="CantSetAnnotRect",e[e.CantSetAnnotContent=20]="CantSetAnnotContent",e[e.CantRemoveInkList=21]="CantRemoveInkList",e[e.CantAddInkStoke=22]="CantAddInkStoke",e[e.CantReadAttachmentSize=23]="CantReadAttachmentSize",e[e.CantReadAttachmentContent=24]="CantReadAttachmentContent",e[e.CantFocusAnnot=25]="CantFocusAnnot",e[e.CantSelectText=26]="CantSelectText",e[e.CantSelectOption=27]="CantSelectOption",e[e.CantCheckField=28]="CantCheckField",e[e.CantSetAnnotString=29]="CantSetAnnotString",e))(J||{});class de{static create(){return new fe}static resolve(t){const n=new fe;return n.resolve(t),n}static reject(t){const n=new fe;return n.reject(t),n}static abort(t){const n=new fe;return n.reject(t),n}}function f0(e){const t=n=>(o=>Math.max(0,Math.min(255,o)))(n).toString(16).padStart(2,"0");return`#${t(e.red)}${t(e.green)}${t(e.blue)}`}function v0(e){/^#?[0-9a-f]{3}$/i.test(e)&&(e=e.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"#$1$1$2$2$3$3").toLowerCase());const[,t,n,o]=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e)??(()=>{throw new Error(`Invalid hex colour: "${e}"`)})();return{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16)}}function y0(e){return(t=>Math.max(0,Math.min(255,t)))(e)/255}function b0(e){return((t,n=255)=>Math.max(0,Math.min(n,t)))(Math.round(255*e))}function w0(e){if(!e?.startsWith("D:")||e.length<16)return;const t=+e.slice(2,6),n=+e.slice(6,8)-1,o=+e.slice(8,10),i=+e.slice(10,12),r=+e.slice(12,14),a=+e.slice(14,16);return new Date(Date.UTC(t,n,o,i,r,a))}function x0(e=new Date){const t=(n,o=2)=>n.toString().padStart(o,"0");return`D:${e.getUTCFullYear()}${t(e.getUTCMonth()+1)}${t(e.getUTCDate())}${t(e.getUTCHours())}${t(e.getUTCMinutes())}${t(e.getUTCSeconds())}`}const _i=Object.freeze([{id:Ge.Left,label:"Left",css:"left"},{id:Ge.Center,label:"Center",css:"center"},{id:Ge.Right,label:"Right",css:"right"}]),ca=_i.reduce((e,t)=>(e[t.id]=t,e),{});function yg(e){return(function(t){return ca[t]??ca[Ge.Left]})(e).css}_i.reduce((e,t)=>(e[t.css]=t.id,e),{}),_i.map(e=>({value:e.id,label:e.label}));var Fl=(e=>(e.Courier="Courier",e.Helvetica="Helvetica",e.Times="Times",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats",e.Unknown="Unknown",e))(Fl||{});const bg=Ee.Helvetica,jl={id:Ee.Helvetica,family:"Helvetica",bold:!1,italic:!1,label:"Helvetica",css:"Helvetica, Arial, sans-serif"},ur=Object.freeze([{id:Ee.Courier,family:"Courier",bold:!1,italic:!1,label:"Courier",css:"Courier, monospace"},{id:Ee.Courier_Bold,family:"Courier",bold:!0,italic:!1,label:"Courier Bold",css:'"Courier-Bold", Courier, monospace'},{id:Ee.Courier_BoldOblique,family:"Courier",bold:!0,italic:!0,label:"Courier Bold Oblique",css:'"Courier-BoldOblique", Courier, monospace'},{id:Ee.Courier_Oblique,family:"Courier",bold:!1,italic:!0,label:"Courier Oblique",css:'"Courier-Oblique", Courier, monospace'},jl,{id:Ee.Helvetica_Bold,family:"Helvetica",bold:!0,italic:!1,label:"Helvetica Bold",css:'"Helvetica-Bold", Arial, sans-serif'},{id:Ee.Helvetica_BoldOblique,family:"Helvetica",bold:!0,italic:!0,label:"Helvetica Bold Oblique",css:'"Helvetica-BoldOblique", Arial, sans-serif'},{id:Ee.Helvetica_Oblique,family:"Helvetica",bold:!1,italic:!0,label:"Helvetica Oblique",css:'"Helvetica-Oblique", Arial, sans-serif'},{id:Ee.Times_Roman,family:"Times",bold:!1,italic:!1,label:"Times Roman",css:'"Times New Roman", Times, serif'},{id:Ee.Times_Bold,family:"Times",bold:!0,italic:!1,label:"Times Bold",css:'"Times New Roman Bold", Times, serif'},{id:Ee.Times_BoldItalic,family:"Times",bold:!0,italic:!0,label:"Times Bold Italic",css:'"Times New Roman Bold Italic", Times, serif'},{id:Ee.Times_Italic,family:"Times",bold:!1,italic:!0,label:"Times Italic",css:'"Times New Roman Italic", Times, serif'},{id:Ee.Symbol,family:"Symbol",bold:!1,italic:!1,label:"Symbol",css:"Symbol"},{id:Ee.ZapfDingbats,family:"ZapfDingbats",bold:!1,italic:!1,label:"Zapf Dingbats",css:"ZapfDingbats"}]),wg=ur.reduce((e,t)=>(e[t.id]=t,e),{}),Ul=new Map;for(const e of ur)Ul.set(`${e.family}_${e.bold}_${e.italic}`,e.id);function jo(e){return wg[e]??jl}function da(e){return jo(e).family}function Dn(e){return jo(e).bold}function An(e){return jo(e).italic}function Bt(e,{bold:t,italic:n}){return Ul.get(`${e}_${t}_${n}`)??bg}Object.values(Fl).filter(e=>e!=="Unknown").map(e=>({value:e,label:e}));const xg=[...new Set(ur.map(e=>e.family))];function ua(e){switch(e){case"Courier":return"Courier";case"Helvetica":default:return"Helvetica";case"Times":return"Times";case"Symbol":return"Symbol";case"ZapfDingbats":return"ZapfDingbats"}}const xo=Object.freeze([{id:Z.Normal,label:"Normal",css:"normal"},{id:Z.Multiply,label:"Multiply",css:"multiply"},{id:Z.Screen,label:"Screen",css:"screen"},{id:Z.Overlay,label:"Overlay",css:"overlay"},{id:Z.Darken,label:"Darken",css:"darken"},{id:Z.Lighten,label:"Lighten",css:"lighten"},{id:Z.ColorDodge,label:"Color Dodge",css:"color-dodge"},{id:Z.ColorBurn,label:"Color Burn",css:"color-burn"},{id:Z.HardLight,label:"Hard Light",css:"hard-light"},{id:Z.SoftLight,label:"Soft Light",css:"soft-light"},{id:Z.Difference,label:"Difference",css:"difference"},{id:Z.Exclusion,label:"Exclusion",css:"exclusion"},{id:Z.Hue,label:"Hue",css:"hue"},{id:Z.Saturation,label:"Saturation",css:"saturation"},{id:Z.Color,label:"Color",css:"color"},{id:Z.Luminosity,label:"Luminosity",css:"luminosity"}]),ha=xo.reduce((e,t)=>(e[t.id]=t,e),{});function Be(e){return(function(t){return ha[t]??ha[Z.Normal]})(e).css}xo.reduce((e,t)=>(e[t.css]=t.id,e),{}),xo.map(e=>({value:e.id,label:e.label}));const Cg=xo.map(e=>e.id);function ma(e){if(e instanceof Nl)return{type:"noop"};if(e instanceof Ol)return{type:"console"};if(e instanceof Ll)return{type:"perf"};if(e instanceof og){const t=e;return{type:"level",config:{level:t.level,logger:ma(t.logger)}}}return e instanceof $l?{type:"all",config:{loggers:e.loggers.map(ma)}}:{type:"noop"}}const Ig=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function C0(e){return Ig.test(e)}function Pe(){var e;if(typeof((e=globalThis.crypto)==null?void 0:e.randomUUID)=="function")return globalThis.crypto.randomUUID();const t=(function(o){var i;if(typeof((i=globalThis.crypto)==null?void 0:i.getRandomValues)=="function")return globalThis.crypto.getRandomValues(new Uint8Array(o));if(typeof require=="function")try{const{randomBytes:a}=require("crypto");return a(o)}catch{}const r=new Uint8Array(o);for(let a=0;a<o;a++)r[a]=Math.floor(256*Math.random());return r})(16);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const n=Array.from(t,o=>o.toString(16).padStart(2,"0")).join("");return`${n.slice(0,8)}-${n.slice(8,12)}-${n.slice(12,16)}-${n.slice(16,20)}-${n.slice(20)}`}class Rn extends fe{constructor(t={}){super(),this.children=new Map,this.childResults=[],this.completedCount=0,this.expectedCount=0,this.isFinalized=!1,this.config={aggregate:t.aggregate??(n=>n),onChildComplete:t.onChildComplete??(()=>{}),failFast:t.failFast??!0}}addChild(t,n){if(this.state.stage!==un.Pending)return this.state.stage===un.Aborted&&t.abort(this.state.reason),this;const o=n??this.expectedCount;return this.expectedCount=Math.max(this.expectedCount,o+1),this.children.set(t,o),t.wait(i=>this.handleChildSuccess(t,i,o),i=>this.handleChildError(t,i,o)),this}finalize(){return this.isFinalized||(this.isFinalized=!0,this.expectedCount===0&&this.resolve(this.config.aggregate([]))),this}handleChildSuccess(t,n,o){if(this.state.stage!==un.Pending)return;this.childResults[o]=n,this.completedCount++,this.children.delete(t);const i=this.config.onChildComplete(this.completedCount,this.expectedCount,n,o);if(i!==void 0&&this.progress(i),this.completedCount===this.expectedCount){const r=this.config.aggregate(this.childResults);this.resolve(r)}}handleChildError(t,n,o){if(this.state.stage===un.Pending){if(this.children.delete(t),this.config.failFast){for(const[i]of this.children)i.abort("Sibling task failed");this.children.clear(),this.fail(n)}else if(this.childResults[o]=void 0,this.completedCount++,this.completedCount===this.expectedCount){const i=this.config.aggregate(this.childResults);this.resolve(i)}}}abort(t){for(const[n]of this.children)n.abort(t);this.children.clear(),super.abort(t)}reject(t){for(const[n]of this.children)n.abort(t);this.children.clear(),super.reject(t)}getPendingCount(){return this.children.size}getCompletedCount(){return this.completedCount}static gather(t){const n=new Rn({aggregate:o=>o,onChildComplete:(o,i)=>({completed:o,total:i})});return t.forEach((o,i)=>n.addChild(o,i)),n.finalize(),n}static gatherIndexed(t){const n=new Rn({aggregate:o=>{const i={};return o.forEach((r,a)=>{i[a]=r}),i},onChildComplete:(o,i,r,a)=>({page:a,result:r})});return t.forEach((o,i)=>n.addChild(o,i)),n.finalize(),n}static gatherFrom(t,n){const o=new Rn(n);return t.forEach((i,r)=>o.addChild(i,r)),o.finalize(),o}static first(t){let n=!1;const o=new Rn({aggregate:i=>i[0],failFast:!1});return o.handleChildSuccess=(i,r)=>{if(!n){n=!0;for(const[a]of o.children)a!==i&&a.abort("Race won by sibling");o.resolve(r)}},t.forEach((i,r)=>o.addChild(i,r)),o.finalize(),o}}function ze(){}class ga{constructor(){this.dependencyGraph=new Map}addNode(t,n=[]){this.dependencyGraph.set(t,new Set(n))}hasCircularDependencies(){const t=new Set,n=new Set,o=i=>{t.add(i),n.add(i);const r=this.dependencyGraph.get(i)||new Set;for(const a of r)if(t.has(a)){if(n.has(a))return!0}else if(o(a))return!0;return n.delete(i),!1};for(const i of this.dependencyGraph.keys())if(!t.has(i)&&o(i))return!0;return!1}resolveLoadOrder(){if(this.hasCircularDependencies())throw new Error("Circular dependencies detected");const t=[],n=new Set,o=new Set,i=r=>{if(o.has(r))throw new Error("Circular dependency");if(n.has(r))return;o.add(r);const a=this.dependencyGraph.get(r)||new Set;for(const s of a)i(s);o.delete(r),n.add(r),t.push(r)};for(const r of this.dependencyGraph.keys())n.has(r)||i(r);return t}}class Ye extends Error{constructor(t){super(t),this.name="PluginRegistrationError"}}class ln extends Error{constructor(t){super(t),this.name="PluginNotFoundError"}}class kg extends Error{constructor(t){super(t),this.name="CircularDependencyError"}}class Sg extends Error{constructor(t){super(t),this.name="PluginConfigurationError"}}class Pg{constructor(t,n){this.store=t,this.pluginId=n}getState(){return this.store.getState().plugins[this.pluginId]}dispatch(t){return this.store.dispatchToPlugin(this.pluginId,t)}subscribeToState(t){return this.store.subscribeToPlugin(this.pluginId,(n,o,i)=>{t(n,o,i)})}onAction(t,n){return this.store.onAction(t,(o,i,r)=>{n(o,i.plugins[this.pluginId],r.plugins[this.pluginId])})}}const Uo="START_LOADING_DOCUMENT",Hl="UPDATE_DOCUMENT_LOADING_PROGRESS",Ho="SET_DOCUMENT_LOADED",hr="SET_DOCUMENT_ERROR",mr="RETRY_LOADING_DOCUMENT",Bo="CLOSE_DOCUMENT",gr="SET_ACTIVE_DOCUMENT",pr="REORDER_DOCUMENTS",fr="MOVE_DOCUMENT",vr="UPDATE_DOCUMENT_SECURITY",xn="REFRESH_PAGES",Wo="SET_SCALE",qo="SET_ROTATION",Mg=[Uo,Hl,Ho,Bo,gr,hr,mr,"REFRESH_DOCUMENT",xn,"SET_PAGES",Wo,qo,"SET_DEFAULT_SCALE","SET_DEFAULT_ROTATION",pr,fr,vr],pa=(e,t,n,o,i,r,a)=>({type:Uo,payload:{documentId:e,name:t,scale:n,rotation:o,passwordProvided:i,autoActivate:r,permissions:a}}),fa=(e,t)=>({type:Bo,payload:{documentId:e,nextActiveDocumentId:t}}),va=(e,t)=>({type:xn,payload:{documentId:e,pageIndexes:t}}),ya=(e,t)=>({type:qo,payload:{rotation:e,documentId:t}});class Dg{constructor(t,n){this.initialCoreState=n,this.pluginReducers={},this.listeners=[],this.pluginListeners={},this.isDispatching=!1,this.state={core:n,plugins:{}},this.coreReducer=t}addPluginReducer(t,n,o){this.state.plugins[t]=o,this.pluginReducers[t]=n}dispatchToCore(t){if(!this.coreReducer)return this.getState();if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const n=this.getState();try{this.isDispatching=!0,this.state.core=this.coreReducer(this.state.core,t)}finally{this.isDispatching=!1}return this.listeners.forEach(o=>{const i=this.getState();o(t,i,n)}),this.getState()}dispatchToPlugin(t,n,o=!0){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const i=this.getState(),r=this.pluginReducers[t];if(!r)return i.plugins[t];const a=i.plugins[t];try{this.isDispatching=!0;const s=r(a,n);this.state.plugins[t]=s}finally{this.isDispatching=!1}return o&&this.listeners.forEach(s=>{const l=this.getState();s(n,l,i)}),this.pluginListeners[t]&&this.pluginListeners[t].forEach(s=>{const l=this.getState().plugins[t];s(n,l,a)}),this.getState().plugins[t]}dispatch(t){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const n=this.getState();try{this.isDispatching=!0,this.isCoreAction(t)&&(this.state.core=this.coreReducer(this.state.core,t));for(const o in this.pluginReducers){const i=this.pluginReducers[o],r=n.plugins[o];i&&(this.state.plugins[o]=i(r,t))}}finally{this.isDispatching=!1}return this.listeners.forEach(o=>{const i=this.getState();o(t,i,n)}),this.getState()}getState(){if(this.isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return{core:{...this.state.core},plugins:{...this.state.plugins}}}subscribe(t){if(this.isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state.");return this.listeners.push(t),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.listeners=this.listeners.filter(n=>n!==t)}}subscribeToPlugin(t,n){if(!(t in this.state.plugins))throw new Error(`Plugin state not found for plugin "${t}". Did you forget to call addPluginReducer?`);if(this.isDispatching)throw new Error("You may not call store.subscribeToPlugin() while the reducer is executing.");return this.pluginListeners[t]||(this.pluginListeners[t]=[]),this.pluginListeners[t].push(n),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.pluginListeners[t]=this.pluginListeners[t].filter(o=>o!==n),this.pluginListeners[t].length===0&&delete this.pluginListeners[t]}}onAction(t,n){return this.subscribe((o,i,r)=>{o.type===t&&n(o,i,r)})}getPluginStore(t){if(!(t in this.state.plugins))throw new Error(`Plugin state not found for plugin "${t}". Did you forget to call addPluginReducer?`);return new Pg(this,t)}isCoreAction(t){return Mg.includes(t.type)}destroy(){var t,n;this.listeners.length=0;for(const o in this.pluginListeners)(n=(t=this.pluginListeners[o])==null?void 0:t.splice)==null||n.call(t,0);this.pluginListeners={},this.pluginReducers={},this.state.plugins={},this.state.core={...this.initialCoreState}}}N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality;const Ag=[N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality],zg={[N.Print]:"print",[N.ModifyContents]:"modifyContents",[N.CopyContents]:"copyContents",[N.ModifyAnnotations]:"modifyAnnotations",[N.FillForms]:"fillForms",[N.ExtractForAccessibility]:"extractForAccessibility",[N.AssembleDocument]:"assembleDocument",[N.PrintHighQuality]:"printHighQuality"};function ba(e,t){if(!e)return;if(t in e)return e[t];const n=zg[t];return n&&n in e?e[n]:void 0}function Co(e,t,n){var o;const i=e.documents[t],r=i?.permissions,a=e.globalPermissions,s=((o=i?.document)==null?void 0:o.permissions)??N.AllowAll,l=ba(r?.overrides,n);if(l!==void 0)return l;const c=ba(a?.overrides,n);return c!==void 0?c:!(r?.enforceDocumentPermissions??a?.enforceDocumentPermissions??!0)||(s&n)!==0}function wa(e,t){return Ag.reduce((n,o)=>Co(e,t,o)?n|o:n,0)}function Tg(e,t,n){const o=e.activeDocumentId;if(o!==t)return o;if(n!==void 0)return n&&e.documents[n]?n:null;const i=e.documentOrder.indexOf(t);return i===-1?null:i>0?e.documentOrder[i-1]:i<e.documentOrder.length-1?e.documentOrder[i+1]:null}const Eg=(e,t)=>{switch(t.type){case Uo:{const{documentId:n,name:o,scale:i,rotation:r,passwordProvided:a,autoActivate:s=!0,permissions:l}=t.payload,c={id:n,name:o,status:"loading",loadingProgress:0,error:null,document:null,scale:i??e.defaultScale,rotation:r??e.defaultRotation,passwordProvided:a??!1,pageRefreshVersions:{},permissions:l,loadStartedAt:Date.now()};return{...e,documents:{...e.documents,[n]:c},documentOrder:[...e.documentOrder,n],activeDocumentId:s||!e.activeDocumentId?n:e.activeDocumentId}}case Hl:{const{documentId:n,progress:o}=t.payload,i=e.documents[n];return i&&i.status==="loading"?{...e,documents:{...e.documents,[n]:{...i,loadingProgress:o}}}:e}case Ho:{const{documentId:n,document:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,status:"loaded",document:o,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:void 0,loadedAt:Date.now()}}}:e}case hr:{const{documentId:n,error:o,errorCode:i,errorDetails:r}=t.payload,a=e.documents[n];return a?{...e,documents:{...e.documents,[n]:{...a,status:"error",error:o,errorCode:i,errorDetails:r}}}:e}case mr:{const{documentId:n,passwordProvided:o}=t.payload,i=e.documents[n];return i&&i.status==="error"?{...e,documents:{...e.documents,[n]:{...i,status:"loading",loadingProgress:0,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:o??!1,loadStartedAt:Date.now()}}}:e}case Bo:{const{documentId:n,nextActiveDocumentId:o}=t.payload,{[n]:i,...r}=e.documents;return{...e,documents:r,documentOrder:e.documentOrder.filter(a=>a!==n),activeDocumentId:Tg(e,n,o)}}case fr:{const{documentId:n,toIndex:o}=t.payload,i=(function(r,a,s){const l=r.indexOf(a);if(l===-1||s<0||s>=r.length||l===s)return null;const c=[...r];return c.splice(l,1),c.splice(s,0,a),c})(e.documentOrder,n,o);return i?{...e,documentOrder:i}:e}case pr:return{...e,documentOrder:t.payload};case gr:return{...e,activeDocumentId:t.payload};case Wo:{const{scale:n,documentId:o}=t.payload,i=o??e.activeDocumentId;if(!i)return e;const r=e.documents[i];return r?{...e,documents:{...e.documents,[i]:{...r,scale:n}}}:e}case qo:{const{rotation:n,documentId:o}=t.payload,i=o??e.activeDocumentId;if(!i)return e;const r=e.documents[i];return r?{...e,documents:{...e.documents,[i]:{...r,rotation:n}}}:e}case xn:{const{documentId:n,pageIndexes:o}=t.payload,i=e.documents[n];if(!i)return e;const r={...i.pageRefreshVersions};for(const a of o)r[a]=(r[a]||0)+1;return{...e,documents:{...e.documents,[n]:{...i,pageRefreshVersions:r}}}}case vr:{const{documentId:n,permissions:o,isOwnerUnlocked:i}=t.payload,r=e.documents[n];return r?.document?{...e,documents:{...e.documents,[n]:{...r,document:{...r.document,permissions:o,isOwnerUnlocked:i}}}}:e}default:return e}};class Rg{constructor(t,n){this.plugins=new Map,this.manifests=new Map,this.capabilities=new Map,this.status=new Map,this.configurations=new Map,this.initPromise=null,this.pendingRegistrations=[],this.processingRegistrations=[],this.initialized=!1,this.isInitializing=!1,this.pluginsReadyPromise=null,this.destroyed=!1,this.resolver=new ga,this.engine=t,this.initialCoreState=(o=>({documents:{},documentOrder:[],activeDocumentId:null,defaultScale:o?.defaultScale??1,defaultRotation:o?.defaultRotation??Lt.Degree0,globalPermissions:o?.permissions}))(n),this.store=new Dg(Eg,this.initialCoreState),this.logger=n?.logger??new Nl}getLogger(){return this.logger}registerPlugin(t,n){if(this.initialized&&!this.isInitializing)throw new Ye("Cannot register plugins after initialization");this.validateManifest(t.manifest),this.store.addPluginReducer(t.manifest.id,t.reducer,typeof t.initialState=="function"?t.initialState(this.initialCoreState,{...t.manifest.defaultConfig,...n}):t.initialState),this.pendingRegistrations.push({package:t,config:n})}getStore(){return this.store}getEngine(){return this.engine}pluginsReady(){return this.pluginsReadyPromise||(this.pluginsReadyPromise=(async()=>{this.initialized||await this.initialize();const t=Array.from(this.plugins.values()).map(n=>typeof n.ready=="function"?n.ready():Promise.resolve());await Promise.all(t)})()),this.pluginsReadyPromise}async initialize(){if(this.destroyed)throw new Ye("Registry has been destroyed");return this.initPromise||(this.initPromise=(async()=>{if(this.initialized)throw new Ye("Registry is already initialized");this.isInitializing=!0;try{if(this.destroyed)return;for(;this.pendingRegistrations.length>0;){if(this.destroyed)return;this.processingRegistrations=[...this.pendingRegistrations],this.pendingRegistrations=[];for(const n of this.processingRegistrations){const o=new Set,i=[...n.package.manifest.requires,...n.package.manifest.optional];for(const r of i){const a=this.processingRegistrations.find(s=>s.package.manifest.provides.includes(r));a&&o.add(a.package.manifest.id)}this.resolver.addNode(n.package.manifest.id,[...o])}const t=this.resolver.resolveLoadOrder();for(const n of t){const o=this.processingRegistrations.find(i=>i.package.manifest.id===n);this.instantiatePlugin(o.package.manifest,o.package.create,o.config)}for(const n of t)await this.runPluginInitialization(n);this.processingRegistrations=[],this.resolver=new ga}this.initialized=!0}catch(t){throw t instanceof Error?new kg(`Failed to resolve plugin dependencies: ${t.message}`):t}finally{this.isInitializing=!1}})()),this.initPromise}instantiatePlugin(t,n,o){const i={...t.defaultConfig,...o};this.validateConfig(t.id,i,t.defaultConfig);const r=n(this,i);this.validatePlugin(r);for(const a of t.provides){if(this.capabilities.has(a))throw new Ye(`Capability ${a} is already provided by plugin ${this.capabilities.get(a)}`);this.capabilities.set(a,t.id)}this.plugins.set(t.id,r),this.manifests.set(t.id,t),this.status.set(t.id,"registered"),this.configurations.set(t.id,i)}async runPluginInitialization(t){const n=this.plugins.get(t);if(!n)return;const o=this.manifests.get(t),i=this.configurations.get(t);for(const r of o.requires)if(!this.capabilities.has(r))throw new Ye(`Missing required capability: ${r} for plugin ${t}`);this.logger.debug("PluginRegistry","InitializePlugin",`Initializing plugin ${t}`);try{n.initialize&&await n.initialize(i),this.status.set(t,"active"),this.logger.info("PluginRegistry","PluginInitialized",`Plugin ${t} initialized successfully`)}catch(r){throw this.status.set(t,"error"),this.logger.error("PluginRegistry","InitializationFailed",`Plugin ${t} initialization failed`,{error:r}),r}}getPluginConfig(t){const n=this.configurations.get(t);if(!n)throw new ln(`Configuration for plugin ${t} not found`);return n}validateConfig(t,n,o){const i=Object.keys(o).filter(r=>!n.hasOwnProperty(r));if(i.length>0)throw new Sg(`Missing required configuration keys for plugin ${t}: ${i.join(", ")}`)}async updatePluginConfig(t,n){const o=this.getPlugin(t);if(!o)throw new ln(`Plugin ${t} not found`);const i=this.manifests.get(t),r=this.configurations.get(t);if(!i||!r)throw new ln(`Plugin ${t} not found`);const a={...r,...n};this.validateConfig(t,a,i.defaultConfig),this.configurations.set(t,a),o.initialize&&await o.initialize(a)}registerPluginBatch(t){for(const n of t)this.registerPlugin(n.package,n.config)}async unregisterPlugin(t){const n=this.plugins.get(t);if(!n)throw new ln(`Plugin ${t} is not registered`);const o=this.manifests.get(t);if(!o)throw new ln(`Manifest for plugin ${t} not found`);for(const[i,r]of this.manifests.entries())if(i!==t&&[...r.requires,...r.optional].some(a=>o.provides.includes(a)))throw new Ye(`Cannot unregister plugin ${t}: plugin ${i} depends on it`);try{n.destroy&&await n.destroy();for(const i of o.provides)this.capabilities.delete(i);this.plugins.delete(t),this.manifests.delete(t),this.status.delete(t)}catch(i){throw i instanceof Error?new Error(`Failed to unregister plugin ${t}: ${i.message}`):i}}getPlugin(t){return this.plugins.get(t)||null}getCapabilityProvider(t){const n=this.capabilities.get(t);return n?this.getPlugin(n):null}hasCapability(t){return this.capabilities.has(t)}getAllPlugins(){return Array.from(this.plugins.values())}getPluginStatus(t){const n=this.status.get(t);if(!n)throw new ln(`Plugin ${t} not found`);return n}validatePlugin(t){if(!t.id)throw new Ye("Plugin must have an id")}validateManifest(t){if(!t.id)throw new Ye("Manifest must have an id");if(!t.name)throw new Ye("Manifest must have a name");if(!t.version)throw new Ye("Manifest must have a version");if(!Array.isArray(t.provides))throw new Ye("Manifest must have a provides array");if(!Array.isArray(t.requires))throw new Ye("Manifest must have a requires array");if(!Array.isArray(t.optional))throw new Ye("Manifest must have an optional array")}isDestroyed(){return this.destroyed}async destroy(){var t;if(this.destroyed)throw new Ye("Registry has already been destroyed");this.destroyed=!0;try{await this.initPromise}catch{}for(const n of Array.from(this.plugins.values()).reverse())await((t=n.destroy)==null?void 0:t.call(n));this.store.destroy(),this.plugins.clear(),this.manifests.clear(),this.capabilities.clear(),this.status.clear(),this.pendingRegistrations.length=0,this.processingRegistrations.length=0}}function xe(e,t){return{package:e,config:t}}function _g(e){return"autoMountElements"in e&&typeof e.autoMountElements=="function"}class Ie{constructor(t,n){if(this.id=t,this.registry=n,this.cooldownActions={},this.debouncedTimeouts={},this.unsubscribeFromState=null,this.unsubscribeFromCoreStore=null,this.unsubscribeFromStartLoadingDocument=null,this.unsubscribeFromSetDocumentLoaded=null,this.unsubscribeFromCloseDocument=null,this.unsubscribeFromSetScale=null,this.unsubscribeFromSetRotation=null,t!==this.constructor.id)throw new Error(`Plugin ID mismatch: ${t} !== ${this.constructor.id}`);this.engine=this.registry.getEngine(),this.logger=this.registry.getLogger(),this.coreStore=this.registry.getStore(),this.pluginStore=this.coreStore.getPluginStore(this.id),this.unsubscribeFromState=this.pluginStore.subscribeToState((o,i,r)=>{this.onStoreUpdated(r,i)}),this.unsubscribeFromCoreStore=this.coreStore.subscribe((o,i,r)=>{this.onCoreStoreUpdated(r,i),i.core.activeDocumentId!==r.core.activeDocumentId&&this.onActiveDocumentChanged(r.core.activeDocumentId,i.core.activeDocumentId)}),this.unsubscribeFromStartLoadingDocument=this.coreStore.onAction(Uo,o=>{this.onDocumentLoadingStarted(o.payload.documentId)}),this.unsubscribeFromSetDocumentLoaded=this.coreStore.onAction(Ho,o=>{this.onDocumentLoaded(o.payload.documentId)}),this.unsubscribeFromCloseDocument=this.coreStore.onAction(Bo,o=>{this.onDocumentClosed(o.payload.documentId)}),this.unsubscribeFromSetScale=this.coreStore.onAction(Wo,(o,i)=>{const r=o.payload.documentId??i.core.activeDocumentId;r&&this.onScaleChanged(r,o.payload.scale)}),this.unsubscribeFromSetRotation=this.coreStore.onAction(qo,(o,i)=>{const r=o.payload.documentId??i.core.activeDocumentId;r&&this.onRotationChanged(r,o.payload.rotation)}),this.readyPromise=new Promise(o=>{this.readyResolve=o}),this.readyResolve()}provides(){if(!this._capability){const t=this.buildCapability();this._capability=Object.freeze(t)}return this._capability}get state(){return this.pluginStore.getState()}get coreState(){return this.coreStore.getState()}getState(){return this.pluginStore.getState()}getCoreState(){return this.coreStore.getState()}dispatchCoreAction(t){return this.coreStore.dispatchToCore(t)}dispatchToAllPlugins(t){return this.coreStore.dispatch(t)}dispatch(t){return this.pluginStore.dispatch(t)}cooldownDispatch(t,n=100){const o=Date.now();return o-(this.cooldownActions[t.type]||0)>=n&&(this.cooldownActions[t.type]=o,this.dispatch(t),!0)}debouncedDispatch(t,n=100){const o=t.type;this.debouncedTimeouts[o]&&clearTimeout(this.debouncedTimeouts[o]),this.debouncedTimeouts[o]=setTimeout(()=>{this.dispatch(t),delete this.debouncedTimeouts[o]},n)}cancelDebouncedDispatch(t){this.debouncedTimeouts[t]&&(clearTimeout(this.debouncedTimeouts[t]),delete this.debouncedTimeouts[t])}subscribe(t){return this.pluginStore.subscribeToState(t)}subscribeToCoreStore(t){return this.coreStore.subscribe(t)}onStoreUpdated(t,n){}onCoreStoreUpdated(t,n){}onDocumentLoadingStarted(t){}onDocumentLoaded(t){}onDocumentClosed(t){}onActiveDocumentChanged(t,n){}onScaleChanged(t,n){}onRotationChanged(t,n){}destroy(){Object.values(this.debouncedTimeouts).forEach(t=>{clearTimeout(t)}),this.debouncedTimeouts={},this.unsubscribeFromState&&(this.unsubscribeFromState(),this.unsubscribeFromState=null),this.unsubscribeFromCoreStore&&(this.unsubscribeFromCoreStore(),this.unsubscribeFromCoreStore=null),this.unsubscribeFromStartLoadingDocument&&(this.unsubscribeFromStartLoadingDocument(),this.unsubscribeFromStartLoadingDocument=null),this.unsubscribeFromSetDocumentLoaded&&(this.unsubscribeFromSetDocumentLoaded(),this.unsubscribeFromSetDocumentLoaded=null),this.unsubscribeFromCloseDocument&&(this.unsubscribeFromCloseDocument(),this.unsubscribeFromCloseDocument=null),this.unsubscribeFromSetScale&&(this.unsubscribeFromSetScale(),this.unsubscribeFromSetScale=null),this.unsubscribeFromSetRotation&&(this.unsubscribeFromSetRotation(),this.unsubscribeFromSetRotation=null)}ready(){return this.readyPromise}markReady(){this.readyResolve()}resetReady(){this.readyPromise=new Promise(t=>{this.readyResolve=t})}getActiveDocumentId(){const t=this.coreState.core.activeDocumentId;if(!t)throw new Error("No active document");return t}getActiveDocumentIdOrNull(){return this.coreState.core.activeDocumentId}getCoreDocument(t){const n=t??this.getActiveDocumentIdOrNull();return n?this.coreState.core.documents[n]??null:null}getCoreDocumentOrThrow(t){const n=this.getCoreDocument(t);if(!n)throw new Error(`Document not found: ${t??"active"}`);return n}getDocumentPermissions(t){const n=t??this.coreState.core.activeDocumentId;return n?wa(this.coreState.core,n):N.AllowAll}checkPermission(t,...n){const o=t??this.coreState.core.activeDocumentId;return!o||n.every(i=>Co(this.coreState.core,o,i))}requirePermission(t,...n){const o=t??this.coreState.core.activeDocumentId;if(!o)return;const i=[];for(const r of n)Co(this.coreState.core,o,r)||i.push(r);if(i.length>0){const r=wa(this.coreState.core,o);throw new fg(i,r)}}}class Io{constructor(t,n){this.handler=t,this.options=n,this.lastRun=0,this.handle=o=>{this.options.mode==="debounce"?this.debounce(o):this.throttle(o)}}debounce(t){this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(t),this.timeoutId=void 0},this.options.wait)}throttle(t){if(this.options.mode==="debounce")return;const n=Date.now(),o=this.options.throttleMode||"leading-trailing";n-this.lastRun>=this.options.wait&&(o==="leading-trailing"&&this.handler(t),this.lastRun=n),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(t),this.lastRun=Date.now(),this.timeoutId=void 0},this.options.wait-(n-this.lastRun))}destroy(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}class Ni{constructor(t,n){this.handler=t,this.options=n,this.controls=new Map,this.handle=o=>{const i=String(this.options.keyExtractor(o));let r=this.controls.get(i);r||(r=new Io(this.handler,this.baseOptions),this.controls.set(i,r)),r.handle(o)},this.baseOptions={mode:n.mode,wait:n.wait,...n.mode==="throttle"&&"throttleMode"in n?{throttleMode:n.throttleMode}:{}}}destroy(){for(const t of this.controls.values())t.destroy();this.controls.clear()}}function Oi(e){return"keyExtractor"in e}function me(e,t,n){return e<t?t:e>n?n:e}function en(e,t,n){if(e===t)return!0;if(e==null||t==null)return e===t;const o=typeof e;if(o!==typeof t)return!1;if(o==="object"){n||(n=new Set);const i=(function(s,l){return`${xa(s)}__${xa(l)}`})(e,t);if(n.has(i))return!0;n.add(i);const r=Array.isArray(e),a=Array.isArray(t);return r&&a?(function(s,l,c){if(s.length!==l.length)return!1;const u=new Array(l.length).fill(!1);e:for(let h=0;h<s.length;h++){const m=s[h];for(let g=0;g<l.length;g++)if(!u[g]&&en(m,l[g],c)){u[g]=!0;continue e}return!1}return!0})(e,t,n):!r&&!a&&(function(s,l,c){const u=Object.keys(s).sort(),h=Object.keys(l).sort();if(u.length!==h.length)return!1;for(let m=0;m<u.length;m++)if(u[m]!==h[m])return!1;for(const m of u)if(!en(s[m],l[m],c))return!1;return!0})(e,t,n)}return!1}let Ng=0;const di=new WeakMap;function xa(e){return di.has(e)||di.set(e,++Ng),di.get(e)}function We(){const e=new Set;return{emit:(t=void 0)=>e.forEach(n=>n(t)),on:t=>(e.add(t),()=>e.delete(t)),off:t=>e.delete(t),clear:()=>e.clear()}}function ee(e,t=en){const n=new Set,o=new Map;let i=e;const r=(a,s)=>{let l=a,c=()=>{};if(s){if(Oi(s)){const u=new Ni(a,s);l=u.handle,c=()=>u.destroy()}else{const u=new Io(a,s);l=u.handle,c=()=>u.destroy()}o.set(a,{wrapped:l,destroy:c})}return i!==void 0&&l(i),n.add(l),()=>{n.delete(l),c(),o.delete(a)}};return{get value(){return i},emit(a=void 0){i!==void 0&&t(i,a)||(i=a,(s=>{n.forEach(l=>l(s))})(a))},on:r,off(a){const s=o.get(a);s?(n.delete(s.wrapped),s.destroy(),o.delete(a)):n.delete(a)},clear(){n.clear(),o.forEach(a=>a.destroy()),o.clear()},select:(a,s=en)=>(l,c)=>{let u;if(i!==void 0){const h=a(i);u=h,l(h)}return r(h=>{const m=a(h);u!==void 0&&s(u,m)||(u=m,l(m))},c)}}}function Fe(e,t){const n=t?.cache??!0,o=t?.equality??en,i=new Map,r=new Map,a=new Map,s=new Set,l=new Map,c=u=>String(u);return{emit(u,h){const m=c(u);if(n){const v=i.get(m);if(v!==void 0&&o(v,h))return;i.set(m,h)}const g=r.get(m);g&&g.forEach(v=>v(h));const p=e(u,h);s.forEach(v=>v(p))},forScope(u){const h=c(u);return(m,g)=>{const p=(b=>{let w=r.get(b);return w||(w=new Set,r.set(b,w)),w})(h),v=(b=>{let w=a.get(b);return w||(w=new Map,a.set(b,w)),w})(h);let f=m,y=()=>{};if(g){if(Oi(g)){const b=new Ni(m,g);f=b.handle,y=()=>b.destroy()}else{const b=new Io(m,g);f=b.handle,y=()=>b.destroy()}v.set(m,{wrapped:f,destroy:y})}if(n){const b=i.get(h);b!==void 0&&f(b)}return p.add(f),()=>{p.delete(f),y(),v.delete(m),p.size===0&&r.delete(h),v.size===0&&a.delete(h)}}},onGlobal:(u,h)=>{let m=u,g=()=>{};if(h){if(Oi(h)){const p=new Ni(u,h);m=p.handle,g=()=>p.destroy()}else{const p=new Io(u,h);m=p.handle,g=()=>p.destroy()}l.set(u,{wrapped:m,destroy:g})}return s.add(m),()=>{s.delete(m),g(),l.delete(u)}},getValue:u=>n?i.get(c(u)):void 0,getScopes:()=>Array.from(n?i.keys():r.keys()),clearScope(u){const h=c(u);n&&i.delete(h);const m=r.get(h);m&&(m.clear(),r.delete(h));const g=a.get(h);g&&(g.forEach(p=>p.destroy()),g.clear(),a.delete(h))},clear(){n&&i.clear(),r.forEach(u=>u.clear()),r.clear(),a.forEach(u=>{u.forEach(h=>h.destroy()),u.clear()}),a.clear(),s.clear(),l.forEach(u=>u.destroy()),l.clear()}}}class Og{constructor(t){this.autoMountElements=[],this.package=t}addUtility(t){return this.autoMountElements.push({component:t,type:"utility"}),this}addWrapper(t){return this.autoMountElements.push({component:t,type:"wrapper"}),this}build(){return{...this.package,autoMountElements:()=>this.autoMountElements}}}function an(e){return new Og(e)}const yr=on({registry:null,coreState:null,isInitializing:!0,pluginsReady:!1,activeDocumentId:null,activeDocument:null,documents:{},documentStates:[]});function Lg({plugins:e,children:t}){const{utilities:n,wrappers:o}=K(()=>{const i=[],r=[];for(const a of e){const s=a.package;if(_g(s)){const l=s.autoMountElements()||[];for(const c of l)c.type==="utility"?i.push(c.component):c.type==="wrapper"&&r.push(c.component)}}return{utilities:i,wrappers:r}},[e]);return k(te,{children:[o.reduce((i,r)=>k(r,{children:i}),t),n.map((i,r)=>k(i,{},`utility-${r}`))]})}function $g({engine:e,config:t,logger:n,onInitialized:o,plugins:i,children:r,autoMountDomElements:a=!0}){const[s,l]=R(null),[c,u]=R(null),[h,m]=R(!0),[g,p]=R(!1),v=V(o);L(()=>{v.current=o},[o]),L(()=>{const b={...t,logger:t?.logger??n},w=new Rg(e,b);w.registerPluginBatch(i);let x;return(async()=>{var C;if(await w.initialize(),w.isDestroyed())return;const S=w.getStore();u(S.getState().core);const M=S.subscribe((A,I,P)=>{S.isCoreAction(A)&&I.core!==P.core&&u(I.core)});if(await((C=v.current)==null?void 0:C.call(v,w)),!w.isDestroyed())return w.pluginsReady().then(()=>{w.isDestroyed()||p(!0)}),l(w),m(!1),M;M()})().then(C=>{x=C}).catch(console.error),()=>{x?.(),w.destroy(),l(null),u(null),m(!0),p(!1)}},[e,i]);const f=K(()=>{const b=c?.activeDocumentId??null,w=c?.documents??{},x=c?.documentOrder??[],C=b&&w[b]?w[b]:null,S=x.map(M=>w[M]).filter(M=>M!=null);return{registry:s,coreState:c,isInitializing:h,pluginsReady:g,activeDocumentId:b,activeDocument:C,documents:w,documentStates:S}},[s,c,h,g]),y=typeof r=="function"?r(f):r;return k(yr.Provider,{value:f,children:g&&a?k(Lg,{plugins:i,children:y}):y})}function Qe(e){const{registry:t}=(function(){const o=rn(yr);if(o===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:i,isInitializing:r}=o;if(r)return o;if(i===null)throw new Error("PDF registry failed to initialize properly");return o})();if(t===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const n=t.getPlugin(e);if(!n)throw new Error(`Plugin ${e} not found`);return{plugin:n,isLoading:!1,ready:n.ready()}}function Te(e){const{plugin:t,isLoading:n,ready:o}=Qe(e);if(!t)return{provides:null,isLoading:n,ready:o};if(!t.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:t.provides(),isLoading:n,ready:o}}function ko(){const{coreState:e}=rn(yr);return e}function je(e){const t=ko();return K(()=>t&&e?t.documents[e]??null:null,[t,e])}N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality;const Fg=[N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality],jg={[N.Print]:"print",[N.ModifyContents]:"modifyContents",[N.CopyContents]:"copyContents",[N.ModifyAnnotations]:"modifyAnnotations",[N.FillForms]:"fillForms",[N.ExtractForAccessibility]:"extractForAccessibility",[N.AssembleDocument]:"assembleDocument",[N.PrintHighQuality]:"printHighQuality"};function Ca(e,t){if(!e)return;if(t in e)return e[t];const n=jg[t];return n&&n in e?e[n]:void 0}function ui(e,t,n){var o;const i=e.documents[t],r=i?.permissions,a=e.globalPermissions,s=((o=i?.document)==null?void 0:o.permissions)??N.AllowAll,l=Ca(r?.overrides,n);if(l!==void 0)return l;const c=Ca(a?.overrides,n);return c!==void 0?c:!(r?.enforceDocumentPermissions??a?.enforceDocumentPermissions??!0)||(s&n)!==0}function Bl(e){const t=ko();return K(()=>{var n,o;if(!t)return{permissions:N.AllowAll,pdfPermissions:N.AllowAll,hasPermission:()=>!0,hasAllPermissions:()=>!0,canPrint:!0,canModifyContents:!0,canCopyContents:!0,canModifyAnnotations:!0,canFillForms:!0,canExtractForAccessibility:!0,canAssembleDocument:!0,canPrintHighQuality:!0};const i=(function(a,s){return Fg.reduce((l,c)=>ui(a,s,c)?l|c:l,0)})(t,e),r=a=>ui(t,e,a);return{permissions:i,pdfPermissions:((o=(n=t.documents[e])==null?void 0:n.document)==null?void 0:o.permissions)??N.AllowAll,hasPermission:r,hasAllPermissions:(...a)=>a.every(s=>ui(t,e,s)),canPrint:r(N.Print),canModifyContents:r(N.ModifyContents),canCopyContents:r(N.CopyContents),canModifyAnnotations:r(N.ModifyAnnotations),canFillForms:r(N.FillForms),canExtractForAccessibility:r(N.ExtractForAccessibility),canAssembleDocument:r(N.AssembleDocument),canPrintHighQuality:r(N.PrintHighQuality)}},[t,e])}const Ug="https://cdn.jsdelivr.net/npm/@embedpdf/pdfium@2.3.0/dist/pdfium.wasm";on(void 0);const Wl="viewport",Hg={id:Wl,name:"Viewport Plugin",version:"1.0.0",provides:["viewport"],requires:[],optional:[],defaultConfig:{viewportGap:10,scrollEndDelay:300}},ql="INIT_VIEWPORT_STATE",Gl="CLEANUP_VIEWPORT_STATE",Vl="REGISTER_VIEWPORT",Kl="UNREGISTER_VIEWPORT",Zl="SET_VIEWPORT_METRICS",Yl="SET_VIEWPORT_SCROLL_METRICS",Xl="SET_VIEWPORT_GAP",Ql="SET_SCROLL_ACTIVITY",Jl="SET_SMOOTH_SCROLL_ACTIVITY",ec="ADD_VIEWPORT_GATE",tc="REMOVE_VIEWPORT_GATE";function Ia(e,t){return{type:Jl,payload:{documentId:e,isSmoothScrolling:t}}}const Bg={viewportMetrics:{width:0,height:0,scrollTop:0,scrollLeft:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0,clientLeft:0,clientTop:0,relativePosition:{x:0,y:0}},isScrolling:!1,isSmoothScrolling:!1,gates:new Set},ka={viewportGap:0,documents:{},activeViewports:new Set,activeDocumentId:null},nc=class extends Ie{constructor(e,t,n){var o;super(e,t),this.id=e,this.viewportResize$=ee(),this.viewportMetrics$=ee(),this.scrollMetrics$=ee(),this.scrollActivity$=ee(),this.gateState$=ee(),this.scrollRequests$=new Map,n.viewportGap&&this.dispatch((o=n.viewportGap,{type:Xl,payload:o})),this.scrollEndDelay=n.scrollEndDelay||100}onDocumentLoadingStarted(e){this.dispatch((function(t){return{type:ql,payload:{documentId:t}}})(e)),this.scrollRequests$.set(e,We()),this.logger.debug("ViewportPlugin","DocumentOpened",`Initialized viewport state for document: ${e}`)}onDocumentClosed(e){var t;this.dispatch((function(n){return{type:Gl,payload:{documentId:n}}})(e)),(t=this.scrollRequests$.get(e))==null||t.clear(),this.scrollRequests$.delete(e),this.logger.debug("ViewportPlugin","DocumentClosed",`Cleaned up viewport state for document: ${e}`)}buildCapability(){return{getViewportGap:()=>this.state.viewportGap,getMetrics:()=>this.getMetrics(),scrollTo:e=>this.scrollTo(e),isScrolling:()=>this.isScrolling(),isSmoothScrolling:()=>this.isSmoothScrolling(),isGated:e=>this.isGated(e),hasGate:(e,t)=>this.hasGate(e,t),getGates:e=>this.getGates(e),forDocument:e=>this.createViewportScope(e),gate:(e,t)=>this.gate(e,t),releaseGate:(e,t)=>this.releaseGate(e,t),isViewportMounted:e=>this.state.activeViewports.has(e),onViewportChange:this.viewportMetrics$.on,onViewportResize:this.viewportResize$.on,onScrollChange:this.scrollMetrics$.on,onScrollActivity:this.scrollActivity$.on,onGateChange:this.gateState$.on}}createViewportScope(e){return{getMetrics:()=>this.getMetrics(e),scrollTo:t=>this.scrollTo(t,e),isScrolling:()=>this.isScrolling(e),isSmoothScrolling:()=>this.isSmoothScrolling(e),isGated:()=>this.isGated(e),hasGate:t=>this.hasGate(t,e),getGates:()=>this.getGates(e),gate:t=>this.gate(t,e),releaseGate:t=>this.releaseGate(t,e),onViewportChange:t=>this.viewportMetrics$.on(n=>{n.documentId===e&&t(n.metrics)}),onScrollChange:t=>this.scrollMetrics$.on(n=>{n.documentId===e&&t(n.scrollMetrics)}),onScrollActivity:t=>this.scrollActivity$.on(n=>{n.documentId===e&&t(n.activity)}),onGateChange:t=>this.gateState$.on(n=>{n?.documentId===e&&t(n)})}}registerViewport(e){if(!this.state.documents[e])throw new Error(`Cannot register viewport for ${e}: document state not found. Document must be opened before registering viewport.`);this.state.activeViewports.has(e)||(this.dispatch((function(t){return{type:Vl,payload:{documentId:t}}})(e)),this.logger.debug("ViewportPlugin","RegisterViewport",`Registered viewport (DOM mounted) for document: ${e}`))}unregisterViewport(e){this.registry.isDestroyed()||this.state.activeViewports.has(e)&&(this.dispatch((function(t){return{type:Kl,payload:{documentId:t}}})(e)),this.logger.debug("ViewportPlugin","UnregisterViewport",`Unregistered viewport (DOM unmounted) for document: ${e}. State preserved.`))}setViewportResizeMetrics(e,t){if(this.registry.isDestroyed())return;this.dispatch((function(o,i){return{type:Zl,payload:{documentId:o,metrics:i}}})(e,t));const n=this.state.documents[e];n&&this.viewportResize$.emit({documentId:e,metrics:n.viewportMetrics})}setViewportScrollMetrics(e,t){if(this.registry.isDestroyed())return;const n=this.state.documents[e];n&&(t.scrollTop===n.viewportMetrics.scrollTop&&t.scrollLeft===n.viewportMetrics.scrollLeft||(this.dispatch((function(o,i){return{type:Yl,payload:{documentId:o,scrollMetrics:i}}})(e,t)),this.bumpScrollActivity(e),this.scrollMetrics$.emit({documentId:e,scrollMetrics:t})))}onScrollRequest(e,t){const n=this.scrollRequests$.get(e);if(!n)throw new Error(`Cannot subscribe to scroll requests for ${e}: document state not initialized`);return n.on(t)}gate(e,t){const n=this.state.documents[t];n?n.gates.has(e)||(this.dispatch((function(o,i){return{type:ec,payload:{documentId:o,key:i}}})(t,e)),this.logger.debug("ViewportPlugin","GateAdded",`Added gate '${e}' for document: ${t}. Total gates: ${n.gates.size+1}`)):this.logger.warn("ViewportPlugin","GateViewport",`Cannot gate viewport for ${t}: document not found`)}releaseGate(e,t){const n=this.state.documents[t];n?n.gates.has(e)&&(this.dispatch((function(o,i){return{type:tc,payload:{documentId:o,key:i}}})(t,e)),this.logger.debug("ViewportPlugin","GateReleased",`Released gate '${e}' for document: ${t}. Remaining gates: ${n.gates.size-1}`)):this.logger.warn("ViewportPlugin","ReleaseGate",`Cannot release gate for ${t}: document not found`)}getViewportState(e){const t=e??this.getActiveDocumentId(),n=this.state.documents[t];if(!n)throw new Error(`Viewport state not found for document: ${t}`);return n}getMetrics(e){return this.getViewportState(e).viewportMetrics}isScrolling(e){return this.getViewportState(e).isScrolling}isSmoothScrolling(e){return this.getViewportState(e).isSmoothScrolling}isGated(e){return this.getViewportState(e).gates.size>0}hasGate(e,t){return this.getViewportState(t).gates.has(e)}getGates(e){const t=this.getViewportState(e);return Array.from(t.gates)}scrollTo(e,t){const n=t??this.getActiveDocumentId(),o=this.getViewportState(n),{x:i,y:r,alignX:a,alignY:s,behavior:l="auto"}=e;l==="smooth"&&this.dispatch(Ia(n,!0));const c=o.viewportMetrics;let u=i,h=r;a!==void 0&&(u=i-c.clientWidth*(a/100)),s!==void 0&&(h=r-c.clientHeight*(s/100));const m=this.scrollRequests$.get(n);m&&m.emit({x:u,y:h,behavior:l})}bumpScrollActivity(e){this.debouncedDispatch((function(t,n){return{type:Ql,payload:{documentId:t,isScrolling:n}}})(e,!1),this.scrollEndDelay),this.debouncedDispatch(Ia(e,!1),this.scrollEndDelay)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];if(o!==i&&(this.viewportMetrics$.emit({documentId:n,metrics:i.viewportMetrics}),!o||o.isScrolling===i.isScrolling&&o.isSmoothScrolling===i.isSmoothScrolling||this.scrollActivity$.emit({documentId:n,activity:{isScrolling:i.isScrolling,isSmoothScrolling:i.isSmoothScrolling}}),o&&o.gates!==i.gates)){const r=Array.from(o.gates),a=Array.from(i.gates),s=a.find(c=>!r.includes(c)),l=r.find(c=>!a.includes(c));this.gateState$.emit({documentId:n,isGated:i.gates.size>0,gates:a,addedGate:s,removedGate:l}),this.logger.debug("ViewportPlugin","GateStateChanged",`Gate state changed for document ${n}. Gates: [${a.join(", ")}], Gated: ${i.gates.size>0}`)}}}async initialize(e){this.logger.info("ViewportPlugin","Initialize","Viewport plugin initialized")}async destroy(){this.viewportMetrics$.clear(),this.viewportResize$.clear(),this.scrollMetrics$.clear(),this.scrollActivity$.clear(),this.gateState$.clear(),this.scrollRequests$.forEach(e=>e.clear()),this.scrollRequests$.clear(),super.destroy()}};nc.id="viewport";let qn=nc;const Wg={manifest:Hg,create:(e,t)=>new qn(Wl,e,t),reducer:(e=ka,t)=>{switch(t.type){case ql:{const{documentId:n}=t.payload;return{...e,documents:{...e.documents,[n]:{...Bg,gates:new Set}}}}case Gl:{const{documentId:n}=t.payload,{[n]:o,...i}=e.documents,r=new Set(e.activeViewports);return r.delete(n),{...e,documents:i,activeViewports:r,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case Vl:{const{documentId:n}=t.payload,o=new Set(e.activeViewports);return o.add(n),{...e,activeViewports:o,activeDocumentId:e.activeDocumentId??n}}case Kl:{const{documentId:n}=t.payload,o=new Set(e.activeViewports);return o.delete(n),{...e,activeViewports:o}}case"SET_ACTIVE_VIEWPORT_DOCUMENT":return{...e,activeDocumentId:t.payload};case Xl:return{...e,viewportGap:t.payload};case Zl:{const{documentId:n,metrics:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,viewportMetrics:{width:o.width,height:o.height,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft,clientWidth:o.clientWidth,clientHeight:o.clientHeight,scrollWidth:o.scrollWidth,scrollHeight:o.scrollHeight,clientLeft:o.clientLeft,clientTop:o.clientTop,relativePosition:{x:o.scrollWidth<=o.clientWidth?0:o.scrollLeft/(o.scrollWidth-o.clientWidth),y:o.scrollHeight<=o.clientHeight?0:o.scrollTop/(o.scrollHeight-o.clientHeight)}}}}}:e}case Yl:{const{documentId:n,scrollMetrics:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,viewportMetrics:{...i.viewportMetrics,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft},isScrolling:!0}}}:e}case Ql:{const{documentId:n,isScrolling:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isScrolling:o}}}:e}case Jl:{const{documentId:n,isSmoothScrolling:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isSmoothScrolling:o}}}:e}case ec:{const{documentId:n,key:o}=t.payload,i=e.documents[n];if(!i)return e;const r=new Set(i.gates);return r.add(o),{...e,documents:{...e.documents,[n]:{...i,gates:r}}}}case tc:{const{documentId:n,key:o}=t.payload,i=e.documents[n];if(!i)return e;const r=new Set(i.gates);return r.delete(o),{...e,documents:{...e.documents,[n]:{...i,gates:r}}}}default:return e}},initialState:ka},oc=on(null),Li=()=>Te(qn.id);function qg(e){const{plugin:t}=Qe(qn.id),n=V(null);return Fo(()=>{if(!t)return;const o=n.current;if(!o)return;try{t.registerViewport(e)}catch(s){return void console.error(`Failed to register viewport for document ${e}:`,s)}const i=()=>{t.setViewportScrollMetrics(e,{scrollTop:o.scrollTop,scrollLeft:o.scrollLeft})};o.addEventListener("scroll",i);const r=new ResizeObserver(()=>{t.setViewportResizeMetrics(e,{width:o.offsetWidth,height:o.offsetHeight,clientWidth:o.clientWidth,clientHeight:o.clientHeight,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft,scrollWidth:o.scrollWidth,scrollHeight:o.scrollHeight,clientLeft:o.clientLeft,clientTop:o.clientTop})});r.observe(o);const a=t.onScrollRequest(e,({x:s,y:l,behavior:c="auto"})=>{requestAnimationFrame(()=>{o.scrollTo({left:s,top:l,behavior:c})})});return()=>{t.unregisterViewport(e),r.disconnect(),o.removeEventListener("scroll",i),a()}},[t,e]),n}function Gg({children:e,documentId:t,...n}){const[o,i]=R(0),r=qg(t),{provides:a}=Li(),s=(u=>{const{provides:h}=Li(),[m,g]=R(h?.isGated(u)??!1);return L(()=>{if(h)return g(h.isGated(u)),h.onGateChange(p=>{p.documentId===u&&g(p.isGated)})},[h,u]),m})(t);L(()=>{a&&i(a.getViewportGap())},[a]);const{style:l,...c}=n;return k(oc.Provider,{value:r,children:k("div",{...c,ref:r,style:{width:"100%",height:"100%",overflow:"auto",...typeof l=="object"?l:{},padding:`${o}px`},children:!s&&e})})}var Xe=(e=>(e.Vertical="vertical",e.Horizontal="horizontal",e))(Xe||{});class ic{constructor(t){this.pageGap=t.pageGap??20,this.viewportGap=t.viewportGap??20,this.bufferSize=t.bufferSize??2}getVisibleRange(t,n,o){const i=this.getScrollOffset(t),r=i,a=i+this.getClientSize(t);let s=0;for(;s<n.length&&(n[s].offset+n[s].height)*o<=r;)s++;let l=s;for(;l<n.length&&n[l].offset*o<=a;)l++;return{start:Math.max(0,s-this.bufferSize),end:Math.min(n.length-1,l+this.bufferSize-1)}}handleScroll(t,n,o){const i=this.getVisibleRange(t,n,o),r=n.slice(i.start,i.end+1),a=this.calculatePageVisibility(r,t,o),s=a.map(p=>p.pageNumber),l=n.slice(i.start,i.end+1).flatMap(p=>p.index),c=this.determineCurrentPage(a),u=n[i.start],h=n[i.end],m=u?u.offset*o:0,g=h?(n[n.length-1].offset+n[n.length-1].height)*o-(h.offset+h.height)*o:0;return{currentPage:c,visiblePages:s,pageVisibilityMetrics:a,renderedPageIndexes:l,scrollOffset:{x:t.scrollLeft,y:t.scrollTop},startSpacing:m,endSpacing:g}}calculatePageVisibility(t,n,o){const i=[];return t.forEach(r=>{r.pageLayouts.forEach(a=>{const s=r.x*o,l=r.y*o,c=s+a.x*o,u=l+a.y*o,h=a.rotatedWidth*o,m=a.rotatedHeight*o,g=n.scrollLeft,p=n.scrollTop,v=g+n.clientWidth,f=p+n.clientHeight,y=Math.max(c,g),b=Math.max(u,p),w=Math.min(c+h,v),x=Math.min(u+m,f);if(y<w&&b<x){const C=w-y,S=x-b,M=h*m,A=C*S;i.push({pageNumber:a.pageNumber,viewportX:y-g,viewportY:b-p,visiblePercentage:A/M*100,original:{pageX:(y-c)/o,pageY:(b-u)/o,visibleWidth:C/o,visibleHeight:S/o,scale:1},scaled:{pageX:y-c,pageY:b-u,visibleWidth:C,visibleHeight:S,scale:o}})}})}),i}determineCurrentPage(t){if(t.length===0)return 1;const n=Math.max(...t.map(i=>i.visiblePercentage)),o=t.filter(i=>i.visiblePercentage===n);return o.length===1?o[0].pageNumber:o.sort((i,r)=>i.pageNumber-r.pageNumber)[0].pageNumber}getRectLocationForPage(t,n,o){const i=n.find(s=>s.pageNumbers.includes(t));if(!i)return null;const r=i.pageLayouts.find(s=>s.pageNumber===t);if(!r)return null;let a=0;if(o){const s=o.width;i.width<s&&(a=(s-i.width)/2)}return{origin:{x:i.x+r.x+a,y:i.y+r.y},size:{width:r.width,height:r.height}}}getScrollPositionForPage(t,n,o,i,r){const a=this.getTotalContentSize(n),s=this.getRectLocationForPage(t,n,a);if(!s)return null;const l=go(s.origin,o);if(r){const c=(function(u,h,m,g){return go(Rl(u,h,m),g)})({width:s.size.width,height:s.size.height},{x:r.x,y:r.y},i,o);return{x:l.x+c.x+this.viewportGap,y:l.y+c.y+this.viewportGap}}return{x:l.x+this.viewportGap,y:l.y+this.viewportGap}}getRectPositionForPage(t,n,o,i,r){const a=this.getTotalContentSize(n),s=this.getRectLocationForPage(t,n,a);if(!s)return null;const l=go(s.origin,o),c=tg({width:s.size.width,height:s.size.height},r,i,o);return{origin:{x:l.x+c.origin.x,y:l.y+c.origin.y},size:c.size}}}class Vg extends ic{constructor(t){super(t)}createVirtualItems(t){let n=0;return t.map((o,i)=>{let r=0;const a=o.map(u=>{const h={pageNumber:u.index+1,pageIndex:u.index,x:r,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return r+=u.rotatedSize.width+this.pageGap,h}),s=o.reduce((u,h,m)=>u+h.rotatedSize.width+(m<o.length-1?this.pageGap:0),0),l=Math.max(...o.map(u=>u.rotatedSize.height)),c={id:`item-${i}`,x:0,y:n,offset:n,width:s,height:l,pageLayouts:a,pageNumbers:o.map(u=>u.index+1),index:i};return n+=l+this.pageGap,c})}getTotalContentSize(t){return t.length===0?{width:0,height:0}:{width:Math.max(...t.map(n=>n.width)),height:t[t.length-1].y+t[t.length-1].height}}getScrollOffset(t){return t.scrollTop}getClientSize(t){return t.clientHeight}}class Kg extends ic{constructor(t){super(t)}createVirtualItems(t){let n=0;return t.map((o,i)=>{let r=0;const a=o.map(u=>{const h={pageNumber:u.index+1,pageIndex:u.index,x:r,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return r+=u.rotatedSize.width+this.pageGap,h}),s=o.reduce((u,h,m)=>u+h.rotatedSize.width+(m<o.length-1?this.pageGap:0),0),l=Math.max(...o.map(u=>u.rotatedSize.height)),c={id:`item-${i}`,x:n,y:0,offset:n,width:s,height:l,pageLayouts:a,pageNumbers:o.map(u=>u.index+1),index:i};return n+=s+this.pageGap,c})}getTotalContentSize(t){return t.length===0?{width:0,height:0}:{width:t[t.length-1].x+t[t.length-1].width,height:Math.max(...t.map(n=>n.height))}}getScrollOffset(t){return t.scrollLeft}getClientSize(t){return t.clientWidth}}const rc="INIT_SCROLL_STATE",ac="CLEANUP_SCROLL_STATE",sc="UPDATE_DOCUMENT_SCROLL_STATE",lc="SET_SCROLL_STRATEGY";function zn(e,t){return{type:sc,payload:{documentId:e,state:t}}}const Zg={isChanging:!1,targetPage:1,fromPage:1,startTime:0},cc=class extends Ie{constructor(e,t,n){var o,i;super(e,t),this.id=e,this.config=n,this.strategies=new Map,this.layoutReady=new Set,this.initialLayoutFired=new Set,this.scrollerLayoutEmitters=new Map,this.pageChange$=ee(),this.scroll$=ee(),this.layoutChange$=ee(),this.pageChangeState$=ee(),this.layoutReady$=ee(),this.state$=ee(),this.viewport=this.registry.getPlugin("viewport").provides(),this.spread=((o=this.registry.getPlugin("spread"))==null?void 0:o.provides())??null,this.viewport.onScrollActivity(r=>{const a=this.getDocumentState(r.documentId);a?.pageChangeState.isChanging&&!r.activity.isSmoothScrolling&&this.completePageChange(r.documentId)}),(i=this.spread)==null||i.onSpreadChange(r=>{this.refreshDocumentLayout(r.documentId)}),this.viewport.onViewportChange(r=>{const a=this.getDocumentState(r.documentId);if(!a)return;const s=this.computeMetrics(r.documentId,r.metrics);this.layoutReady.has(r.documentId)?this.commitMetrics(r.documentId,s):this.commitMetrics(r.documentId,{...s,scrollOffset:a.scrollOffset})})}onDocumentLoadingStarted(e){const t=this.getCoreDocument(e);if(!t)return;const n=this.createDocumentState(t);this.dispatch((function(i,r){return{type:rc,payload:{documentId:i,state:r}}})(e,n));const o=this.createStrategy(n.strategy);this.strategies.set(e,o),this.scrollerLayoutEmitters.set(e,ee())}onDocumentLoaded(e){var t;const n=this.getCoreDocument(e);n&&(this.dispatch(zn(e,{totalPages:((t=n.document)==null?void 0:t.pageCount)??0})),this.refreshDocumentLayout(e),this.logger.debug("ScrollPlugin","DocumentOpened",`Initialized scroll state for document: ${e}`))}onDocumentClosed(e){this.strategies.delete(e),this.layoutReady.delete(e),this.initialLayoutFired.delete(e);const t=this.scrollerLayoutEmitters.get(e);t&&(t.clear(),this.scrollerLayoutEmitters.delete(e)),this.dispatch((function(n){return{type:ac,payload:n}})(e)),this.logger.debug("ScrollPlugin","DocumentClosed",`Cleaned up scroll state for document: ${e}`)}onScaleChanged(e){const t=this.coreState.core.documents[e];if(!t||t.status!=="loaded")return;const n=this.viewport.forDocument(e),o=this.computeMetrics(e,n.getMetrics());this.commitMetrics(e,o)}onRotationChanged(e){this.refreshDocumentLayout(e)}onScrollerData(e,t){const n=this.scrollerLayoutEmitters.get(e);if(!n)throw new Error(`No scroller layout emitter found for document: ${e}`);return n.on(t)}getScrollerLayout(e){const t=this.getDocumentState(e),n=this.getCoreDocumentOrThrow(e);if(!t||!n)throw new Error(`Cannot get scroller layout for document: ${e}`);return o=t,i=n.scale,{startSpacing:o.startSpacing,endSpacing:o.endSpacing,totalWidth:o.totalContentSize.width*i,totalHeight:o.totalContentSize.height*i,pageGap:o.pageGap*i,strategy:o.strategy,items:o.renderedPageIndexes.map(r=>({...o.virtualItems[r],pageLayouts:o.virtualItems[r].pageLayouts.map(a=>({...a,rotatedWidth:a.rotatedWidth*i,rotatedHeight:a.rotatedHeight*i,width:a.width*i,height:a.height*i}))}))};var o,i}setLayoutReady(e){if(this.layoutReady.has(e))return;const t=this.getDocumentState(e);if(!t)return;this.layoutReady.add(e);const n=!this.initialLayoutFired.has(e);n&&this.initialLayoutFired.add(e),this.viewport.forDocument(e).scrollTo({...t.scrollOffset,behavior:"instant"}),this.layoutReady$.emit({documentId:e,isInitial:n,pageNumber:t.currentPage,totalPages:t.totalPages})}clearLayoutReady(e){this.layoutReady.delete(e)}buildCapability(){return{getCurrentPage:()=>this.getCurrentPage(),getTotalPages:()=>this.getTotalPages(),getPageChangeState:()=>this.getPageChangeState(),scrollToPage:e=>this.scrollToPage(e),scrollToNextPage:e=>this.scrollToNextPage(e),scrollToPreviousPage:e=>this.scrollToPreviousPage(e),getMetrics:e=>this.getMetrics(e),getLayout:()=>this.getLayout(),getRectPositionForPage:(e,t,n,o)=>this.getRectPositionForPage(e,t,n,o),forDocument:e=>this.createScrollScope(e),setScrollStrategy:(e,t)=>this.setScrollStrategyForDocument(e,t),getPageGap:()=>this.state.defaultPageGap,onPageChange:this.pageChange$.on,onScroll:this.scroll$.on,onLayoutChange:this.layoutChange$.on,onLayoutReady:this.layoutReady$.on,onPageChangeState:this.pageChangeState$.on,onStateChange:this.state$.on}}createScrollScope(e){return{getCurrentPage:()=>this.getCurrentPage(e),getTotalPages:()=>this.getTotalPages(e),getPageChangeState:()=>this.getPageChangeState(e),scrollToPage:t=>this.scrollToPage(t,e),scrollToNextPage:t=>this.scrollToNextPage(t,e),scrollToPreviousPage:t=>this.scrollToPreviousPage(t,e),getSpreadPagesWithRotatedSize:()=>this.getSpreadPagesWithRotatedSize(e),getMetrics:t=>this.getMetrics(t,e),getLayout:()=>this.getLayout(e),getRectPositionForPage:(t,n,o,i)=>this.getRectPositionForPage(t,n,o,i,e),setScrollStrategy:t=>this.setScrollStrategyForDocument(t,e),onPageChange:t=>this.pageChange$.on(n=>{n.documentId===e&&t(n)}),onScroll:t=>this.scroll$.on(n=>{n.documentId===e&&t(n.metrics)}),onLayoutChange:t=>this.layoutChange$.on(n=>{n.documentId===e&&t(n.layout)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Scroll state not found for document: ${e??"active"}`);return t}getStrategy(e){const t=e??this.getActiveDocumentId(),n=this.strategies.get(t);if(!n)throw new Error(`Strategy not found for document: ${t}`);return n}createStrategy(e){const t={pageGap:this.state.defaultPageGap,viewportGap:this.viewport.getViewportGap(),bufferSize:this.state.defaultBufferSize};return e===Xe.Horizontal?new Kg(t):new Vg(t)}createDocumentState(e){var t;return{virtualItems:[],totalPages:((t=e.document)==null?void 0:t.pageCount)??0,currentPage:1,totalContentSize:{width:0,height:0},strategy:this.state.defaultStrategy,pageGap:this.state.defaultPageGap,visiblePages:[],pageVisibilityMetrics:[],renderedPageIndexes:[],scrollOffset:{x:0,y:0},startSpacing:0,endSpacing:0,pageChangeState:Zg}}startPageChange(e,t,n="smooth"){const o=this.getDocumentState(e);if(!o)return;const i={isChanging:!0,targetPage:t,fromPage:o.currentPage,startTime:Date.now()};this.dispatch(zn(e,{pageChangeState:i})),n==="instant"&&this.completePageChange(e)}completePageChange(e){const t=this.getDocumentState(e);if(!t||!t.pageChangeState.isChanging)return;const n={isChanging:!1,targetPage:t.pageChangeState.targetPage,fromPage:t.pageChangeState.fromPage,startTime:t.pageChangeState.startTime};this.dispatch(zn(e,{pageChangeState:n}))}computeLayout(e,t){const n=this.getStrategy(e),o=n.createVirtualItems(t);return{virtualItems:o,totalContentSize:n.getTotalContentSize(o)}}computeMetrics(e,t,n){const o=this.getCoreDocumentOrThrow(e),i=this.getDocumentState(e),r=this.getStrategy(e);if(!i)throw new Error(`Document state not found: ${e}`);return r.handleScroll(t,n??i.virtualItems,o.scale)}commitMetrics(e,t){const n=this.getDocumentState(e);n&&(this.dispatch(zn(e,t)),this.scroll$.emit({documentId:e,metrics:t}),t.currentPage!==n.currentPage&&this.pageChange$.emit({documentId:e,pageNumber:t.currentPage,totalPages:n.totalPages}),this.pushScrollerLayout(e))}pushScrollerLayout(e){const t=this.scrollerLayoutEmitters.get(e);if(t)try{const n=this.getScrollerLayout(e);t.emit(n)}catch{}}refreshDocumentLayout(e){const t=this.coreState.core.documents[e],n=this.getDocumentState(e);if(!t||!n||t.status!=="loaded")return;const o=this.getSpreadPagesWithRotatedSize(e),i=this.computeLayout(e,o),r=this.viewport.forDocument(e),a=this.computeMetrics(e,r.getMetrics(),i.virtualItems);this.dispatch(zn(e,{...i,...a})),this.layoutChange$.emit({documentId:e,layout:i}),this.pushScrollerLayout(e)}getSpreadPagesWithRotatedSize(e){var t,n;const o=e??this.getActiveDocumentId(),i=this.coreState.core.documents[o];if(!i)throw new Error(`Document ${o} not loaded`);return(((t=this.spread)==null?void 0:t.forDocument(o).getSpreadPages())||((n=i.document)==null?void 0:n.pages.map(r=>[r]))||[]).map(r=>r.map(a=>({...a,rotatedSize:wo(a.size,i.rotation,1)})))}getCurrentPage(e){return this.getDocumentStateOrThrow(e).currentPage}getTotalPages(e){return this.getDocumentStateOrThrow(e).totalPages}getPageChangeState(e){return this.getDocumentStateOrThrow(e).pageChangeState}scrollToPage(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),r=this.getCoreDocumentOrThrow(n),{pageNumber:a,behavior:s="smooth",pageCoordinates:l,alignX:c,alignY:u}=e;this.startPageChange(n,a,s);const h=i.getScrollPositionForPage(a,o.virtualItems,r.scale,r.rotation,l);h?this.viewport.forDocument(n).scrollTo({...h,behavior:s,alignX:c,alignY:u}):this.completePageChange(n)}scrollToNextPage(e="smooth",t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),r=this.getCoreDocumentOrThrow(n),a=o.virtualItems.findIndex(s=>s.pageNumbers.includes(o.currentPage));if(a>=0&&a<o.virtualItems.length-1){const s=o.virtualItems[a+1].pageNumbers[0];this.startPageChange(n,s,e);const l=i.getScrollPositionForPage(s,o.virtualItems,r.scale,r.rotation);l?this.viewport.forDocument(n).scrollTo({...l,behavior:e}):this.completePageChange(n)}}scrollToPreviousPage(e="smooth",t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),r=this.coreState.core.documents[n],a=o.virtualItems.findIndex(s=>s.pageNumbers.includes(o.currentPage));if(a>0){const s=o.virtualItems[a-1].pageNumbers[0];this.startPageChange(n,s,e);const l=i.getScrollPositionForPage(s,o.virtualItems,r.scale,r.rotation);l?this.viewport.forDocument(n).scrollTo({...l,behavior:e}):this.completePageChange(n)}}getMetrics(e,t){const n=t??this.getActiveDocumentId();if(e)return this.computeMetrics(n,e);const o=this.viewport.forDocument(n);return this.computeMetrics(n,o.getMetrics())}getLayout(e){const t=this.getDocumentStateOrThrow(e);return{virtualItems:t.virtualItems,totalContentSize:t.totalContentSize}}getRectPositionForPage(e,t,n,o,i){const r=i??this.getActiveDocumentId(),a=this.getDocumentStateOrThrow(r),s=this.getStrategy(r),l=this.getCoreDocumentOrThrow(r);return s.getRectPositionForPage(e+1,a.virtualItems,n??l.scale,o??l.rotation,t)}setScrollStrategyForDocument(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentState(n);if(!o||o.strategy===e)return;const i=this.createStrategy(e);this.strategies.set(n,i),this.dispatch((function(r,a){return{type:lc,payload:{documentId:r,strategy:a}}})(n,e)),this.refreshDocumentLayout(n)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&(this.state$.emit(i),o?.pageChangeState!==i.pageChangeState&&this.pageChangeState$.emit({documentId:n,state:i.pageChangeState}),this.pushScrollerLayout(n))}}async initialize(){this.logger.info("ScrollPlugin","Initialize","Scroll plugin initialized")}async destroy(){this.strategies.clear(),this.layoutReady.clear(),this.initialLayoutFired.clear();for(const e of this.scrollerLayoutEmitters.values())e.clear();this.scrollerLayoutEmitters.clear(),this.pageChange$.clear(),this.scroll$.clear(),this.layoutChange$.clear(),this.pageChangeState$.clear(),this.layoutReady$.clear(),this.state$.clear(),super.destroy()}};cc.id="scroll";let Go=cc;const Sa="scroll",Yg={manifest:{id:Sa,name:"Scroll Plugin",version:"1.0.0",provides:["scroll"],requires:["viewport"],optional:["spread"],defaultConfig:{defaultPageGap:10,defaultBufferSize:4,defaultStrategy:Xe.Vertical}},create:(e,t)=>new Go(Sa,e,t),reducer:(e,t)=>{switch(t.type){case rc:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o}}}case ac:{const{[t.payload]:n,...o}=e.documents;return{...e,documents:o}}case sc:{const{documentId:n,state:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,...o}}}:e}case lc:{const{documentId:n,strategy:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,strategy:o}}}:e}default:return e}},initialState:(e,t)=>((n,o)=>({defaultStrategy:o.defaultStrategy??Xe.Vertical,defaultPageGap:o.defaultPageGap??10,defaultBufferSize:o.defaultBufferSize??2,documents:{}}))(0,t)},Cn=()=>Te(Go.id),dc=e=>{const{provides:t}=Cn(),[n,o]=R(1),[i,r]=R(1);return L(()=>{if(!t||!e)return;const a=t.forDocument(e);return o(a.getCurrentPage()),r(a.getTotalPages()),t.onPageChange(s=>{s.documentId===e&&(o(s.pageNumber),r(s.totalPages))})},[t,e]),{provides:t?.forDocument(e)??null,state:{currentPage:n,totalPages:i}}};function Xg({documentId:e,renderPage:t,...n}){const{plugin:o}=Qe(Go.id),[i,r]=R({layout:null,docId:null});L(()=>{if(!o||!e)return;const s=o.onScrollerData(e,l=>{r({layout:l,docId:e})});return()=>{s(),r({layout:null,docId:null}),o.clearLayoutReady(e)}},[o,e]);const a=i.docId===e?i.layout:null;return Fo(()=>{o&&e&&a&&o.setLayoutReady(e)},[o,e,a]),a?k("div",{...n,style:{width:`${a.totalWidth}px`,height:`${a.totalHeight}px`,position:"relative",boxSizing:"border-box",margin:"0 auto",...a.strategy===Xe.Horizontal&&{display:"flex",flexDirection:"row"}},children:[k("div",{style:{...a.strategy===Xe.Horizontal?{width:a.startSpacing,height:"100%",flexShrink:0}:{height:a.startSpacing,width:"100%"}}}),k("div",{style:{gap:a.pageGap,display:"flex",alignItems:"center",position:"relative",boxSizing:"border-box",...a.strategy===Xe.Horizontal?{flexDirection:"row",minHeight:"100%"}:{flexDirection:"column",minWidth:"fit-content"}},children:a.items.map(s=>k("div",{style:{display:"flex",justifyContent:"center",gap:a.pageGap},children:s.pageLayouts.map(l=>k("div",{style:{width:`${l.rotatedWidth}px`,height:`${l.rotatedHeight}px`},children:t({...l})},l.pageNumber))},s.pageNumbers[0]))}),k("div",{style:{...a.strategy===Xe.Horizontal?{width:a.endSpacing,height:"100%",flexShrink:0}:{height:a.endSpacing,width:"100%"}}})]}):null}var Ve=(e=>(e.None="none",e.Odd="odd",e.Even="even",e))(Ve||{});const uc="SPREAD/INIT_STATE",hc="SPREAD/CLEANUP_STATE",mc="SPREAD/SET_SPREAD_MODE",gc="SPREAD/SET_PAGE_GROUPING";function Pa(e,t){return{type:gc,payload:{documentId:e,grouping:t}}}const pc=class extends Ie{constructor(e,t,n){var o;super(e,t),this.spreadEmitter$=ee(),this.defaultSpreadMode=n.defaultSpreadMode??Ve.None,this.viewport=((o=t.getPlugin("viewport"))==null?void 0:o.provides())??null}onDocumentLoadingStarted(e){var t;const n={spreadMode:this.defaultSpreadMode};this.dispatch((function(o,i){return{type:uc,payload:{documentId:o,state:i}}})(e,n)),(t=this.viewport)==null||t.gate("spread",e),this.logger.debug("SpreadPlugin","DocumentOpened",`Initialized spread state for document: ${e}`)}onDocumentLoaded(e){var t;const n=this.coreState.core.documents[e];if(n?.document){const o=this.calculatePageGrouping(e,n.document.pages.length);this.dispatch(Pa(e,o))}(t=this.viewport)==null||t.releaseGate("spread",e)}onDocumentClosed(e){this.dispatch((function(t){return{type:hc,payload:t}})(e)),this.logger.debug("SpreadPlugin","DocumentClosed",`Cleaned up spread state for document: ${e}`)}buildCapability(){return{setSpreadMode:e=>this.setSpreadModeForDocument(e),getSpreadMode:()=>this.getSpreadModeForDocument(),getSpreadPages:()=>this.getSpreadPages(),forDocument:e=>this.createSpreadScope(e),onSpreadChange:this.spreadEmitter$.on}}createSpreadScope(e){return{setSpreadMode:t=>this.setSpreadModeForDocument(t,e),getSpreadMode:()=>this.getSpreadModeForDocument(e),getSpreadPages:()=>this.getSpreadPages(e),onSpreadChange:t=>this.spreadEmitter$.on(n=>{n.documentId===e&&t(n.spreadMode)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Spread state not found for document: ${e??"active"}`);return t}setSpreadModeForDocument(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.coreState.core.documents[n];if(!i?.document)throw new Error(`Document ${n} not loaded`);if(o.spreadMode!==e){this.dispatch((function(a,s){return{type:mc,payload:{documentId:a,spreadMode:s}}})(n,e));const r=this.calculatePageGrouping(n,i.document.pages.length);this.dispatch(Pa(n,r)),this.spreadEmitter$.emit({documentId:n,spreadMode:e})}}getSpreadModeForDocument(e){return this.getDocumentStateOrThrow(e).spreadMode}calculatePageGrouping(e,t){switch(this.getDocumentStateOrThrow(e).spreadMode){case Ve.None:return Array.from({length:t},(n,o)=>[o]);case Ve.Odd:return Array.from({length:Math.ceil(t/2)},(n,o)=>{const i=[2*o];return 2*o+1<t&&i.push(2*o+1),i});case Ve.Even:return[[0],...Array.from({length:Math.ceil((t-1)/2)},(n,o)=>{const i=[1+2*o];return 1+2*o+1<t&&i.push(1+2*o+1),i})];default:return Array.from({length:t},(n,o)=>[o])}}getSpreadPages(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t],o=this.getDocumentStateOrThrow(t);if(!n?.document)throw new Error(`Document ${t} not loaded`);const i=o.pageGrouping??[],r=n.document.pages;return i.map(a=>a.map(s=>r[s]).filter(Boolean))}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o?.spreadMode!==i.spreadMode&&this.logger.debug("SpreadPlugin","SpreadModeChanged",`Spread mode changed for document ${n}: ${o?.spreadMode??Ve.None} -> ${i.spreadMode}`)}}async initialize(e){this.logger.info("SpreadPlugin","Initialize","Spread plugin initialized")}async destroy(){this.spreadEmitter$.clear(),super.destroy()}};pc.id="spread";let fc=pc;const vc="spread",Qg={id:vc,name:"Spread Plugin",version:"1.0.0",provides:["spread"],requires:[],optional:["viewport"],defaultConfig:{}};Ve.None;const Ma={documents:{},activeDocumentId:null},Jg={manifest:Qg,create:(e,t)=>new fc(vc,e,t),reducer:(e=Ma,t)=>{switch(t.type){case uc:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case hc:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"SPREAD/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case mc:{const{documentId:n,spreadMode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,spreadMode:o}}}:e}case gc:{const{documentId:n,grouping:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,pageGrouping:o}}}:e}default:return e}},initialState:Ma},st="ui",ep={id:st,name:"UI Plugin",version:"1.0.0",provides:["ui"],requires:[],optional:["i18n"],defaultConfig:{schema:{id:"empty",version:"1.0.0",toolbars:{},menus:{},sidebars:{},modals:{},selectionMenus:{}}}},yc="UI/INIT_STATE",bc="UI/CLEANUP_STATE",wc="UI/SET_ACTIVE_TOOLBAR",xc="UI/CLOSE_TOOLBAR_SLOT",Cc="UI/SET_ACTIVE_SIDEBAR",Ic="UI/CLOSE_SIDEBAR_SLOT",kc="UI/SET_SIDEBAR_TAB",Sc="UI/OPEN_MODAL",Pc="UI/CLOSE_MODAL",Mc="UI/CLEAR_MODAL",Dc="UI/OPEN_MENU",Ac="UI/CLOSE_MENU",zc="UI/CLOSE_ALL_MENUS",Tc="UI/SET_OVERLAY_ENABLED",Ec="UI/SET_DISABLED_CATEGORIES",Rc="UI/SET_HIDDEN_ITEMS",Da=(e,t,n,o,i)=>({type:Cc,payload:{documentId:e,placement:t,slot:n,sidebarId:o,activeTab:i}}),Aa=(e,t,n)=>({type:Ic,payload:{documentId:e,placement:t,slot:n}}),za=(e,t)=>({type:Dc,payload:{documentId:e,menuState:t}}),Ta=(e,t)=>({type:Ac,payload:{documentId:e,menuId:t}}),Ea=(e,t,n)=>({type:Tc,payload:{documentId:e,overlayId:t,enabled:n}}),Xn=e=>({type:Ec,payload:{categories:e}}),Qn=e=>({type:Rc,payload:{hiddenItems:e}});function tp(e,t){if(!t)return e;const n={...e};for(const[o,i]of Object.entries(t))n[o]?n[o]={...n[o],...i,items:i.items??n[o].items,responsive:i.responsive??n[o].responsive}:n[o]=i;return n}function np(e,t){if(!t)return e;const n={...e};for(const[o,i]of Object.entries(t))n[o]?n[o]={...n[o],...i,items:i.items??n[o].items}:n[o]=i;return n}function op(e,t){if(!t)return e;const n={...e};for(const[o,i]of Object.entries(t))n[o]?n[o]={...n[o],...i,content:i.content??n[o].content}:n[o]=i;return n}function So(e,t){var n;if(!((n=e.responsive)!=null&&n.breakpoints))return null;const o=(function(l,c,u){if(!u||!c?.groups)return l;const h=c.groups.find(g=>g.locales.includes(u));if(!h)return l;const m={};for(const[g,p]of Object.entries(l)){const v=h.breakpoints[g];v?m[g]={minWidth:p.minWidth,maxWidth:p.maxWidth,hide:v.replaceHide?v.replaceHide:[...p.hide||[],...v.hide||[]],show:v.replaceShow?v.replaceShow:[...p.show||[],...v.show||[]]}:m[g]=p}return m})(e.responsive.breakpoints,e.responsive.localeOverrides,t),i=new Map,r=new Map;for(const[l,c]of Object.entries(o))r.set(l,{minWidth:c.minWidth,maxWidth:c.maxWidth});const a=new Set,s=l=>{l.forEach(c=>{a.add(c.id),c.type==="group"&&c.items&&s(c.items),c.type==="tab-group"&&c.tabs&&s(c.tabs),c.type==="section"&&c.items&&s(c.items)})};s(e.items);for(const l of a){const c=[];let u=!0;Array.from(Object.entries(o)).sort((m,g)=>(m[1].minWidth??0)-(g[1].minWidth??0)).forEach(([m,g],p)=>{var v,f;const y=(v=g.hide)==null?void 0:v.includes(l),b=(f=g.show)==null?void 0:f.includes(l);(y||b)&&(c.push({breakpointId:m,minWidth:g.minWidth,maxWidth:g.maxWidth,visible:b||!y,priority:p}),p===0&&(u=b||!y))}),c.length>0&&i.set(l,{itemId:l,shouldRender:!0,visibilityRules:c,defaultVisible:u})}return{items:i,breakpoints:r}}const _c="data-epdf",Nc="data-epdf-s",Oc="data-epdf-i",br="data-epdf-cat",wr="data-epdf-dis",Lc="data-epdf-hid",Ct={ROOT:`[${_c}]`,STYLES:`[${Nc}]`,ITEM:e=>`[${Oc}="${e}"]`,CATEGORIES:e=>`[${br}~="${e}"]`,DISABLED_CATEGORY:e=>`[${wr}~="${e}"]`,HIDDEN_ITEM:e=>`[${Lc}~="${e}"]`},ip={useContainerQueries:!0};function rp(e,t={}){const n={...ip,...t.config},o=t.locale,i=$c(e,o),r=[];r.push((function(c){return`/*  */
/* EmbedPDF UI Stylesheet - Auto-generated${c?` (locale: ${c})`:""}                         */
/* DO NOT EDIT MANUALLY - This file is generated from your UI schema            */
/*  */`})(o));const a=(function(c,u){const h=[],m=u.useContainerQueries?"@container":"@media",g=new Set;return c.responsiveItems.forEach((p,v)=>{if(g.has(v))return;g.add(v);const f=(function(y,b,w){if(b.visibilityRules.length===0)return null;const x=[],C=Ct.ITEM(y);b.defaultVisible||x.push(`${C} { display: none; }`);for(const S of b.visibilityRules){const M=[];if(S.minWidth!==void 0&&M.push(`(min-width: ${S.minWidth}px)`),S.maxWidth!==void 0&&M.push(`(max-width: ${S.maxWidth}px)`),M.length>0){const A=S.visible?"flex":"none";x.push(`${w} ${M.join(" and ")} {
  ${C} { display: ${A}; }
}`)}}return x.length>0?x.join(`
`):null})(v,p,m);f&&h.push(f)}),h.length===0?"":`/*  Responsive Visibility Rules  */
/* Items show/hide based on container width */

${h.join(`

`)}`})(i,n);a&&r.push(a);const s=(function(c){if(c.categories.size===0)return"";const u=[],h=Array.from(c.categories).sort();for(const m of h)u.push(`${Ct.ROOT}[${wr}~="${m}"] [${br}~="${m}"] {
  display: none !important;
}`);return`/*  Category Visibility Rules  */
/* Items hide when ANY of their categories is disabled */
/* Use: data-disabled-categories="category1 category2" on root element */

${u.join(`

`)}`})(i);s&&r.push(s);const l=(function(c,u){if(c.dependencies.length===0)return"";const h=[],m=u.useContainerQueries?"@container":"@media";for(const g of c.dependencies){const p=hp(g,c,m);p.length>0&&h.push(...p)}return h.length===0?"":`/*  Dependency Visibility Rules  */
/* Container elements hide when all their dependencies are hidden */

${h.join(`

`)}`})(i,n);return l&&r.push(l),r.filter(c=>c.trim()).join(`

`)}function Jn(e,t){const n=new Set(t),o=[];return e.forEach((i,r)=>{i.some(a=>n.has(a))&&o.push(r)}),o}function $c(e,t){const n=new Set,o=new Map,i=[],r=new Map,a=new Map;for(const[s,l]of Object.entries(e.menus))ap(s,l,n,o,i,r,a,t);for(const[s,l]of Object.entries(e.toolbars))lp(s,l,n,o,i,a,t);for(const[s,l]of Object.entries(e.sidebars))dp(s,l,n,o,i);for(const[s,l]of Object.entries(e.selectionMenus||{}))up(s,l,n,o,i,a,t);return{categories:n,itemCategories:o,dependencies:i,menuBreakpoints:r,responsiveItems:a}}function ap(e,t,n,o,i,r,a,s){Pt(e,t.categories,t.visibilityDependsOn,n,o,i),Fc(t.items,n,o,i);const l=So(t,s);l&&l.items.forEach((u,h)=>{a.set(h,u)});const c=(function(u,h,m){var g;const p=[],v=So(u,m);if((g=u.responsive)!=null&&g.breakpoints&&v){const f=Array.from(v.breakpoints.entries()).sort((y,b)=>(y[1].minWidth??0)-(b[1].minWidth??0));for(const[y,b]of f){const w=sp(v,b),x=new Set;for(const C of w){const S=h.get(C);S&&S.forEach(M=>x.add(M))}p.push({minWidth:b.minWidth,maxWidth:b.maxWidth,visibleItemIds:w,visibleCategories:x})}}else{const f=[],y=new Set;jc(u.items,h,f,y),p.push({visibleItemIds:f,visibleCategories:y})}return p})(t,o,s);r.set(e,c)}function Fc(e,t,n,o){for(const i of e)Pt(i.id,i.categories,i.visibilityDependsOn,t,n,o),i.type==="section"&&Fc(i.items,t,n,o)}function jc(e,t,n,o){for(const i of e){n.push(i.id);const r=t.get(i.id);r&&r.forEach(a=>o.add(a)),i.type==="section"&&jc(i.items,t,n,o)}}function sp(e,t){const n=[];return e.items.forEach((o,i)=>{let r=o.defaultVisible;for(const a of o.visibilityRules)(a.minWidth===void 0||t.minWidth!==void 0&&t.minWidth>=a.minWidth)&&(a.maxWidth===void 0||t.maxWidth!==void 0&&t.maxWidth<=a.maxWidth)&&(r=a.visible);r&&n.push(i)}),n}function lp(e,t,n,o,i,r,a){Pt(e,t.categories,t.visibilityDependsOn,n,o,i);const s=So(t,a);s&&s.items.forEach((l,c)=>{r.set(c,l)}),Uc(t.items,n,o,i)}function Uc(e,t,n,o){for(const i of e)Pt(i.id,i.categories,i.visibilityDependsOn,t,n,o),i.type==="group"&&i.items&&Uc(i.items,t,n,o),i.type==="tab-group"&&i.tabs&&cp(i.tabs,t,n,o)}function cp(e,t,n,o){for(const i of e)Pt(i.id,i.categories,i.visibilityDependsOn,t,n,o)}function dp(e,t,n,o,i){if(Pt(e,t.categories,t.visibilityDependsOn,n,o,i),t.content.type==="tabs")for(const r of t.content.tabs)Pt(r.id,r.categories,r.visibilityDependsOn,n,o,i)}function up(e,t,n,o,i,r,a){if(Pt(e,t.categories,t.visibilityDependsOn,n,o,i),t.responsive){const s=So(t,a);s&&s.items.forEach((l,c)=>{r.set(c,l)})}Hc(t.items,n,o,i)}function Hc(e,t,n,o){for(const i of e)Pt(i.id,i.categories,i.visibilityDependsOn,t,n,o),i.type==="group"&&i.items&&Hc(i.items,t,n,o)}function Pt(e,t,n,o,i,r){var a;t?.length&&(t.forEach(s=>o.add(s)),i.set(e,t)),n&&(n.menuId||(a=n.itemIds)!=null&&a.length)&&r.push({itemId:e,dependsOnMenuId:n.menuId,dependsOnItemIds:n.itemIds})}function hp(e,t,n,o){var i;const r=[];if(e.dependsOnMenuId){const a=t.menuBreakpoints.get(e.dependsOnMenuId);if(a&&a.length>0){r.push(`/* "${e.itemId}" depends on menu "${e.dependsOnMenuId}" */`);for(const s of a){if(s.visibleItemIds.length===0)continue;const l=s.visibleItemIds.sort().map(h=>Ct.HIDDEN_ITEM(h)).join(""),c=`${Ct.ROOT}${l} ${Ct.ITEM(e.itemId)} {
  display: none !important;
}`,u=[];s.minWidth!==void 0&&u.push(`(min-width: ${s.minWidth}px)`),s.maxWidth!==void 0&&u.push(`(max-width: ${s.maxWidth}px)`),u.length>0?r.push(`${n} ${u.join(" and ")} {
  ${c}
}`):r.push(c)}}}if((i=e.dependsOnItemIds)!=null&&i.length){r.push(`/* "${e.itemId}" depends on items: ${e.dependsOnItemIds.join(", ")} */`);const a=e.dependsOnItemIds.sort().map(s=>Ct.HIDDEN_ITEM(s)).join("");r.push(`${Ct.ROOT}${a} ${Ct.ITEM(e.itemId)} {
  display: none !important;
}`)}return r}function Re(e,t){var n;return{[Oc]:e.id,[br]:((n=e.categories)==null?void 0:n.join(" "))||void 0,...t}}const Bc=class extends Ie{constructor(e,t,n){var o,i;if(super(e,t),this.cachedStylesheet=null,this.cachedLocale=null,this.i18n=null,this.i18nCleanup=null,this.categoryChanged$=ee(),this.stylesheetInvalidated$=We(),this.toolbarChanged$=Fe((r,a)=>({documentId:r,...a}),{cache:!1}),this.sidebarChanged$=Fe((r,a)=>({documentId:r,...a}),{cache:!1}),this.modalChanged$=Fe((r,a)=>({documentId:r,...a}),{cache:!1}),this.menuChanged$=Fe((r,a)=>({documentId:r,...a}),{cache:!1}),this.overlayChanged$=Fe((r,a)=>({documentId:r,...a}),{cache:!1}),this.schema=n.schema,this.stylesheetConfig=n.stylesheetConfig||{},this.itemCategories=$c(this.schema).itemCategories,(o=n.disabledCategories)==null?void 0:o.length){this.dispatch(Xn(n.disabledCategories));const r=Jn(this.itemCategories,n.disabledCategories);this.dispatch(Qn(r))}this.i18n=((i=t.getPlugin("i18n"))==null?void 0:i.provides())??null,this.i18n&&(this.i18nCleanup=this.i18n.onLocaleChange(({currentLocale:r})=>{this.handleLocaleChange(r)}),this.cachedLocale=this.i18n.getLocale())}async initialize(){this.logger.info("UIPlugin","Initialize","UI plugin initialized")}async destroy(){this.i18nCleanup&&(this.i18nCleanup(),this.i18nCleanup=null),this.toolbarChanged$.clear(),this.sidebarChanged$.clear(),this.modalChanged$.clear(),this.menuChanged$.clear(),this.overlayChanged$.clear(),this.stylesheetInvalidated$.clear(),super.destroy()}onDocumentLoadingStarted(e){this.dispatch(((t,n)=>({type:yc,payload:{documentId:t,schema:n}}))(e,this.schema))}onDocumentClosed(e){this.dispatch((t=>({type:bc,payload:{documentId:t}}))(e)),this.toolbarChanged$.clearScope(e),this.sidebarChanged$.clearScope(e),this.modalChanged$.clearScope(e),this.menuChanged$.clearScope(e),this.overlayChanged$.clearScope(e)}handleLocaleChange(e){this.cachedLocale!==e&&(this.logger.debug("UIPlugin","LocaleChange",`Locale changed: ${this.cachedLocale} -> ${e}`),this.cachedLocale=e,this.invalidateStylesheet(),this.stylesheetInvalidated$.emit())}getStylesheet(){var e;const t=((e=this.i18n)==null?void 0:e.getLocale())??null;return this.cachedStylesheet&&this.cachedLocale===t||(this.cachedStylesheet=rp(this.schema,{config:this.stylesheetConfig,locale:t??void 0}),this.cachedLocale=t),this.cachedStylesheet}getLocale(){var e;return((e=this.i18n)==null?void 0:e.getLocale())??null}invalidateStylesheet(){this.cachedStylesheet=null}onStylesheetInvalidated(e){return this.stylesheetInvalidated$.on(e)}disableCategoryImpl(e){const t=new Set(this.state.disabledCategories);if(!t.has(e)){t.add(e);const n=Array.from(t);this.dispatch(Xn(n));const o=Jn(this.itemCategories,n);this.dispatch(Qn(o)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:o})}}enableCategoryImpl(e){const t=new Set(this.state.disabledCategories);if(t.has(e)){t.delete(e);const n=Array.from(t);this.dispatch(Xn(n));const o=Jn(this.itemCategories,n);this.dispatch(Qn(o)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:o})}}toggleCategoryImpl(e){this.state.disabledCategories.includes(e)?this.enableCategoryImpl(e):this.disableCategoryImpl(e)}setDisabledCategoriesImpl(e){this.dispatch(Xn(e));const t=Jn(this.itemCategories,e);this.dispatch(Qn(t)),this.categoryChanged$.emit({disabledCategories:e,hiddenItems:t})}buildCapability(){return{setActiveToolbar:(e,t,n,o)=>this.setToolbarForDocument(e,t,n,o),setActiveSidebar:(e,t,n,o,i)=>this.setSidebarForDocument(e,t,n,o,i),toggleSidebar:(e,t,n,o,i)=>this.toggleSidebarForDocument(e,t,n,o,i),openModal:(e,t)=>this.openModalForDocument(e,t),openMenu:(e,t,n,o)=>this.openMenuForDocument(e,t,n,o),toggleMenu:(e,t,n,o)=>this.toggleMenuForDocument(e,t,n,o),enableOverlay:(e,t)=>this.enableOverlayForDocument(e,t),disableOverlay:(e,t)=>this.disableOverlayForDocument(e,t),toggleOverlay:(e,t)=>this.toggleOverlayForDocument(e,t),forDocument:e=>this.createUIScope(e),getSchema:()=>this.schema,mergeSchema:e=>{var t,n;this.schema=(t=this.schema,n=e,{...t,...n,toolbars:tp(t.toolbars,n.toolbars),menus:np(t.menus,n.menus),sidebars:op(t.sidebars,n.sidebars)})},disableCategory:e=>this.disableCategoryImpl(e),enableCategory:e=>this.enableCategoryImpl(e),toggleCategory:e=>this.toggleCategoryImpl(e),setDisabledCategories:e=>this.setDisabledCategoriesImpl(e),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:e=>this.state.disabledCategories.includes(e),getHiddenItems:()=>this.state.hiddenItems,onToolbarChanged:this.toolbarChanged$.onGlobal,onSidebarChanged:this.sidebarChanged$.onGlobal,onModalChanged:this.modalChanged$.onGlobal,onMenuChanged:this.menuChanged$.onGlobal,onOverlayChanged:this.overlayChanged$.onGlobal,onCategoryChanged:this.categoryChanged$.on}}createUIScope(e){return{setActiveToolbar:(t,n,o)=>this.setToolbarForDocument(t,n,o,e),getActiveToolbar:(t,n)=>this.getToolbarForDocument(t,n,e),closeToolbarSlot:(t,n)=>this.closeToolbarForDocument(t,n,e),isToolbarOpen:(t,n,o)=>this.isToolbarOpenForDocument(t,n,o,e),setActiveSidebar:(t,n,o,i)=>this.setSidebarForDocument(t,n,o,e,i),getActiveSidebar:(t,n)=>this.getSidebarForDocument(t,n,e),closeSidebarSlot:(t,n)=>this.closeSidebarForDocument(t,n,e),toggleSidebar:(t,n,o,i)=>this.toggleSidebarForDocument(t,n,o,e,i),isSidebarOpen:(t,n,o)=>this.isSidebarOpenForDocument(t,n,o,e),setSidebarTab:(t,n)=>this.setSidebarTabForDocument(t,n,e),getSidebarTab:t=>this.getSidebarTabForDocument(t,e),openModal:t=>this.openModalForDocument(t,e),closeModal:()=>this.closeModalForDocument(e),clearModal:()=>this.clearModalForDocument(e),getActiveModal:()=>this.getActiveModalForDocument(e),isModalOpen:()=>this.isModalOpenForDocument(e),openMenu:(t,n,o)=>this.openMenuForDocument(t,n,o,e),closeMenu:t=>this.closeMenuForDocument(t,e),toggleMenu:(t,n,o)=>this.toggleMenuForDocument(t,n,o,e),closeAllMenus:()=>this.closeAllMenusForDocument(e),isMenuOpen:t=>this.isMenuOpenForDocument(t,e),getOpenMenus:()=>this.getOpenMenusForDocument(e),enableOverlay:t=>this.enableOverlayForDocument(t,e),disableOverlay:t=>this.disableOverlayForDocument(t,e),toggleOverlay:t=>this.toggleOverlayForDocument(t,e),isOverlayEnabled:t=>this.isOverlayEnabledForDocument(t,e),getEnabledOverlays:()=>this.getEnabledOverlaysForDocument(e),getSchema:()=>this.schema,getState:()=>this.getDocumentStateOrThrow(e),onToolbarChanged:this.toolbarChanged$.forScope(e),onSidebarChanged:this.sidebarChanged$.forScope(e),onModalChanged:this.modalChanged$.forScope(e),onMenuChanged:this.menuChanged$.forScope(e),onOverlayChanged:this.overlayChanged$.forScope(e)}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`UI state not found for document: ${e??"active"}`);return t}setToolbarForDocument(e,t,n,o){const i=o??this.getActiveDocumentId();this.dispatch(((r,a,s,l)=>({type:wc,payload:{documentId:r,placement:a,slot:s,toolbarId:l}}))(i,e,t,n)),this.toolbarChanged$.emit(i,{placement:e,slot:t,toolbarId:n})}getToolbarForDocument(e,t,n){const o=`${e}-${t}`,i=this.getDocumentStateOrThrow(n).activeToolbars[o];return i?.isOpen?i.toolbarId:null}closeToolbarForDocument(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(((i,r,a)=>({type:xc,payload:{documentId:i,placement:r,slot:a}}))(o,e,t)),this.toolbarChanged$.emit(o,{placement:e,slot:t,toolbarId:""})}isToolbarOpenForDocument(e,t,n,o){const i=`${e}-${t}`,r=this.getDocumentStateOrThrow(o).activeToolbars[i];return!(!r||!r.isOpen)&&(!n||r.toolbarId===n)}setSidebarForDocument(e,t,n,o,i){const r=o??this.getActiveDocumentId();this.dispatch(Da(r,e,t,n,i)),this.sidebarChanged$.emit(r,{placement:e,slot:t,sidebarId:n})}getSidebarForDocument(e,t,n){const o=`${e}-${t}`,i=this.getDocumentStateOrThrow(n).activeSidebars[o];return i?.isOpen?i.sidebarId:null}closeSidebarForDocument(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(Aa(o,e,t)),this.sidebarChanged$.emit(o,{placement:e,slot:t,sidebarId:""})}toggleSidebarForDocument(e,t,n,o,i){const r=o??this.getActiveDocumentId(),a=`${e}-${t}`,s=this.getDocumentStateOrThrow(r).activeSidebars[a];s?.sidebarId===n&&s?.isOpen?(this.dispatch(Aa(r,e,t)),this.sidebarChanged$.emit(r,{placement:e,slot:t,sidebarId:""})):(this.dispatch(Da(r,e,t,n,i)),this.sidebarChanged$.emit(r,{placement:e,slot:t,sidebarId:n}))}isSidebarOpenForDocument(e,t,n,o){const i=`${e}-${t}`,r=this.getDocumentStateOrThrow(o).activeSidebars[i];return!(!r||!r.isOpen)&&(!n||r.sidebarId===n)}setSidebarTabForDocument(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(((i,r,a)=>({type:kc,payload:{documentId:i,sidebarId:r,tabId:a}}))(o,e,t))}getSidebarTabForDocument(e,t){return this.getDocumentStateOrThrow(t).sidebarTabs[e]??null}openModalForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(((o,i)=>({type:Sc,payload:{documentId:o,modalId:i}}))(n,e)),this.modalChanged$.emit(n,{modalId:e,isOpen:!0})}closeModalForDocument(e){const t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).activeModal;this.dispatch((o=>({type:Pc,payload:{documentId:o}}))(t)),this.modalChanged$.emit(t,{modalId:n?.modalId??null,isOpen:!1})}clearModalForDocument(e){const t=e??this.getActiveDocumentId();this.dispatch((n=>({type:Mc,payload:{documentId:n}}))(t))}getActiveModalForDocument(e){return this.getDocumentStateOrThrow(e).activeModal}isModalOpenForDocument(e){const t=this.getDocumentStateOrThrow(e).activeModal;return t?.isOpen??!1}openMenuForDocument(e,t,n,o){const i=o??this.getActiveDocumentId();this.dispatch(za(i,{menuId:e,triggeredByCommandId:t,triggeredByItemId:n})),this.menuChanged$.emit(i,{menuId:e,isOpen:!0})}closeMenuForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(Ta(n,e)),this.menuChanged$.emit(n,{menuId:e,isOpen:!1})}toggleMenuForDocument(e,t,n,o){const i=o??this.getActiveDocumentId();this.getDocumentStateOrThrow(i).openMenus[e]?(this.dispatch(Ta(i,e)),this.menuChanged$.emit(i,{menuId:e,isOpen:!1})):(this.dispatch(za(i,{menuId:e,triggeredByCommandId:t,triggeredByItemId:n})),this.menuChanged$.emit(i,{menuId:e,isOpen:!0}))}closeAllMenusForDocument(e){const t=e??this.getActiveDocumentId();this.dispatch((n=>({type:zc,payload:{documentId:n}}))(t))}isMenuOpenForDocument(e,t){return!!this.getDocumentStateOrThrow(t).openMenus[e]}getOpenMenusForDocument(e){return Object.values(this.getDocumentStateOrThrow(e).openMenus)}enableOverlayForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(Ea(n,e,!0)),this.overlayChanged$.emit(n,{overlayId:e,isEnabled:!0})}disableOverlayForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(Ea(n,e,!1)),this.overlayChanged$.emit(n,{overlayId:e,isEnabled:!1})}toggleOverlayForDocument(e,t){const n=t??this.getActiveDocumentId();this.isOverlayEnabledForDocument(e,n)?this.disableOverlayForDocument(e,n):this.enableOverlayForDocument(e,n)}isOverlayEnabledForDocument(e,t){return this.getDocumentStateOrThrow(t).enabledOverlays[e]??!0}getEnabledOverlaysForDocument(e){const t=this.getDocumentStateOrThrow(e).enabledOverlays;return Object.entries(t).filter(([,n])=>n).map(([n])=>n)}};Bc.id="ui";let Vo=Bc;const Wt={activeToolbars:{},activeSidebars:{},activeModal:null,openMenus:{},sidebarTabs:{},enabledOverlays:{}},Ra={documents:{},disabledCategories:[],hiddenItems:[]};function Wc(e,t){const n=(function(o){return o.ui??null})(e);return n?.documents[t]??null}function qc(e,t){return`${e}-${t}`}function eo(e,t,n,o,i){const r=(function(a,s,l,c){const u=Wc(a,s);return u?u.activeToolbars[qc(l,c)]??null:null})(e,t,n,o);return!(!r||!r.isOpen)&&(!i||r.toolbarId===i)}function cn(e,t,n,o,i){const r=(function(a,s,l,c){const u=Wc(a,s);return u?u.activeSidebars[qc(l,c)]??null:null})(e,t,n,o);return!(!r||!r.isOpen)&&(!i||r.sidebarId===i)}const mp={manifest:ep,create:(e,t)=>new Vo(st,e,t),reducer:(e=Ra,t)=>{var n;switch(t.type){case yc:{const{documentId:o,schema:i}=t.payload,r={};Object.values(i.toolbars).forEach(s=>{if(s.permanent&&s.position){const l=`${s.position.placement}-${s.position.slot}`;r[l]={toolbarId:s.id,isOpen:!0}}});const a={};return i.overlays&&Object.values(i.overlays).forEach(s=>{a[s.id]=s.defaultEnabled??!0}),{...e,documents:{...e.documents,[o]:{...Wt,activeToolbars:r,enabledOverlays:a}}}}case bc:{const{documentId:o}=t.payload,{[o]:i,...r}=e.documents;return{...e,documents:r}}case wc:{const{documentId:o,placement:i,slot:r,toolbarId:a}=t.payload,s=e.documents[o]||Wt,l=`${i}-${r}`;return{...e,documents:{...e.documents,[o]:{...s,activeToolbars:{...s.activeToolbars,[l]:{toolbarId:a,isOpen:!0}}}}}}case xc:{const{documentId:o,placement:i,slot:r}=t.payload,a=e.documents[o];if(!a)return e;const s=`${i}-${r}`,l=a.activeToolbars[s];return l?{...e,documents:{...e.documents,[o]:{...a,activeToolbars:{...a.activeToolbars,[s]:{...l,isOpen:!1}}}}}:e}case Cc:{const{documentId:o,placement:i,slot:r,sidebarId:a,activeTab:s}=t.payload,l=e.documents[o]||Wt,c=`${i}-${r}`;return{...e,documents:{...e.documents,[o]:{...l,activeSidebars:{...l.activeSidebars,[c]:{sidebarId:a,isOpen:!0}},...s&&{sidebarTabs:{...l.sidebarTabs,[a]:s}}}}}}case Ic:{const{documentId:o,placement:i,slot:r}=t.payload,a=e.documents[o];if(!a)return e;const s=`${i}-${r}`,l=a.activeSidebars[s];return l?{...e,documents:{...e.documents,[o]:{...a,activeSidebars:{...a.activeSidebars,[s]:{...l,isOpen:!1}}}}}:e}case kc:{const{documentId:o,sidebarId:i,tabId:r}=t.payload,a=e.documents[o]||Wt;return{...e,documents:{...e.documents,[o]:{...a,sidebarTabs:{...a.sidebarTabs,[i]:r}}}}}case Sc:{const{documentId:o,modalId:i}=t.payload,r=e.documents[o]||Wt;return{...e,documents:{...e.documents,[o]:{...r,activeModal:{modalId:i,isOpen:!0},openMenus:{}}}}}case Pc:{const{documentId:o}=t.payload,i=e.documents[o];return i?.activeModal?{...e,documents:{...e.documents,[o]:{...i,activeModal:{...i.activeModal,isOpen:!1}}}}:e}case Mc:{const{documentId:o}=t.payload,i=e.documents[o];return i?(n=i.activeModal)!=null&&n.isOpen?e:{...e,documents:{...e.documents,[o]:{...i,activeModal:null}}}:e}case Dc:{const{documentId:o,menuState:i}=t.payload,r=e.documents[o]||Wt;return{...e,documents:{...e.documents,[o]:{...r,openMenus:{[i.menuId]:i}}}}}case Ac:{const{documentId:o,menuId:i}=t.payload,r=e.documents[o];if(!r)return e;const{[i]:a,...s}=r.openMenus;return{...e,documents:{...e.documents,[o]:{...r,openMenus:s}}}}case zc:{const{documentId:o}=t.payload,i=e.documents[o];return i?{...e,documents:{...e.documents,[o]:{...i,openMenus:{}}}}:e}case Tc:{const{documentId:o,overlayId:i,enabled:r}=t.payload,a=e.documents[o]||Wt;return{...e,documents:{...e.documents,[o]:{...a,enabledOverlays:{...a.enabledOverlays,[i]:r}}}}}case Ec:return{...e,disabledCategories:t.payload.categories};case Rc:return{...e,hiddenItems:t.payload.hiddenItems};default:return e}},initialState:Ra},sn=()=>Te(Vo.id),Gc=e=>{const{provides:t}=sn(),[n,o]=R(null);return L(()=>{if(!t)return;const i=t.forDocument(e);o(i.getState());const r=i.onToolbarChanged(()=>o(i.getState())),a=i.onSidebarChanged(()=>o(i.getState())),s=i.onModalChanged(()=>o(i.getState())),l=i.onMenuChanged(()=>o(i.getState())),c=i.onOverlayChanged(()=>o(i.getState()));return()=>{r(),a(),s(),l(),c()}},[t,e]),n},Vc=on(null);function Kc(){const e=rn(Vc);if(!e)throw new Error("useUIContainer must be used within a UIProvider");return e}const Zc=on(null);function gp({children:e}){const t=V(new Map),n={register:Y((o,i,r)=>{const a=`${o}:${i}`;t.current.set(a,r)},[]),unregister:Y((o,i)=>{const r=`${o}:${i}`;t.current.delete(r)},[]),getAnchor:Y((o,i)=>{const r=`${o}:${i}`;return t.current.get(r)||null},[])};return k(Zc.Provider,{value:n,children:e})}function Yc(){const e=rn(Zc);if(!e)throw new Error("useAnchorRegistry must be used within UIProvider");return e}function Xc(e,t){const n=Yc(),o=V(null),i=V(e),r=V(t);return i.current=e,r.current=t,Y(a=>{const s=o.current;o.current=a,a?a!==s&&n.register(i.current,r.current,a):s&&n.unregister(i.current,r.current)},[n])}const Qc=on(null);function pp({children:e,initialComponents:t={}}){const n=V(new Map(Object.entries(t))),o={register:Y((i,r)=>{n.current.set(i,r)},[]),unregister:Y(i=>{n.current.delete(i)},[]),get:Y(i=>n.current.get(i),[]),has:Y(i=>n.current.has(i),[]),getRegisteredIds:Y(()=>Array.from(n.current.keys()),[])};return k(Qc.Provider,{value:o,children:e})}function Ko(){const e=(function(){const t=rn(Qc);if(!t)throw new Error("useComponentRegistry must be used within UIProvider");return t})();return{renderCustomComponent:(t,n,o)=>{const i=e.get(t);return i?k(i,{documentId:n,...o||{}}):(console.error(`Component "${t}" not found in registry`),null)}}}const Jc=on(null);function fp({children:e,renderers:t}){return k(Jc.Provider,{value:t,children:e})}function xr(){const e=rn(Jc);if(!e)throw new Error("useRenderers must be used within UIProvider");return e}function to(e,t){var n;const{provides:o}=sn(),i=xr(),r=Y(s=>{var l;const c=o?.getSchema(),u=(l=c?.selectionMenus)==null?void 0:l[e];return!u||!s.selected?null:k(i.selectionMenu,{schema:u,documentId:t,props:s})},[o,i,e,t]),a=o?.getSchema();if((n=a?.selectionMenus)!=null&&n[e])return r}function vp({container:e,documentId:t}){const n=Gc(t),{provides:o}=sn(),i=Yc(),r=xr(),[a,s]=R(null),l=n?.openMenus||{},c=o?.getSchema();if(L(()=>{const h=Object.keys(l);if(h.length>0){const m=h[0];if(!m)return void s(null);const g=l[m];if(g&&g.triggeredByItemId){const p=i.getAnchor(t,g.triggeredByItemId);s({menuId:m,anchorEl:p})}else s(null)}else s(null)},[l,i,t]),!a||!c)return null;const u=c.menus[a.menuId];return u?k(r.menu,{schema:u,documentId:t,anchorEl:a.anchorEl,onClose:()=>{a&&o?.forDocument(t).closeMenu(a.menuId)},container:e}):(console.warn(`Menu "${a.menuId}" not found in schema`),null)}function yp({children:e,style:t,...n}){const{plugin:o}=Qe(Vo.id),{provides:i}=sn(),[r,a]=R([]),[s,l]=R([]),c=V(null),u=V(null),h=V(null),m=V(null),g=K(()=>({containerRef:m,getContainer:()=>m.current}),[]),p=Y(w=>{const x=h.current;if(h.current=w,m.current=w,w&&w!==x&&o){const C=(function(I){const P=I.getRootNode();return P instanceof ShadowRoot?P:document.head})(w);u.current=C;const S=C.querySelector(Ct.STYLES);if(S)return c.current=S,void(S.textContent=o.getStylesheet());const M=o.getStylesheet(),A=document.createElement("style");A.setAttribute(Nc,""),A.textContent=M,C instanceof ShadowRoot?C.insertBefore(A,C.firstChild):C.appendChild(A),c.current=A}},[o]);L(()=>()=>{var w;(w=c.current)!=null&&w.parentNode&&!h.current&&c.current.remove(),c.current=null,u.current=null},[]),L(()=>{if(o)return o.onStylesheetInvalidated(()=>{c.current&&(c.current.textContent=o.getStylesheet())})},[o]),L(()=>{if(i)return a(i.getDisabledCategories()),l(i.getHiddenItems()),i.onCategoryChanged(({disabledCategories:w,hiddenItems:x})=>{a(w),l(x)})},[i]);const v=K(()=>r.length>0?r.join(" "):void 0,[r]),f=K(()=>s.length>0?s.join(" "):void 0,[s]),y=K(()=>{const w={containerType:"inline-size"};return t&&typeof t=="object"?{...w,...t}:w},[t]),b={[_c]:"",[wr]:v,[Lc]:f};return k(Vc.Provider,{value:g,children:k("div",{ref:p,...b,...n,style:y,children:e})})}function bp({children:e,documentId:t,components:n={},renderers:o,menuContainer:i,...r}){return k(gp,{children:k(pp,{initialComponents:n,children:k(fp,{renderers:o,children:k(yp,{...r,children:[e,k(vp,{documentId:t,container:i})]})})})})}const ed=class extends Ie{constructor(e,t,n){super(e,t),this.id=e,this.documentOpened$=ee(),this.documentClosed$=ee(),this.activeDocumentChanged$=ee(),this.documentError$=ee(),this.documentOrderChanged$=ee(),this.openFileRequest$=We(),this.loadOptions=new Map,this.maxDocuments=n?.maxDocuments}buildCapability(){return{openFileDialog:e=>this.openFileDialog(e),openDocumentUrl:e=>this.openDocumentUrl(e),openDocumentBuffer:e=>this.openDocumentBuffer(e),retryDocument:(e,t)=>this.retryDocument(e,t),closeDocument:e=>this.closeDocument(e),closeAllDocuments:()=>this.closeAllDocuments(),setActiveDocument:e=>{if(!this.isDocumentOpen(e))throw new Error(`Cannot set active document: ${e} is not open`);this.dispatchCoreAction((t=>({type:gr,payload:t}))(e))},getActiveDocumentId:()=>this.coreState.core.activeDocumentId,getActiveDocument:()=>{var e;const t=this.coreState.core.activeDocumentId;return t?((e=this.coreState.core.documents[t])==null?void 0:e.document)??null:null},getDocumentOrder:()=>this.coreState.core.documentOrder,moveDocument:(e,t)=>{this.dispatchCoreAction(((n,o)=>({type:fr,payload:{documentId:n,toIndex:o}}))(e,t))},swapDocuments:(e,t)=>{const n=this.coreState.core.documentOrder,o=n.indexOf(e),i=n.indexOf(t);if(o===-1||i===-1)throw new Error("One or both documents not found in order");const r=[...n];[r[o],r[i]]=[r[i],r[o]],this.dispatchCoreAction((a=>({type:pr,payload:a}))(r))},getDocument:e=>{var t;return((t=this.coreState.core.documents[e])==null?void 0:t.document)??null},getDocumentState:e=>this.coreState.core.documents[e]??null,getOpenDocuments:()=>this.coreState.core.documentOrder.map(e=>this.coreState.core.documents[e]).filter(e=>e!==null),isDocumentOpen:e=>this.isDocumentOpen(e),getDocumentCount:()=>Object.keys(this.coreState.core.documents).length,getDocumentIndex:e=>this.coreState.core.documentOrder.indexOf(e),setDocumentEncryption:(e,t)=>this.setDocumentEncryption(e,t),unlockOwnerPermissions:(e,t)=>this.unlockOwnerPermissions(e,t),removeEncryption:e=>this.removeEncryption(e),onDocumentOpened:this.documentOpened$.on,onDocumentClosed:this.documentClosed$.on,onDocumentError:this.documentError$.on,onActiveDocumentChanged:this.activeDocumentChanged$.on,onDocumentOrderChanged:this.documentOrderChanged$.on}}isDocumentOpen(e){return!!this.coreState.core.documents[e]}onDocumentLoaded(e){const t=this.coreState.core.documents[e];t&&t.status==="loaded"&&(this.loadOptions.delete(e),this.documentOpened$.emit(t),this.logger.info("DocumentManagerPlugin","DocumentOpened",`Document ${e} opened successfully`,{name:t.name}))}onDocumentClosed(e){this.loadOptions.delete(e),this.documentClosed$.emit(e),this.logger.info("DocumentManagerPlugin","DocumentClosed",`Document ${e} closed`)}onActiveDocumentChanged(e,t){this.activeDocumentChanged$.emit({previousDocumentId:e,currentDocumentId:t}),this.logger.info("DocumentManagerPlugin","ActiveDocumentChanged",`Active document changed from ${e} to ${t}`)}onCoreStoreUpdated(e,t){e.core.documentOrder!==t.core.documentOrder&&this.documentOrderChanged$.emit({order:t.core.documentOrder})}onOpenFileRequest(e){return this.openFileRequest$.on(e)}openDocumentUrl(e){const t=new fe,n=e.documentId||this.generateDocumentId(),o=this.checkDocumentLimit();if(o)return t.reject(o),t;const i=e.name??this.extractNameFromUrl(e.url);this.loadOptions.set(n,e),this.dispatchCoreAction(pa(n,i,e.scale,e.rotation,!!e.password,e.autoActivate,e.permissions)),this.logger.info("DocumentManagerPlugin","OpenDocumentUrl",`Starting to load document from URL: ${e.url}`,{documentId:n,passwordProvided:!!e.password});const r={id:n,url:e.url},a=this.engine.openDocumentUrl(r,{password:e.password,mode:e.mode,requestOptions:e.requestOptions});return t.resolve({documentId:n,task:a}),this.handleLoadTask(n,a,"OpenDocumentUrl"),t}openDocumentBuffer(e){const t=new fe,n=this.checkDocumentLimit();if(n)return t.reject(n),t;const o=e.documentId||this.generateDocumentId();this.loadOptions.set(o,e),this.dispatchCoreAction(pa(o,e.name,e.scale,e.rotation,!!e.password,e.autoActivate,e.permissions)),this.logger.info("DocumentManagerPlugin","OpenDocumentBuffer",`Starting to load document from buffer: ${e.name}`,{documentId:o,passwordProvided:!!e.password});const i={id:o,content:e.buffer},r=this.engine.openDocumentBuffer(i,{password:e.password});return t.resolve({documentId:o,task:r}),this.handleLoadTask(o,r,"OpenDocumentBuffer"),t}retryDocument(e,t){const n=new fe,o=this.validateRetry(e);if(!o.valid)return n.reject(o.error),n;const i={...this.loadOptions.get(e),...t?.password&&{password:t.password}};this.loadOptions.set(e,i),this.dispatchCoreAction(((a,s)=>({type:mr,payload:{documentId:a,passwordProvided:s}}))(e,!!t?.password)),this.logger.info("DocumentManagerPlugin","RetryDocument",`Retrying to load document ${e}`,{passwordProvided:!!t?.password});const r="url"in i?this.retryUrlDocument(e,i):this.retryBufferDocument(e,i);return n.resolve({documentId:e,task:r}),this.handleLoadTask(e,r,"RetryDocument"),n}openFileDialog(e){const t=new fe;return this.openFileRequest$.emit({task:t,options:e}),t}closeDocument(e){const t=new fe,n=this.coreState.core.documents[e];return n?(n.status==="loaded"&&n.document?this.engine.closeDocument(n.document).wait(()=>{this.dispatchCoreAction(fa(e)),t.resolve()},o=>{this.logger.error("DocumentManagerPlugin","CloseDocument",`Failed to close document ${e}`,o),t.fail(o)}):(this.logger.info("DocumentManagerPlugin","CloseDocument",`Closing document ${e} in ${n.status} state (skipping engine close)`),this.dispatchCoreAction(fa(e)),t.resolve()),t):(this.logger.warn("DocumentManagerPlugin","CloseDocument",`Cannot close document ${e}: not found in state`),t.resolve(),t)}closeAllDocuments(){const e=Object.keys(this.coreState.core.documents),t=e.map(n=>this.closeDocument(n));return this.logger.info("DocumentManagerPlugin","CloseAllDocuments",`Closing ${e.length} documents`),fe.all(t)}setDocumentEncryption(e,t){const n=new fe,o=this.coreState.core.documents[e];return o?.document?(this.logger.info("DocumentManagerPlugin","SetDocumentEncryption",`Setting encryption on document ${e}`,{hasUserPassword:!!t.userPassword,allowedFlags:t.allowedFlags}),this.engine.setDocumentEncryption(o.document,t.userPassword??"",t.ownerPassword,t.allowedFlags).wait(i=>{i&&this.logger.info("DocumentManagerPlugin","SetDocumentEncryption",`Encryption set successfully on document ${e}`),n.resolve(i)},i=>{this.logger.error("DocumentManagerPlugin","SetDocumentEncryption",`Failed to set encryption on document ${e}`,i),n.fail(i)}),n):(n.reject({code:J.DocNotOpen,message:`Document ${e} is not open`}),n)}unlockOwnerPermissions(e,t){const n=new fe,o=this.coreState.core.documents[e];if(!o?.document)return n.reject({code:J.DocNotOpen,message:`Document ${e} is not open`}),n;const i=o.document;return this.logger.info("DocumentManagerPlugin","UnlockOwnerPermissions",`Attempting to unlock owner permissions on document ${e}`),this.engine.unlockOwnerPermissions(i,t).wait(r=>{r&&(this.logger.info("DocumentManagerPlugin","UnlockOwnerPermissions",`Owner permissions unlocked on document ${e}`),this.dispatchCoreAction(((s,l,c)=>({type:vr,payload:{documentId:s,permissions:l,isOwnerUnlocked:c}}))(e,4294967295,!0))),n.resolve(r)},r=>{this.logger.error("DocumentManagerPlugin","UnlockOwnerPermissions",`Failed to unlock owner permissions on document ${e}`,r),n.fail(r)}),n}removeEncryption(e){const t=new fe,n=this.coreState.core.documents[e];return n?.document?(this.logger.info("DocumentManagerPlugin","RemoveEncryption",`Marking document ${e} for encryption removal on save`),this.engine.removeEncryption(n.document).wait(o=>{o&&this.logger.info("DocumentManagerPlugin","RemoveEncryption",`Document ${e} marked for encryption removal`),t.resolve(o)},o=>{this.logger.error("DocumentManagerPlugin","RemoveEncryption",`Failed to mark document ${e} for encryption removal`,o),t.fail(o)}),t):(t.reject({code:J.DocNotOpen,message:`Document ${e} is not open`}),t)}checkDocumentLimit(){return this.maxDocuments&&Object.keys(this.coreState.core.documents).length>=this.maxDocuments?{code:J.Unknown,message:`Maximum number of documents (${this.maxDocuments}) reached`}:null}validateRetry(e){const t=this.coreState.core.documents[e];return t?t.status==="loaded"?{valid:!1,error:{code:J.Unknown,message:`Document ${e} is already loaded successfully`}}:t.status!=="error"?{valid:!1,error:{code:J.Unknown,message:`Document ${e} is not in error state (current state: ${t.status})`}}:this.loadOptions.has(e)?{valid:!0}:{valid:!1,error:{code:J.Unknown,message:`No retry information available for document ${e}`}}:{valid:!1,error:{code:J.NotFound,message:`Document ${e} not found`}}}retryUrlDocument(e,t){const n={id:e,url:t.url};return this.engine.openDocumentUrl(n,{password:t.password,mode:t.mode,requestOptions:t.requestOptions})}retryBufferDocument(e,t){const n={id:e,content:t.buffer};return this.engine.openDocumentBuffer(n,{password:t.password})}handleLoadTask(e,t,n){t.wait(o=>{this.dispatchCoreAction(((i,r)=>({type:Ho,payload:{documentId:i,document:r}}))(e,o))},o=>{this.handleLoadError(e,o,n)})}handleLoadError(e,t,n){var o,i,r;const a=((o=t.reason)==null?void 0:o.message)||"Failed to load document";this.logger.error("DocumentManagerPlugin",n,"Failed to load document",t),this.dispatchCoreAction(((s,l,c,u)=>({type:hr,payload:{documentId:s,error:l,errorCode:c,errorDetails:u}}))(e,a,(i=t.reason)==null?void 0:i.code,t.reason)),this.documentError$.emit({documentId:e,message:a,code:(r=t.reason)==null?void 0:r.code,reason:t.reason})}generateDocumentId(){return`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}extractNameFromUrl(e){try{const t=new URL(e),n=t.pathname.split("/").pop();if(!n)return;let o=decodeURIComponent(n);return o.toLowerCase().endsWith(".pdf")||(o+=".pdf"),o}catch{return}}async initialize(e){var t;if(this.logger.info("DocumentManagerPlugin","Initialize","Document Manager Plugin initialized",{maxDocuments:this.maxDocuments,initialDocumentsCount:((t=e.initialDocuments)==null?void 0:t.length)??0}),e.initialDocuments&&e.initialDocuments.length>0)for(const n of e.initialDocuments)try{"buffer"in n?this.openDocumentBuffer(n):"url"in n&&this.openDocumentUrl(n)}catch(o){this.logger.error("DocumentManagerPlugin","Initialize","Failed to initiate initial document load",o)}}async destroy(){await this.closeAllDocuments().toPromise(),this.loadOptions.clear(),this.documentOpened$.clear(),this.documentClosed$.clear(),this.activeDocumentChanged$.clear(),this.documentOrderChanged$.clear(),this.documentError$.clear(),super.destroy()}};ed.id="document-manager";let Po=ed;const _a="document-manager";function wp({documentId:e,children:t}){const n=je(e);return n?k(te,{children:t({documentState:n,isLoading:n.status==="loading",isError:n.status==="error",isLoaded:n.status==="loaded"})}):null}const In=()=>Te(Po.id),xp=an({manifest:{id:_a,name:"Document Manager Plugin",version:"1.0.0",provides:["document-manager"],requires:[],optional:[],defaultConfig:{maxDocuments:10}},create:(e,t)=>new Po(_a,e,t),reducer:e=>e,initialState:{}}).addUtility(function(){const{plugin:e}=Qe(Po.id),{provides:t}=In(),n=V(null),o=V(null),i=V(void 0);return L(()=>{if(e?.onOpenFileRequest)return e.onOpenFileRequest(({task:r,options:a})=>{var s;o.current=r,i.current=a,(s=n.current)==null||s.click()})},[e]),k("input",{ref:n,type:"file",accept:"application/pdf",style:{display:"none"},onChange:async r=>{var a,s,l,c,u;const h=(a=r.currentTarget.files)==null?void 0:a[0];if(!h||!t)return;const m=await h.arrayBuffer();t.openDocumentBuffer({name:h.name,buffer:m,documentId:(s=i.current)==null?void 0:s.documentId,scale:(l=i.current)==null?void 0:l.scale,rotation:(c=i.current)==null?void 0:c.rotation,autoActivate:(u=i.current)==null?void 0:u.autoActivate}).wait(g=>{var p;(p=o.current)==null||p.resolve(g)},g=>{var p;(p=o.current)==null||p.fail(g)})}})}).build(),td="commands",Cp={id:td,name:"Commands Plugin",version:"1.0.0",provides:["commands"],requires:[],optional:["i18n","ui"],defaultConfig:{commands:{}}},nd="COMMANDS/SET_DISABLED_CATEGORIES",no=e=>({type:nd,payload:e}),od=class extends Ie{constructor(e,t,n){var o;super(e,t),this.commands=new Map,this.i18n=null,this.shortcutMap=new Map,this.commandExecuted$=We(),this.commandStateChanged$=We(),this.shortcutExecuted$=We(),this.categoryChanged$=ee(),this.previousStates=new Map;const i=t.getPlugin("i18n");this.i18n=i?.provides()??null,(o=n.disabledCategories)!=null&&o.length&&this.dispatch(no(n.disabledCategories)),Object.values(n.commands).forEach(r=>{this.registerCommand(r)}),this.registry.getStore().subscribe((r,a)=>{this.onGlobalStoreChange(a)})}onDocumentClosed(e){this.previousStates.delete(e),this.logger.debug("CommandsPlugin","DocumentClosed",`Cleaned up command state cache for document: ${e}`)}async initialize(){this.logger.info("CommandsPlugin","Initialize","Commands plugin initialized")}async destroy(){this.commandExecuted$.clear(),this.commandStateChanged$.clear(),this.shortcutExecuted$.clear(),this.categoryChanged$.clear(),this.commands.clear(),this.shortcutMap.clear(),this.previousStates.clear(),super.destroy()}disableCategoryImpl(e){const t=new Set(this.state.disabledCategories);t.has(e)||(t.add(e),this.dispatch(no(Array.from(t))),this.categoryChanged$.emit({disabledCategories:Array.from(t)}))}enableCategoryImpl(e){const t=new Set(this.state.disabledCategories);t.has(e)&&(t.delete(e),this.dispatch(no(Array.from(t))),this.categoryChanged$.emit({disabledCategories:Array.from(t)}))}toggleCategoryImpl(e){this.state.disabledCategories.includes(e)?this.enableCategoryImpl(e):this.disableCategoryImpl(e)}setDisabledCategoriesImpl(e){this.dispatch(no(e)),this.categoryChanged$.emit({disabledCategories:e})}isCommandCategoryDisabled(e){var t;return!!((t=e.categories)!=null&&t.length)&&e.categories.some(n=>this.state.disabledCategories.includes(n))}buildCapability(){return{resolve:(e,t)=>this.resolve(e,t),execute:(e,t,n="ui")=>this.execute(e,t,n),getAllCommands:e=>this.getAllCommands(e),getCommandsByCategory:(e,t)=>this.getCommandsByCategory(e,t),getCommandByShortcut:e=>this.getCommandByShortcut(e),getAllShortcuts:()=>new Map(this.shortcutMap),forDocument:e=>this.createCommandScope(e),registerCommand:e=>this.registerCommand(e),unregisterCommand:e=>this.unregisterCommand(e),disableCategory:e=>this.disableCategoryImpl(e),enableCategory:e=>this.enableCategoryImpl(e),toggleCategory:e=>this.toggleCategoryImpl(e),setDisabledCategories:e=>this.setDisabledCategoriesImpl(e),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:e=>this.state.disabledCategories.includes(e),onCommandExecuted:this.commandExecuted$.on,onCommandStateChanged:this.commandStateChanged$.on,onShortcutExecuted:this.shortcutExecuted$.on,onCategoryChanged:this.categoryChanged$.on}}createCommandScope(e){return{resolve:t=>this.resolve(t,e),execute:(t,n="ui")=>this.execute(t,e,n),getAllCommands:()=>this.getAllCommands(e),getCommandsByCategory:t=>this.getCommandsByCategory(t,e),onCommandStateChanged:t=>this.commandStateChanged$.on(n=>{if(n.documentId===e){const{documentId:o,...i}=n;t(i)}})}}resolve(e,t){const n=t??this.getActiveDocumentId(),o=this.commands.get(e);if(!o)throw new Error(`Command not found: ${e}`);const i=this.registry.getStore().getState(),r=this.resolveLabel(o,i,n),a=o.shortcuts?Array.isArray(o.shortcuts)?o.shortcuts:[o.shortcuts]:void 0,s=this.resolveDynamic(o.disabled,i,n)??!1,l=this.isCommandCategoryDisabled(o),c=s||l;return{id:o.id,label:r,icon:this.resolveDynamic(o.icon,i,n),iconProps:this.resolveDynamic(o.iconProps,i,n),active:this.resolveDynamic(o.active,i,n)??!1,disabled:c,visible:this.resolveDynamic(o.visible,i,n)??!0,shortcuts:a,shortcutLabel:o.shortcutLabel,categories:o.categories,description:o.description,execute:()=>o.action({registry:this.registry,state:i,documentId:n})}}resolveLabel(e,t,n){const o=this.resolveDynamic(e.labelKey,t,n);if(o&&this.i18n){const i=this.resolveDynamic(e.labelParams,t,n);return this.i18n.t(o,{params:i,documentId:n})}return e.label?e.label:e.id}resolveDynamic(e,t,n){if(e!==void 0)return typeof e=="function"?e({registry:this.registry,state:t,documentId:n}):e}execute(e,t,n="ui"){const o=t??this.getActiveDocumentId(),i=this.resolve(e,o);i.disabled?this.logger.warn("CommandsPlugin","ExecutionBlocked",`Command '${e}' is disabled for document '${o}'`):i.visible?(i.execute(),this.commandExecuted$.emit({commandId:e,documentId:o,source:n}),this.logger.debug("CommandsPlugin","CommandExecuted",`Command '${e}' executed for document '${o}' (source: ${n})`)):this.logger.warn("CommandsPlugin","ExecutionBlocked",`Command '${e}' is not visible for document '${o}'`)}registerCommand(e){this.commands.has(e.id)&&this.logger.warn("CommandsPlugin","CommandOverwrite",`Command '${e.id}' already exists and will be overwritten`),this.commands.set(e.id,e),e.shortcuts&&(Array.isArray(e.shortcuts)?e.shortcuts:[e.shortcuts]).forEach(t=>{const n=this.normalizeShortcut(t);this.shortcutMap.set(n,e.id)}),this.logger.debug("CommandsPlugin","CommandRegistered",`Command '${e.id}' registered`)}unregisterCommand(e){const t=this.commands.get(e);t&&(t.shortcuts&&(Array.isArray(t.shortcuts)?t.shortcuts:[t.shortcuts]).forEach(n=>{const o=this.normalizeShortcut(n);this.shortcutMap.delete(o)}),this.commands.delete(e),this.logger.debug("CommandsPlugin","CommandUnregistered",`Command '${e}' unregistered`))}getCommandByShortcut(e){const t=this.normalizeShortcut(e),n=this.shortcutMap.get(t);return n?this.commands.get(n)??null:null}normalizeShortcut(e){return e.toLowerCase().split("+").sort().join("+")}getAllCommands(e){const t=e??this.getActiveDocumentId();return Array.from(this.commands.keys()).map(n=>this.resolve(n,t))}getCommandsByCategory(e,t){const n=t??this.getActiveDocumentId();return Array.from(this.commands.values()).filter(o=>{var i;return(i=o.categories)==null?void 0:i.includes(e)}).map(o=>this.resolve(o.id,n))}onGlobalStoreChange(e){Object.keys(e.core.documents).forEach(t=>{this.detectCommandChanges(t,e)})}detectCommandChanges(e,t){const n=t.core.documents[e];if(!n||n.status!=="loaded")return;const o=this.previousStates.get(e)??new Map;this.commands.forEach((i,r)=>{const a=this.resolve(r,e),s=o.get(r);if(!s)return void o.set(r,a);const l={};s.active!==a.active&&(l.active=a.active),s.disabled!==a.disabled&&(l.disabled=a.disabled),s.visible!==a.visible&&(l.visible=a.visible),s.label!==a.label&&(l.label=a.label),s.icon!==a.icon&&(l.icon=a.icon),en(s.iconProps,a.iconProps)||(l.iconProps=a.iconProps),Object.keys(l).length>0&&(o.set(r,a),this.commandStateChanged$.emit({commandId:r,documentId:e,changes:l}))}),this.previousStates.set(e,o)}};od.id="commands";let Cr=od;const Na={disabledCategories:[]},id=()=>Te(Cr.id),It=(e,t)=>{const{provides:n}=id(),[o,i]=R(()=>n?n.resolve(e,t):null);return L(()=>n?(i(n.resolve(e,t)),n.onCommandStateChanged(r=>{r.commandId===e&&r.documentId===t&&i(n.resolve(e,t))})):void i(null),[n,e,t]),o},Ip=an({manifest:Cp,create:(e,t)=>new Cr(td,e,t),reducer:(e=Na,t)=>t.type===nd?{...e,disabledCategories:t.payload}:e,initialState:Na}).addUtility(function(){const{provides:e}=id();return L(()=>{if(!e)return;const t=(function(n){return o=>{const i=o.composedPath()[0]||o.target;if(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable)return;const r=(function(l){const c=[];l.ctrlKey&&c.push("ctrl"),l.shiftKey&&c.push("shift"),l.altKey&&c.push("alt"),l.metaKey&&c.push("meta");const u=l.key.toLowerCase();return["control","shift","alt","meta"].includes(u)?null:[...c,u].sort().join("+")})(o);if(!r)return;const a=n.getCommandByShortcut(r);if(!a)return;const s=n.resolve(a.id);!s.disabled&&s.visible&&(o.preventDefault(),o.stopPropagation(),n.execute(a.id,void 0,"keyboard"))}})(e);return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]),null}).build(),rd="i18n",kp={id:rd,name:"I18n Plugin",version:"1.0.0",provides:["i18n"],requires:[],optional:[],defaultConfig:{defaultLocale:"en",locales:[{code:"en",name:"English",translations:{commands:{zoom:{in:"Zoom In",out:"Zoom Out",fitWidth:"Fit to Width",fitPage:"Fit to Page",automatic:"Automatic",level:"Zoom Level ({level}%)",inArea:"Zoom In Area"},fullscreen:{enter:"Enter Full Screen",exit:"Exit Full Screen"},rotate:{clockwise:"Rotate Clockwise",counterclockwise:"Rotate Counter-Clockwise"},menu:"Menu",sidebar:"Sidebar",search:"Search",comment:"Comment",download:"Download",print:"Print",openFile:"Open PDF",save:"Save",settings:"Settings",view:"View",annotate:"Annotate",shapes:"Shapes",redact:"Redact",fillAndSign:"Fill and Sign",form:"Form",pan:"Pan",pointer:"Pointer",undo:"Undo",redo:"Redo",copy:"Copy",screenshot:"Screenshot",nextPage:"Next Page",previousPage:"Previous Page"}}},{code:"es",name:"Espaol",translations:{commands:{zoom:{in:"Acercar",out:"Alejar",fitWidth:"Ajustar al ancho",fitPage:"Ajustar a la pgina",automatic:"Automtico",level:"Nivel de zoom ({level}%)",inArea:"Acercar rea"},fullscreen:{enter:"Pantalla completa",exit:"Salir de pantalla completa"},rotate:{clockwise:"Girar a la derecha",counterclockwise:"Girar a la izquierda"},menu:"Men",sidebar:"Barra lateral",search:"Buscar",comment:"Comentario",download:"Descargar",print:"Imprimir",openFile:"Abrir PDF",save:"Guardar",settings:"Configuracin",view:"Ver",annotate:"Anotar",shapes:"Formas",redact:"Redactar",fillAndSign:"Rellenar y firmar",form:"Formulario",pan:"Desplazar",pointer:"Puntero",undo:"Deshacer",redo:"Rehacer",copy:"Copiar",screenshot:"Captura de pantalla",nextPage:"Pgina siguiente",previousPage:"Pgina anterior"}}}]}},ad="I18N/SET_LOCALE",sd="I18N/REGISTER_LOCALE",Oa=e=>({type:ad,payload:e}),La=e=>({type:sd,payload:e}),ld=class extends Ie{constructor(e,t,n){super(e,t),this.locales=new Map,this.paramResolvers=new Map,this.paramsCache=new Map,this.localeChange$=We(),this.paramsChanged$=Fe((o,i)=>({documentId:o,...i}),{cache:!1}),this.config=n,n.locales.forEach(o=>{this.locales.set(o.code,o),this.dispatch(La(o.code))}),n.paramResolvers&&Object.entries(n.paramResolvers).forEach(([o,i])=>{this.paramResolvers.set(o,i)}),this.dispatch(Oa(n.defaultLocale)),this.registry.getStore().subscribe((o,i)=>{this.detectParamChanges(i)})}async initialize(){this.logger.info("I18nPlugin","Initialize","I18n plugin initialized")}async destroy(){this.localeChange$.clear(),this.paramsChanged$.clear(),this.paramResolvers.clear(),this.paramsCache.clear(),super.destroy()}onDocumentClosed(e){this.paramsCache.delete(e),this.paramsChanged$.clearScope(e),this.logger.debug("I18nPlugin","DocumentClosed",`Cleaned up params cache for document: ${e}`)}buildCapability(){return{t:(e,t)=>this.translate(e,t),forDocument:e=>this.createI18nScope(e),registerParamResolver:(e,t)=>this.registerParamResolver(e,t),unregisterParamResolver:e=>this.unregisterParamResolver(e),setLocale:e=>this.setLocale(e),getLocale:()=>this.state.currentLocale,getAvailableLocales:()=>[...this.state.availableLocales],getLocaleInfo:e=>this.locales.get(e)??null,registerLocale:e=>this.registerLocale(e),hasLocale:e=>this.locales.has(e),onLocaleChange:this.localeChange$.on,onParamsChanged:this.paramsChanged$.onGlobal}}createI18nScope(e){return{t:(t,n)=>this.translate(t,{documentId:e,...n}),onParamsChanged:this.paramsChanged$.forScope(e)}}translate(e,t){const n=this.locales.get(this.state.currentLocale),o=this.config.fallbackLocale?this.locales.get(this.config.fallbackLocale):null;let i=this.getNestedValue(n?.translations,e);if(!i&&o&&(i=this.getNestedValue(o.translations,e)),!i){if(!t?.fallback)return this.logger.warn("I18nPlugin","MissingTranslation",`Translation not found for key: ${e}`),e;i=t.fallback}let r=t?.params;return!r&&this.paramResolvers.has(e)&&(r=this.resolveParams(e,t?.documentId)),this.interpolate(i,r)}resolveParams(e,t){const n=this.paramResolvers.get(e);if(!n)return;const o=this.registry.getStore().getState();try{return n({state:o,documentId:t})}catch(i){return void this.logger.error("I18nPlugin","ParamResolverError",`Error resolving params for key "${e}":`,i)}}getNestedValue(e,t){if(!e)return;const n=t.split(".");let o=e;for(const i of n){if(o==null)return;o=o[i]}return typeof o=="string"?o:void 0}interpolate(e,t){return t?e.replace(/\{(\w+)\}/g,(n,o)=>{const i=t[o];return i!==void 0?String(i):n}):e}detectParamChanges(e){Object.keys(e.core.documents).forEach(t=>{this.detectDocumentParamChanges(t,e)})}detectDocumentParamChanges(e,t){const n=this.paramsCache.get(e),o=[];this.paramResolvers.forEach((i,r)=>{try{const a=i({state:t,documentId:e});en(n?.get(r),a)||(o.push(r),this.paramsCache.has(e)||this.paramsCache.set(e,new Map),this.paramsCache.get(e).set(r,a))}catch(a){this.logger.error("I18nPlugin","ParamDetectionError",`Error detecting param changes for key "${r}":`,a)}}),o.length>0&&(this.paramsChanged$.emit(e,{changedKeys:o}),this.logger.debug("I18nPlugin","ParamsChanged",`Translation params changed for document ${e}:`,o))}registerParamResolver(e,t){this.paramResolvers.has(e)&&this.logger.warn("I18nPlugin","ResolverOverwrite",`Param resolver for "${e}" already exists and will be overwritten`),this.paramResolvers.set(e,t),this.paramsCache.forEach(n=>{n.delete(e)}),this.logger.debug("I18nPlugin","ResolverRegistered",`Param resolver registered for: ${e}`)}unregisterParamResolver(e){this.paramResolvers.delete(e)&&(this.paramsCache.forEach(t=>{t.delete(e)}),this.logger.debug("I18nPlugin","ResolverUnregistered",`Param resolver unregistered for: ${e}`))}setLocale(e){if(!this.locales.has(e))return void this.logger.warn("I18nPlugin","LocaleNotFound",`Locale '${e}' is not registered`);const t=this.state.currentLocale;t!==e&&(this.dispatch(Oa(e)),this.localeChange$.emit({previousLocale:t,currentLocale:e}),this.logger.info("I18nPlugin","LocaleChanged",`Locale changed to: ${e}`))}registerLocale(e){this.locales.has(e.code)?this.logger.warn("I18nPlugin","LocaleAlreadyRegistered",`Locale '${e.code}' is already registered`):(this.locales.set(e.code,e),this.dispatch(La(e.code)),this.logger.info("I18nPlugin","LocaleRegistered",`Locale registered: ${e.code}`))}};ld.id="i18n";let Ir=ld;const $a={currentLocale:"en",availableLocales:[]},Sp={manifest:kp,create:(e,t)=>new Ir(rd,e,t),reducer:(e=$a,t)=>{switch(t.type){case ad:{const n=t.payload;return e.availableLocales.includes(n)?{...e,currentLocale:n}:(console.warn(`I18nPlugin: Locale '${n}' not available`),e)}case sd:{const n=t.payload;return e.availableLocales.includes(n)?e:{...e,availableLocales:[...e.availableLocales,n]}}default:return e}},initialState:$a},Me=e=>{const{provides:t}=Te(Ir.id),[,n]=Tl(i=>i+1,0),o=Y((i,r)=>t?t.t(i,{documentId:e,params:r?.params,fallback:r?.fallback}):r?.fallback??i,[t,e]);return L(()=>{if(!t)return;const i=t.onLocaleChange(()=>{n()}),r=e?t.forDocument(e).onParamsChanged(()=>{n()}):t.onParamsChanged(()=>{n()});return()=>{i(),r()}},[t,e]),{translate:o,locale:t?.getLocale()??"en"}};var Le=(e=>(e.Automatic="automatic",e.FitPage="fit-page",e.FitWidth="fit-width",e))(Le||{}),Gt=(e=>(e[e.Center=0]="Center",e[e.Top=1]="Top",e))(Gt||{});const kr="zoom",Pp={id:kr,name:"Zoom Plugin",version:"1.0.0",provides:["zoom"],requires:["viewport","scroll"],optional:["interaction-manager","spread"],defaultConfig:{defaultZoomLevel:Le.Automatic,minZoom:.2,maxZoom:60,zoomStep:.1,zoomRanges:[{min:.2,max:.5,step:.05},{min:.5,max:1,step:.1},{min:1,max:2,step:.2},{min:2,max:4,step:.4},{min:4,max:10,step:.8},{min:10,max:20,step:1.6},{min:20,max:40,step:3.2},{min:40,max:60,step:6.4}],presets:[{name:"Fit Page",value:Le.FitPage},{name:"Fit Width",value:Le.FitWidth},{name:"Automatic",value:Le.Automatic},{name:"25%",value:.25},{name:"50%",value:.5},{name:"100%",value:1},{name:"125%",value:1.25},{name:"150%",value:1.5},{name:"200%",value:2},{name:"400%",value:4},{name:"800%",value:8},{name:"1600%",value:16}]}},cd="ZOOM/INIT_STATE",dd="ZOOM/CLEANUP_STATE",ud="ZOOM/SET_ZOOM_LEVEL",hd="ZOOM/SET_MARQUEE_ZOOM_ACTIVE",md={zoomLevel:Le.Automatic,currentZoomLevel:1,isMarqueeZoomActive:!1},Fa={documents:{},activeDocumentId:null},gd=class extends Ie{constructor(e,t,n){var o,i,r;super(e,t),this.zoom$=We(),this.state$=ee(),this.viewportPlugin=t.getPlugin("viewport"),this.viewport=this.viewportPlugin.provides(),this.scroll=t.getPlugin("scroll").provides();const a=t.getPlugin("interaction-manager");this.interactionManager=a?.provides()??null;const s=t.getPlugin("spread");this.spread=s?.provides()??null,this.minZoom=n.minZoom??.25,this.maxZoom=n.maxZoom??10,this.zoomStep=n.zoomStep??.1,this.defaultZoomLevel=n.defaultZoomLevel,this.presets=n.presets??[],this.zoomRanges=this.normalizeRanges(n.zoomRanges??[]),this.viewport.onViewportResize(l=>this.recalcAuto(l.documentId,Gt.Top),{mode:"debounce",wait:150,keyExtractor:l=>l.documentId}),(o=this.spread)==null||o.onSpreadChange(l=>{this.recalcAuto(l.documentId,Gt.Top)}),(i=this.interactionManager)==null||i.registerMode({id:"marqueeZoom",scope:"page",exclusive:!0,cursor:"zoom-in"}),(r=this.interactionManager)==null||r.onModeChange(l=>{const c=l.activeMode==="marqueeZoom",u=this.getDocumentState(l.documentId);var h;u&&u.isMarqueeZoomActive!==c&&this.dispatch((h=l.documentId,{type:hd,payload:{documentId:h,isActive:c}}))})}onDocumentLoadingStarted(e){this.viewport.gate("zoom",e);const t={...md,zoomLevel:this.defaultZoomLevel};this.dispatch((function(n,o){return{type:cd,payload:{documentId:n,state:o}}})(e,t)),this.logger.debug("ZoomPlugin","DocumentOpened",`Initialized zoom state for document: ${e}`)}onDocumentLoaded(e){this.recalcAuto(e,Gt.Top)}onDocumentClosed(e){this.dispatch((function(t){return{type:dd,payload:t}})(e)),this.logger.debug("ZoomPlugin","DocumentClosed",`Cleaned up zoom state for document: ${e}`)}onRotationChanged(e){this.recalcAuto(e,Gt.Top)}buildCapability(){return{requestZoom:(e,t)=>this.requestZoom(e,t),requestZoomBy:(e,t)=>this.requestZoomBy(e,t),zoomIn:()=>this.zoomIn(),zoomOut:()=>this.zoomOut(),zoomToArea:(e,t)=>this.zoomToArea(e,t),enableMarqueeZoom:()=>this.enableMarqueeZoom(),disableMarqueeZoom:()=>this.disableMarqueeZoom(),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createZoomScope(e),registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),getPresets:()=>this.presets,onZoomChange:this.zoom$.on,onStateChange:this.state$.on}}createZoomScope(e){return{requestZoom:(t,n)=>this.requestZoom(t,n,e),requestZoomBy:(t,n)=>this.requestZoomBy(t,n,e),zoomIn:()=>this.zoomIn(e),zoomOut:()=>this.zoomOut(e),zoomToArea:(t,n)=>this.zoomToArea(t,n,e),enableMarqueeZoom:()=>this.enableMarqueeZoom(e),disableMarqueeZoom:()=>this.disableMarqueeZoom(e),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(e),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(e),getState:()=>this.getDocumentStateOrThrow(e),onZoomChange:t=>this.zoom$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Zoom state not found for document: ${e??"active"}`);return t}requestZoom(e,t,n){this.handleRequest({level:e,center:t},n)}requestZoomBy(e,t,n){const o=n??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(o).currentZoomLevel,r=this.toZoom(i+e);this.handleRequest({level:r,center:t},o)}zoomIn(e){const t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).currentZoomLevel;this.handleRequest({level:n,delta:this.stepFor(n)},t)}zoomOut(e){const t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).currentZoomLevel;this.handleRequest({level:n,delta:-this.stepFor(n)},t)}zoomToArea(e,t,n){const o=n??this.getActiveDocumentId();this.handleZoomToArea(o,e,t)}enableMarqueeZoom(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManager)==null||t.forDocument(n).activate("marqueeZoom")}disableMarqueeZoom(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManager)==null||t.forDocument(n).activateDefaultMode()}toggleMarqueeZoom(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManager)==null?void 0:t.forDocument(n);o?.getActiveMode()==="marqueeZoom"?o.activateDefaultMode():o?.activate("marqueeZoom")}isMarqueeZoomActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManager)==null?void 0:t.forDocument(n).getActiveMode())==="marqueeZoom"}handleRequest({level:e,delta:t=0,center:n,focus:o=Gt.Center,align:i="keep"},r){const a=r??this.getActiveDocumentId(),s=this.getDocumentStateOrThrow(a);if(!this.coreState.core.documents[a])return;const l=this.viewport.forDocument(a),c=l.getMetrics(),u=s.currentZoomLevel;if(c.clientWidth===0||c.clientHeight===0)return;const h=typeof e=="number"?e:this.computeZoomForMode(a,e,c);if(h===!1)return;const m=me(h+t,this.minZoom,this.maxZoom),g=Math.floor(1e3*m)/1e3,p=n??{vx:c.clientWidth/2,vy:o===Gt.Top?0:c.clientHeight/2},{desiredScrollLeft:v,desiredScrollTop:f}=this.computeScrollForZoomChange(a,c,u,g,p,i);isNaN(v)||isNaN(f)||this.viewportPlugin.setViewportScrollMetrics(a,{scrollLeft:v,scrollTop:f}),this.dispatch((function(b,w,x){return{type:ud,payload:{documentId:b,zoomLevel:w,currentZoomLevel:x}}})(a,typeof e=="number"?g:e,g)),this.dispatchCoreAction(((b,w)=>({type:Wo,payload:{scale:b,documentId:w}}))(g,a)),this.viewport.isGated(a)&&this.viewport.releaseGate("zoom",a),l.scrollTo({x:v,y:f,behavior:"instant"});const y={documentId:a,oldZoom:u,newZoom:g,level:e,center:p,desiredScrollLeft:v,desiredScrollTop:f,viewport:c};this.zoom$.emit(y)}computeZoomForMode(e,t,n){if(!this.coreState.core.documents[e])return!1;const o=this.scroll.forDocument(e),i=o?this.scroll.getPageGap():0,r=this.viewport.getViewportGap(),a=o.getSpreadPagesWithRotatedSize();if(!a.length||n.clientWidth===0||n.clientHeight===0)return!1;const s=n.clientWidth-2*r,l=n.clientHeight-2*r;if(s<=0||l<=0)return!1;let c=0,u=0;switch(a.forEach(h=>{const m=h.reduce((p,v,f)=>p+v.rotatedSize.width+(f?i:0),0),g=Math.max(...h.map(p=>p.rotatedSize.height));c=Math.max(c,m),u=Math.max(u,g)}),t){case Le.FitWidth:return s/c;case Le.FitPage:return Math.min(s/c,l/u);case Le.Automatic:return Math.min(s/c,1);default:return 1}}computeScrollForZoomChange(e,t,n,o,i,r="keep"){const a=this.scroll.forDocument(e).getLayout(),s=this.viewport.getViewportGap(),l=a.totalContentSize.width,c=a.totalContentSize.height,u=t.clientWidth-2*s,h=t.clientHeight-2*s,m=(C,S,M)=>S*M<C?(C-S*M)/2:0,g=m(u,l,n),p=m(h,c,n),v=m(u,l,o),f=m(h,c,o),y=(t.scrollLeft+i.vx-s-g)/n*o+s+v,b=(t.scrollTop+i.vy-s-p)/n*o+s+f,w=r==="center"?y-t.clientWidth/2:y-i.vx,x=r==="center"?b-t.clientHeight/2:b-i.vy;return{desiredScrollLeft:Math.max(0,w),desiredScrollTop:Math.max(0,x)}}handleZoomToArea(e,t,n){const o=this.coreState.core.documents[e];if(!o)return;const i=o.rotation,r=this.viewport.forDocument(e).getMetrics(),a=this.viewport.getViewportGap(),s=this.getDocumentStateOrThrow(e).currentZoomLevel,l=r.clientWidth-2*a,c=r.clientHeight-2*a,u=this.scroll.forDocument(e).getLayout(),h=u.virtualItems.find(A=>A.pageLayouts.some(I=>I.pageIndex===t));if(!h)return;const m=h.pageLayouts.find(A=>A.pageIndex===t),g=sr({width:m.width,height:m.height},n,i),p=this.toZoom(Math.min(l/g.size.width,c/g.size.height)),v=h.x+m.x,f=h.y+m.y,y=v+g.origin.x+g.size.width/2,b=f+g.origin.y+g.size.height/2,w=(A,I,P)=>I*P<A?(A-I*P)/2:0,x=w(l,u.totalContentSize.width,s),C=w(c,u.totalContentSize.height,s),S=a+x+y*s-r.scrollLeft,M=a+C+b*s-r.scrollTop;this.handleRequest({level:p,center:{vx:S,vy:M},align:"center"},e)}recalcAuto(e,t){const n=this.getDocumentState(e);n&&(n.zoomLevel!==Le.Automatic&&n.zoomLevel!==Le.FitPage&&n.zoomLevel!==Le.FitWidth||this.handleRequest({level:n.zoomLevel,focus:t},e))}normalizeRanges(e){return[...e].filter(t=>t.step>0&&t.max>t.min).sort((t,n)=>t.min-n.min)}stepFor(e){const t=this.zoomRanges.find(n=>e>=n.min&&e<n.max);return t?t.step:this.zoomStep}toZoom(e){return parseFloat(me(e,this.minZoom,this.maxZoom).toFixed(2))}registerMarqueeOnPage(e){if(!this.interactionManager)return this.logger.warn("ZoomPlugin","MissingDependency","Interaction manager plugin not loaded, marquee zoom disabled"),()=>{};const t=this.coreState.core.documents[e.documentId];if(!t||!t.document)return this.logger.warn("ZoomPlugin","DocumentNotFound","Document not found"),()=>{};const n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn("ZoomPlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const o=(function(i){const{pageSize:r,scale:a,minDragPx:s=5,onPreview:l,onCommit:c,onSmallDrag:u}=i;let h=null,m=null;return{onPointerDown:(g,p)=>{var v;h=g,m={origin:{x:g.x,y:g.y},size:{width:0,height:0}},l?.(m),(v=p.setPointerCapture)==null||v.call(p)},onPointerMove:g=>{if(!h)return;const p=me(g.x,0,r.width),v=me(g.y,0,r.height);m={origin:{x:Math.min(h.x,p),y:Math.min(h.y,v)},size:{width:Math.abs(p-h.x),height:Math.abs(v-h.y)}},l?.(m)},onPointerUp:(g,p)=>{var v;m&&(Math.max(m.size.width,m.size.height)*a>s?c?.(m):u?.()),h=null,m=null,l?.(null),(v=p.releasePointerCapture)==null||v.call(p)},onPointerCancel:(g,p)=>{var v;h=null,m=null,l?.(null),(v=p.releasePointerCapture)==null||v.call(p)}}})({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:i=>{var r,a;this.zoomToArea(e.pageIndex,i,e.documentId),(a=(r=e.callback).onCommit)==null||a.call(r,i)},onSmallDrag:()=>{var i,r;this.zoomIn(e.documentId),(r=(i=e.callback).onSmallDrag)==null||r.call(i)}});return this.interactionManager.registerHandlers({documentId:e.documentId,modeId:"marqueeZoom",handlers:o,pageIndex:e.pageIndex})}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o&&i&&(o.currentZoomLevel!==i.currentZoomLevel||o.zoomLevel!==i.zoomLevel||o.isMarqueeZoomActive!==i.isMarqueeZoomActive)&&this.state$.emit({documentId:n,state:i})}}async initialize(){this.logger.info("ZoomPlugin","Initialize","Zoom plugin initialized")}async destroy(){this.zoom$.clear(),this.state$.clear(),super.destroy()}};gd.id="zoom";let Sr=gd;const Mp={manifest:Pp,create:(e,t)=>new Sr(kr,e,t),reducer:(e=Fa,t)=>{switch(t.type){case cd:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case dd:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"ZOOM/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case ud:{const{documentId:n,zoomLevel:o,currentZoomLevel:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,zoomLevel:o,currentZoomLevel:i}}}:e}case hd:{const{documentId:n,isActive:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isMarqueeZoomActive:o}}}:e}default:return e}},initialState:Fa},Pr=()=>Te(Sr.id);function ja(e){const[t,n]=[e[0],e[1]],o=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.hypot(o,i)}function Dp(e,t={}){const{provides:n}=Te("viewport"),{provides:o}=Pr(),i=rn(oc),r=V(null);return Fo(()=>{const a=r.current,s=i?.current;if(a&&s&&o)return(function({element:l,container:c,documentId:u,zoomProvides:h,viewportGap:m=0,options:g={}}){const{enablePinch:p=!0,enableWheel:v=!0}=g;if(typeof window>"u")return()=>{};const f=h.forDocument(u),y=()=>f.getState();let b=0,w=1,x=!1,C=0,S=null,M=1,A=0,I=0,P=0,z=0,D=0,T=0,_=0,H=0,$=0,j=0,F=0,B=0,ge=0;const ue=(X,le,ae)=>Math.min(Math.max(X,le),ae),be=()=>{const X=c.clientWidth-2*m,le=l.offsetWidth,ae=le<X?(X-le)/2:0;l.style.marginLeft=`${ae}px`},ke=X=>{const le=A*X,ae=I*X;let ve=$*(1-X);const Ue=H-le/2-P,Ke=j-ge*X-P,Dt=Math.max(0,le-_),Ft=.3*_,At=Math.min(1,Dt/Ft);let at=Ue+(Ke-Ue)*At;return ae>T-2*B&&(ve=ue(z+ve,T-B-ae,B)-z),le>D-2*B&&(at=ue(P+at,D-B-le,B)-P),{tx:at,ty:ve,blend:At,finalWidth:le}},$e=X=>{w=X;const{tx:le,ty:ae}=ke(X);l.style.transformOrigin="0 0",l.style.transform=`translate(${le}px, ${ae}px) scale(${X})`},yt=()=>{l.style.transform="none",l.style.transformOrigin="0 0",w=1},bt=()=>{const{tx:X,finalWidth:le}=ke(w),ae=(w-1)*b;let ve,Ue=F;if(le<=_)ve=H;else{const Ke=1-w;ve=Math.abs(Ke)>.001?P+X/Ke:j}f.requestZoomBy(ae,{vx:ve,vy:Ue}),yt(),b=0},Je=(X,le)=>{const ae=c.getBoundingClientRect(),ve=l.getBoundingClientRect();B=m,A=ve.width,I=ve.height,P=ve.left-ae.left,z=ve.top-ae.top,D=ae.width,T=ae.height,_=c.clientWidth,H=c.clientLeft+_/2;const Ue=X-ve.left;$=le-ve.top,j=X-ae.left,F=le-ae.top,ge=A<_?j*A/_:Ue},$t=X=>{if(X.touches.length!==2)return;x=!0,b=y().currentZoomLevel,C=ja(X.touches);const le=(function(ae){const[ve,Ue]=[ae[0],ae[1]];return{x:(ve.clientX+Ue.clientX)/2,y:(ve.clientY+Ue.clientY)/2}})(X.touches);Je(le.x,le.y),X.preventDefault()},Mt=X=>{if(!x||X.touches.length!==2)return;const le=ja(X.touches);$e(le/C),X.preventDefault()},se=X=>{x&&(X.touches.length>=2||(x=!1,bt()))},we=X=>{if(!X.ctrlKey&&!X.metaKey)return;X.preventDefault(),S===null?(b=y().currentZoomLevel,M=1,Je(X.clientX,X.clientY)):clearTimeout(S);const le=1-.01*X.deltaY;M*=le,M=Math.max(.1,Math.min(10,M)),$e(M),S=setTimeout(()=>{S=null,bt(),M=1},150)},_e=f.onStateChange(()=>be()),ye=new ResizeObserver(()=>be());return ye.observe(l),ye.observe(c),be(),p&&(c.addEventListener("touchstart",$t,{passive:!1}),c.addEventListener("touchmove",Mt,{passive:!1}),c.addEventListener("touchend",se),c.addEventListener("touchcancel",se)),v&&c.addEventListener("wheel",we,{passive:!1}),()=>{p&&(c.removeEventListener("touchstart",$t),c.removeEventListener("touchmove",Mt),c.removeEventListener("touchend",se),c.removeEventListener("touchcancel",se)),v&&c.removeEventListener("wheel",we),S&&clearTimeout(S),_e(),ye.disconnect(),yt(),l.style.marginLeft=""}})({element:a,container:s,documentId:e,zoomProvides:o,viewportGap:n?.getViewportGap()||0,options:t})},[n,o,e,i,t.enablePinch,t.enableWheel]),{elementRef:r}}function Ap({children:e,documentId:t,style:n,enablePinch:o=!0,enableWheel:i=!0,...r}){const a=K(()=>({enablePinch:o,enableWheel:i}),[o,i]),{elementRef:s}=Dp(t,a);return k("div",{ref:s,...r,style:{...n,display:"inline-block",overflow:"visible",boxSizing:"border-box"},children:e})}const zp=({documentId:e,pageIndex:t,scale:n,className:o,stroke:i="rgba(33,150,243,0.8)",fill:r="rgba(33,150,243,0.15)"})=>{const{provides:a}=Pr(),s=je(e),[l,c]=R(null),u=K(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]);return L(()=>{if(a)return a.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:c}})},[a,e,t,u]),l?k("div",{style:{position:"absolute",pointerEvents:"none",left:l.origin.x*u,top:l.origin.y*u,width:l.size.width*u,height:l.size.height*u,border:`1px solid ${i}`,background:r,boxSizing:"border-box"},className:o}):null},pd=class extends Ie{constructor(e,t,n){super(e,t),this.config=n}buildCapability(){return{renderPage:e=>this.renderPage(e),renderPageRect:e=>this.renderPageRect(e),forDocument:e=>this.createRenderScope(e)}}createRenderScope(e){return{renderPage:t=>this.renderPage(t,e),renderPageRect:t=>this.renderPageRect(t,e)}}renderPage({pageIndex:e,options:t},n){const o=n??this.getActiveDocumentId(),i=this.coreState.core.documents[o];if(!i?.document)throw new Error(`Document ${o} not loaded`);const r=i.document.pages.find(s=>s.index===e);if(!r)throw new Error(`Page ${e} not found in document ${o}`);const a={...t??{},withForms:t?.withForms??this.config.withForms??!1,withAnnotations:t?.withAnnotations??this.config.withAnnotations??!1,imageType:t?.imageType??this.config.defaultImageType??"image/png",imageQuality:t?.imageQuality??this.config.defaultImageQuality??.92};return this.engine.renderPage(i.document,r,a)}renderPageRect({pageIndex:e,rect:t,options:n},o){const i=o??this.getActiveDocumentId(),r=this.coreState.core.documents[i];if(!r?.document)throw new Error(`Document ${i} not loaded`);const a=r.document.pages.find(l=>l.index===e);if(!a)throw new Error(`Page ${e} not found in document ${i}`);const s={...n??{},withForms:n?.withForms??this.config.withForms??!1,withAnnotations:n?.withAnnotations??this.config.withAnnotations??!1,imageType:n?.imageType??this.config.defaultImageType??"image/png",imageQuality:n?.imageQuality??this.config.defaultImageQuality??.92};return this.engine.renderPageRect(r.document,a,t,s)}async initialize(e){this.logger.info("RenderPlugin","Initialize","Render plugin initialized")}async destroy(){super.destroy()}};pd.id="render";let Mr=pd;const Ua="render",Tp={manifest:{id:Ua,name:"Render Plugin",version:"1.0.0",provides:["render"],requires:[],optional:[],defaultConfig:{}},create:(e,t)=>new Mr(Ua,e,t),reducer:()=>{},initialState:{}};function Ep({documentId:e,pageIndex:t,scale:n,dpr:o,style:i,...r}){const{provides:a}=Te(Mr.id),s=je(e),[l,c]=R(null),u=V(null),h=K(()=>s&&s.pageRefreshVersions[t]||0,[s,t]),m=K(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]),g=K(()=>o!==void 0?o:window.devicePixelRatio,[o]);return L(()=>{if(!a)return;const p=a.forDocument(e).renderPage({pageIndex:t,options:{scaleFactor:m,dpr:g}});return p.wait(v=>{const f=URL.createObjectURL(v);c(f),u.current=f},ze),()=>{u.current?(URL.revokeObjectURL(u.current),u.current=null):p.abort({code:J.Cancelled,message:"canceled render task"})}},[e,t,m,g,a,h]),k(te,{children:l&&k("img",{src:l,onLoad:()=>{u.current&&(URL.revokeObjectURL(u.current),u.current=null)},...r,style:{width:"100%",height:"100%",...i||{}}})})}const fd="rotate",Rp={id:fd,name:"Rotate Plugin",version:"1.0.0",provides:["rotate"],requires:[],optional:[],defaultConfig:{}},vd="ROTATE/INIT_STATE",yd="ROTATE/CLEANUP_STATE",bd="ROTATE/SET_ROTATION",wd=class extends Ie{constructor(e,t,n){super(e,t),this.rotate$=ee(),this.defaultRotation=n.defaultRotation??0}onDocumentLoadingStarted(e){const t={rotation:this.defaultRotation};this.dispatch((function(n,o){return{type:vd,payload:{documentId:n,state:o}}})(e,t)),this.dispatchCoreAction(ya(this.defaultRotation,e)),this.logger.debug("RotatePlugin","DocumentOpened",`Initialized rotation state for document: ${e}`)}onDocumentClosed(e){this.dispatch((function(t){return{type:yd,payload:t}})(e)),this.logger.debug("RotatePlugin","DocumentClosed",`Cleaned up rotation state for document: ${e}`)}buildCapability(){return{setRotation:e=>this.setRotationForDocument(e),getRotation:()=>this.getRotationForDocument(),rotateForward:()=>this.rotateForward(),rotateBackward:()=>this.rotateBackward(),forDocument:e=>this.createRotateScope(e),onRotateChange:this.rotate$.on}}createRotateScope(e){return{setRotation:t=>this.setRotationForDocument(t,e),getRotation:()=>this.getRotationForDocument(e),rotateForward:()=>this.rotateForward(e),rotateBackward:()=>this.rotateBackward(e),onRotateChange:t=>this.rotate$.on(n=>{n.documentId===e&&t(n.rotation)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Rotation state not found for document: ${e??"active"}`);return t}setRotationForDocument(e,t){const n=t??this.getActiveDocumentId(),o=this.coreState.core.documents[n];if(!o?.document)throw new Error(`Document ${n} not loaded`);this.dispatch((function(i,r){return{type:bd,payload:{documentId:i,rotation:r}}})(n,e)),this.dispatchCoreAction(ya(e,n)),this.rotate$.emit({documentId:n,rotation:e})}getRotationForDocument(e){return this.getDocumentStateOrThrow(e).rotation}rotateForward(e){const t=e??this.getActiveDocumentId(),n=this.getRotationForDocument(t),o=(n+1)%4;this.setRotationForDocument(o,t)}rotateBackward(e){const t=e??this.getActiveDocumentId(),n=this.getRotationForDocument(t),o=(n+3)%4;this.setRotationForDocument(o,t)}getMatrixAsString(e){return(function(t,n,o){const[i,r,a,s,l,c]=(function(u,h,m){let g=1,p=0,v=0,f=1,y=0,b=0;switch(u){case 1:g=0,p=1,v=-1,f=0,y=m;break;case 2:g=-1,p=0,v=0,f=-1,y=h,b=m;break;case 3:g=0,p=-1,v=1,f=0,b=h}return[g,p,v,f,y,b]})(t,n,o);return`matrix(${i},${r},${a},${s},${l},${c})`})(e.rotation,e.width,e.height)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o?.rotation!==i.rotation&&this.logger.debug("RotatePlugin","RotationChanged",`Rotation changed for document ${n}: ${o?.rotation??0} -> ${i.rotation}`)}}async initialize(e){this.logger.info("RotatePlugin","Initialize","Rotate plugin initialized")}async destroy(){this.rotate$.clear(),super.destroy()}};wd.id="rotate";let Dr=wd;const Ha={documents:{},activeDocumentId:null},_p={manifest:Rp,create:(e,t)=>new Dr(fd,e,t),reducer:(e=Ha,t)=>{switch(t.type){case vd:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case yd:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"ROTATE/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case bd:{const{documentId:n,rotation:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,rotation:o}}}:e}default:return e}},initialState:Ha};function Np({children:e,documentId:t,pageIndex:n,rotation:o,scale:i,style:r,...a}){var s,l,c,u;const{plugin:h}=Qe(Dr.id),m=je(t),g=(l=(s=m?.document)==null?void 0:s.pages)==null?void 0:l[n],p=((c=g?.size)==null?void 0:c.width)??0,v=((u=g?.size)==null?void 0:u.height)??0,f=o??m?.rotation??0,y=i??m?.scale??1,b=h?.getMatrixAsString({width:p*y,height:v*y,rotation:f})??"matrix(1, 0, 0, 1, 0, 0)";return g?k("div",{...a,style:{position:"absolute",transformOrigin:"0 0",transform:b,...r},children:e}):null}const xd="SEARCH/INIT_STATE",Cd="SEARCH/CLEANUP_STATE",Id="SEARCH/START_SEARCH_SESSION",kd="SEARCH/STOP_SEARCH_SESSION",Sd="SEARCH/SET_SEARCH_FLAGS",Pd="SEARCH/SET_SHOW_ALL_RESULTS",Md="SEARCH/START_SEARCH",Dd="SEARCH/SET_SEARCH_RESULTS",Ad="SEARCH/APPEND_SEARCH_RESULTS",zd="SEARCH/SET_ACTIVE_RESULT_INDEX";function Ba(e,t){return{type:Pd,payload:{documentId:e,showAll:t}}}function hi(e,t,n,o){return{type:Dd,payload:{documentId:e,results:t,total:n,activeResultIndex:o}}}function Wa(e,t){return{type:zd,payload:{documentId:e,index:t}}}const Mo={flags:[],results:[],total:0,activeResultIndex:-1,showAllResults:!0,query:"",loading:!1,active:!1},qa={documents:{}},zt=(e,t,n)=>{const o=e.documents[t]||Mo;return{...e,documents:{...e.documents,[t]:{...o,...n}}}},Td=class extends Ie{constructor(e,t,n){super(e,t),this.searchStop$=ee(),this.searchStart$=ee(),this.searchResult$=ee(),this.searchActiveResultChange$=ee(),this.searchResultState$=ee(),this.searchState$=ee(),this.currentTask=new Map,this.pluginConfig=n}onDocumentLoadingStarted(e){const t={...Mo,flags:this.pluginConfig.flags||[],showAllResults:this.pluginConfig.showAllResults??!0};this.dispatch((function(n,o){return{type:xd,payload:{documentId:n,state:o}}})(e,t))}onDocumentClosed(e){this.stopSearchSession(e),this.dispatch((function(t){return{type:Cd,payload:t}})(e)),this.currentTask.delete(e)}async initialize(){}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&(this.searchState$.emit({documentId:n,state:i}),o&&o.results===i.results&&o.activeResultIndex===i.activeResultIndex&&o.showAllResults===i.showAllResults&&o.active===i.active||this.searchResultState$.emit({documentId:n,state:{results:i.results,activeResultIndex:i.activeResultIndex,showAllResults:i.showAllResults,active:i.active}}))}}buildCapability(){const e=n=>n??this.getActiveDocumentId(),t=n=>{const o=e(n),i=this.state.documents[o];if(!i)throw new Error(`Search state not found for document ${o}`);return i};return{startSearch:n=>this.startSearchSession(e(n)),stopSearch:n=>this.stopSearchSession(e(n)),searchAllPages:(n,o)=>this.searchAllPages(n,e(o)),nextResult:n=>this.nextResult(e(n)),previousResult:n=>this.previousResult(e(n)),goToResult:(n,o)=>this.goToResult(n,e(o)),setShowAllResults:(n,o)=>this.dispatch(Ba(e(o),n)),getShowAllResults:n=>t(n).showAllResults,getFlags:n=>t(n).flags,setFlags:(n,o)=>this.setFlags(n,e(o)),getState:n=>t(n),forDocument:this.createSearchScope.bind(this),onSearchResult:this.searchResult$.on,onSearchStart:this.searchStart$.on,onSearchStop:this.searchStop$.on,onActiveResultChange:this.searchActiveResultChange$.on,onSearchResultStateChange:this.searchResultState$.on,onStateChange:this.searchState$.on}}createSearchScope(e){const t=()=>{const n=this.state.documents[e];if(!n)throw new Error(`Search state not found for document ${e}`);return n};return{startSearch:()=>this.startSearchSession(e),stopSearch:()=>this.stopSearchSession(e),searchAllPages:n=>this.searchAllPages(n,e),nextResult:()=>this.nextResult(e),previousResult:()=>this.previousResult(e),goToResult:n=>this.goToResult(n,e),setShowAllResults:n=>this.dispatch(Ba(e,n)),getShowAllResults:()=>t().showAllResults,getFlags:()=>t().flags,setFlags:n=>this.setFlags(n,e),getState:t,onSearchResult:n=>this.searchResult$.on(o=>{o.documentId===e&&n(o.results)}),onSearchStart:n=>this.searchStart$.on(o=>{o.documentId===e&&n()}),onSearchStop:n=>this.searchStop$.on(o=>{o.documentId===e&&n()}),onActiveResultChange:n=>this.searchActiveResultChange$.on(o=>{o.documentId===e&&n(o.index)}),onSearchResultStateChange:n=>this.searchResultState$.on(o=>{o.documentId===e&&n(o.state)}),onStateChange:n=>this.searchState$.on(o=>{o.documentId===e&&n(o.state)})}}setFlags(e,t){this.dispatch((function(o,i){return{type:Sd,payload:{documentId:o,flags:i}}})(t,e));const n=this.state.documents[t];n?.active&&this.searchAllPages(n.query,t,!0)}notifySearchStart(e){this.searchStart$.emit({documentId:e})}notifySearchStop(e){this.searchStop$.emit({documentId:e})}notifyActiveResultChange(e,t){this.searchActiveResultChange$.emit({documentId:e,index:t})}startSearchSession(e){this.getCoreDocument(e)&&(this.dispatch((function(t){return{type:Id,payload:{documentId:t}}})(e)),this.notifySearchStart(e))}stopSearchSession(e){var t;const n=this.state.documents[e];if(!n?.active)return;const o=this.currentTask.get(e);if(o){try{(t=o.abort)==null||t.call(o,{code:J.Cancelled,message:"search stopped"})}catch{}this.currentTask.delete(e)}this.dispatch((function(i){return{type:kd,payload:{documentId:i}}})(e)),this.notifySearchStop(e)}searchAllPages(e,t,n=!1){var o;const i=this.state.documents[t];if(!i)return de.reject({code:J.NotFound,message:"Search state not initialized"});const r=this.getCoreDocument(t);if(!r?.document)return de.reject({code:J.NotFound,message:"Document not loaded"});const a=e.trim();if(i.query===a&&!n)return de.resolve({results:i.results,total:i.total});const s=this.currentTask.get(t);if(s){try{(o=s.abort)==null||o.call(s,{code:J.Cancelled,message:"new search"})}catch{}this.currentTask.delete(t)}if(this.dispatch((function(c,u){return{type:Md,payload:{documentId:c,query:u}}})(t,a)),!a)return this.dispatch(hi(t,[],0,-1)),de.resolve({results:[],total:0});i.active||this.startSearchSession(t);const l=this.engine.searchAllPages(r.document,a,{flags:i.flags});return this.currentTask.set(t,l),l.onProgress(c=>{var u;(u=c?.results)!=null&&u.length&&this.currentTask.get(t)===l&&(this.dispatch((function(h,m){return{type:Ad,payload:{documentId:h,results:m}}})(t,c.results)),this.state.documents[t].activeResultIndex===-1&&(this.dispatch(Wa(t,0)),this.notifyActiveResultChange(t,0)))}),l.wait(c=>{this.currentTask.delete(t);const u=c.total>0?0:-1;this.dispatch(hi(t,c.results,c.total,u)),this.searchResult$.emit({documentId:t,results:c}),c.total>0&&this.notifyActiveResultChange(t,0)},c=>{var u;((u=c?.reason)==null?void 0:u.code)!==J.Cancelled&&(console.error("Error during search:",c),this.dispatch(hi(t,[],0,-1))),this.currentTask.delete(t)}),l}nextResult(e){const t=this.state.documents[e];if(!t||t.results.length===0)return-1;const n=t.activeResultIndex>=t.results.length-1?0:t.activeResultIndex+1;return this.goToResult(n,e)}previousResult(e){const t=this.state.documents[e];if(!t||t.results.length===0)return-1;const n=t.activeResultIndex<=0?t.results.length-1:t.activeResultIndex-1;return this.goToResult(n,e)}goToResult(e,t){const n=this.state.documents[t];return!n||n.results.length===0||e<0||e>=n.results.length?-1:(this.dispatch(Wa(t,e)),this.notifyActiveResultChange(t,e),e)}async destroy(){for(const e of Object.keys(this.state.documents))this.stopSearchSession(e);this.searchResult$.clear(),this.searchStart$.clear(),this.searchStop$.clear(),this.searchActiveResultChange$.clear(),this.searchResultState$.clear(),this.searchState$.clear(),super.destroy()}};Td.id="search";let Ar=Td;const Ga="search",Op={manifest:{id:Ga,name:"Search Plugin",version:"1.0.0",provides:["search"],requires:[],optional:[],defaultConfig:{flags:[]}},create:(e,t)=>new Ar(Ga,e,t),reducer:(e=qa,t)=>{switch(t.type){case xd:return{...e,documents:{...e.documents,[t.payload.documentId]:t.payload.state}};case Cd:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i}}case Id:return zt(e,t.payload.documentId,{active:!0});case kd:return zt(e,t.payload.documentId,{results:[],total:0,activeResultIndex:-1,query:"",loading:!1,active:!1});case Sd:return zt(e,t.payload.documentId,{flags:t.payload.flags});case Pd:return zt(e,t.payload.documentId,{showAllResults:t.payload.showAll});case Md:return zt(e,t.payload.documentId,{loading:!0,query:t.payload.query,results:[],total:0,activeResultIndex:-1});case Ad:{const{documentId:n,results:o}=t.payload,i=e.documents[n];if(!i)return e;const r=[...i.results,...o],a=i.activeResultIndex===-1&&r.length>0?0:i.activeResultIndex;return zt(e,n,{results:r,total:r.length,activeResultIndex:a,loading:!0})}case Dd:{const{documentId:n,results:o,total:i,activeResultIndex:r}=t.payload;return zt(e,n,{results:o,total:i,activeResultIndex:r,loading:!1})}case zd:return zt(e,t.payload.documentId,{activeResultIndex:t.payload.index});default:return e}},initialState:qa},Ed=()=>Te(Ar.id);function Lp({documentId:e,pageIndex:t,scale:n,style:o,highlightColor:i="#FFFF00",activeHighlightColor:r="#FFBF00",...a}){const{provides:s}=Ed(),[l,c]=R(null),u=je(e),h=K(()=>s?.forDocument(e),[s,e]),m=K(()=>n!==void 0?n:u?.scale??1,[n,u?.scale]);return L(()=>{if(!h)return void c(null);const g=h.getState();return c({results:g.results,activeResultIndex:g.activeResultIndex,showAllResults:g.showAllResults,active:g.active}),h.onSearchResultStateChange(p=>{c(p)})},[h]),!l||!l.active?null:k("div",{style:{...o,pointerEvents:"none"},...a,children:l.results.map((g,p)=>({result:g,originalIndex:p})).filter(({result:g})=>g.pageIndex===t).filter(({originalIndex:g})=>l.showAllResults||g===l.activeResultIndex).map(({result:g,originalIndex:p})=>g.rects.map((v,f)=>k("div",{style:{position:"absolute",top:v.origin.y*m,left:v.origin.x*m,width:v.size.width*m,height:v.size.height*m,backgroundColor:p===l.activeResultIndex?r:i,mixBlendMode:"multiply",transform:"scale(1.02)",transformOrigin:"center",transition:"opacity .3s ease-in-out",opacity:1}},`${p}-${f}`)))})}const Kt="selection",$p={id:Kt,name:"Selection Plugin",version:"1.0.0",provides:["selection"],requires:["interaction-manager"],optional:["viewport","scroll"],defaultConfig:{menuHeight:40}},Rd="SELECTION/INIT_STATE",_d="SELECTION/CLEANUP_STATE",Nd="SELECTION/CACHE_PAGE_GEOMETRY",Od="SELECTION/SET_SELECTION",Ld="SELECTION/START_SELECTION",$d="SELECTION/END_SELECTION",Fd="SELECTION/CLEAR_SELECTION",jd="SELECTION/SET_RECTS",Ud="SELECTION/SET_SLICES",Hd={geometry:{},rects:{},slices:{},selection:null,active:!1,selecting:!1},Va={documents:{}},wt=(e,t,n)=>({...e,documents:{...e.documents,[t]:n}});function _n(e,t){return e.rects[t]??[]}function hn(e,t){return lr(_n(e,t))}function mi(e){const t=[],n=e.rects;for(const o in n){const i=Number(o),r=lr(n[i]);r&&t.push({page:i,rect:r})}return t}function Ka(e,t){const n=e.rects[t]||[];if(n.length===0)return null;const o=hn(e,t);return o?{pageIndex:t,rect:o,segmentRects:n}:null}function Za(e){const t=[],n=Object.keys(e.rects).map(Number);for(const o of n){const i=e.rects[o]||[];if(i.length===0)continue;const r=hn(e,o);r&&t.push({pageIndex:o,rect:r,segmentRects:i})}return t}function Ya(e,t){for(const n of e.runs){if(!(t.y>=n.rect.y&&t.y<=n.rect.y+n.rect.height&&t.x>=n.rect.x&&t.x<=n.rect.x+n.rect.width))continue;const o=n.glyphs.findIndex(i=>t.x>=i.x&&t.x<=i.x+i.width&&t.y>=i.y&&t.y<=i.y+i.height);if(o!==-1)return n.charStart+o}return-1}function Fp(e,t,n){if(!e||!t||n<e.start.page||n>e.end.page)return null;const o=n===e.start.page?e.start.index:0,i=t.runs[t.runs.length-1],r=i.charStart+i.glyphs.length-1;return{from:o,to:n===e.end.page?e.end.index:r}}function jp(e,t,n,o=!0){const i=[];for(const r of e.runs){const a=r.charStart,s=a+r.glyphs.length-1;if(s<t||a>n)continue;const l=Math.max(t,a)-a,c=Math.min(n,s)-a;let u=1/0,h=-1/0,m=1/0,g=-1/0,p=0;for(let v=l;v<=c;v++){const f=r.glyphs[v];f.flags!==2&&(u=Math.min(u,f.x),h=Math.max(h,f.x+f.width),m=Math.min(m,f.y),g=Math.max(g,f.y+f.height),p++)}u!==1/0&&p>0&&i.push({rect:{origin:{x:u,y:m},size:{width:h-u,height:g-m}},charCount:p})}return o?(function(r){const a=[];let s=null,l=null;for(const c of r)s&&l?Hp(s,c)?l=Bd(l,c.rect):(a.push(l),l=c.rect):l=c.rect,s=c;return l&&!$i(l)&&a.push(l),a})(i):i.map(r=>r.rect)}function Bd(e,t){const n=Math.min(e.origin.x,t.origin.x),o=Math.min(e.origin.y,t.origin.y);return{origin:{x:n,y:o},size:{width:Math.max(e.origin.x+e.size.width,t.origin.x+t.size.width)-n,height:Math.max(e.origin.y+e.size.height,t.origin.y+t.size.height)-o}}}function $i(e){return e.size.width<=0||e.size.height<=0}function Up(e,t){if($i(e)||$i(t))return 0;const n=Bd(e,t);return n.size.height===e.size.height||n.size.height===t.size.height?1:(function(i,r){const a=Math.max(i.origin.x,r.origin.x),s=Math.max(i.origin.y,r.origin.y),l=Math.min(i.origin.x+i.size.width,r.origin.x+r.size.width),c=Math.min(i.origin.y+i.size.height,r.origin.y+r.size.height);return{origin:{x:a,y:s},size:{width:Math.max(0,l-a),height:Math.max(0,c-s)}}})(e,t).size.height/n.size.height}function Hp(e,t){const n=e.rect,o=t.rect;if(Up(n,o)<.8)return!1;const i=1*n.size.width/e.charCount,r=1*o.size.width/t.charCount,a=n.origin.x-i,s=n.origin.x+n.size.width+i,l=o.origin.x-r;return a<o.origin.x+o.size.width+r&&s>l}const Wd=class extends Ie{constructor(e,t,n){var o,i,r;super(e,t),this.enabledModesPerDoc=new Map,this.selecting=new Map,this.anchor=new Map,this.marqueeEnabled=new Map,this.marqueePage=new Map,this.pageCallbacks=new Map,this.menuPlacement$=Fe((s,l)=>({documentId:s,placement:l})),this.selChange$=Fe((s,l)=>({documentId:s,selection:l})),this.textRetrieved$=Fe((s,l)=>({documentId:s,text:l})),this.copyToClipboard$=Fe((s,l)=>({documentId:s,text:l}),{cache:!1}),this.beginSelection$=Fe((s,l)=>({documentId:s,page:l.page,index:l.index}),{cache:!1}),this.endSelection$=Fe(s=>({documentId:s}),{cache:!1}),this.marqueeChange$=Fe((s,l)=>({documentId:s,pageIndex:l.pageIndex,rect:l.rect}),{cache:!1}),this.marqueeEnd$=Fe((s,l)=>({documentId:s,pageIndex:l.pageIndex,rect:l.rect}),{cache:!1}),this.viewportCapability=null,this.scrollCapability=null,this.config=n,this.menuHeight=n.menuHeight??40;const a=t.getPlugin("interaction-manager");if(!a)throw new Error("SelectionPlugin: InteractionManagerPlugin is required.");this.interactionManagerCapability=a.provides(),this.viewportCapability=((o=t.getPlugin("viewport"))==null?void 0:o.provides())??null,this.scrollCapability=((i=t.getPlugin("scroll"))==null?void 0:i.provides())??null,this.coreStore.onAction(xn,s=>{const{documentId:l,pageIndexes:c}=s.payload,u=c.map(h=>this.getNewPageGeometryAndCache(l,h));fe.all(u).wait(()=>{c.forEach(h=>{this.notifyPage(l,h)})},ze)}),(r=this.viewportCapability)==null||r.onViewportChange(s=>{this.recalculateMenuPlacement(s.documentId)},{mode:"throttle",wait:100})}onDocumentLoadingStarted(e){this.dispatch(((n,o)=>({type:Rd,payload:{documentId:n,state:o}}))(e,Hd)),this.enabledModesPerDoc.set(e,new Map([["pointerMode",{showRects:!0}]])),this.pageCallbacks.set(e,new Map),this.selecting.set(e,!1),this.anchor.set(e,void 0);const t=this.config.marquee;this.marqueeEnabled.set(e,t?.enabled!==!1)}onDocumentClosed(e){this.dispatch((t=>({type:_d,payload:t}))(e)),this.enabledModesPerDoc.delete(e),this.pageCallbacks.delete(e),this.selecting.delete(e),this.anchor.delete(e),this.marqueeEnabled.delete(e),this.marqueePage.delete(e),this.selChange$.clearScope(e),this.textRetrieved$.clearScope(e),this.copyToClipboard$.clearScope(e),this.beginSelection$.clearScope(e),this.endSelection$.clearScope(e),this.menuPlacement$.clearScope(e),this.marqueeChange$.clearScope(e),this.marqueeEnd$.clearScope(e)}async initialize(){}async destroy(){this.selChange$.clear(),this.textRetrieved$.clear(),this.copyToClipboard$.clear(),this.beginSelection$.clear(),this.endSelection$.clear(),this.menuPlacement$.clear(),this.marqueeChange$.clear(),this.marqueeEnd$.clear(),super.destroy()}buildCapability(){const e=t=>t??this.getActiveDocumentId();return{getFormattedSelection:t=>Za(this.getDocumentState(e(t))),getFormattedSelectionForPage:(t,n)=>Ka(this.getDocumentState(e(n)),t),getHighlightRectsForPage:(t,n)=>_n(this.getDocumentState(e(n)),t),getHighlightRects:t=>this.getDocumentState(e(t)).rects,getBoundingRectForPage:(t,n)=>hn(this.getDocumentState(e(n)),t),getBoundingRects:t=>mi(this.getDocumentState(e(t))),getSelectedText:t=>this.getSelectedText(e(t)),clear:t=>this.clearSelection(e(t)),copyToClipboard:t=>this.copyToClipboard(e(t)),getState:t=>this.getDocumentState(e(t)),enableForMode:(t,n,o)=>{var i;return(i=this.enabledModesPerDoc.get(e(o)))==null?void 0:i.set(t,{showRects:!0,...n})},isEnabledForMode:(t,n)=>{var o;return((o=this.enabledModesPerDoc.get(e(n)))==null?void 0:o.has(t))??!1},setMarqueeEnabled:(t,n)=>this.setMarqueeEnabled(e(n),t),isMarqueeEnabled:t=>this.isMarqueeEnabled(e(t)),forDocument:this.createSelectionScope.bind(this),onCopyToClipboard:this.copyToClipboard$.onGlobal,onSelectionChange:this.selChange$.onGlobal,onTextRetrieved:this.textRetrieved$.onGlobal,onBeginSelection:this.beginSelection$.onGlobal,onEndSelection:this.endSelection$.onGlobal,onMarqueeChange:this.marqueeChange$.onGlobal,onMarqueeEnd:this.marqueeEnd$.onGlobal}}createSelectionScope(e){return{getFormattedSelection:()=>Za(this.getDocumentState(e)),getFormattedSelectionForPage:t=>Ka(this.getDocumentState(e),t),getHighlightRectsForPage:t=>_n(this.getDocumentState(e),t),getHighlightRects:()=>this.getDocumentState(e).rects,getBoundingRectForPage:t=>hn(this.getDocumentState(e),t),getBoundingRects:()=>mi(this.getDocumentState(e)),getSelectedText:()=>this.getSelectedText(e),clear:()=>this.clearSelection(e),copyToClipboard:()=>this.copyToClipboard(e),getState:()=>this.getDocumentState(e),setMarqueeEnabled:t=>this.setMarqueeEnabled(e,t),isMarqueeEnabled:()=>this.isMarqueeEnabled(e),onSelectionChange:this.selChange$.forScope(e),onTextRetrieved:this.textRetrieved$.forScope(e),onCopyToClipboard:this.copyToClipboard$.forScope(e),onBeginSelection:this.beginSelection$.forScope(e),onEndSelection:this.endSelection$.forScope(e),onMarqueeChange:this.marqueeChange$.forScope(e),onMarqueeEnd:this.marqueeEnd$.forScope(e)}}getDocumentState(e){const t=this.state.documents[e];if(!t)throw new Error(`Selection state not found for document: ${e}`);return t}onMenuPlacement(e,t){return this.menuPlacement$.forScope(e)(t)}registerSelectionOnPage(e){var t;const{documentId:n,pageIndex:o,onRectsChange:i}=e,r=this.state.documents[n];if(!r)return this.logger.warn("SelectionPlugin","RegisterFailed",`Cannot register selection on page ${o} for document ${n}: document state not initialized.`),()=>{};(t=this.pageCallbacks.get(n))==null||t.set(o,i);const a=this.getOrLoadGeometry(n,o),s=this.interactionManagerCapability.forDocument(n),l=this.enabledModesPerDoc.get(n);i({rects:_n(r,o),boundingRect:hn(r,o)});const c=(function(h){return{onPointerDown:(m,g,p)=>{if(!h.isEnabled(p))return;h.onClear();const v=h.getGeometry();if(v){const f=Ya(v,m);f!==-1&&(h.onBegin(f),g.stopImmediatePropagation())}},onPointerMove:(m,g,p)=>{if(!h.isEnabled(p))return;const v=h.getGeometry();if(v){const f=Ya(v,m);h.setCursor(f!==-1?"text":null),h.isSelecting()&&f!==-1&&(h.onUpdate(f),g.stopImmediatePropagation())}},onPointerUp:(m,g,p)=>{h.isEnabled(p)&&h.onEnd()},onHandlerActiveEnd:m=>{h.isEnabled(m)&&h.onClear()}}})({getGeometry:()=>this.getDocumentState(n).geometry[o],isEnabled:h=>l?.has(h)??!1,onBegin:h=>this.beginSelection(n,o,h),onUpdate:h=>this.updateSelection(n,o,h),onEnd:()=>this.endSelection(n),onClear:()=>this.clearSelection(n),isSelecting:()=>this.selecting.get(n)??!1,setCursor:h=>h?s.setCursor("selection-text",h,10):s.removeCursor("selection-text")}),u=this.interactionManagerCapability.registerAlways({scope:{type:"page",documentId:n,pageIndex:o},handlers:c});return()=>{var h;u(),(h=this.pageCallbacks.get(n))==null||h.delete(o),a.abort({code:J.Cancelled,message:"Cleanup"})}}registerMarqueeOnPage(e){var t;const{documentId:n,pageIndex:o,scale:i,onRectChange:r}=e;if(!this.state.documents[n])return this.logger.warn("SelectionPlugin","RegisterMarqueeFailed",`Cannot register marquee on page ${o} for document ${n}: document state not initialized.`),()=>{};const a=this.coreState.core.documents[n];if(!a||!a.document)return this.logger.warn("SelectionPlugin","DocumentNotFound",`Cannot register marquee on page ${o}: document not found`),()=>{};const s=a.document.pages[o];if(!s)return this.logger.warn("SelectionPlugin","PageNotFound",`Cannot register marquee on page ${o}: page not found`),()=>{};const l=(function(c){const{pageSize:u,scale:h,minDragPx:m=5}=c;let g=null,p=null;return{onPointerDown:(v,f,y)=>{var b;c.isEnabled(y)&&(g=v,p={origin:{x:v.x,y:v.y},size:{width:0,height:0}},c.onBegin(v),(b=f.setPointerCapture)==null||b.call(f))},onPointerMove:(v,f,y)=>{if(!g||!c.isEnabled(y))return;const b=me(v.x,0,u.width),w=me(v.y,0,u.height);p={origin:{x:Math.min(g.x,b),y:Math.min(g.y,w)},size:{width:Math.abs(b-g.x),height:Math.abs(w-g.y)}},c.onChange(p)},onPointerUp:(v,f,y)=>{var b;c.isEnabled(y)&&(p&&g&&(Math.max(p.size.width,p.size.height)*h>m?c.onEnd(p):c.onCancel()),g=null,p=null,(b=f.releasePointerCapture)==null||b.call(f))},onPointerCancel:(v,f,y)=>{var b;c.isEnabled(y)&&(g=null,p=null,c.onCancel(),(b=f.releasePointerCapture)==null||b.call(f))}}})({pageSize:s.size,scale:i,minDragPx:((t=this.config.marquee)==null?void 0:t.minDragPx)??5,isEnabled:()=>this.marqueeEnabled.get(n)!==!1,onBegin:c=>this.beginMarquee(n,o,c),onChange:c=>{this.updateMarquee(n,o,c),r(c)},onEnd:c=>{this.endMarquee(n,o,c),r(null)},onCancel:()=>{this.cancelMarquee(n),r(null)}});return this.interactionManagerCapability.registerHandlers({documentId:n,pageIndex:o,modeId:"pointerMode",handlers:l})}getPlacementMetrics(e,t,n,o){var i;const r=(i=this.scrollCapability)==null?void 0:i.forDocument(e),a=r?.getRectPositionForPage(t,n);if(!a)return null;const s=a.origin.y-o.scrollTop,l=a.origin.y+a.size.height-o.scrollTop;return{pageIndex:t,rect:n,spaceAbove:s,spaceBelow:o.clientHeight-l,isBottomVisible:l>0&&l<=o.clientHeight,isTopVisible:s>=0&&s<o.clientHeight}}recalculateMenuPlacement(e){const t=this.state.documents[e];if(!t)return;if(t.selecting||t.selection===null)return void this.menuPlacement$.emit(e,null);const n=mi(t);if(n.length===0)return void this.menuPlacement$.emit(e,null);const o=n[n.length-1];if(!this.viewportCapability||!this.scrollCapability)return void this.menuPlacement$.emit(e,{pageIndex:o.page,rect:o.rect,spaceAbove:0,spaceBelow:1/0,suggestTop:!1,isVisible:!0});const i=this.viewportCapability.forDocument(e).getMetrics(),r=n[0],a=this.getPlacementMetrics(e,o.page,o.rect,i),s=this.getPlacementMetrics(e,r.page,r.rect,i);a&&a.isBottomVisible&&a.spaceBelow>this.menuHeight?this.menuPlacement$.emit(e,{...a,suggestTop:!1,isVisible:!0}):s&&s.isTopVisible?this.menuPlacement$.emit(e,{...s,suggestTop:!0,isVisible:!0}):a&&a.isBottomVisible?this.menuPlacement$.emit(e,{...a,suggestTop:!1,isVisible:!0}):this.menuPlacement$.emit(e,null)}notifyPage(e,t){var n,o;const i=(n=this.pageCallbacks.get(e))==null?void 0:n.get(t);if(i){const r=this.getDocumentState(e),a=this.interactionManagerCapability.forDocument(e).getActiveMode(),s=(o=this.enabledModesPerDoc.get(e))==null?void 0:o.get(a);i(s&&s.showRects!==!1?{rects:_n(r,t),boundingRect:hn(r,t)}:{rects:[],boundingRect:null})}}notifyAllPages(e){var t;(t=this.pageCallbacks.get(e))==null||t.forEach((n,o)=>{this.notifyPage(e,o)})}getNewPageGeometryAndCache(e,t){const n=this.getCoreDocument(e);if(!n||!n.document)return de.reject({code:J.NotFound,message:"Doc Not Found"});const o=n.document.pages.find(r=>r.index===t),i=this.engine.getPageGeometry(n.document,o);return i.wait(r=>{this.dispatch(((a,s,l)=>({type:Nd,payload:{documentId:a,page:s,geo:l}}))(e,t,r))},ze),i}getOrLoadGeometry(e,t){const n=this.getDocumentState(e).geometry[t];return n?de.resolve(n):this.getNewPageGeometryAndCache(e,t)}beginSelection(e,t,n){this.selecting.set(e,!0),this.anchor.set(e,{page:t,index:n}),this.dispatch((o=>({type:Ld,payload:{documentId:o}}))(e)),this.beginSelection$.emit(e,{page:t,index:n}),this.recalculateMenuPlacement(e)}endSelection(e){this.selecting.set(e,!1),this.anchor.set(e,void 0),this.dispatch((t=>({type:$d,payload:{documentId:t}}))(e)),this.endSelection$.emit(e),this.recalculateMenuPlacement(e)}clearSelection(e){this.selecting.set(e,!1),this.anchor.set(e,void 0),this.dispatch((t=>({type:Fd,payload:{documentId:t}}))(e)),this.selChange$.emit(e,null),this.menuPlacement$.emit(e,null),this.notifyAllPages(e)}updateSelection(e,t,n){if(!this.selecting.get(e)||!this.anchor.get(e))return;const o=this.anchor.get(e),i=t>o.page||t===o.page&&n>=o.index,r={start:i?o:{page:t,index:n},end:i?{page:t,index:n}:o};this.dispatch(((a,s)=>({type:Od,payload:{documentId:a,selection:s}}))(e,r)),this.updateRectsAndSlices(e,r),this.selChange$.emit(e,r);for(let a=r.start.page;a<=r.end.page;a++)this.notifyPage(e,a)}updateRectsAndSlices(e,t){const n=this.getDocumentState(e),o={},i={};for(let r=t.start.page;r<=t.end.page;r++){const a=n.geometry[r],s=Fp(t,a,r);s&&(o[r]=jp(a,s.from,s.to),i[r]={start:s.from,count:s.to-s.from+1})}this.dispatch(((r,a)=>({type:jd,payload:{documentId:r,rects:a}}))(e,o)),this.dispatch(((r,a)=>({type:Ud,payload:{documentId:r,slices:a}}))(e,i))}getSelectedText(e){if(!this.checkPermission(e,N.CopyContents))return this.logger.debug("SelectionPlugin","GetSelectedText",`Cannot get selected text: document ${e} lacks CopyContents permission`),de.reject({code:J.Security,message:"Document lacks CopyContents permission"});const t=this.getCoreDocument(e),n=this.getDocumentState(e);if(!t?.document||!n.selection)return de.reject({code:J.NotFound,message:"Doc Not Found or No Selection"});const o=n.selection,i=[];for(let a=o.start.page;a<=o.end.page;a++){const s=n.slices[a];s&&i.push({pageIndex:a,charIndex:s.start,charCount:s.count})}if(i.length===0)return de.resolve([]);const r=this.engine.getTextSlices(t.document,i);return r.wait(a=>{this.textRetrieved$.emit(e,a)},ze),r}copyToClipboard(e){if(!this.checkPermission(e,N.CopyContents))return void this.logger.debug("SelectionPlugin","CopyToClipboard",`Cannot copy to clipboard: document ${e} lacks CopyContents permission`);this.getSelectedText(e).wait(t=>{this.copyToClipboard$.emit(e,t.join(`
`))},ze)}beginMarquee(e,t,n){this.marqueePage.set(e,t)}updateMarquee(e,t,n){this.marqueeChange$.emit(e,{pageIndex:t,rect:n})}endMarquee(e,t,n){this.marqueeEnd$.emit(e,{pageIndex:t,rect:n}),this.marqueeChange$.emit(e,{pageIndex:t,rect:null}),this.marqueePage.delete(e)}cancelMarquee(e){const t=this.marqueePage.get(e);t!==void 0&&(this.marqueeChange$.emit(e,{pageIndex:t,rect:null}),this.marqueePage.delete(e))}setMarqueeEnabled(e,t){this.marqueeEnabled.set(e,t)}isMarqueeEnabled(e){return this.marqueeEnabled.get(e)!==!1}};Wd.id="selection";let Zo=Wd;const Bp={manifest:$p,create:(e,t)=>new Zo(Kt,e,t),reducer:(e=Va,t)=>{switch(t.type){case Rd:{const{documentId:n,state:o}=t.payload;return wt(e,n,o)}case _d:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i}}case Nd:{const{documentId:n,page:o,geo:i}=t.payload,r=e.documents[n];return r?wt(e,n,{...r,geometry:{...r.geometry,[o]:i}}):e}case Od:{const{documentId:n,selection:o}=t.payload,i=e.documents[n];return i?wt(e,n,{...i,selection:o,active:!0}):e}case Ld:{const{documentId:n}=t.payload,o=e.documents[n];return o?wt(e,n,{...o,selecting:!0,selection:null,rects:{}}):e}case $d:{const{documentId:n}=t.payload,o=e.documents[n];return o?wt(e,n,{...o,selecting:!1}):e}case Fd:{const{documentId:n}=t.payload,o=e.documents[n];return o?wt(e,n,{...o,selecting:!1,selection:null,rects:{},active:!1}):e}case jd:{const{documentId:n,rects:o}=t.payload,i=e.documents[n];return i?wt(e,n,{...i,rects:o}):e}case Ud:{const{documentId:n,slices:o}=t.payload,i=e.documents[n];return i?wt(e,n,{...i,slices:o}):e}case"SELECTION/RESET":{const{documentId:n}=t.payload;return e.documents[n]?wt(e,n,Hd):e}default:return e}},initialState:Va},Wp="onDblClick";function $n({children:e,...t}){const{rect:n,rotation:o}=t,{matrix:i,width:r,height:a}=(function(l,c){const{width:u,height:h}=l.size;switch(c%4){case 1:return{matrix:`matrix(0, -1, 1, 0, 0, ${h})`,width:h,height:u};case 2:return{matrix:`matrix(-1, 0, 0, -1, ${u}, ${h})`,width:u,height:h};case 3:return{matrix:`matrix(0, 1, -1, 0, ${u}, 0)`,width:h,height:u};default:return{matrix:"matrix(1, 0, 0, 1, 0, 0)",width:u,height:h}}})(n,o),s=V(null);return L(()=>{const l=s.current;if(!l)return;const c=h=>{h.stopPropagation()},u=h=>{h.stopPropagation()};return l.addEventListener("pointerdown",c,{capture:!0}),l.addEventListener("touchstart",u,{capture:!0}),()=>{l.removeEventListener("pointerdown",c,{capture:!0}),l.removeEventListener("touchstart",u,{capture:!0})}},[]),k(te,{children:e({menuWrapperProps:{style:{position:"absolute",left:n.origin.x,top:n.origin.y,transform:i,transformOrigin:"0 0",width:r,height:a,pointerEvents:"none",zIndex:3},ref:l=>{s.current=l}},matrix:i,rect:{origin:{x:n.origin.x,y:n.origin.y},size:{width:r,height:a}}})})}class qp{constructor(t,n){this.config=t,this.onUpdate=n,this.state="idle",this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[],this.currentVertices=[],this.currentVertices=t.vertices||[]}updateConfig(t){this.config={...this.config,...t},this.currentVertices=t.vertices||[]}startDrag(t,n){this.state="dragging",this.startPoint={x:t,y:n},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:"start",transformData:{type:"move",changes:{rect:this.startElement}}})}startResize(t,n,o){this.state="resizing",this.activeHandle=t,this.startPoint={x:n,y:o},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:"start",transformData:{type:"resize",changes:{rect:this.startElement},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}startVertexEdit(t,n,o){this.currentVertices=[...this.config.vertices??this.currentVertices],t<0||t>=this.currentVertices.length||(this.state="vertex-editing",this.activeVertexIndex=t,this.startPoint={x:n,y:o},this.startVertices=[...this.currentVertices],this.onUpdate({state:"start",transformData:{type:"vertex-edit",changes:{vertices:this.startVertices},metadata:{vertexIndex:t}}}))}move(t,n){if(this.state!=="idle"&&this.startPoint){if(this.state==="dragging"&&this.startElement){const o=this.calculateDelta(t,n),i=this.calculateDragPosition(o);this.currentPosition=i,this.onUpdate({state:"move",transformData:{type:"move",changes:{rect:i}}})}else if(this.state==="resizing"&&this.activeHandle&&this.startElement){const o=this.calculateDelta(t,n),i=this.calculateResizePosition(o,this.activeHandle);this.currentPosition=i,this.onUpdate({state:"move",transformData:{type:"resize",changes:{rect:i},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}else if(this.state==="vertex-editing"&&this.activeVertexIndex!==null){const o=this.calculateVertexPosition(t,n);this.currentVertices=o,this.onUpdate({state:"move",transformData:{type:"vertex-edit",changes:{vertices:o},metadata:{vertexIndex:this.activeVertexIndex}}})}}}end(){if(this.state==="idle")return;const t=this.state,n=this.activeHandle,o=this.activeVertexIndex;if(t==="vertex-editing")this.onUpdate({state:"end",transformData:{type:"vertex-edit",changes:{vertices:this.currentVertices},metadata:{vertexIndex:o||void 0}}});else{const i=this.getCurrentPosition();this.onUpdate({state:"end",transformData:{type:t==="dragging"?"move":"resize",changes:{rect:i},metadata:t==="dragging"?void 0:{handle:n||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}})}this.reset()}cancel(){this.state!=="idle"&&(this.state==="vertex-editing"?this.onUpdate({state:"end",transformData:{type:"vertex-edit",changes:{vertices:this.startVertices},metadata:{vertexIndex:this.activeVertexIndex||void 0}}}):this.startElement&&this.onUpdate({state:"end",transformData:{type:this.state==="dragging"?"move":"resize",changes:{rect:this.startElement},metadata:this.state==="dragging"?void 0:{handle:this.activeHandle||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}}),this.reset())}reset(){this.state="idle",this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[]}getCurrentPosition(){return this.currentPosition||this.config.element}calculateDelta(t,n){if(!this.startPoint)return{x:0,y:0};const o={x:t-this.startPoint.x,y:n-this.startPoint.y};return this.transformDelta(o)}transformDelta(t){const{pageRotation:n=0,scale:o=1}=this.config,i=n*Math.PI/2,r=Math.cos(i),a=Math.sin(i),s=t.x/o,l=t.y/o;return{x:r*s+a*l,y:-a*s+r*l}}clampPoint(t){var n;const o=(n=this.config.constraints)==null?void 0:n.boundingBox;return o?{x:Math.max(0,Math.min(t.x,o.width)),y:Math.max(0,Math.min(t.y,o.height))}:t}calculateVertexPosition(t,n){if(this.activeVertexIndex===null)return this.startVertices;const o=this.calculateDelta(t,n),i=[...this.startVertices],r=i[this.activeVertexIndex],a={x:r.x+o.x,y:r.y+o.y};return i[this.activeVertexIndex]=this.clampPoint(a),i}calculateDragPosition(t){if(!this.startElement)return this.config.element;const n={origin:{x:this.startElement.origin.x+t.x,y:this.startElement.origin.y+t.y},size:{width:this.startElement.size.width,height:this.startElement.size.height}};return this.applyConstraints(n)}calculateResizePosition(t,n){if(!this.startElement)return this.config.element;const o=(function(a){return{x:a.includes("e")?"left":a.includes("w")?"right":"center",y:a.includes("s")?"top":a.includes("n")?"bottom":"center"}})(n),i=this.startElement.size.width/this.startElement.size.height||1;let r=this.applyResizeDelta(t,o);return this.config.maintainAspectRatio&&(r=this.enforceAspectRatio(r,o,i)),r=this.clampToBounds(r,o,i),this.applyConstraints(r)}applyResizeDelta(t,n){const o=this.startElement;let i=o.origin.x,r=o.origin.y,a=o.size.width,s=o.size.height;return n.x==="left"?a+=t.x:n.x==="right"&&(i+=t.x,a-=t.x),n.y==="top"?s+=t.y:n.y==="bottom"&&(r+=t.y,s-=t.y),{origin:{x:i,y:r},size:{width:a,height:s}}}enforceAspectRatio(t,n,o){const i=this.startElement;let{x:r,y:a}=t.origin,{width:s,height:l}=t.size;return n.x==="center"||n.y==="center"?n.y==="center"?(l=s/o,a=i.origin.y+(i.size.height-l)/2):(s=l*o,r=i.origin.x+(i.size.width-s)/2):Math.abs(s-i.size.width)>=Math.abs(l-i.size.height)?l=s/o:s=l*o,n.x==="right"&&(r=i.origin.x+i.size.width-s),n.y==="bottom"&&(a=i.origin.y+i.size.height-l),{origin:{x:r,y:a},size:{width:s,height:l}}}clampToBounds(t,n,o){var i;const r=(i=this.config.constraints)==null?void 0:i.boundingBox;if(!r)return t;const a=this.startElement;let{x:s,y:l}=t.origin,{width:c,height:u}=t.size;c=Math.max(1,c),u=Math.max(1,u);const h=n.x==="left"?a.origin.x:a.origin.x+a.size.width,m=n.y==="top"?a.origin.y:a.origin.y+a.size.height,g=n.x==="left"?r.width-h:n.x==="right"?h:2*Math.min(a.origin.x,r.width-a.origin.x-a.size.width)+a.size.width,p=n.y==="top"?r.height-m:n.y==="bottom"?m:2*Math.min(a.origin.y,r.height-a.origin.y-a.size.height)+a.size.height;if(this.config.maintainAspectRatio){const v=c>g?g/c:1,f=u>p?p/u:1,y=Math.min(v,f);y<1&&(c*=y,u*=y)}else c=Math.min(c,g),u=Math.min(u,p);return s=n.x==="left"?h:n.x==="right"?h-c:a.origin.x+(a.size.width-c)/2,l=n.y==="top"?m:n.y==="bottom"?m-u:a.origin.y+(a.size.height-u)/2,s=Math.max(0,Math.min(s,r.width-c)),l=Math.max(0,Math.min(l,r.height-u)),{origin:{x:s,y:l},size:{width:c,height:u}}}applyConstraints(t){const{constraints:n}=this.config;if(!n)return t;let{origin:{x:o,y:i},size:{width:r,height:a}}=t;const s=n.minWidth??1,l=n.minHeight??1,c=n.maxWidth,u=n.maxHeight;if(this.config.maintainAspectRatio&&r>0&&a>0){const h=r/a;r<s&&(r=s,a=r/h),a<l&&(a=l,r=a*h),c!==void 0&&r>c&&(r=c,a=r/h),u!==void 0&&a>u&&(a=u,r=a*h)}else r=Math.max(s,r),a=Math.max(l,a),c!==void 0&&(r=Math.min(c,r)),u!==void 0&&(a=Math.min(u,a));return n.boundingBox&&(o=Math.max(0,Math.min(o,n.boundingBox.width-r)),i=Math.max(0,Math.min(i,n.boundingBox.height-a))),{origin:{x:o,y:i},size:{width:r,height:a}}}}function Gp(e,t){return e==="n"||e==="s"?"ns-resize":e==="e"||e==="w"?"ew-resize":t%2==0?{nw:"nwse-resize",ne:"nesw-resize",sw:"nesw-resize",se:"nwse-resize"}[e]:{nw:"nesw-resize",ne:"nwse-resize",sw:"nwse-resize",se:"nesw-resize"}[e]}function Vp(e,t,n){const o=-e/2;return n==="center"?o:n==="outside"?o-t:o+t}function qd(e){const{controller:t,resizeUI:n,vertexUI:o,includeVertices:i=!1,handleAttrs:r,vertexAttrs:a}=e,{dragProps:s,createResizeProps:l,createVertexProps:c}=(function(m){const{onUpdate:g,enabled:p=!0,...v}=m,f=V(null),y=V(g);L(()=>{y.current=g},[g]),L(()=>{f.current?f.current.updateConfig(v):f.current=new qp(v,M=>{var A;return(A=y.current)==null?void 0:A.call(y,M)})},[v.element,v.constraints,v.maintainAspectRatio,v.pageRotation,v.scale,v.vertices]);const b=Y(M=>{var A;p&&(M.preventDefault(),M.stopPropagation(),(A=f.current)==null||A.startDrag(M.clientX,M.clientY),M.currentTarget.setPointerCapture(M.pointerId))},[p]),w=Y(M=>{var A;M.preventDefault(),M.stopPropagation(),(A=f.current)==null||A.move(M.clientX,M.clientY)},[]),x=Y(M=>{var A,I,P;M.preventDefault(),M.stopPropagation(),(A=f.current)==null||A.end(),(P=(I=M.currentTarget).releasePointerCapture)==null||P.call(I,M.pointerId)},[]),C=Y(M=>({onPointerDown:A=>{var I;p&&(A.preventDefault(),A.stopPropagation(),(I=f.current)==null||I.startResize(M,A.clientX,A.clientY),A.currentTarget.setPointerCapture(A.pointerId))},onPointerMove:w,onPointerUp:x,onPointerCancel:x}),[p,w,x]),S=Y(M=>({onPointerDown:A=>{var I;p&&(A.preventDefault(),A.stopPropagation(),(I=f.current)==null||I.startVertexEdit(M,A.clientX,A.clientY),A.currentTarget.setPointerCapture(A.pointerId))},onPointerMove:w,onPointerUp:x,onPointerCancel:x}),[p,w,x]);return{dragProps:p?{onPointerDown:b,onPointerMove:w,onPointerUp:x,onPointerCancel:x}:{},createResizeProps:C,createVertexProps:S}})(t),u=K(()=>(function(m,g={}){const{handleSize:p=8,spacing:v=1,offsetMode:f="outside",includeSides:y=!1,zIndex:b=3,rotationAwareCursor:w=!0}=g,x=(m.pageRotation??0)%4,C=S=>({[S]:Vp(p,v,f)+"px"});return[["nw",{...C("top"),...C("left")}],["ne",{...C("top"),...C("right")}],["sw",{...C("bottom"),...C("left")}],["se",{...C("bottom"),...C("right")}],...y?[["n",{...C("top"),left:`calc(50% - ${p/2}px)`}],["s",{...C("bottom"),left:`calc(50% - ${p/2}px)`}],["w",{...C("left"),top:`calc(50% - ${p/2}px)`}],["e",{...C("right"),top:`calc(50% - ${p/2}px)`}]]:[]].map(([S,M])=>({handle:S,style:{position:"absolute",width:p+"px",height:p+"px",borderRadius:"50%",zIndex:b,cursor:w?Gp(S,x):"default",touchAction:"none",...M},attrs:{"data-epdf-handle":S}}))})(t,n).map(m=>{var g;return{key:(g=m.attrs)==null?void 0:g["data-epdf-handle"],style:m.style,...l(m.handle),...m.attrs??{},...r?.(m.handle)??{}}}),[t.element.origin.x,t.element.origin.y,t.element.size.width,t.element.size.height,t.scale,t.pageRotation,t.maintainAspectRatio,n?.handleSize,n?.spacing,n?.offsetMode,n?.includeSides,n?.zIndex,n?.rotationAwareCursor,l,r]),h=K(()=>i?(function(g,p={},v){const{vertexSize:f=12,zIndex:y=4}=p,b=g.element,w=g.scale??1;return(v??g.vertices??[]).map((x,C)=>({handle:"nw",style:{position:"absolute",left:(x.x-b.origin.x)*w-f/2+"px",top:(x.y-b.origin.y)*w-f/2+"px",width:f+"px",height:f+"px",borderRadius:"50%",cursor:"pointer",zIndex:y,touchAction:"none"},attrs:{"data-epdf-vertex":C}}))})(t,o,t.vertices).map((g,p)=>({key:p,style:g.style,...c(p),...g.attrs??{},...a?.(p)??{}})):[],[i,t.element.origin.x,t.element.origin.y,t.element.size.width,t.element.size.height,t.scale,t.vertices,o?.vertexSize,o?.zIndex,c,a]);return{dragProps:s,resize:u,vertices:h}}const Yo=()=>Te(Zo.id),Gd=()=>Qe(Zo.id);function Kp({documentId:e,pageIndex:t,scale:n,rotation:o,background:i="rgba(33,150,243)",selectionMenu:r}){const{plugin:a}=Gd(),s=je(e),[l,c]=R([]),[u,h]=R(null),[m,g]=R(null);L(()=>{if(a&&e)return a.registerSelectionOnPage({documentId:e,pageIndex:t,onRectsChange:({rects:y,boundingRect:b})=>{c(y),h(b)}})},[a,e,t]),L(()=>{if(a&&e)return a.onMenuPlacement(e,y=>{g(y)})},[a,e]);const p=K(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]),v=K(()=>o!==void 0?o:s?.rotation??Lt.Degree0,[o,s?.rotation]),f=r&&m&&m.pageIndex===t&&m.isVisible;return u?k(te,{children:[k("div",{style:{position:"absolute",left:u.origin.x*p,top:u.origin.y*p,width:u.size.width*p,height:u.size.height*p,mixBlendMode:"multiply",isolation:"isolate",pointerEvents:"none"},children:l.map((y,b)=>k("div",{style:{position:"absolute",left:(y.origin.x-u.origin.x)*p,top:(y.origin.y-u.origin.y)*p,width:y.size.width*p,height:y.size.height*p,background:i}},b))}),f&&k($n,{rect:{origin:{x:m.rect.origin.x*p,y:m.rect.origin.y*p},size:{width:m.rect.size.width*p,height:m.rect.size.height*p}},rotation:v,children:y=>r({...y,context:{type:"selection",pageIndex:t},selected:!0,placement:m})})]}):null}const Zp=({documentId:e,pageIndex:t,scale:n,className:o,stroke:i="rgba(0,122,204,0.8)",fill:r="rgba(0,122,204,0.15)"})=>{const{plugin:a}=Gd(),s=je(e),[l,c]=R(null),u=K(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]);return L(()=>{if(a&&e)return a.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,onRectChange:c})},[a,e,t,u]),l?k("div",{style:{position:"absolute",pointerEvents:"none",left:l.origin.x*u,top:l.origin.y*u,width:l.size.width*u,height:l.size.height*u,border:`1px dashed ${i}`,background:r,boxSizing:"border-box",zIndex:1e3},className:o}):null},Yp=an(Bp).addUtility(function(){const{provides:e}=Yo();return L(()=>{if(e)return e.onCopyToClipboard(({text:t})=>{navigator.clipboard.writeText(t)})},[e]),null}).build(),Vd="tiling",Xp={id:Vd,name:"Tiling Plugin",version:"1.0.0",provides:["tiling"],requires:["render","scroll","viewport"],optional:[],defaultConfig:{tileSize:768,overlapPx:2.5,extraRings:0}},Kd="TILING/INIT_STATE",Zd="TILING/CLEANUP_STATE",Yd="TILING/UPDATE_VISIBLE_TILES",Xd="TILING/MARK_TILE_STATUS",Xa=(e,t)=>({type:Yd,payload:{documentId:e,tiles:t}}),Qa=(e,t,n,o)=>({type:Xd,payload:{documentId:e,pageIndex:t,tileId:n,status:o}}),Qp={visibleTiles:{}};function Ja({tileSize:e=768,overlapPx:t=2.5,extraRings:n=0,scale:o,rotation:i,page:r,metric:a}){const s=r.size.width*o,l=r.size.height*o,c=e-t,u=(function(S,M,A,I){return _l(sr(S,M,(4-A)%4),1/I)})(wo(r.size,i,o),{origin:{x:a.scaled.pageX,y:a.scaled.pageY},size:{width:a.scaled.visibleWidth,height:a.scaled.visibleHeight}},i,1),h=u.origin.x,m=u.origin.y,g=h+u.size.width,p=m+u.size.height,v=Math.floor((s-1)/c),f=Math.floor((l-1)/c),y=Math.max(0,Math.floor(h/c)-n),b=Math.min(v,Math.floor((g-1)/c)+n),w=Math.max(0,Math.floor(m/c)-n),x=Math.min(f,Math.floor((p-1)/c)+n),C=[];for(let S=y;S<=b;S++){const M=S*c,A=Math.min(e,s-M),I=M/o,P=A/o;for(let z=w;z<=x;z++){const D=z*c,T=Math.min(e,l-D),_=D/o,H=T/o;C.push({id:`p${r.index}-${o}-x${M}-y${D}-w${A}-h${T}`,col:S,row:z,pageRect:{origin:{x:I,y:_},size:{width:P,height:H}},screenRect:{origin:{x:M,y:D},size:{width:A,height:T}},status:"queued",srcScale:o,isFallback:!1})}}return C}const Qd=class extends Ie{constructor(e,t,n){super(e,t),this.tileRendering$=ee(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=this.registry.getPlugin("scroll").provides(),this.viewportCapability=this.registry.getPlugin("viewport").provides(),this.scrollCapability.onScroll(o=>this.calculateVisibleTiles(o.documentId,o.metrics),{mode:"throttle",wait:50,throttleMode:"trailing"}),this.coreStore.onAction(xn,o=>this.recalculateTiles(o.payload))}onDocumentLoadingStarted(e){this.dispatch(((t,n)=>({type:Kd,payload:{documentId:t,state:n}}))(e,Qp))}onDocumentClosed(e){this.dispatch((t=>({type:Zd,payload:t}))(e))}onScaleChanged(e){this.recalculateTilesForDocument(e)}onRotationChanged(e){this.recalculateTilesForDocument(e)}recalculateTilesForDocument(e){const t=this.scrollCapability.forDocument(e),n=this.viewportCapability.forDocument(e),o=t.getMetrics(n.getMetrics());this.calculateVisibleTiles(e,o)}async recalculateTiles(e){const{documentId:t,pageIndexes:n}=e,o=this.getCoreDocument(t);if(!o||!o.document)return;const i=this.scrollCapability.forDocument(t),r=this.viewportCapability.forDocument(t),a=i.getMetrics(r.getMetrics()),s={},l=Date.now(),c=o.scale,u=o.rotation;for(const h of n){const m=a.pageVisibilityMetrics.find(p=>p.pageNumber===h+1);if(!m)continue;const g=o.document.pages[h];g&&(s[h]=Ja({page:g,metric:m,scale:c,rotation:u,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings}).map(p=>({...p,id:`${p.id}-r${l}`})))}Object.keys(s).length>0&&this.dispatch(Xa(t,s))}async initialize(){}calculateVisibleTiles(e,t){const n=this.getCoreDocument(e);if(!n||!n.document)return;const o=n.scale,i=n.rotation,r={};for(const a of t.pageVisibilityMetrics){const s=a.pageNumber-1,l=n.document.pages[s];if(!l)continue;const c=Ja({page:l,metric:a,scale:o,rotation:i,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings});r[s]=c}this.dispatch(Xa(e,r))}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&this.tileRendering$.emit({documentId:n,tiles:i.visibleTiles})}}buildCapability(){return{renderTile:this.renderTile.bind(this),forDocument:this.createTilingScope.bind(this),onTileRendering:this.tileRendering$.on}}createTilingScope(e){return{renderTile:t=>this.renderTile(t,e),onTileRendering:t=>this.tileRendering$.on(n=>{n.documentId===e&&t(n.tiles)})}}renderTile(e,t){const n=t??this.getActiveDocumentId();if(!this.renderCapability)throw new Error("Render capability not available.");this.dispatch(Qa(n,e.pageIndex,e.tile.id,"rendering"));const o=this.renderCapability.forDocument(n).renderPageRect({pageIndex:e.pageIndex,rect:e.tile.pageRect,options:{scaleFactor:e.tile.srcScale,dpr:e.dpr}});return o.wait(()=>{this.dispatch(Qa(n,e.pageIndex,e.tile.id,"ready"))},ze),o}};Qd.id="tiling";let zr=Qd;const Jp={manifest:Xp,create:(e,t)=>new zr(Vd,e,t),reducer:(e,t)=>((n,o)=>{var i,r;switch(o.type){case Kd:{const{documentId:a,state:s}=o.payload;return{...n,documents:{...n.documents,[a]:s}}}case Zd:{const a=o.payload,{[a]:s,...l}=n.documents;return{...n,documents:l}}case Yd:{const{documentId:a,tiles:s}=o.payload,l=n.documents[a];if(!l)return n;const c={...l.visibleTiles};for(const u in s){const h=Number(u),m=s[h],g=c[h]??[],p=(i=g.find(f=>!f.isFallback))==null?void 0:i.srcScale,v=m.length>0?m[0].srcScale:p;if(p!==void 0&&p!==v){const f=g.filter(b=>!b.isFallback&&b.status==="ready").map(b=>({...b,isFallback:!0})),y=f.length>0?[]:g.filter(b=>b.isFallback);c[h]=[...y,...f,...m]}else{const f=new Set(m.map(w=>w.id)),y=[],b=new Set;for(const w of g)(w.isFallback||f.has(w.id))&&(y.push(w),b.add(w.id));for(const w of m)b.has(w.id)||y.push(w);c[h]=y}}return{...n,documents:{...n.documents,[a]:{...l,visibleTiles:c}}}}case Xd:{const{documentId:a,pageIndex:s,tileId:l,status:c}=o.payload,u=n.documents[a];if(!u)return n;const h=((r=u.visibleTiles[s])==null?void 0:r.map(v=>v.id===l?{...v,status:c}:v))??[],m=h.filter(v=>!v.isFallback),g=m.length>0&&m.every(v=>v.status==="ready"),p=g?m:h;return{...n,documents:{...n.documents,[a]:{...u,visibleTiles:{...u.visibleTiles,[s]:p}}}}}default:return n}})(e,t),initialState:{documents:{}}},Jd=()=>Te(zr.id);function ef({documentId:e,pageIndex:t,tile:n,dpr:o,scale:i}){const{provides:r}=Jd(),a=K(()=>r?.forDocument(e),[r,e]),[s,l]=R(),c=V(null),u=i/n.srcScale;return L(()=>{if(n.status==="ready"&&c.current||!a)return;const h=a.renderTile({pageIndex:t,tile:n,dpr:o});return h.wait(m=>{const g=URL.createObjectURL(m);c.current=g,l(g)},ze),()=>{c.current?(URL.revokeObjectURL(c.current),c.current=null):h.abort({code:J.Cancelled,message:"canceled render task"})}},[a,t,n.id]),s?k("img",{src:s,onLoad:()=>{c.current&&(URL.revokeObjectURL(c.current),c.current=null)},style:{position:"absolute",left:n.screenRect.origin.x*u,top:n.screenRect.origin.y*u,width:n.screenRect.size.width*u,height:n.screenRect.size.height*u,display:"block"}}):null}function tf({documentId:e,pageIndex:t,scale:n,style:o,...i}){const{provides:r}=Jd(),a=je(e),[s,l]=R([]);L(()=>{if(r)return r.onTileRendering(u=>{u.documentId===e&&l(u.tiles[t]??[])})},[r,e,t]);const c=K(()=>n!==void 0?n:a?.scale??1,[n,a?.scale]);return k("div",{style:{...o},...i,children:s?.map(u=>k(ef,{documentId:e,pageIndex:t,tile:u,dpr:window.devicePixelRatio,scale:c},u.id))})}const eu="thumbnail",nf={id:eu,name:"Thumbnail Plugin",version:"1.0.0",provides:["thumbnail"],requires:["render"],optional:["scroll"],defaultConfig:{width:150,gap:10,buffer:3,labelHeight:16,autoScroll:!0,scrollBehavior:"smooth",imagePadding:0,paddingY:0}},tu="THUMBNAIL/INIT_STATE",nu="THUMBNAIL/CLEANUP_STATE",ou="THUMBNAIL/SET_WINDOW_STATE",iu="THUMBNAIL/UPDATE_VIEWPORT_METRICS";function es(e,t){return{type:tu,payload:{documentId:e,state:t}}}const of={thumbs:[],window:null,viewportH:0,scrollY:0},ts={documents:{},activeDocumentId:null},ru=class extends Ie{constructor(e,t,n){var o;super(e,t),this.cfg=n,this.scrollCapability=null,this.taskCaches=new Map,this.canAutoScroll=new Map,this.window$=Fe((i,r)=>({documentId:i,window:r})),this.scrollTo$=Fe((i,r)=>({documentId:i,options:r})),this.refreshPages$=Fe((i,r)=>({documentId:i,pages:r}),{cache:!1}),this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=((o=this.registry.getPlugin("scroll"))==null?void 0:o.provides())??null,this.coreStore.onAction(xn,i=>{const r=i.payload.documentId??this.getActiveDocumentId(),a=i.payload.pageIndexes;this.refreshPages$.emit(r,a);const s=this.taskCaches.get(r);if(s)for(const l of a)s.delete(l)}),this.scrollCapability&&this.cfg.autoScroll!==!1&&(this.scrollCapability.onPageChangeState(({documentId:i,state:r})=>{this.canAutoScroll.set(i,!r.isChanging),r.isChanging||this.scrollToThumb(r.targetPage-1,i)}),this.scrollCapability.onPageChange(({documentId:i,pageNumber:r})=>{this.canAutoScroll.get(i)!==!1&&this.scrollToThumb(r-1,i)}))}onDocumentLoadingStarted(e){this.dispatch(es(e,{...of})),this.taskCaches.set(e,new Map),this.canAutoScroll.set(e,!0),this.logger.debug("ThumbnailPlugin","DocumentOpened",`Initialized thumbnail state for document: ${e}`)}onDocumentLoaded(e){this.calculateWindowState(e)}onDocumentClosed(e){this.dispatch((function(n){return{type:nu,payload:n}})(e));const t=this.taskCaches.get(e);t&&(t.forEach(n=>{n.abort({code:"cancelled",message:"Document closed"})}),t.clear(),this.taskCaches.delete(e)),this.canAutoScroll.delete(e),this.window$.clearScope(e),this.scrollTo$.clearScope(e),this.refreshPages$.clearScope(e),this.logger.debug("ThumbnailPlugin","DocumentClosed",`Cleaned up thumbnail state for document: ${e}`)}onRotationChanged(e){this.calculateWindowState(e)}buildCapability(){return{scrollToThumb:e=>this.scrollToThumb(e),renderThumb:(e,t)=>this.renderThumb(e,t),updateWindow:(e,t)=>this.updateWindow(e,t),getWindow:()=>this.getWindow(),forDocument:e=>this.createThumbnailScope(e),onWindow:this.window$.onGlobal,onScrollTo:this.scrollTo$.onGlobal,onRefreshPages:this.refreshPages$.onGlobal}}createThumbnailScope(e){return{scrollToThumb:t=>this.scrollToThumb(t,e),renderThumb:(t,n)=>this.renderThumb(t,n,e),updateWindow:(t,n)=>this.updateWindow(t,n,e),getWindow:()=>this.getWindow(e),onWindow:this.window$.forScope(e),onScrollTo:this.scrollTo$.forScope(e),onRefreshPages:this.refreshPages$.forScope(e)}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}calculateWindowState(e){const t=this.coreState.core.documents[e];if(!t?.document)return;const n=this.cfg.width??120,o=this.cfg.labelHeight??16,i=this.cfg.gap??8,r=this.cfg.imagePadding??0,a=this.cfg.paddingY??0,s=Math.max(1,n-2*r);let l=a;const c=t.document.pages.map(m=>{const g=m.size.height/m.size.width,p=Math.round(s*g),v=r+p+r+o,f={pageIndex:m.index,width:s,height:p,wrapperHeight:v,top:l,labelHeight:o,padding:r};return l+=v+i,f}),u={start:-1,end:-1,items:[],totalHeight:l-i+a},h=this.getDocumentState(e);h&&(this.dispatch(es(e,{...h,thumbs:c,window:u})),h.viewportH>0?this.updateWindow(h.scrollY,h.viewportH,e):this.window$.emit(e,u))}updateWindow(e,t,n){const o=n??this.getActiveDocumentId(),i=this.getDocumentState(o);if(!i||!i.window||i.thumbs.length===0)return;const r=this.cfg.buffer??3;this.dispatch((function(g,p,v){return{type:iu,payload:{documentId:g,scrollY:p,viewportH:v}}})(o,e,t));let a=0,s=i.thumbs.length-1,l=0;for(;a<=s;){const g=a+s>>1,p=i.thumbs[g];p.top+p.wrapperHeight<e?a=g+1:(l=g,s=g-1)}let c=l;const u=e+t;for(;c+1<i.thumbs.length&&i.thumbs[c].top<u;)c++;c=Math.min(i.thumbs.length-1,c+r);const h=Math.max(0,l-r);if(h===i.window.start&&c===i.window.end)return;const m={start:h,end:c,items:i.thumbs.slice(h,c+1),totalHeight:i.window.totalHeight};this.dispatch((function(g,p){return{type:ou,payload:{documentId:g,window:p}}})(o,m)),this.window$.emit(o,m)}getWindow(e){const t=this.getDocumentState(e);return t?.window??null}scrollToThumb(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentState(n);if(!o||!o.window)return;const i=o.thumbs[e];if(!i)return;const r=this.cfg.scrollBehavior??"smooth",a=this.cfg.paddingY??0;if(o.viewportH<=0){const h=Math.max(a,i.top-i.wrapperHeight);return void this.scrollTo$.emit(n,{top:h,behavior:r})}const s=i.top,l=i.top+i.wrapperHeight,c=s<o.scrollY+8+a,u=l>o.scrollY+o.viewportH-8;c?this.scrollTo$.emit(n,{top:Math.max(0,s-a),behavior:r}):u&&this.scrollTo$.emit(n,{top:Math.max(0,l-o.viewportH+a),behavior:r})}renderThumb(e,t,n){const o=n??this.getActiveDocumentId(),i=this.taskCaches.get(o);if(!i)throw new Error(`Task cache not found for document: ${o}`);if(i.has(e))return i.get(e);const r=this.coreState.core.documents[o];if(!r?.document)throw new Error(`Document not found: ${o}`);const a=r.document.pages[e];if(!a)throw new Error(`Page ${e} not found in document: ${o}`);const s=this.cfg.width??120,l=this.cfg.imagePadding??0,c=Math.max(1,s-2*l)/a.size.width,u=this.renderCapability.forDocument(o).renderPageRect({pageIndex:e,rect:{origin:{x:0,y:0},size:a.size},options:{scaleFactor:c,dpr:t}});return i.set(e,u),u.wait(ze,()=>i.delete(e)),u}async initialize(){this.logger.info("ThumbnailPlugin","Initialize","Thumbnail plugin initialized")}async destroy(){this.window$.clear(),this.refreshPages$.clear(),this.scrollTo$.clear(),this.taskCaches.forEach(e=>{e.forEach(t=>{t.abort({code:"cancelled",message:"Plugin destroyed"})}),e.clear()}),this.taskCaches.clear(),this.canAutoScroll.clear(),super.destroy()}};ru.id="thumbnail";let Xo=ru;const rf={manifest:nf,create:(e,t)=>new Xo(eu,e,t),reducer:(e=ts,t)=>{switch(t.type){case tu:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case nu:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"THUMBNAIL/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case ou:{const{documentId:n,window:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,window:o}}}:e}case iu:{const{documentId:n,scrollY:o,viewportH:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,scrollY:o,viewportH:i}}}:e}default:return e}},initialState:ts},au=()=>Qe(Xo.id);function af({documentId:e,style:t,children:n,...o}){const{plugin:i}=au(),r=V(null),[a,s]=R({window:null,docId:null}),l=a.docId===e?a.window:null;L(()=>{if(!i)return;const u=i.provides().forDocument(e),h=u.getWindow();h&&s({window:h,docId:e});const m=u.onWindow(g=>{s({window:g,docId:e})});return()=>{m(),s({window:null,docId:null})}},[i,e]),L(()=>{const u=r.current;if(!u||!i)return;const h=i.provides().forDocument(e),m=()=>h.updateWindow(u.scrollTop,u.clientHeight);return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)},[i,e]),L(()=>{const u=r.current;if(!u||!i)return;const h=i.provides().forDocument(e),m=new ResizeObserver(()=>{h.updateWindow(u.scrollTop,u.clientHeight)});return m.observe(u),()=>m.disconnect()},[i,e]),L(()=>{const u=r.current;!u||!i||i.provides().forDocument(e).updateWindow(u.scrollTop,u.clientHeight)},[l,i,e]),L(()=>{const u=r.current;if(!(!u||!i||!l))return i.provides().forDocument(e).onScrollTo(({top:h,behavior:m})=>{u.scrollTo({top:h,behavior:m})})},[i,e,!!l]);const c=i?.cfg.paddingY??0;return k("div",{ref:r,style:{overflowY:"auto",position:"relative",paddingTop:c,paddingBottom:c,height:"100%",...t},...o,children:k("div",{style:{height:l?.totalHeight??0,position:"relative"},children:l?.items.map(u=>n(u))})})}function sf({documentId:e,meta:t,style:n,...o}){const{provides:i}=Te(Xo.id),{plugin:r}=au(),[a,s]=R(),l=V(null),[c,u]=R(0);return L(()=>{if(r)return r.provides().forDocument(e).onRefreshPages(h=>{h.includes(t.pageIndex)&&u(m=>m+1)})},[r,e,t.pageIndex]),L(()=>{const h=i?.forDocument(e),m=h?.renderThumb(t.pageIndex,window.devicePixelRatio);return m?.wait(g=>{const p=URL.createObjectURL(g);l.current=p,s(p)},ze),()=>{l.current?(URL.revokeObjectURL(l.current),l.current=null):m?.abort({code:J.Cancelled,message:"canceled render task"})}},[i,e,t.pageIndex,c]),a?k("img",{src:a,onLoad:()=>{l.current&&(URL.revokeObjectURL(l.current),l.current=null)},style:n,...o}):null}const ne="annotation",lf={id:ne,name:"Annotation Plugin",version:"1.0.0",provides:["annotation"],requires:["interaction-manager","selection"],optional:["history"],defaultConfig:{autoCommit:!0,annotationAuthor:"Guest",deactivateToolAfterCreate:!1,selectAfterCreate:!0}},su="ANNOTATION/INIT_STATE",lu="ANNOTATION/CLEANUP_STATE",cu="ANNOTATION/SET_ANNOTATIONS",du="ANNOTATION/SELECT_ANNOTATION",uu="ANNOTATION/DESELECT_ANNOTATION",hu="ANNOTATION/ADD_TO_SELECTION",mu="ANNOTATION/REMOVE_FROM_SELECTION",gu="ANNOTATION/SET_SELECTION",pu="ANNOTATION/SET_ACTIVE_TOOL_ID",fu="ANNOTATION/CREATE_ANNOTATION",vu="ANNOTATION/PATCH_ANNOTATION",yu="ANNOTATION/DELETE_ANNOTATION",bu="ANNOTATION/COMMIT",wu="ANNOTATION/PURGE_ANNOTATION",xu="ANNOTATION/ADD_COLOR_PRESET",Cu="ANNOTATION/SET_TOOL_DEFAULTS",Iu="ANNOTATION/ADD_TOOL",gi=e=>({type:uu,payload:{documentId:e}}),pi=(e,t,n)=>({type:hu,payload:{documentId:e,pageIndex:t,id:n}}),ns=(e,t)=>({type:mu,payload:{documentId:e,id:t}}),os=(e,t)=>({type:gu,payload:{documentId:e,ids:t}}),is=(e,t)=>({type:pu,payload:{documentId:e,toolId:t}}),oo=(e,t,n)=>({type:fu,payload:{documentId:e,pageIndex:t,annotation:n}}),io=(e,t,n,o)=>({type:vu,payload:{documentId:e,pageIndex:t,id:n,patch:o}}),fi=(e,t,n)=>({type:yu,payload:{documentId:e,pageIndex:t,id:n}}),rs=(e,t)=>({type:wu,payload:{documentId:e,uid:t}});function ku(e){return e.object.type===E.INK}function Su(e){return e.object.type===E.CIRCLE}function Pu(e){return e.object.type===E.POLYGON}function Mu(e){return e.object.type===E.SQUARE}function Du(e){return e.object.type===E.LINE}function Au(e){return e.object.type===E.POLYLINE}function zu(e){return e.object.type===E.HIGHLIGHT}function Tu(e){return e.object.type===E.UNDERLINE}function Eu(e){return e.object.type===E.STRIKEOUT}function Ru(e){return e.object.type===E.SQUIGGLY}function _u(e){return e.object.type===E.FREETEXT}function Nu(e){return e.object.type===E.STAMP}function cf(e){return e.object.type===E.TEXT}function Tr(e){return e.object.type===E.LINK}function Ou(e){return(function(t){return zu(t)||Tu(t)||Eu(t)||Ru(t)})(e)||ku(e)||Mu(e)||Su(e)||Pu(e)||Du(e)||Au(e)||_u(e)||Nu(e)}const as=(e,t)=>(e.pages[t]??[]).map(n=>e.byUid[n]),Fi=e=>e.selectedUids.map(t=>e.byUid[t]).filter(t=>t!==void 0),ji=e=>e.selectedUids,Lu=(e,t)=>e.byUid[t]??null;function qe(e,t){const n=e.tools.find(o=>o.id===t);return n?.defaults}const df=(e,t)=>((n,o,i)=>{const r=[];for(const a of Object.values(n.pages))for(const s of a){const l=n.byUid[s];l&&"inReplyToId"in l.object&&l.object.inReplyToId===o&&i.includes(l.object.type)&&r.push(l)}return r})(e,t,[E.LINK]),ss=(e,t)=>{const n=((r,a)=>{const s=r.byUid[a];if(s)return s.object.inReplyToId&&s.object.replyType===St.Group?s.object.inReplyToId:a})(e,t);if(!n)return[];const o=[],i=e.byUid[n];i&&i.object.type!==E.LINK&&o.push(i);for(const r of Object.values(e.pages))for(const a of r){const s=e.byUid[a];s&&s.object.inReplyToId===n&&s.object.replyType===St.Group&&s.object.type!==E.LINK&&o.push(s)}return o},ls=(e,t)=>{const n=e.byUid[t];if(!n||n.object.type===E.LINK)return!1;if(n.object.inReplyToId&&n.object.replyType===St.Group)return!0;for(const o of Object.values(e.pages))for(const i of o){const r=e.byUid[i];if(r&&r.object.inReplyToId===t&&r.object.replyType===St.Group&&r.object.type!==E.LINK)return!0}return!1},uf=[{id:"highlight",name:"Highlight",matchScore:e=>e.type===E.HIGHLIGHT?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1,isGroupDraggable:!1,isGroupResizable:!1},defaults:{type:E.HIGHLIGHT,strokeColor:"#FFCD45",color:"#FFCD45",opacity:1,blendMode:Z.Multiply}},{id:"underline",name:"Underline",matchScore:e=>e.type===E.UNDERLINE?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1,isGroupDraggable:!1,isGroupResizable:!1},defaults:{type:E.UNDERLINE,strokeColor:"#E44234",color:"#E44234",opacity:1}},{id:"strikeout",name:"Strikeout",matchScore:e=>e.type===E.STRIKEOUT?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1,isGroupDraggable:!1,isGroupResizable:!1},defaults:{type:E.STRIKEOUT,strokeColor:"#E44234",color:"#E44234",opacity:1}},{id:"squiggly",name:"Squiggly",matchScore:e=>e.type===E.SQUIGGLY?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1,isGroupDraggable:!1,isGroupResizable:!1},defaults:{type:E.SQUIGGLY,strokeColor:"#E44234",color:"#E44234",opacity:1}},{id:"ink",name:"Pen",matchScore:e=>e.type===E.INK&&e.intent!=="InkHighlight"?5:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:E.INK,strokeColor:"#E44234",color:"#E44234",opacity:1,strokeWidth:6}},{id:"inkHighlighter",name:"Ink Highlighter",matchScore:e=>e.type===E.INK&&e.intent==="InkHighlight"?10:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:E.INK,intent:"InkHighlight",strokeColor:"#FFCD45",color:"#FFCD45",opacity:1,strokeWidth:14,blendMode:Z.Multiply}},{id:"circle",name:"Circle",matchScore:e=>e.type===E.CIRCLE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:E.CIRCLE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",strokeStyle:he.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:"square",name:"Square",matchScore:e=>e.type===E.SQUARE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:E.SQUARE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",strokeStyle:he.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:"line",name:"Line",matchScore:e=>e.type===E.LINE&&e.intent!=="LineArrow"?5:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1,isGroupResizable:!0},defaults:{type:E.LINE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:"lineArrow",name:"Arrow",matchScore:e=>e.type===E.LINE&&e.intent==="LineArrow"?10:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1,isGroupResizable:!0},defaults:{type:E.LINE,intent:"LineArrow",color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",lineEndings:{start:Q.None,end:Q.OpenArrow}},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:"polyline",name:"Polyline",matchScore:e=>e.type===E.POLYLINE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1,isGroupResizable:!0},defaults:{type:E.POLYLINE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"}},{id:"polygon",name:"Polygon",matchScore:e=>e.type===E.POLYGON?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1,isGroupResizable:!0},defaults:{type:E.POLYGON,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"}},{id:"freeText",name:"Free Text",matchScore:e=>e.type===E.FREETEXT?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:E.FREETEXT,contents:"Insert text",fontSize:14,fontColor:"#E44234",fontFamily:Ee.Helvetica,textAlign:Ge.Left,verticalAlign:nt.Top,color:"transparent",backgroundColor:"transparent",opacity:1},clickBehavior:{enabled:!0,defaultSize:{width:100,height:20},defaultContent:"Insert text"}},{id:"stamp",name:"Image",matchScore:e=>e.type===E.STAMP?1:0,interaction:{exclusive:!1,cursor:"copy",isDraggable:!0,isResizable:!0,lockAspectRatio:!0},defaults:{type:E.STAMP}}],hf=["#E44234","#FF8D00","#FFCD45","#5CC96E","#25D2D1","#597CE2","#C544CE","#7D2E25","#000000","#FFFFFF"],vi=e=>e.length===1?e[0]:null,mf=(e,t,n)=>{const o=e.byUid[t];return o?{...e,byUid:{...e.byUid,[t]:{...o,commitState:o.commitState==="synced"?"dirty":o.commitState,object:{...o.object,...n}}},hasPendingChanges:!0}:e};function it(e){let t=e;return[()=>t,n=>{t=n}]}const gf={annotationType:E.INK,create(e){const{onCommit:t,onPreview:n,getTool:o,pageSize:i}=e,[r,a]=it([]),[s,l]=it(!1),c={current:null},u=g=>({x:me(g.x,0,i.width),y:me(g.y,0,i.height)}),h=()=>{const g=o();return g?{...g.defaults,strokeWidth:g.defaults.strokeWidth??1,strokeColor:g.defaults.strokeColor??g.defaults.color??"#000000",opacity:g.defaults.opacity??1,flags:g.defaults.flags??["print"]}:null},m=()=>{const g=r();if(g.length===0||g[0].points.length===0)return null;const p=h();if(!p)return null;const v=g.flatMap(y=>y.points),f=Ot(Nt(v),p.strokeWidth/2);return{type:E.INK,bounds:f,data:{...p,rect:f,inkList:g}}};return{onPointerDown:(g,p)=>{var v;const f=u(g);l(!0),c.current&&clearTimeout(c.current);const y=[...r(),{points:[f]}];a(y),n(m()),(v=p.setPointerCapture)==null||v.call(p)},onPointerMove:g=>{if(!s())return;const p=r();if(p.length===0)return;const v=u(g);p[p.length-1].points.push(v),a(p),n(m())},onPointerUp:(g,p)=>{var v;l(!1),(v=p.releasePointerCapture)==null||v.call(p),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{const f=r();if(f.length>0&&f[0].points.length>1){const y=h();if(!y)return;const b=f.flatMap(x=>x.points),w=Ot(Nt(b),y.strokeWidth/2);t({...y,inkList:f,rect:w,type:E.INK,pageIndex:e.pageIndex,id:Pe(),created:new Date})}a([]),n(null)},800)},onPointerCancel:(g,p)=>{var v;a([]),l(!1),n(null),c.current&&clearTimeout(c.current),(v=p.releasePointerCapture)==null||v.call(p)}}}};function Qo({threshold:e=5,getTool:t,onClickDetected:n}){const[o,i]=it(null),[r,a]=it(!1);return{onStart:s=>{i(s),a(!1)},onMove:s=>{const l=o();!l||r()||Math.sqrt(Math.pow(s.x-l.x,2)+Math.pow(s.y-l.y,2))>e&&a(!0)},onEnd:s=>{var l;if(o()&&!r()){const c=t();c&&"clickBehavior"in c&&((l=c.clickBehavior)!=null&&l.enabled)&&n(s,c)}i(null),a(!1)},hasMoved:r,reset:()=>{i(null),a(!1)}}}const pf={annotationType:E.FREETEXT,create(e){const{onCommit:t,onPreview:n,getTool:o,pageSize:i,pageIndex:r}=e,[a,s]=it(null),l=m=>({x:me(m.x,0,i.width),y:me(m.y,0,i.height)}),c=()=>{const m=o();return m?{...m.defaults,fontColor:m.defaults.fontColor??"#000000",opacity:m.defaults.opacity??1,fontSize:m.defaults.fontSize??12,fontFamily:m.defaults.fontFamily??Ee.Helvetica,color:m.defaults.color??m.defaults.backgroundColor??"transparent",textAlign:m.defaults.textAlign??Ge.Left,verticalAlign:m.defaults.verticalAlign??nt.Top,contents:m.defaults.contents??"Insert text here",flags:m.defaults.flags??["print"]}:null},u=Qo({threshold:5,getTool:o,onClickDetected:(m,g)=>{const p=c();if(!p)return;const v=g.clickBehavior;if(!v?.enabled)return;const{width:f,height:y}=v.defaultSize,b=f/2,w=y/2,x={origin:{x:me(m.x-b,0,i.width-f),y:me(m.y-w,0,i.height-y)},size:{width:f,height:y}},C=v.defaultContent??p.contents,S={...p,contents:C,type:E.FREETEXT,rect:x,pageIndex:r,id:Pe(),created:new Date};t(S)}}),h=m=>{const g=a();if(!g)return null;const p=c();if(!p)return null;const v={origin:{x:Math.min(g.x,m.x),y:Math.min(g.y,m.y)},size:{width:Math.abs(g.x-m.x),height:Math.abs(g.y-m.y)}};return{type:E.FREETEXT,bounds:v,data:{...p,rect:v}}};return{onPointerDown:(m,g)=>{var p;const v=l(m);s(v),u.onStart(v),n(h(v)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:m=>{const g=l(m);u.onMove(g),a()&&u.hasMoved()&&n(h(g))},onPointerUp:(m,g)=>{var p;const v=a();if(!v)return;const f=c();if(!f)return;const y=l(m);if(u.hasMoved()){const b={origin:{x:Math.min(v.x,y.x),y:Math.min(v.y,y.y)},size:{width:Math.abs(v.x-y.x),height:Math.abs(v.y-y.y)}},w={...f,type:E.FREETEXT,rect:b,pageIndex:e.pageIndex,id:Pe(),created:new Date};t(w)}else u.onEnd(y);s(null),n(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(m,g)=>{var p;s(null),n(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(m,g)=>{var p;s(null),n(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}};function $u(e){const t=n=>{const o=9*n,i=Math.PI/6;return{x:-o*Math.cos(i),y:o*Math.sin(i)}};return{getSvgPath:n=>{const{x:o,y:i}=t(n);return e?`M 0 0 L ${o} ${i} L ${o} ${-i} Z`:`M ${o} ${i} L 0 0 L ${o} ${-i}`},getLocalPoints:n=>{const{x:o,y:i}=t(n);return[{x:0,y:0},{x:o,y:i},{x:o,y:-i}]},getRotation:n=>n,filled:e}}function cs(e,t){const n=o=>o*e/2;return{getSvgPath:o=>{const i=n(o);return`M ${-i} 0 L ${i} 0`},getLocalPoints:o=>{const i=n(o);return[{x:-i,y:0},{x:i,y:0}]},getRotation:t,filled:!1}}const ds=$u(!1),us=$u(!0),Ui={[Q.OpenArrow]:ds,[Q.ClosedArrow]:us,[Q.ROpenArrow]:{...ds,getRotation:e=>e+Math.PI},[Q.RClosedArrow]:{...us,getRotation:e=>e+Math.PI},[Q.Circle]:{getSvgPath:e=>{const t=5*e/2;return`M ${t} 0 A ${t} ${t} 0 1 1 ${-t} 0 A ${t} ${t} 0 1 1 ${t} 0`},getLocalPoints:e=>{const t=5*e/2;return[{x:-t,y:-t},{x:t,y:t}]},getRotation:()=>0,filled:!0},[Q.Square]:{getSvgPath:e=>{const t=6*e/2;return`M ${-t} ${-t} L ${t} ${-t} L ${t} ${t} L ${-t} ${t} Z`},getLocalPoints:e=>{const t=6*e/2;return[{x:-t,y:-t},{x:t,y:-t},{x:t,y:t},{x:-t,y:t}]},getRotation:e=>e,filled:!0},[Q.Diamond]:{getSvgPath:e=>{const t=6*e/2;return`M 0 ${-t} L ${t} 0 L 0 ${t} L ${-t} 0 Z`},getLocalPoints:e=>{const t=6*e/2;return[{x:0,y:-t},{x:t,y:0},{x:0,y:t},{x:-t,y:0}]},getRotation:e=>e,filled:!0},[Q.Butt]:cs(6,e=>e+Math.PI/2),[Q.Slash]:cs(18,e=>e+Math.PI/1.5)};function mt(e,t,n){if(!e||e.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};const o=[...e],i=(a,s)=>Math.atan2(s.y-a.y,s.x-a.x),r=(a,s,l)=>{if(!a)return;const c=Ui[a];if(!c)return;const u=c.getLocalPoints(t),h=c.getRotation(l),m=u.map(g=>(function(p,v,f){const y=Math.cos(v),b=Math.sin(v),w=p.x*y-p.y*b,x=p.x*b+p.y*y;return{x:w+f.x,y:x+f.y}})(g,h,s));o.push(...m)};if(e.length>=2){const a=i(e[1],e[0]);r(n?.start,e[0],a);const s=e.length-1,l=i(e[s-1],e[s]);r(n?.end,e[s],l)}if(o.length<=1){const a=e[0]||{x:0,y:0},s=t;return{origin:{x:a.x-s,y:a.y-s},size:{width:2*s,height:2*s}}}return Ot(Nt(o),t/2+1.2*t)}class Er{constructor(){this.patches=new Map}register(t,n){this.patches.set(t,n)}transform(t,n){const o=this.patches.get(t.type);return o?o(t,n):n.changes}}const ff=new Er,Do=Object.freeze(Object.defineProperty({__proto__:null,LINE_ENDING_HANDLERS:Ui,PatchRegistry:Er,createEnding:function(e,t,n,o,i){if(!e)return null;const r=Ui[e];if(!r)return null;const a=r.getRotation(n);return{d:r.getSvgPath(t),transform:`translate(${o} ${i}) rotate(${(s=>180*s/Math.PI)(a)})`,filled:r.filled}},lineRectWithEndings:mt,patchRegistry:ff},Symbol.toStringTag,{value:"Module"})),vf={annotationType:E.LINE,create(e){const{pageIndex:t,onCommit:n,onPreview:o,getTool:i,pageSize:r}=e,[a,s]=it(null),l=m=>({x:me(m.x,0,r.width),y:me(m.y,0,r.height)}),c=()=>{const m=i();return m?{...m.defaults,strokeWidth:m.defaults.strokeWidth??1,lineEndings:m.defaults.lineEndings??{start:Q.None,end:Q.None},color:m.defaults.color??"#000000",opacity:m.defaults.opacity??1,strokeStyle:m.defaults.strokeStyle??he.SOLID,strokeDashArray:m.defaults.strokeDashArray??[],strokeColor:m.defaults.strokeColor??"#000000",flags:m.defaults.flags??["print"]}:null},u=Qo({threshold:5,getTool:i,onClickDetected:(m,g)=>{const p=c();if(!p)return;const v=g.clickBehavior;if(!v?.enabled)return;const f=v.defaultAngle??0,y=v.defaultLength/2,b=m.x-y*Math.cos(f),w=m.y-y*Math.sin(f),x=m.x+y*Math.cos(f),C=m.y+y*Math.sin(f),S=l({x:b,y:w}),M=l({x,y:C}),A=mt([S,M],p.strokeWidth,p.lineEndings);n({...p,rect:A,linePoints:{start:S,end:M},pageIndex:t,id:Pe(),created:new Date,type:E.LINE})}}),h=m=>{const g=a();if(!g)return null;const p=c();if(!p)return null;const v=mt([g,m],p.strokeWidth,p.lineEndings);return{type:E.LINE,bounds:v,data:{...p,rect:v,linePoints:{start:g,end:m}}}};return{onPointerDown:(m,g)=>{var p;const v=l(m);s(v),u.onStart(v),o(h(v)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:m=>{const g=l(m);u.onMove(g),a()&&u.hasMoved()&&o(h(g))},onPointerUp:(m,g)=>{var p;const v=a();if(!v)return;const f=l(m);if(u.hasMoved()){const y=c();if(!y)return;if(Math.abs(f.x-v.x)>2||Math.abs(f.y-v.y)>2){const b=mt([v,f],y.strokeWidth,y.lineEndings);n({...y,rect:b,linePoints:{start:v,end:f},pageIndex:t,id:Pe(),flags:["print"],created:new Date,type:E.LINE})}}else u.onEnd(f);s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(m,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(m,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}},yf={annotationType:E.POLYLINE,create(e){const{onCommit:t,onPreview:n,getTool:o,pageSize:i}=e,[r,a]=it([]),[s,l]=it(null),c=m=>({x:me(m.x,0,i.width),y:me(m.y,0,i.height)}),u=()=>{const m=o();return m?{...m.defaults,strokeWidth:m.defaults.strokeWidth??1,lineEndings:m.defaults.lineEndings??{start:Q.None,end:Q.None},color:m.defaults.color??"#000000",opacity:m.defaults.opacity??1,strokeColor:m.defaults.strokeColor??"#000000",strokeStyle:m.defaults.strokeStyle??he.SOLID,strokeDashArray:m.defaults.strokeDashArray??[],flags:m.defaults.flags??["print"]}:null},h=()=>{const m=r(),g=s();if(m.length===0||!g)return null;const p=u();if(!p)return null;const v=[...m,g],f=mt(v,p.strokeWidth,p.lineEndings);return{type:E.POLYLINE,bounds:f,data:{...p,rect:f,vertices:v,currentVertex:g}}};return{onClick:(m,g)=>{if(g.metaKey||g.ctrlKey)return;const p=c(m),v=r(),f=v[v.length-1];f&&Math.abs(f.x-p.x)<1&&Math.abs(f.y-p.y)<1||(a([...v,p]),l(p),n(h()))},onDoubleClick:()=>{(()=>{const m=r();if(m.length<2)return;const g=u();if(!g)return;const p=mt(m,g.strokeWidth,g.lineEndings),v={...g,vertices:m,rect:p,type:E.POLYLINE,pageIndex:e.pageIndex,id:Pe(),created:new Date};t(v),a([]),l(null),n(null)})()},onPointerMove:m=>{if(r().length>0){const g=c(m);l(g),n(h())}},onPointerCancel:()=>{a([]),l(null),n(null)}}}},bf={annotationType:E.POLYGON,create(e){const{onCommit:t,onPreview:n,getTool:o,scale:i,pageSize:r}=e,[a,s]=it([]),[l,c]=it(null),u=p=>({x:me(p.x,0,r.width),y:me(p.y,0,r.height)}),h=()=>{const p=o();return p?{...p.defaults,color:p.defaults.color??"#000000",opacity:p.defaults.opacity??1,strokeWidth:p.defaults.strokeWidth??1,strokeColor:p.defaults.strokeColor??"#000000",strokeStyle:p.defaults.strokeStyle??he.SOLID,strokeDashArray:p.defaults.strokeDashArray??[],flags:p.defaults.flags??["print"]}:null},m=()=>{const p=a();if(p.length<3)return;const v=h();if(!v)return;const f=Ot(Nt(p),v.strokeWidth/2),y={...v,vertices:p,rect:f,type:E.POLYGON,pageIndex:e.pageIndex,id:Pe(),created:new Date};t(y),s([]),c(null),n(null)},g=()=>{const p=a(),v=l();if(p.length===0||!v)return null;const f=h();if(!f)return null;const y=Ot(Nt([...p,v]),f.strokeWidth/2);return{type:E.POLYGON,bounds:y,data:{...f,rect:y,vertices:p,currentVertex:v}}};return{onClick:(p,v)=>{if(v.metaKey||v.ctrlKey)return;const f=u(p);if((w=>{const x=a();if(x.length<2)return!1;const C=14/i/2,S=x[0];return w.x>=S.x-C&&w.x<=S.x+C&&w.y>=S.y-C&&w.y<=S.y+C})(f)&&a().length>=3)return void m();const y=a(),b=y[y.length-1];b&&Math.abs(b.x-f.x)<1&&Math.abs(b.y-f.y)<1||(s([...y,f]),c(f),n(g()))},onDoubleClick:p=>{m()},onPointerMove:p=>{if(a().length>0){const v=u(p);c(v),n(g())}},onPointerCancel:p=>{s([]),c(null),n(null)}}}},wf={annotationType:E.SQUARE,create(e){const{pageIndex:t,onCommit:n,onPreview:o,getTool:i,pageSize:r}=e,[a,s]=it(null),l=m=>({x:me(m.x,0,r.width),y:me(m.y,0,r.height)}),c=()=>{const m=i();return m?{...m.defaults,flags:m.defaults.flags??["print"],strokeWidth:m.defaults.strokeWidth??2,strokeColor:m.defaults.strokeColor??"#000000",strokeStyle:m.defaults.strokeStyle??he.SOLID,strokeDashArray:m.defaults.strokeDashArray??[],color:m.defaults.color??"#000000",opacity:m.defaults.opacity??1}:null},u=Qo({threshold:5,getTool:i,onClickDetected:(m,g)=>{const p=c();if(!p)return;const v=g.clickBehavior;if(!v?.enabled)return;const{width:f,height:y}=v.defaultSize,b=f/2,w=y/2,x=me(m.x-b,0,r.width-f),C=me(m.y-w,0,r.height-y),S=p.strokeWidth,M=S/2,A={origin:{x:x-M,y:C-M},size:{width:f+S,height:y+S}},I={...p,type:E.SQUARE,created:new Date,id:Pe(),pageIndex:t,rect:A};n(I)}}),h=m=>{const g=a();if(!g)return null;const p=Math.min(g.x,m.x),v=Math.min(g.y,m.y),f=Math.abs(g.x-m.x),y=Math.abs(g.y-m.y),b=c();if(!b)return null;const w=b.strokeWidth,x=w/2,C={origin:{x:p-x,y:v-x},size:{width:f+w,height:y+w}};return{type:E.SQUARE,bounds:C,data:{rect:C,...b}}};return{onPointerDown:(m,g)=>{var p;const v=l(m);s(v),u.onStart(v),o(h(v)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:m=>{const g=l(m);u.onMove(g),a()&&u.hasMoved()&&o(h(g))},onPointerUp:(m,g)=>{var p;if(!a()||!c())return;const v=l(m);if(u.hasMoved()){const f=c();if(!f)return;const y=h(v);if(y){const b={...f,type:E.SQUARE,created:new Date,id:Pe(),pageIndex:t,rect:y.data.rect};n(b)}}else u.onEnd(v);s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(m,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(m,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}},xf={annotationType:E.STAMP,create(e){const{services:t,onCommit:n,getTool:o,pageSize:i}=e;return{onPointerDown:r=>{const a=o();if(!a)return;const{imageSrc:s,imageSize:l}=a.defaults,c=(u,h,m)=>{const g=r.x-h/2,p=r.y-m/2,v={origin:{x:me(g,0,i.width-h),y:me(p,0,i.height-m)},size:{width:h,height:m}},f={...a.defaults,rect:v,type:E.STAMP,icon:a.defaults.icon??dr.Draft,subject:a.defaults.subject??"Stamp",flags:a.defaults.flags??["print"],pageIndex:e.pageIndex,id:Pe(),created:new Date};n(f,{imageData:u})};s?t.processImage({source:s,maxWidth:i.width,maxHeight:i.height,onComplete:u=>c(u.imageData,l?.width??u.width,l?.height??u.height)}):t.requestFile({accept:"image/png,image/jpeg",onFile:u=>{t.processImage({source:u,maxWidth:i.width,maxHeight:i.height,onComplete:h=>c(h.imageData,h.width,h.height)})}})}}}},Cf={annotationType:E.CIRCLE,create(e){const{pageIndex:t,onCommit:n,onPreview:o,getTool:i,pageSize:r}=e,[a,s]=it(null),l=m=>({x:me(m.x,0,r.width),y:me(m.y,0,r.height)}),c=()=>{const m=i();return m?{...m.defaults,strokeWidth:m.defaults.strokeWidth??2,strokeColor:m.defaults.strokeColor??"#000000",strokeStyle:m.defaults.strokeStyle??he.SOLID,strokeDashArray:m.defaults.strokeDashArray??[],color:m.defaults.color??"#000000",opacity:m.defaults.opacity??1,flags:m.defaults.flags??["print"]}:null},u=Qo({threshold:5,getTool:i,onClickDetected:(m,g)=>{const p=c();if(!p)return;const v=g.clickBehavior;if(!v?.enabled)return;const{width:f,height:y}=v.defaultSize,b=f/2,w=y/2,x=me(m.x-b,0,r.width-f),C=me(m.y-w,0,r.height-y),S=p.strokeWidth,M=S/2,A={origin:{x:x-M,y:C-M},size:{width:f+S,height:y+S}},I={...p,type:E.CIRCLE,created:new Date,id:Pe(),pageIndex:t,rect:A};n(I)}}),h=m=>{const g=a();if(!g)return null;const p=Math.min(g.x,m.x),v=Math.min(g.y,m.y),f=Math.abs(g.x-m.x),y=Math.abs(g.y-m.y),b=c();if(!b)return null;const w=b.strokeWidth,x=w/2,C={origin:{x:p-x,y:v-x},size:{width:f+w,height:y+w}};return{type:E.CIRCLE,bounds:C,data:{rect:C,...b}}};return{onPointerDown:(m,g)=>{var p;const v=l(m);s(v),u.onStart(v),o(h(v)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:m=>{const g=l(m);u.onMove(g),a()&&u.hasMoved()&&o(h(g))},onPointerUp:(m,g)=>{var p;if(!a()||!c())return;const v=l(m);if(u.hasMoved()){const f=c();if(!f)return;const y=h(v);if(y){const b={...f,type:E.CIRCLE,flags:["print"],created:new Date,id:Pe(),pageIndex:t,rect:y.data.rect};n(b)}}else u.onEnd(v);s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(m,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(m,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}},If=(e,t)=>{var n;switch(t.type){case"vertex-edit":default:return t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y,r=e.inkList.map(a=>({points:a.points.map(s=>({x:s.x+o,y:s.y+i}))}));return{rect:t.changes.rect,inkList:r}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const f=Math.min(r,a);r=f,a=f,t.changes.rect.size={width:o.size.width*f,height:o.size.height*f}}const l=(f,y)=>({origin:{x:f.origin.x+y,y:f.origin.y+y},size:{width:Math.max(1,f.size.width-2*y),height:Math.max(1,f.size.height-2*y)}}),c=Math.min(t.changes.rect.size.width/o.size.width,t.changes.rect.size.height/o.size.height),u=Math.max(1,Math.round(e.strokeWidth*c)),h=l(o,e.strokeWidth/2),m=l(t.changes.rect,u/2),g=m.size.width/Math.max(h.size.width,1e-6),p=m.size.height/Math.max(h.size.height,1e-6),v=e.inkList.map(f=>({points:f.points.map(y=>({x:m.origin.x+(y.x-h.origin.x)*g,y:m.origin.y+(y.y-h.origin.y)*p}))}));return{rect:t.changes.rect,inkList:v,strokeWidth:u}}return t.changes;case"property-update":if(t.changes.strokeWidth!==void 0){const o={...e,...t.changes},i=o.inkList.flatMap(a=>a.points),r=Ot(Nt(i),o.strokeWidth/2);return{...t.changes,rect:r}}return t.changes}},kf=(e,t)=>{var n;switch(t.type){case"vertex-edit":if(t.changes.linePoints){const{start:o,end:i}=t.changes.linePoints;return{rect:mt([o,i],e.strokeWidth,e.lineEndings),linePoints:{start:o,end:i}}}return t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y;return{rect:t.changes.rect,linePoints:{start:{x:e.linePoints.start.x+o,y:e.linePoints.start.y+i},end:{x:e.linePoints.end.x+o,y:e.linePoints.end.y+i}}}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const c=Math.min(r,a);r=c,a=c,t.changes.rect.size={width:o.size.width*c,height:o.size.height*c}}const l={start:{x:t.changes.rect.origin.x+(e.linePoints.start.x-o.origin.x)*r,y:t.changes.rect.origin.y+(e.linePoints.start.y-o.origin.y)*a},end:{x:t.changes.rect.origin.x+(e.linePoints.end.x-o.origin.x)*r,y:t.changes.rect.origin.y+(e.linePoints.end.y-o.origin.y)*a}};return{rect:t.changes.rect,linePoints:l}}return t.changes;case"property-update":if(t.changes.strokeWidth||t.changes.lineEndings){const o={...e,...t.changes},i=mt([o.linePoints.start,o.linePoints.end],o.strokeWidth,o.lineEndings);return{...t.changes,rect:i}}return t.changes;default:return t.changes}},Sf=(e,t)=>{var n;switch(t.type){case"vertex-edit":return t.changes.vertices&&t.changes.vertices.length?{rect:mt(t.changes.vertices,e.strokeWidth,e.lineEndings),vertices:t.changes.vertices}:t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y,r=e.vertices.map(a=>({x:a.x+o,y:a.y+i}));return{rect:t.changes.rect,vertices:r}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const c=Math.min(r,a);r=c,a=c,t.changes.rect.size={width:o.size.width*c,height:o.size.height*c}}const l=e.vertices.map(c=>({x:t.changes.rect.origin.x+(c.x-o.origin.x)*r,y:t.changes.rect.origin.y+(c.y-o.origin.y)*a}));return{rect:t.changes.rect,vertices:l}}return t.changes;case"property-update":if(t.changes.strokeWidth!==void 0||t.changes.lineEndings!==void 0){const o={...e,...t.changes},i=mt(o.vertices,o.strokeWidth,o.lineEndings);return{...t.changes,rect:i}}return t.changes;default:return t.changes}},Pf=(e,t)=>{var n;switch(t.type){case"vertex-edit":if(t.changes.vertices&&t.changes.vertices.length){const o=e.strokeWidth/2;return{rect:Ot(Nt(t.changes.vertices),o),vertices:t.changes.vertices}}return t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y,r=e.vertices.map(a=>({x:a.x+o,y:a.y+i}));return{rect:t.changes.rect,vertices:r}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const c=Math.min(r,a);r=c,a=c,t.changes.rect.size={width:o.size.width*c,height:o.size.height*c}}const l=e.vertices.map(c=>({x:t.changes.rect.origin.x+(c.x-o.origin.x)*r,y:t.changes.rect.origin.y+(c.y-o.origin.y)*a}));return{rect:t.changes.rect,vertices:l}}return t.changes;case"property-update":if(t.changes.strokeWidth!==void 0){const o={...e,...t.changes},i=o.strokeWidth/2,r=Ot(Nt(o.vertices),i);return{...t.changes,rect:r}}return t.changes;default:return t.changes}},Fu=class extends Ie{constructor(e,t,n){var o,i,r;super(e,t),this.ANNOTATION_HISTORY_TOPIC="annotations",this.state$=ee(),this.pendingContexts=new Map,this.isInitialLoadComplete=new Map,this.importQueue=new Map,this.commitInProgress=new Map,this.handlerFactories=new Map,this.activeTool$=ee(),this.events$=ee(),this.toolsChange$=ee(),this.patchRegistry=new Er,this.unifiedDragStates=new Map,this.unifiedDrag$=ee(),this.unifiedResizeStates=new Map,this.unifiedResize$=ee(),this.config=n,this.selection=((o=t.getPlugin("selection"))==null?void 0:o.provides())??null,this.history=((i=t.getPlugin("history"))==null?void 0:i.provides())??null,this.interactionManager=((r=t.getPlugin("interaction-manager"))==null?void 0:r.provides())??null,this.registerHandlerFactories(),this.registerBuiltInPatches()}onDocumentLoadingStarted(e){this.dispatch((function(t,n){return{type:su,payload:{documentId:t,state:n}}})(e,{pages:{},byUid:{},selectedUids:[],selectedUid:null,activeToolId:null,hasPendingChanges:!1})),this.pendingContexts.set(e,new Map),this.isInitialLoadComplete.set(e,!1),this.importQueue.set(e,[]),this.logger.debug("AnnotationPlugin","DocumentOpened",`Initialized annotation state for document: ${e}`)}onDocumentLoaded(e){const t=this.getCoreDocument(e);if(t?.document&&this.getAllAnnotations(e,t.document),this.selection)for(const n of this.state.tools)n.interaction.textSelection&&this.selection.enableForMode(n.interaction.mode??n.id,{showRects:!1})}onDocumentClosed(e){this.dispatch((function(t){return{type:lu,payload:t}})(e)),this.pendingContexts.delete(e),this.isInitialLoadComplete.delete(e),this.importQueue.delete(e),this.logger.debug("AnnotationPlugin","DocumentClosed",`Cleaned up annotation state for document: ${e}`)}registerHandlerFactories(){this.handlerFactories.set(E.CIRCLE,Cf),this.handlerFactories.set(E.SQUARE,wf),this.handlerFactories.set(E.STAMP,xf),this.handlerFactories.set(E.POLYGON,bf),this.handlerFactories.set(E.POLYLINE,yf),this.handlerFactories.set(E.LINE,vf),this.handlerFactories.set(E.INK,gf),this.handlerFactories.set(E.FREETEXT,pf)}registerBuiltInPatches(){this.patchRegistry.register(E.INK,If),this.patchRegistry.register(E.LINE,kf),this.patchRegistry.register(E.POLYLINE,Sf),this.patchRegistry.register(E.POLYGON,Pf)}async initialize(){var e,t,n;this.state.tools.forEach(o=>this.registerInteractionForTool(o)),this.history&&this.history.onHistoryChange(o=>{o.topic===this.ANNOTATION_HISTORY_TOPIC&&this.config.autoCommit!==!1&&this.commit(o.documentId)}),(e=this.interactionManager)==null||e.onModeChange(o=>{var i,r;const a=((i=this.state.tools.find(s=>(s.interaction.mode??s.id)===o.activeMode))==null?void 0:i.id)??null;a!==(((r=this.state.documents[o.documentId])==null?void 0:r.activeToolId)??null)&&o.documentId&&this.dispatch(is(o.documentId,a))}),(t=this.selection)==null||t.onMarqueeEnd(({documentId:o,pageIndex:i,rect:r})=>{const a=this.state.documents[o];if(!a)return;const s=(a.pages[i]??[]).map(l=>a.byUid[l]).filter(l=>l!==void 0).filter(l=>!Tr(l)).filter(l=>(function(c,u){return!(c.origin.x+c.size.width<u.origin.x||u.origin.x+u.size.width<c.origin.x||c.origin.y+c.size.height<u.origin.y||u.origin.y+u.size.height<c.origin.y)})(r,l.object.rect)).map(l=>l.object.id);if(s.length>0){const l=new Set;for(const c of s)if(this.isInGroupMethod(c,o)){const u=this.getGroupMembersMethod(c,o);for(const h of u)l.add(h.object.id)}else l.add(c);this.setSelectionMethod([...l],o)}}),(n=this.selection)==null||n.onEndSelection(({documentId:o})=>{var i,r,a;if(!this.checkPermission(o,N.ModifyAnnotations))return;const s=this.getActiveTool(o);if(!s||!s.interaction.textSelection)return;const l=(i=this.selection)==null?void 0:i.getFormattedSelection(),c=(r=this.selection)==null?void 0:r.getSelectedText();if(l&&c){for(const u of l)c.wait(h=>{const m=Pe();this.createAnnotation(u.pageIndex,{...s.defaults,rect:u.rect,segmentRects:u.segmentRects,pageIndex:u.pageIndex,created:new Date,id:m,custom:{text:h.join(`
`)}},void 0,o),this.getToolBehavior(s,"deactivateToolAfterCreate")&&this.setActiveTool(null,o),this.getToolBehavior(s,"selectAfterCreate")&&this.selectAnnotation(u.pageIndex,m,o)},ze);(a=this.selection)==null||a.clear()}})}registerInteractionForTool(e){var t;(t=this.interactionManager)==null||t.registerMode({id:e.interaction.mode??e.id,scope:"page",exclusive:e.interaction.exclusive,cursor:e.interaction.cursor})}buildCapability(){return{getActiveTool:()=>this.getActiveTool(),setActiveTool:e=>this.setActiveTool(e),getState:()=>this.getDocumentState(),getPageAnnotations:e=>this.getPageAnnotations(e),getSelectedAnnotation:()=>this.getSelectedAnnotation(),getSelectedAnnotations:()=>this.getSelectedAnnotationsMethod(),getSelectedAnnotationIds:()=>this.getSelectedAnnotationIdsMethod(),getAnnotationById:e=>this.getAnnotationById(e),selectAnnotation:(e,t)=>this.selectAnnotation(e,t),toggleSelection:(e,t)=>this.toggleSelectionMethod(e,t),addToSelection:(e,t)=>this.addToSelectionMethod(e,t),removeFromSelection:e=>this.removeFromSelectionMethod(e),setSelection:e=>this.setSelectionMethod(e),deselectAnnotation:()=>this.deselectAnnotation(),importAnnotations:e=>this.importAnnotations(e),createAnnotation:(e,t,n)=>this.createAnnotation(e,t,n),updateAnnotation:(e,t,n)=>this.updateAnnotation(e,t,n),updateAnnotations:e=>this.updateAnnotationsMethod(e),deleteAnnotation:(e,t)=>this.deleteAnnotation(e,t),deleteAnnotations:(e,t)=>this.deleteAnnotationsMethod(e,t),renderAnnotation:e=>this.renderAnnotation(e),commit:()=>this.commit(),getAttachedLinks:(e,t)=>this.getAttachedLinksMethod(e,t),hasAttachedLinks:(e,t)=>this.hasAttachedLinksMethod(e,t),deleteAttachedLinks:(e,t)=>this.deleteAttachedLinksMethod(e,t),groupAnnotations:e=>this.groupAnnotationsMethod(e),ungroupAnnotations:(e,t)=>this.ungroupAnnotationsMethod(e,t),getGroupMembers:(e,t)=>this.getGroupMembersMethod(e,t),isInGroup:(e,t)=>this.isInGroupMethod(e,t),forDocument:e=>this.createAnnotationScope(e),getTools:()=>this.state.tools,getTool:e=>this.getTool(e),addTool:e=>{this.dispatch((t=>({type:Iu,payload:t}))(e)),this.registerInteractionForTool(e)},findToolForAnnotation:e=>this.findToolForAnnotation(e),setToolDefaults:(e,t)=>this.dispatch(((n,o)=>({type:Cu,payload:{toolId:n,patch:o}}))(e,t)),getColorPresets:()=>[...this.state.colorPresets],addColorPreset:e=>this.dispatch((t=>({type:xu,payload:t}))(e)),transformAnnotation:(e,t)=>this.transformAnnotation(e,t),registerPatchFunction:(e,t)=>this.registerPatchFunction(e,t),onStateChange:this.state$.on,onActiveToolChange:this.activeTool$.on,onAnnotationEvent:this.events$.on,onToolsChange:this.toolsChange$.on}}createAnnotationScope(e){return{getState:()=>this.getDocumentState(e),getPageAnnotations:t=>this.getPageAnnotations(t,e),getSelectedAnnotation:()=>this.getSelectedAnnotation(e),getSelectedAnnotations:()=>this.getSelectedAnnotationsMethod(e),getSelectedAnnotationIds:()=>this.getSelectedAnnotationIdsMethod(e),getAnnotationById:t=>this.getAnnotationById(t,e),selectAnnotation:(t,n)=>this.selectAnnotation(t,n,e),toggleSelection:(t,n)=>this.toggleSelectionMethod(t,n,e),addToSelection:(t,n)=>this.addToSelectionMethod(t,n,e),removeFromSelection:t=>this.removeFromSelectionMethod(t,e),setSelection:t=>this.setSelectionMethod(t,e),deselectAnnotation:()=>this.deselectAnnotation(e),getActiveTool:()=>this.getActiveTool(e),setActiveTool:t=>this.setActiveTool(t,e),findToolForAnnotation:t=>this.findToolForAnnotation(t),importAnnotations:t=>this.importAnnotations(t,e),createAnnotation:(t,n,o)=>this.createAnnotation(t,n,o,e),updateAnnotation:(t,n,o)=>this.updateAnnotation(t,n,o,e),updateAnnotations:t=>this.updateAnnotationsMethod(t,e),deleteAnnotation:(t,n)=>this.deleteAnnotation(t,n,e),deleteAnnotations:t=>this.deleteAnnotationsMethod(t,e),renderAnnotation:t=>this.renderAnnotation(t,e),commit:()=>this.commit(e),getAttachedLinks:t=>this.getAttachedLinksMethod(t,e),hasAttachedLinks:t=>this.hasAttachedLinksMethod(t,e),deleteAttachedLinks:t=>this.deleteAttachedLinksMethod(t,e),groupAnnotations:()=>this.groupAnnotationsMethod(e),ungroupAnnotations:t=>this.ungroupAnnotationsMethod(t,e),getGroupMembers:t=>this.getGroupMembersMethod(t,e),isInGroup:t=>this.isInGroupMethod(t,e),getGroupingAction:()=>this.getGroupingActionMethod(e),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)}),onAnnotationEvent:t=>this.events$.on(n=>{n.documentId===e&&t(n)}),onActiveToolChange:t=>this.activeTool$.on(n=>{n.documentId===e&&t(n.tool)})}}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&(this.state$.emit({documentId:n,state:i}),o&&o.activeToolId!==i.activeToolId&&this.activeTool$.emit({documentId:n,tool:this.getActiveTool(n)}))}if(e.tools!==t.tools){for(const n in t.documents)this.activeTool$.emit({documentId:n,tool:this.getActiveTool(n)});this.toolsChange$.emit({tools:t.tools})}}registerPatchFunction(e,t){this.patchRegistry.register(e,t)}transformAnnotation(e,t){const n={type:t.type,changes:t.changes,metadata:t.metadata};return this.patchRegistry.transform(e,n)}registerPageHandlers(e,t,n,o){var i;const r=this.getCoreDocument(e),a=(i=r?.document)==null?void 0:i.pages[t];if(!a)return()=>{};if(!this.interactionManager)return()=>{};const s=[];for(const l of this.state.tools){if(!l.defaults.type)continue;const c=this.handlerFactories.get(l.defaults.type);if(!c)continue;const u={pageIndex:t,pageSize:a.size,scale:n,services:o.services,onPreview:m=>o.onPreview(l.id,m),onCommit:(m,g)=>{this.createAnnotation(t,m,g,e),this.getToolBehavior(l,"deactivateToolAfterCreate")&&this.setActiveTool(null,e),this.getToolBehavior(l,"selectAfterCreate")&&this.selectAnnotation(t,m.id,e)},getTool:()=>this.state.tools.find(m=>m.id===l.id)},h=this.interactionManager.registerHandlers({documentId:e,modeId:l.interaction.mode??l.id,handlers:c.create(u),pageIndex:t});s.push(h)}return()=>s.forEach(l=>l())}getDocumentState(e){const t=e??this.getActiveDocumentId(),n=this.state.documents[t];if(!n)throw new Error(`Annotation state not found for document: ${t}`);return n}getAllAnnotations(e,t){this.engine.getAllAnnotations(t).wait(n=>{this.dispatch(((i,r)=>({type:cu,payload:{documentId:i,annotations:r}}))(e,n)),this.isInitialLoadComplete.set(e,!0);const o=this.importQueue.get(e);o&&o.length>0&&this.processImportQueue(e),this.events$.emit({type:"loaded",documentId:e,total:Object.values(n).reduce((i,r)=>i+r.length,0)})},ze)}getPageAnnotations(e,t){const{pageIndex:n}=e,o=t??this.getActiveDocumentId(),i=this.getCoreDocument(o),r=i?.document;if(!r)return de.reject({code:J.NotFound,message:"Document not found"});const a=r.pages.find(s=>s.index===n);return a?this.engine.getPageAnnotations(r,a):de.reject({code:J.NotFound,message:"Page not found"})}getSelectedAnnotation(e){return(t=>t.selectedUids.length>0?t.byUid[t.selectedUids[0]]??null:null)(this.getDocumentState(e))}getAnnotationById(e,t){const n=this.getDocumentState(t);return Lu(n,e)}renderAnnotation({pageIndex:e,annotation:t,options:n},o){const i=o??this.getActiveDocumentId(),r=this.getCoreDocument(i),a=r?.document;if(!a)return de.reject({code:J.NotFound,message:"Document not found"});const s=a.pages.find(l=>l.index===e);return s?this.engine.renderPageAnnotation(a,s,t,n):de.reject({code:J.NotFound,message:"Page not found"})}importAnnotations(e,t){const n=t??this.getActiveDocumentId();if(!this.isInitialLoadComplete.get(n)){const o=this.importQueue.get(n)||[];return o.push(...e),void this.importQueue.set(n,o)}this.processImportItems(n,e)}processImportQueue(e){const t=this.importQueue.get(e);if(!t||t.length===0)return;const n=[...t];this.importQueue.set(e,[]),this.processImportItems(e,n)}processImportItems(e,t){const n=this.pendingContexts.get(e);if(n){for(const o of t){const{annotation:i,ctx:r}=o,a=i.pageIndex,s=i.id;this.dispatch(oo(e,a,i)),r&&n.set(s,r)}this.config.autoCommit!==!1&&this.commit(e)}}createAnnotation(e,t,n,o){const i=o??this.getActiveDocumentId();if(!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","CreateAnnotation",`Cannot create annotation: document ${i} lacks ModifyAnnotations permission`);const r=t.id,a=this.pendingContexts.get(i);if(!a)return;const s={...t,author:t.author??this.config.annotationAuthor},l=()=>{this.dispatch(oo(i,e,s)),n&&a.set(r,n),this.events$.emit({type:"create",documentId:i,annotation:s,pageIndex:e,ctx:n,committed:!1})};if(!this.history)return l(),void(this.config.autoCommit&&this.commit(i));const c={execute:l,undo:()=>{a.delete(r),this.dispatch(gi(i)),this.dispatch(fi(i,e,r)),this.events$.emit({type:"delete",documentId:i,annotation:s,pageIndex:e,committed:!1})}};this.history.forDocument(i).register(c,this.ANNOTATION_HISTORY_TOPIC)}buildPatch(e,t){return"rect"in t?t:this.transformAnnotation(e,{type:"property-update",changes:t})}updateAnnotation(e,t,n,o){const i=o??this.getActiveDocumentId();if(!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","UpdateAnnotation",`Cannot update annotation: document ${i} lacks ModifyAnnotations permission`);const r=this.getDocumentState(i).byUid[t].object,a=this.buildPatch(r,{...n,author:n.author??this.config.annotationAuthor}),s=()=>{this.dispatch(io(i,e,t,a)),this.events$.emit({type:"update",documentId:i,annotation:r,pageIndex:e,patch:a,committed:!1})};if(!this.history)return s(),void(this.config.autoCommit!==!1&&this.commit(i));const l=Object.fromEntries(Object.keys(n).map(u=>[u,r[u]])),c={execute:s,undo:()=>{this.dispatch(io(i,e,t,l)),this.events$.emit({type:"update",documentId:i,annotation:r,pageIndex:e,patch:l,committed:!1})}};this.history.forDocument(i).register(c,this.ANNOTATION_HISTORY_TOPIC)}deleteAnnotation(e,t,n){var o;const i=n??this.getActiveDocumentId();if(!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","DeleteAnnotation",`Cannot delete annotation: document ${i} lacks ModifyAnnotations permission`);const r=this.getDocumentState(i),a=(o=r.byUid[t])==null?void 0:o.object;if(!a)return;const s=((h,m)=>{const g=[];for(const p of Object.values(h.pages))for(const v of p){const f=h.byUid[v];f&&"inReplyToId"in f.object&&f.object.inReplyToId===m&&g.push({id:f.object.id,pageIndex:f.object.pageIndex})}return g})(r,t),l=s.map(h=>{var m;return(m=r.byUid[h.id])==null?void 0:m.object}).filter(h=>h!==void 0),c=()=>{var h;for(const m of s){const g=(h=r.byUid[m.id])==null?void 0:h.object;g&&(this.dispatch(fi(i,m.pageIndex,m.id)),this.events$.emit({type:"delete",documentId:i,annotation:g,pageIndex:m.pageIndex,committed:!1}))}this.dispatch(gi(i)),this.dispatch(fi(i,e,t)),this.events$.emit({type:"delete",documentId:i,annotation:a,pageIndex:e,committed:!1})};if(!this.history)return c(),void(this.config.autoCommit!==!1&&this.commit(i));const u={execute:c,undo:()=>{this.dispatch(oo(i,e,a)),this.events$.emit({type:"create",documentId:i,annotation:a,pageIndex:e,committed:!1});for(const h of l)this.dispatch(oo(i,h.pageIndex,h)),this.events$.emit({type:"create",documentId:i,annotation:h,pageIndex:h.pageIndex,committed:!1})}};this.history.forDocument(i).register(u,this.ANNOTATION_HISTORY_TOPIC)}deleteAnnotationsMethod(e,t){for(const{pageIndex:n,id:o}of e)this.deleteAnnotation(n,o,t)}selectAnnotation(e,t,n){const o=n??this.getActiveDocumentId();if(this.isInGroupMethod(t,o)){const i=this.getGroupMembersMethod(t,o).map(r=>r.object.id);this.dispatch(os(o,i))}else this.dispatch(((i,r,a)=>({type:du,payload:{documentId:i,pageIndex:r,id:a}}))(o,e,t))}deselectAnnotation(e){const t=e??this.getActiveDocumentId();this.dispatch(gi(t))}getSelectedAnnotationsMethod(e){return Fi(this.getDocumentState(e))}getSelectedAnnotationIdsMethod(e){return ji(this.getDocumentState(e))}toggleSelectionMethod(e,t,n){const o=n??this.getActiveDocumentId(),i=this.getDocumentState(o);if(i.selectedUids.includes(t))this.dispatch(ns(o,t));else if(this.isInGroupMethod(t,o)){const r=this.getGroupMembersMethod(t,o);for(const a of r)i.selectedUids.includes(a.object.id)||this.dispatch(pi(o,a.object.pageIndex,a.object.id))}else this.dispatch(pi(o,e,t))}addToSelectionMethod(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(pi(o,e,t))}removeFromSelectionMethod(e,t){const n=t??this.getActiveDocumentId();this.dispatch(ns(n,e))}setSelectionMethod(e,t){const n=t??this.getActiveDocumentId();this.dispatch(os(n,e))}getAttachedLinksMethod(e,t){return df(this.getDocumentState(t),e)}hasAttachedLinksMethod(e,t){return this.getAttachedLinksMethod(e,t).length>0}deleteAttachedLinksMethod(e,t){const n=this.getAttachedLinksMethod(e,t);for(const o of n)this.deleteAnnotation(o.object.pageIndex,o.object.id,t)}groupAnnotationsMethod(e){const t=e??this.getActiveDocumentId();if(!this.checkPermission(t,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","GroupAnnotations",`Cannot group annotations: document ${t} lacks ModifyAnnotations permission`);const n=this.getSelectedAnnotationsMethod(t);if(n.length<2)return void this.logger.debug("AnnotationPlugin","GroupAnnotations","Need at least 2 annotations to group");const o=n[0],i=n.slice(1).map(r=>({pageIndex:r.object.pageIndex,id:r.object.id,patch:{inReplyToId:o.object.id,replyType:St.Group}}));this.updateAnnotationsMethod(i,t)}ungroupAnnotationsMethod(e,t){const n=t??this.getActiveDocumentId();if(!this.checkPermission(n,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","UngroupAnnotations",`Cannot ungroup annotations: document ${n} lacks ModifyAnnotations permission`);const o=this.getGroupMembersMethod(e,n).filter(i=>i.object.inReplyToId&&i.object.replyType===St.Group).map(i=>({pageIndex:i.object.pageIndex,id:i.object.id,patch:{inReplyToId:void 0,replyType:void 0}}));o.length>0&&this.updateAnnotationsMethod(o,n)}getGroupMembersMethod(e,t){return ss(this.getDocumentState(t),e)}isInGroupMethod(e,t){return ls(this.getDocumentState(t),e)}getGroupingActionMethod(e){return(t=>{const n=Fi(t);if(n.length===0)return"disabled";const o=n[0].object.id;if(ls(t,o)){const i=ss(t,o),r=new Set(i.map(a=>a.object.id));if(n.every(a=>r.has(a.object.id)))return"ungroup"}return n.length>=2?"group":"disabled"})(this.getDocumentState(e))}computeCombinedConstraints(e){let t=1/0,n=1/0,o=1/0,i=1/0;for(const r of e){const a=r.rect.origin.y,s=r.pageSize.height-(r.rect.origin.y+r.rect.size.height),l=r.rect.origin.x,c=r.pageSize.width-(r.rect.origin.x+r.rect.size.width);t=Math.min(t,a),n=Math.min(n,s),o=Math.min(o,l),i=Math.min(i,c)}return isFinite(t)||(t=0),isFinite(n)||(n=0),isFinite(o)||(o=0),isFinite(i)||(i=0),{maxUp:t,maxDown:n,maxLeft:o,maxRight:i}}clampDelta(e,t){return{x:Math.max(-t.maxLeft,Math.min(t.maxRight,e.x)),y:Math.max(-t.maxUp,Math.min(t.maxDown,e.y))}}startDrag(e,t){const{annotationIds:n,pageSize:o}=t,i=[];for(const c of n){const u=this.getAttachedLinksMethod(c,e);for(const h of u)i.includes(h.object.id)||i.push(h.object.id)}const r=[...n,...i],a=new Map,s=[];for(const c of r){const u=this.getAnnotationById(c,e);u&&(a.set(c,{...u.object.rect}),s.push({id:c,rect:u.object.rect,pageIndex:u.object.pageIndex,pageSize:o}))}const l={documentId:e,isDragging:!0,primaryIds:n,attachedLinkIds:i,allParticipantIds:r,originalRects:a,delta:{x:0,y:0},combinedConstraints:this.computeCombinedConstraints(s)};this.unifiedDragStates.set(e,l),this.unifiedDrag$.emit({documentId:e,type:"start",state:l,previewPatches:{}})}computeDragPreviewPatches(e,t){const n={};for(const o of e.allParticipantIds){const i=this.getAnnotationById(o,t);if(!i)continue;const r=e.originalRects.get(o);if(!r)continue;const a={...r,origin:{x:r.origin.x+e.delta.x,y:r.origin.y+e.delta.y}};n[o]=this.transformAnnotation(i.object,{type:"move",changes:{rect:a}})}return n}updateDrag(e,t){const n=this.unifiedDragStates.get(e);if(!n?.isDragging)return{x:0,y:0};const o=this.clampDelta(t,n.combinedConstraints),i={...n,delta:o};this.unifiedDragStates.set(e,i);const r=this.computeDragPreviewPatches(i,e);return this.unifiedDrag$.emit({documentId:e,type:"update",state:i,previewPatches:r}),o}commitDrag(e){const t=this.unifiedDragStates.get(e);if(!t)return;const n=t.delta;if(n.x!==0||n.y!==0){const i=[];for(const r of t.allParticipantIds){const a=this.getAnnotationById(r,e);if(!a)continue;const s=t.originalRects.get(r)??a.object.rect,l={...s,origin:{x:s.origin.x+n.x,y:s.origin.y+n.y}},c=this.transformAnnotation(a.object,{type:"move",changes:{rect:l}});i.push({pageIndex:a.object.pageIndex,id:r,patch:c})}i.length>0&&this.updateAnnotationsMethod(i,e)}const o=this.computeDragPreviewPatches(t,e);this.unifiedDrag$.emit({documentId:e,type:"end",state:{...t,isDragging:!1},previewPatches:o}),this.unifiedDragStates.delete(e)}cancelDrag(e){const t=this.unifiedDragStates.get(e);t&&(this.unifiedDrag$.emit({documentId:e,type:"cancel",state:{...t,isDragging:!1,delta:{x:0,y:0}},previewPatches:{}}),this.unifiedDragStates.delete(e))}getDragState(e){return this.unifiedDragStates.get(e)??null}get onDragChange(){return this.unifiedDrag$.on}computeUnifiedGroupBoundingBox(e){if(e.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};let t=1/0,n=1/0,o=-1/0,i=-1/0;for(const r of e)t=Math.min(t,r.origin.x),n=Math.min(n,r.origin.y),o=Math.max(o,r.origin.x+r.size.width),i=Math.max(i,r.origin.y+r.size.height);return{origin:{x:t,y:n},size:{width:o-t,height:i-n}}}computeUnifiedRelativePositions(e,t){return e.map(n=>({id:n.id,originalRect:n.rect,pageIndex:n.pageIndex,isAttachedLink:n.isAttachedLink,parentId:n.parentId,relativeX:t.size.width>0?(n.rect.origin.x-t.origin.x)/t.size.width:0,relativeY:t.size.height>0?(n.rect.origin.y-t.origin.y)/t.size.height:0,relativeWidth:t.size.width>0?n.rect.size.width/t.size.width:1,relativeHeight:t.size.height>0?n.rect.size.height/t.size.height:1}))}computeUnifiedResizedRects(e,t,n=10){const o=new Map;for(const i of e){const r=Math.max(n,i.relativeWidth*t.size.width),a=Math.max(n,i.relativeHeight*t.size.height);o.set(i.id,{origin:{x:t.origin.x+i.relativeX*t.size.width,y:t.origin.y+i.relativeY*t.size.height},size:{width:r,height:a}})}return o}computeResizePreviewPatches(e,t){const n={};for(const[o,i]of e){const r=this.getAnnotationById(o,t);r&&(n[o]=this.transformAnnotation(r.object,{type:"resize",changes:{rect:i}}))}return n}startResize(e,t){const{annotationIds:n,pageSize:o,resizeHandle:i}=t,r=[],a=[];for(const p of n){const v=this.getAnnotationById(p,e);if(v){a.push({id:p,rect:v.object.rect,pageIndex:v.object.pageIndex,isAttachedLink:!1});const f=this.getAttachedLinksMethod(p,e);for(const y of f)r.includes(y.object.id)||(r.push(y.object.id),a.push({id:y.object.id,rect:y.object.rect,pageIndex:y.object.pageIndex,isAttachedLink:!0,parentId:p}))}}const s=[...n,...r],l=a.map(p=>p.rect),c=this.computeUnifiedGroupBoundingBox(l),u=this.computeUnifiedRelativePositions(a,c),h=this.computeUnifiedResizedRects(u,c),m={documentId:e,isResizing:!0,primaryIds:n,attachedLinkIds:r,allParticipantIds:s,originalGroupBox:c,currentGroupBox:c,participatingAnnotations:u,resizeHandle:i,computedRects:h};this.unifiedResizeStates.set(e,m);const g=this.computeResizePreviewPatches(h,e);this.unifiedResize$.emit({documentId:e,type:"start",state:m,computedRects:Object.fromEntries(h),previewPatches:g})}updateResize(e,t){const n=this.unifiedResizeStates.get(e);if(!n?.isResizing)return{};const o=this.computeUnifiedResizedRects(n.participatingAnnotations,t),i={...n,currentGroupBox:t,computedRects:o};this.unifiedResizeStates.set(e,i);const r=Object.fromEntries(o),a=this.computeResizePreviewPatches(o,e);return this.unifiedResize$.emit({documentId:e,type:"update",state:i,computedRects:r,previewPatches:a}),r}commitResize(e){const t=this.unifiedResizeStates.get(e);if(!t)return;const n=this.computeUnifiedResizedRects(t.participatingAnnotations,t.currentGroupBox),o=[];for(const[r,a]of n){const s=this.getAnnotationById(r,e);if(!s)continue;const l=this.transformAnnotation(s.object,{type:"resize",changes:{rect:a}});o.push({pageIndex:s.object.pageIndex,id:r,patch:l})}o.length>0&&this.updateAnnotationsMethod(o,e);const i=this.computeResizePreviewPatches(n,e);this.unifiedResize$.emit({documentId:e,type:"end",state:{...t,isResizing:!1},computedRects:Object.fromEntries(n),previewPatches:i}),this.unifiedResizeStates.delete(e)}cancelResize(e){const t=this.unifiedResizeStates.get(e);if(!t)return;const n=this.computeUnifiedResizedRects(t.participatingAnnotations,t.originalGroupBox);this.unifiedResize$.emit({documentId:e,type:"cancel",state:{...t,isResizing:!1,currentGroupBox:t.originalGroupBox},computedRects:Object.fromEntries(n),previewPatches:{}}),this.unifiedResizeStates.delete(e)}getResizeState(e){return this.unifiedResizeStates.get(e)??null}get onResizeChange(){return this.unifiedResize$.on}updateAnnotationsMethod(e,t){const n=t??this.getActiveDocumentId();if(!this.checkPermission(n,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","UpdateAnnotations",`Cannot update annotations: document ${n} lacks ModifyAnnotations permission`);const o=this.getDocumentState(n),i=e.map(({pageIndex:l,id:c,patch:u})=>{var h;const m=(h=o.byUid[c])==null?void 0:h.object;return m?{pageIndex:l,id:c,patch:this.buildPatch(m,{...u,author:u.author??this.config.annotationAuthor}),originalObject:m}:null}).filter(l=>l!==null);if(i.length===0)return;const r=()=>{for(const{pageIndex:l,id:c,patch:u,originalObject:h}of i)this.dispatch(io(n,l,c,u)),this.events$.emit({type:"update",documentId:n,annotation:h,pageIndex:l,patch:u,committed:!1})};if(!this.history)return r(),void(this.config.autoCommit!==!1&&this.commit(n));const a=i.map(({pageIndex:l,id:c,patch:u,originalObject:h})=>({pageIndex:l,id:c,originalPatch:Object.fromEntries(Object.keys(u).map(m=>[m,h[m]])),originalObject:h})),s={execute:r,undo:()=>{for(const{pageIndex:l,id:c,originalPatch:u,originalObject:h}of a)this.dispatch(io(n,l,c,u)),this.events$.emit({type:"update",documentId:n,annotation:h,pageIndex:l,patch:u,committed:!1})}};this.history.forDocument(n).register(s,this.ANNOTATION_HISTORY_TOPIC)}getActiveTool(e){const t=this.getDocumentState(e);return t.activeToolId?this.state.tools.find(n=>n.id===t.activeToolId)??null:null}setActiveTool(e,t){var n,o;const i=t??this.getActiveDocumentId();if(e!==null&&!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","SetActiveTool",`Cannot activate tool: document ${i} lacks ModifyAnnotations permission`);const r=this.getDocumentState(i);if(e===r.activeToolId)return;this.dispatch(is(i,e));const a=this.state.tools.find(s=>s.id===e);a?(n=this.interactionManager)==null||n.forDocument(i).activate(a.interaction.mode??a.id):(o=this.interactionManager)==null||o.forDocument(i).activateDefaultMode()}getTool(e){return this.state.tools.find(t=>t.id===e)}findToolForAnnotation(e){let t=null,n=0;for(const o of this.state.tools){const i=o.matchScore(e);i>n&&(n=i,t=o)}return t}collectPendingChanges(e,t){const n=this.getDocumentState(e),o=this.pendingContexts.get(e),i={creations:[],updates:[],deletions:[],committedUids:[],isEmpty:!0};for(const[r,a]of Object.entries(n.byUid)){if(a.commitState==="synced")continue;if(t.pages.find(l=>l.index===a.object.pageIndex))switch(i.committedUids.push(r),i.isEmpty=!1,a.commitState){case"new":i.creations.push({uid:r,ta:a,ctx:o?.get(a.object.id)});break;case"dirty":i.updates.push({uid:r,ta:a});break;case"deleted":i.deletions.push({uid:r,ta:a})}}return i}executeCommitBatch(e,t,n){const o=new fe,i=this.pendingContexts.get(e),r=[];for(const{uid:s,ta:l,ctx:c}of n.creations){const u=t.pages.find(m=>m.index===l.object.pageIndex);if(!u)continue;const h=this.engine.createPageAnnotation(t,u,l.object,c);r.push({type:"create",task:h,ta:l,uid:s,ctx:c})}for(const{uid:s,ta:l}of n.updates){const c=t.pages.find(h=>h.index===l.object.pageIndex);if(!c)continue;const u=this.engine.updatePageAnnotation(t,c,l.object);r.push({type:"update",task:u,ta:l,uid:s})}for(const{uid:s,ta:l}of n.deletions){const c=t.pages.find(u=>u.index===l.object.pageIndex);if(c)if(l.object.id){const u=new fe;this.engine.removePageAnnotation(t,c,l.object).wait(()=>u.resolve(!0),u.fail),r.push({type:"delete",task:u,ta:l,uid:s})}else this.dispatch(rs(e,s))}const a=r.map(s=>s.task);return fe.allSettled(a).wait(()=>{var s,l;this.emitCommitEvents(e,r,i),this.dispatch((s=e,l=n.committedUids,{type:bu,payload:{documentId:s,committedUids:l}})),o.resolve(!0)},s=>o.fail(s)),o}emitCommitEvents(e,t,n){for(const o of t)if(o.task.state.stage===un.Resolved)switch(o.type){case"create":this.events$.emit({type:"create",documentId:e,annotation:o.ta.object,pageIndex:o.ta.object.pageIndex,ctx:o.ctx,committed:!0}),n?.delete(o.ta.object.id);break;case"update":this.events$.emit({type:"update",documentId:e,annotation:o.ta.object,pageIndex:o.ta.object.pageIndex,patch:o.ta.object,committed:!0});break;case"delete":this.dispatch(rs(e,o.uid)),this.events$.emit({type:"delete",documentId:e,annotation:o.ta.object,pageIndex:o.ta.object.pageIndex,committed:!0})}}acquireCommitLock(e){return!this.commitInProgress.get(e)&&(this.commitInProgress.set(e,!0),!0)}releaseCommitLock(e){this.commitInProgress.set(e,!1)}commit(e){const t=e??this.getActiveDocumentId();if(!this.getDocumentState(t).hasPendingChanges||!this.acquireCommitLock(t))return de.resolve(!0);const n=this.getCoreDocument(t),o=n?.document;if(!o)return this.releaseCommitLock(t),de.reject({code:J.NotFound,message:"Document not found"});const i=this.collectPendingChanges(t,o);if(i.isEmpty)return this.releaseCommitLock(t),de.resolve(!0);const r=new fe;return this.executeCommitBatch(t,o,i).wait(()=>{this.releaseCommitLock(t),this.getDocumentState(t).hasPendingChanges?this.commit(t).wait(a=>r.resolve(a),a=>r.fail(a)):r.resolve(!0)},a=>{this.releaseCommitLock(t),r.fail(a)}),r}getToolBehavior(e,t){var n;return((n=e.behavior)==null?void 0:n[t])!==void 0?e.behavior[t]:this.config[t]!==!1}};Fu.id="annotation";let Jo=Fu;function ei(e){return t=>t?.id===e}const Mf=ei("highlight"),Df=ei("squiggly"),Af=ei("underline"),zf=ei("strikeout"),Tf={manifest:lf,create:(e,t)=>new Jo(ne,e,t),reducer:(e,t)=>{switch(t.type){case su:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case lu:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"ANNOTATION/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case cu:{const{documentId:n,annotations:o}=t.payload,i=e.documents[n];if(!i)return e;const r={},a={};for(const[s,l]of Object.entries(o)){const c=Number(s),u=i.pages[c]||[];for(const m of u)delete a[m];const h=l.map(m=>{const g=m.id;return a[g]={commitState:"synced",object:m},g});r[c]=h}return{...e,documents:{...e.documents,[n]:{...i,pages:r,byUid:a}}}}case du:{const{documentId:n,id:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,selectedUids:[o],selectedUid:o}}}:e}case uu:{const{documentId:n}=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,selectedUids:[],selectedUid:null}}}:e}case hu:{const{documentId:n,id:o}=t.payload,i=e.documents[n];if(!i||i.selectedUids.includes(o))return e;const r=[...i.selectedUids,o];return{...e,documents:{...e.documents,[n]:{...i,selectedUids:r,selectedUid:vi(r)}}}}case mu:{const{documentId:n,id:o}=t.payload,i=e.documents[n];if(!i)return e;const r=i.selectedUids.filter(a=>a!==o);return{...e,documents:{...e.documents,[n]:{...i,selectedUids:r,selectedUid:vi(r)}}}}case gu:{const{documentId:n,ids:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,selectedUids:o,selectedUid:vi(o)}}}:e}case pu:{const{documentId:n,toolId:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeToolId:o}}}:e}case fu:{const{documentId:n,pageIndex:o,annotation:i}=t.payload,r=e.documents[n];if(!r)return e;const a=i.id;return{...e,documents:{...e.documents,[n]:{...r,pages:{...r.pages,[o]:[...r.pages[o]??[],a]},byUid:{...r.byUid,[a]:{commitState:"new",object:i}},hasPendingChanges:!0}}}}case yu:{const{documentId:n,pageIndex:o,id:i}=t.payload,r=e.documents[n];return r&&r.byUid[i]?{...e,documents:{...e.documents,[n]:{...r,pages:{...r.pages,[o]:(r.pages[o]??[]).filter(a=>a!==i)},byUid:{...r.byUid,[i]:{...r.byUid[i],commitState:"deleted"}},hasPendingChanges:!0}}}:e}case vu:{const{documentId:n,id:o,patch:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:mf(r,o,i)}}:e}case bu:{const{documentId:n,committedUids:o}=t.payload,i=e.documents[n];if(!i)return e;const r=new Set(o),a={};let s=!1;for(const[l,c]of Object.entries(i.byUid))r.has(l)?a[l]={...c,commitState:c.commitState==="dirty"||c.commitState==="new"?"synced":c.commitState}:(a[l]=c,c.commitState!=="new"&&c.commitState!=="dirty"&&c.commitState!=="deleted"||(s=!0));return{...e,documents:{...e.documents,[n]:{...i,byUid:a,hasPendingChanges:s}}}}case wu:{const{documentId:n,uid:o}=t.payload,i=e.documents[n];if(!i)return e;const{[o]:r,...a}=i.byUid;return{...e,documents:{...e.documents,[n]:{...i,byUid:a}}}}case Iu:{const n=new Map(e.tools.map(o=>[o.id,o]));return n.set(t.payload.id,t.payload),{...e,tools:Array.from(n.values())}}case Cu:{const{toolId:n,patch:o}=t.payload;return{...e,tools:e.tools.map(i=>i.id===n?{...i,defaults:{...i.defaults,...o}}:i)}}case xu:return e.colorPresets.includes(t.payload)?e:{...e,colorPresets:[...e.colorPresets,t.payload]};default:return e}},initialState:(e,t)=>(n=>{const o=new Map;return uf.forEach(i=>o.set(i.id,i)),(n.tools||[]).forEach(i=>o.set(i.id,i)),{documents:{},activeDocumentId:null,tools:Array.from(o.values()),colorPresets:n.colorPresets??hf}})(t)},ju="INTERACTION/INIT_STATE",Uu="INTERACTION/CLEANUP_STATE",Hu="INTERACTION/ACTIVATE_MODE",Bu="INTERACTION/PAUSE",Wu="INTERACTION/RESUME",qu="INTERACTION/SET_CURSOR",Gu="INTERACTION/SET_DEFAULT_MODE",Vu="INTERACTION/SET_EXCLUSION_RULES",Ku="INTERACTION/ADD_EXCLUSION_CLASS",Zu="INTERACTION/REMOVE_EXCLUSION_CLASS",Yu="INTERACTION/ADD_EXCLUSION_ATTRIBUTE",Xu="INTERACTION/REMOVE_EXCLUSION_ATTRIBUTE";function hs(e){return{type:Gu,payload:{mode:e}}}function ms(e){return{type:Vu,payload:{rules:e}}}const gs="pointerMode",Qu=class extends Ie{constructor(e,t,n){super(e,t),this.modes=new Map,this.cursorClaims=new Map,this.buckets=new Map,this.alwaysGlobal=new Map,this.alwaysPage=new Map,this.onModeChange$=We(),this.onHandlerChange$=We(),this.onCursorChange$=We(),this.onStateChange$=ee(),this.registerMode({id:gs,scope:"page",exclusive:!1,cursor:"auto"}),this.dispatch(hs(gs)),n.exclusionRules&&this.dispatch(ms(n.exclusionRules))}onDocumentLoadingStarted(e){const t={activeMode:this.state.defaultMode,cursor:"auto",paused:!1};this.dispatch((function(o,i){return{type:ju,payload:{documentId:o,state:i}}})(e,t)),this.cursorClaims.set(e,new Map),this.buckets.set(e,new Map),this.alwaysGlobal.set(e,new Set),this.alwaysPage.set(e,new Map);const n=this.buckets.get(e);for(const o of this.modes.keys())n.set(o,{global:new Set,page:new Map});this.logger.debug("InteractionManagerPlugin","DocumentOpened",`Initialized interaction state for document: ${e}`)}onDocumentClosed(e){this.cursorClaims.delete(e),this.buckets.delete(e),this.alwaysGlobal.delete(e),this.alwaysPage.delete(e),this.dispatch((function(t){return{type:Uu,payload:t}})(e)),this.logger.debug("InteractionManagerPlugin","DocumentClosed",`Cleaned up interaction state for document: ${e}`)}buildCapability(){return{getActiveMode:()=>this.getActiveMode(),getActiveInteractionMode:()=>this.getActiveInteractionMode(),activate:e=>this.activate(e),activateDefaultMode:()=>this.activateDefaultMode(),setCursor:(e,t,n)=>this.setCursor(e,t,n),getCurrentCursor:()=>this.getCurrentCursor(),removeCursor:e=>this.removeCursor(e),getHandlersForScope:e=>this.getHandlersForScope(e),activeModeIsExclusive:()=>this.activeModeIsExclusive(),pause:()=>this.pause(),resume:()=>this.resume(),isPaused:()=>this.registry.isDestroyed()||this.isPaused(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createInteractionScope(e),registerMode:e=>this.registerMode(e),registerHandlers:e=>this.registerHandlers(e),registerAlways:e=>this.registerAlways(e),setDefaultMode:e=>this.setDefaultMode(e),getDefaultMode:()=>this.state.defaultMode,getExclusionRules:()=>this.state.exclusionRules,setExclusionRules:e=>this.dispatch(ms(e)),addExclusionClass:e=>this.dispatch((function(t){return{type:Ku,payload:{className:t}}})(e)),removeExclusionClass:e=>this.dispatch((function(t){return{type:Zu,payload:{className:t}}})(e)),addExclusionAttribute:e=>this.dispatch((function(t){return{type:Yu,payload:{attribute:t}}})(e)),removeExclusionAttribute:e=>this.dispatch((function(t){return{type:Xu,payload:{attribute:t}}})(e)),onModeChange:this.onModeChange$.on,onCursorChange:this.onCursorChange$.on,onHandlerChange:this.onHandlerChange$.on,onStateChange:this.onStateChange$.on}}createInteractionScope(e){return{getActiveMode:()=>this.getActiveMode(e),getActiveInteractionMode:()=>this.getActiveInteractionMode(e),activate:t=>this.activate(t,e),activateDefaultMode:()=>this.activateDefaultMode(e),setCursor:(t,n,o)=>this.setCursor(t,n,o,e),getCurrentCursor:()=>this.getCurrentCursor(e),removeCursor:t=>this.removeCursor(t,e),getHandlersForScope:t=>this.getHandlersForScope(t),activeModeIsExclusive:()=>this.activeModeIsExclusive(e),pause:()=>this.pause(e),resume:()=>this.resume(e),isPaused:()=>this.isPaused(e),getState:()=>this.getDocumentStateOrThrow(e),onModeChange:t=>this.onModeChange$.on(n=>{n.documentId===e&&t(n.activeMode)}),onCursorChange:t=>this.onCursorChange$.on(n=>{n.documentId===e&&t(n.cursor)}),onStateChange:t=>this.onStateChange$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Interaction state not found for document: ${e??"active"}`);return t}activate(e,t){var n;const o=t??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(o);if(!this.modes.has(e))throw new Error(`[interaction] unknown mode '${e}'`);if(e===i.activeMode)return;const r=i.activeMode;(n=this.cursorClaims.get(o))==null||n.clear(),this.notifyHandlersInactive(o,r),this.dispatch((function(a,s){return{type:Hu,payload:{documentId:a,mode:s}}})(o,e)),this.emitCursor(o),this.notifyHandlersActive(o,e),this.onModeChange$.emit({documentId:o,activeMode:e,previousMode:r})}activateDefaultMode(e){const t=e??this.getActiveDocumentIdOrNull();t&&this.activate(this.state.defaultMode,t)}setDefaultMode(e){if(!this.modes.has(e))throw new Error(`[interaction] cannot set unknown mode '${e}' as default`);this.dispatch(hs(e))}getActiveMode(e){return this.getDocumentStateOrThrow(e).activeMode}getActiveInteractionMode(e){const t=this.getDocumentState(e);return t?this.modes.get(t.activeMode)??null:null}activeModeIsExclusive(e){const t=this.getActiveInteractionMode(e);return!!t?.exclusive}pause(e){const t=e??this.getActiveDocumentId();this.dispatch((function(n){return{type:Bu,payload:n}})(t))}resume(e){const t=e??this.getActiveDocumentId();this.dispatch((function(n){return{type:Wu,payload:n}})(t))}isPaused(e){return this.getDocumentStateOrThrow(e).paused}registerMode(e){this.modes.set(e.id,e);for(const t of this.buckets.keys()){const n=this.buckets.get(t);n.has(e.id)||n.set(e.id,{global:new Set,page:new Map})}}registerHandlers({documentId:e,modeId:t,handlers:n,pageIndex:o}){const i=Array.isArray(t)?t:[t],r=[],a=this.buckets.get(e);if(!a)throw new Error(`No buckets found for document: ${e}`);for(const s of i){const l=a.get(s);if(!l)throw new Error(`unknown mode '${s}'`);if(o==null)l.global.add(n);else{const c=l.page.get(o)??new Set;c.add(n),l.page.set(o,c)}r.push(()=>{if(o==null)l.global.delete(n);else{const c=l.page.get(o);c&&(c.delete(n),c.size===0&&l.page.delete(o))}})}return this.onHandlerChange$.emit({...this.state}),()=>{r.forEach(s=>s()),this.onHandlerChange$.emit({...this.state})}}registerAlways({scope:e,handlers:t}){if(e.type==="global"){const i=this.alwaysGlobal.get(e.documentId)??new Set;return i.add(t),this.alwaysGlobal.set(e.documentId,i),this.onHandlerChange$.emit({...this.state}),()=>{i.delete(t),this.onHandlerChange$.emit({...this.state})}}const n=this.alwaysPage.get(e.documentId)??new Map,o=n.get(e.pageIndex)??new Set;return o.add(t),n.set(e.pageIndex,o),this.alwaysPage.set(e.documentId,n),this.onHandlerChange$.emit({...this.state}),()=>{o.delete(t),this.onHandlerChange$.emit({...this.state})}}getHandlersForScope(e){var t;const n=this.getDocumentState(e.documentId);if(!n)return null;const o=this.modes.get(n.activeMode);if(!o)return null;const i=this.buckets.get(e.documentId);if(!i)return null;const r=i.get(o.id);if(!r)return null;const a=(s,l)=>s.size||l.size?(function(c){const u=["onPointerDown","onPointerUp","onPointerMove","onPointerEnter","onPointerLeave","onPointerCancel","onMouseDown","onMouseUp","onMouseMove","onMouseEnter","onMouseLeave","onMouseCancel","onClick","onDoubleClick"],h={};for(const m of u)h[m]=(g,p,v)=>{var f;for(const y of c){if(p.isImmediatePropagationStopped())break;(f=y[m])==null||f.call(y,g,p,v)}};return h})([...s,...l]):null;return e.type==="global"?a(this.alwaysGlobal.get(e.documentId)??new Set,o.scope==="global"?r.global:new Set):a(((t=this.alwaysPage.get(e.documentId))==null?void 0:t.get(e.pageIndex))??new Set,o.scope==="page"?r.page.get(e.pageIndex)??new Set:new Set)}setCursor(e,t,n=0,o){const i=o??this.getActiveDocumentId(),r=this.cursorClaims.get(i);r&&(r.set(e,{cursor:t,priority:n}),this.emitCursor(i))}removeCursor(e,t){const n=t??this.getActiveDocumentId(),o=this.cursorClaims.get(n);o&&(o.delete(e),this.emitCursor(n))}getCurrentCursor(e){return this.getDocumentStateOrThrow(e).cursor}emitCursor(e){var t;const n=this.cursorClaims.get(e);if(!n)return;const o=this.getDocumentState(e);if(!o)return;const i=[...n.values()].sort((r,a)=>a.priority-r.priority)[0]??{cursor:((t=this.modes.get(o.activeMode))==null?void 0:t.cursor)??"auto"};i.cursor!==o.cursor&&(this.dispatch((function(r,a){return{type:qu,payload:{documentId:r,cursor:a}}})(e,i.cursor)),this.onCursorChange$.emit({documentId:e,cursor:i.cursor}))}notifyHandlersActive(e,t){var n,o;(n=this.alwaysGlobal.get(e))==null||n.forEach(s=>{var l;(l=s.onHandlerActiveStart)==null||l.call(s,t)}),(o=this.alwaysPage.get(e))==null||o.forEach(s=>{s.forEach(l=>{var c;(c=l.onHandlerActiveStart)==null||c.call(l,t)})});const i=this.modes.get(t);if(!i)return;const r=this.buckets.get(e);if(!r)return;const a=r.get(t);a&&(i.scope==="global"&&a.global.forEach(s=>{var l;(l=s.onHandlerActiveStart)==null||l.call(s,t)}),i.scope==="page"&&a.page.forEach(s=>{s.forEach(l=>{var c;(c=l.onHandlerActiveStart)==null||c.call(l,t)})}))}notifyHandlersInactive(e,t){var n,o;(n=this.alwaysGlobal.get(e))==null||n.forEach(s=>{var l;(l=s.onHandlerActiveEnd)==null||l.call(s,t)}),(o=this.alwaysPage.get(e))==null||o.forEach(s=>{s.forEach(l=>{var c;(c=l.onHandlerActiveEnd)==null||c.call(l,t)})});const i=this.modes.get(t);if(!i)return;const r=this.buckets.get(e);if(!r)return;const a=r.get(t);a&&(i.scope==="global"&&a.global.forEach(s=>{var l;(l=s.onHandlerActiveEnd)==null||l.call(s,t)}),i.scope==="page"&&a.page.forEach(s=>{s.forEach(l=>{var c;(c=l.onHandlerActiveEnd)==null||c.call(l,t)})}))}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&this.onStateChange$.emit({documentId:n,state:i})}}async initialize(e){this.logger.info("InteractionManagerPlugin","Initialize","Interaction Manager Plugin initialized")}async destroy(){this.onModeChange$.clear(),this.onCursorChange$.clear(),this.onHandlerChange$.clear(),this.onStateChange$.clear(),await super.destroy()}};Qu.id="interaction-manager";let ti=Qu;const ps="interaction-manager",fs={defaultMode:"pointerMode",exclusionRules:{classes:[],dataAttributes:["data-no-interaction"]},documents:{},activeDocumentId:null},Ef={manifest:{id:ps,name:"Interaction Manager Plugin",version:"1.0.0",provides:["interaction-manager"],requires:[],optional:[],defaultConfig:{exclusionRules:{classes:[],dataAttributes:["data-no-interaction"]}}},create:(e,t)=>new ti(ps,e,t),reducer:(e=fs,t)=>{switch(t.type){case ju:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Uu:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"INTERACTION/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Hu:{const{documentId:n,mode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeMode:o}}}:e}case qu:{const{documentId:n,cursor:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,cursor:o}}}:e}case Bu:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,paused:!0}}}:e}case Wu:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,paused:!1}}}:e}case Gu:return{...e,defaultMode:t.payload.mode};case Vu:return{...e,exclusionRules:t.payload.rules};case Ku:return{...e,exclusionRules:{...e.exclusionRules,classes:[...e.exclusionRules.classes||[],t.payload.className].filter((n,o,i)=>i.indexOf(n)===o)}};case Zu:return{...e,exclusionRules:{...e.exclusionRules,classes:(e.exclusionRules.classes||[]).filter(n=>n!==t.payload.className)}};case Yu:return{...e,exclusionRules:{...e.exclusionRules,dataAttributes:[...e.exclusionRules.dataAttributes||[],t.payload.attribute].filter((n,o,i)=>i.indexOf(n)===o)}};case Xu:return{...e,exclusionRules:{...e.exclusionRules,dataAttributes:(e.exclusionRules.dataAttributes||[]).filter(n=>n!==t.payload.attribute)}};default:return e}},initialState:fs},Fn=()=>Te(ti.id),Rf={pointerdown:"onPointerDown",pointerup:"onPointerUp",pointermove:"onPointerMove",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",pointercancel:"onPointerCancel",mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousecancel:"onMouseCancel",click:"onClick",dblclick:"onDoubleClick",touchstart:"onPointerDown",touchend:"onPointerUp",touchmove:"onPointerMove",touchcancel:"onPointerCancel"},vs=["pointerdown","pointerup","pointermove","pointerenter","pointerleave","pointercancel","mousedown","mouseup","mousemove","mouseenter","mouseleave","mousecancel","click","dblclick"],ys=typeof PointerEvent<"u"?vs:[...vs,"touchstart","touchend","touchmove","touchcancel"];function bs(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function Ju(e,t,n,o){const i=e.forDocument(t.documentId);let r=e.getHandlersForScope(t);const a=()=>{var b;return((b=i.getActiveInteractionMode())==null?void 0:b.wantsRawTouch)!==!1},s={};let l=a();const c=b=>{ys.forEach(w=>{const x=s[w]??(s[w]=y);var C;n.addEventListener(w,x,(C=b,w.startsWith("touch")?{passive:!C}:{passive:!1}))})},u=()=>{ys.forEach(b=>{const w=s[b];w&&n.removeEventListener(b,w)})};c(l),n.style.touchAction=l?"none":"";const h=i.onModeChange(()=>{if(t.type==="global"){const w=i.getActiveInteractionMode();n.style.cursor=w?.scope==="global"?w.cursor??"auto":"auto"}r=e.getHandlersForScope(t);const b=a();b!==l&&(u(),c(b),l=b,n.style.touchAction=l?"none":"")}),m=e.onHandlerChange(()=>{r=e.getHandlersForScope(t)}),g=i.getActiveInteractionMode(),p=i.getCurrentCursor();n.style.cursor=t.type==="global"&&g?.scope!=="global"?"auto":p;const v=i.onCursorChange(b=>{var w;t.type==="global"&&((w=i.getActiveInteractionMode())==null?void 0:w.scope)!=="global"||(n.style.cursor=b)}),f=(b,w)=>{if(o)return o(b,w);const x=w.getBoundingClientRect();return{x:b.clientX-x.left,y:b.clientY-x.top}};function y(b){var w;if(e.isPaused())return;const x=e.getExclusionRules();if(b.target&&(function(I,P){var z,D,T;if(!I)return!1;let _=I;for(;_;){if((z=P.classes)!=null&&z.length){for(const H of P.classes)if((D=_.classList)!=null&&D.contains(H))return!0}if((T=P.dataAttributes)!=null&&T.length){for(const H of P.dataAttributes)if(_.hasAttribute(H))return!0}_=_.parentElement}return!1})(b.target,x))return;const C=Rf[b.type];if(!C||!r?.[C])return;let S,M;bs(b)&&l&&(b.type==="touchmove"||b.type==="touchcancel")&&b.preventDefault();let A=!1;if(bs(b)){const I=b.type==="touchend"||b.type==="touchcancel"?b.changedTouches[0]:b.touches[0];if(!I)return;S=f(I,n),M={clientX:I.clientX,clientY:I.clientY,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,altKey:b.altKey,metaKey:b.metaKey,target:b.target,currentTarget:b.currentTarget,setPointerCapture:()=>{},releasePointerCapture:()=>{},stopImmediatePropagation:()=>{A=!0},isImmediatePropagationStopped:()=>A}}else{const I=b;S=f(I,n),M={clientX:I.clientX,clientY:I.clientY,ctrlKey:I.ctrlKey,shiftKey:I.shiftKey,altKey:I.altKey,metaKey:I.metaKey,target:I.target,currentTarget:I.currentTarget,setPointerCapture:()=>{var P,z;(z=(P=I.target)==null?void 0:P.setPointerCapture)==null||z.call(P,I.pointerId)},releasePointerCapture:()=>{var P,z;(z=(P=I.target)==null?void 0:P.releasePointerCapture)==null||z.call(P,I.pointerId)},stopImmediatePropagation:()=>{A=!0},isImmediatePropagationStopped:()=>A}}(w=r[C])==null||w.call(r,S,M,i.getActiveMode())}return()=>{u(),h(),v(),m()}}const _f=({children:e,documentId:t,style:n,...o})=>{const i=V(null),{provides:r}=Fn();return L(()=>{if(r&&i.current)return Ju(r,{type:"global",documentId:t},i.current)},[r,t]),k("div",{ref:i,style:{width:"100%",height:"100%",...n},...o,children:e})},Nf=({documentId:e,pageIndex:t,children:n,rotation:o,scale:i,convertEventToPoint:r,style:a,...s})=>{var l,c;const u=V(null),{provides:h}=Fn(),m=(function(x){const{provides:C}=Fn(),[S,M]=R(()=>{if(!C)return!1;const A=C.forDocument(x).getActiveInteractionMode();return A?.scope==="page"&&!!A.exclusive});return L(()=>{if(!C)return;const A=C.forDocument(x);return A.onModeChange(()=>{const I=A.getActiveInteractionMode();M(I?.scope==="page"&&!!I?.exclusive)})},[C,x]),S})(e),g=je(e),p=(c=(l=g?.document)==null?void 0:l.pages)==null?void 0:c[t],v=p?.size??{width:0,height:0},f=o??g?.rotation??0,y=i??g?.scale??1,b=wo(v,0,y),w=Y((x,C)=>{const S=C.getBoundingClientRect(),M={x:x.clientX-S.left,y:x.clientY-S.top};return(function(A,I,P,z){return go(Rl(A,I,(4-P)%4),1/z)})(wo({width:b.width,height:b.height},f,1),M,f,y)},[v,f,y]);return L(()=>{if(h&&u.current)return Ju(h,{type:"page",documentId:e,pageIndex:t},u.current,r||w)},[h,e,t,r,w]),k("div",{ref:u,style:{position:"relative",width:b.width,height:b.height,...a},...s,children:[n,m&&k("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10}})]})},Of={},Rr=()=>Qe(Jo.id),vt=()=>Te(Jo.id),eh=e=>{var t;const{provides:n}=vt(),[o,i]=R(((t=n?.forDocument(e))==null?void 0:t.getState())??{pages:{},byUid:{},selectedUids:[],selectedUid:null,activeToolId:null,hasPendingChanges:!1});return L(()=>{if(!n)return;const r=n.forDocument(e);return i(r.getState()),r.onStateChange(a=>{i(a)})},[n,e]),{state:o,provides:n?.forDocument(e)??null}};function et({scale:e,documentId:t,pageIndex:n,rotation:o,pageWidth:i,pageHeight:r,trackedAnnotation:a,children:s,isSelected:l,isMultiSelected:c=!1,isDraggable:u,isResizable:h,lockAspectRatio:m=!1,style:g={},vertexConfig:p,selectionMenu:v,outlineOffset:f=1,onDoubleClick:y,onSelect:b,zIndex:w=1,resizeUI:x,vertexUI:C,selectionOutlineColor:S="#007ACC",customAnnotationRenderer:M,...A}){const[I,P]=R(a.object),{provides:z}=vt(),{plugin:D}=Rr(),{canModifyAnnotations:T}=Bl(t),_=V(null),H=T&&u&&!c,$=T&&h&&!c,j=K(()=>z?z.forDocument(t):null,[z,t]),F=I?{...a.object,...I}:a.object,B=x?.color??"#007ACC",ge=C?.color??"#007ACC",ue=x?.size??12,be=C?.size??12,ke=V(null),$e=Y(se=>{var we;if(!((we=se.transformData)!=null&&we.type)||c||!D)return;const{type:_e,changes:ye,metadata:X}=se.transformData,le=a.object.id,ae={width:i,height:r};if(se.state==="start"&&(ke.current=a.object.rect,_.current=a.object,_e==="move"?D.startDrag(t,{annotationIds:[le],pageSize:ae}):_e==="resize"&&D.startResize(t,{annotationIds:[le],pageSize:ae,resizeHandle:X?.handle??"se"})),ye.rect&&ke.current)if(_e==="move"){const ve={x:ye.rect.origin.x-ke.current.origin.x,y:ye.rect.origin.y-ke.current.origin.y};D.updateDrag(t,ve)}else _e==="resize"&&D.updateResize(t,ye.rect);if(_e==="vertex-edit"&&ye.vertices&&p){const ve=_.current??a.object,Ue=p.transformAnnotation(ve,ye.vertices),Ke=z?.transformAnnotation(ve,{type:_e,changes:Ue,metadata:X});Ke&&(P(Dt=>({...Dt,...Ke})),se.state==="end"&&j?.updateAnnotation(n,le,Ke))}se.state==="end"&&(ke.current=null,_.current=null,_e==="move"?D.commitDrag(t):_e==="resize"&&D.commitResize(t))},[D,t,a.object,i,r,n,c,p,z,j]),{dragProps:yt,vertices:bt,resize:Je}=qd({controller:{element:F.rect,vertices:p?.extractVertices(F),constraints:{minWidth:10,minHeight:10,boundingBox:{width:i,height:r}},maintainAspectRatio:m,pageRotation:o,scale:e,enabled:l&&!c,onUpdate:$e},resizeUI:{handleSize:ue,spacing:f,offsetMode:"outside",includeSides:!m,zIndex:w+1},vertexUI:{vertexSize:be,zIndex:w+2},includeVertices:!!p}),$t=(function(se,{delay:we=300,tolerancePx:_e=18}={}){const ye=V({t:0,x:0,y:0}),X=Y(ae=>{if(!se||ae.pointerType==="mouse"||ae.isPrimary===!1)return;const ve=performance.now(),Ue=ae.clientX,Ke=ae.clientY,Dt=ve-ye.current.t<=we,Ft=Ue-ye.current.x,At=Ke-ye.current.y;Dt&&Ft*Ft+At*At<=_e*_e&&se?.(ae),ye.current={t:ve,x:Ue,y:Ke}},[se,we,_e]),le=Y(ae=>{se?.(ae)},[se]);return se?{[Wp]:le,onPointerUpCapture:X}:{}})(K(()=>{if(T&&y)return y},[T,y]));L(()=>{P(a.object)},[a.object]),L(()=>{if(!D)return;const se=a.object.id,we=ye=>{var X;if(ye.documentId!==t)return;const le=(X=ye.previewPatches)==null?void 0:X[se];ye.type==="update"&&le?P(ae=>({...ae,...le})):ye.type==="cancel"&&P(a.object)},_e=[D.onDragChange(we),D.onResizeChange(we)];return()=>_e.forEach(ye=>ye())},[D,t,a.object]);const Mt=l&&!c;return k("div",{"data-no-interaction":!0,children:[k("div",{...H&&l?yt:{},...$t,style:{position:"absolute",left:F.rect.origin.x*e,top:F.rect.origin.y*e,width:F.rect.size.width*e,height:F.rect.size.height*e,outline:Mt?`1px solid ${S}`:"none",outlineOffset:Mt?`${f}px`:"0px",pointerEvents:l&&!c?"auto":"none",touchAction:"none",cursor:l&&H?"move":"default",zIndex:w,...g},...A,children:[(()=>{const se=typeof s=="function"?s(F):s,we=M?.({annotation:F,children:se,isSelected:l,scale:e,rotation:o,pageWidth:i,pageHeight:r,pageIndex:n,onSelect:b});return we??se})(),l&&$&&Je.map(({key:se,...we})=>x?.component?x.component({key:se,...we,backgroundColor:B}):k("div",{...we,style:{...we.style,backgroundColor:B}},se)),l&&T&&!c&&bt.map(({key:se,...we})=>C?.component?C.component({key:se,...we,backgroundColor:ge}):k("div",{...we,style:{...we.style,backgroundColor:ge}},se))]}),v&&!c&&k($n,{rect:{origin:{x:F.rect.origin.x*e,y:F.rect.origin.y*e},size:{width:F.rect.size.width*e,height:F.rect.size.height*e}},rotation:o,children:se=>v({...se,context:{type:"annotation",annotation:a,pageIndex:n},selected:l,placement:{suggestTop:!1}})})]})}function Lf({documentId:e,pageIndex:t,scale:n,rotation:o,pageWidth:i,pageHeight:r,selectedAnnotations:a,isDraggable:s,isResizable:l,resizeUI:c,selectionOutlineColor:u="#007ACC",outlineOffset:h=2,zIndex:m=100,groupSelectionMenu:g}){const{plugin:p}=Rr(),v=V(null),f=V(!1),y=V(!1),b=K(()=>(function(P){return lr(P)??ng})(a.map(P=>P.object.rect)),[a]),[w,x]=R(b);L(()=>{f.current||y.current||x(b)},[b]);const C=Y(P=>{var z,D;if(!((z=P.transformData)!=null&&z.type)||!p)return;const T=P.transformData.type,_=T==="move",H=T==="resize";if(_&&!s)return;P.state==="start"&&(v.current=b,_?(f.current=!0,p.startDrag(e,{annotationIds:a.map(j=>j.object.id),pageSize:{width:i,height:r}})):H&&(y.current=!0,p.startResize(e,{annotationIds:a.map(j=>j.object.id),pageSize:{width:i,height:r},resizeHandle:((D=P.transformData.metadata)==null?void 0:D.handle)??"se"})));const $=v.current??b;if(_&&P.transformData.changes.rect){const j=P.transformData.changes.rect,F={x:j.origin.x-$.origin.x,y:j.origin.y-$.origin.y},B=p.updateDrag(e,F);x({...$,origin:{x:$.origin.x+B.x,y:$.origin.y+B.y}})}else if(H&&P.transformData.changes.rect){const j=P.transformData.changes.rect;p.updateResize(e,j),x(j)}P.state==="end"&&(v.current=null,_&&f.current?(f.current=!1,p.commitDrag(e)):H&&y.current&&(y.current=!1,p.commitResize(e)))},[p,e,i,r,b,s,a]),S=c?.color??"#007ACC",M=c?.size??12,{dragProps:A,resize:I}=qd({controller:{element:w,constraints:{minWidth:20,minHeight:20,boundingBox:{width:i,height:r}},maintainAspectRatio:!1,pageRotation:o,scale:n,enabled:!0,onUpdate:C},resizeUI:{handleSize:M,spacing:h,offsetMode:"outside",includeSides:!0,zIndex:m+1},vertexUI:{vertexSize:0,zIndex:m},includeVertices:!1});return a.length<2?null:k("div",{"data-group-selection-box":!0,"data-no-interaction":!0,children:[k("div",{...s?A:{onPointerDown:P=>P.stopPropagation()},style:{position:"absolute",left:w.origin.x*n,top:w.origin.y*n,width:w.size.width*n,height:w.size.height*n,outline:`2px dashed ${u}`,outlineOffset:h-1,cursor:s?"move":"default",touchAction:"none",zIndex:m},children:l&&I.map(({key:P,...z})=>c?.component?c.component({key:P,...z,backgroundColor:S}):k("div",{...z,style:{...z.style,backgroundColor:S}},P))}),g&&k($n,{rect:{origin:{x:w.origin.x*n,y:w.origin.y*n},size:{width:w.size.width*n,height:w.size.height*n}},rotation:o,children:P=>g({...P,context:{type:"group",annotations:a,pageIndex:t},selected:!0,placement:{suggestTop:!1}})})]})}function th({strokeColor:e,opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){const s=e??"#FFFF00";return k(te,{children:n.map((l,c)=>k("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?l.origin.x-o.origin.x:l.origin.x)*i,top:(o?l.origin.y-o.origin.y:l.origin.y)*i,width:l.size.width*i,height:l.size.height*i,background:s,opacity:t,pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:void 0,...a}},c))})}function nh({strokeColor:e,opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){const s=e??"#FFFF00",l=2*i;return k(te,{children:n.map((c,u)=>k("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?c.origin.x-o.origin.x:c.origin.x)*i,top:(o?c.origin.y-o.origin.y:c.origin.y)*i,width:c.size.width*i,height:c.size.height*i,background:"transparent",pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:0,...a},children:k("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:l,background:s,opacity:t,pointerEvents:"none"}})},u))})}function oh({strokeColor:e,opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){const s=e??"#FFFF00",l=2*i;return k(te,{children:n.map((c,u)=>k("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?c.origin.x-o.origin.x:c.origin.x)*i,top:(o?c.origin.y-o.origin.y:c.origin.y)*i,width:c.size.width*i,height:c.size.height*i,background:"transparent",pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:0,...a},children:k("div",{style:{position:"absolute",left:0,top:"50%",width:"100%",height:l,background:s,opacity:t,transform:"translateY(-50%)",pointerEvents:"none"}})},u))})}function ih({strokeColor:e,opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){const s=2*i,l=6*i,c=`url("data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="${l}" height="${2*s}" viewBox="0 0 ${l} ${2*s}">
      <path d="M0 ${s} Q ${l/4} 0 ${l/2} ${s} T ${l} ${s}"
            fill="none" stroke="${e??"#FFFF00"}" stroke-width="${s}" stroke-linecap="round"/>
    </svg>`)}")`;return k(te,{children:n.map((u,h)=>k("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?u.origin.x-o.origin.x:u.origin.x)*i,top:(o?u.origin.y-o.origin.y:u.origin.y)*i,width:u.size.width*i,height:u.size.height*i,background:"transparent",pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:0,...a},children:k("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:2*s,backgroundImage:c,backgroundRepeat:"repeat-x",backgroundSize:`${l}px ${2*s}px`,opacity:t,pointerEvents:"none"}})},h))})}function rh({isSelected:e,strokeColor:t,opacity:n=1,strokeWidth:o,inkList:i,rect:r,scale:a,onClick:s}){const l=t??"#000000",c=K(()=>i.map(({points:m})=>{let g="";return m.forEach(({x:p,y:v},f)=>{const y=p-r.origin.x,b=v-r.origin.y;g+=(f===0?"M":"L")+y+" "+b+" "}),g.trim()}),[i,r]),u=r.size.width*a,h=r.size.height*a;return k("svg",{style:{position:"absolute",width:u,height:h,pointerEvents:"none",zIndex:2,overflow:"visible"},width:u,height:h,viewBox:`0 0 ${r.size.width} ${r.size.height}`,children:c.map((m,g)=>k("path",{d:m,fill:"none",opacity:n,onPointerDown:s,onTouchStart:s,style:{cursor:e?"move":"pointer",pointerEvents:e?"none":"visibleStroke",stroke:l,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round"}},g))})}function ah({isSelected:e,color:t="#000000",strokeColor:n,opacity:o=1,strokeWidth:i,strokeStyle:r=he.SOLID,strokeDashArray:a,rect:s,scale:l,onClick:c}){const{width:u,height:h,x:m,y:g}=K(()=>{const f=s.size.width,y=s.size.height;return{width:Math.max(f-i,0),height:Math.max(y-i,0),x:i/2,y:i/2}},[s,i]),p=(u+i)*l,v=(h+i)*l;return k("svg",{style:{position:"absolute",width:p,height:v,pointerEvents:"none",zIndex:2},width:p,height:v,viewBox:`0 0 ${u+i} ${h+i}`,children:k("rect",{x:m,y:g,width:u,height:h,fill:t,opacity:o,onPointerDown:c,onTouchStart:c,style:{cursor:e?"move":"pointer",pointerEvents:e?"none":t==="transparent"?"visibleStroke":"visible",stroke:n??t,strokeWidth:i,...r===he.DASHED&&{strokeDasharray:a?.join(",")}}})})}function sh({color:e="#000000",strokeColor:t,opacity:n=1,strokeWidth:o,strokeStyle:i=he.SOLID,strokeDashArray:r,rect:a,scale:s,onClick:l,isSelected:c}){const{width:u,height:h,cx:m,cy:g,rx:p,ry:v}=K(()=>{const b=a.size.width,w=a.size.height,x=Math.max(b-o,0),C=Math.max(w-o,0);return{width:b,height:w,cx:o/2+x/2,cy:o/2+C/2,rx:x/2,ry:C/2}},[a,o]),f=u*s,y=h*s;return k("svg",{style:{position:"absolute",width:f,height:y,pointerEvents:"none",zIndex:2},width:f,height:y,viewBox:`0 0 ${u} ${h}`,children:k("ellipse",{cx:m,cy:g,rx:p,ry:v,fill:e,opacity:n,onPointerDown:l,onTouchStart:l,style:{cursor:c?"move":"pointer",pointerEvents:c?"none":e==="transparent"?"visibleStroke":"visible",stroke:t??e,strokeWidth:o,...i===he.DASHED&&{strokeDasharray:r?.join(",")}}})})}function lh({color:e="transparent",opacity:t=1,strokeWidth:n,strokeColor:o="#000000",strokeStyle:i=he.SOLID,strokeDashArray:r,rect:a,linePoints:s,lineEndings:l,scale:c,onClick:u,isSelected:h}){const{x1:m,y1:g,x2:p,y2:v}=K(()=>({x1:s.start.x-a.origin.x,y1:s.start.y-a.origin.y,x2:s.end.x-a.origin.x,y2:s.end.y-a.origin.y}),[s,a]),f=K(()=>{const w=Math.atan2(v-g,p-m);return{start:Do.createEnding(l?.start,n,w+Math.PI,m,g),end:Do.createEnding(l?.end,n,w,p,v)}},[l,n,m,g,p,v]),y=a.size.width*c,b=a.size.height*c;return k("svg",{style:{position:"absolute",width:y,height:b,pointerEvents:"none",zIndex:2,overflow:"visible"},width:y,height:b,viewBox:`0 0 ${a.size.width} ${a.size.height}`,children:[k("line",{x1:m,y1:g,x2:p,y2:v,opacity:t,onPointerDown:u,onTouchStart:u,style:{cursor:h?"move":"pointer",pointerEvents:h?"none":"visibleStroke",stroke:o,strokeWidth:n,strokeLinecap:"butt",...i===he.DASHED&&{strokeDasharray:r?.join(",")}}}),f.start&&k("path",{d:f.start.d,transform:f.start.transform,onPointerDown:u,onTouchStart:u,stroke:o,style:{cursor:h?"move":"pointer",strokeWidth:n,strokeLinecap:"butt",pointerEvents:h?"none":f.start.filled?"visible":"visibleStroke",...i===he.DASHED&&{strokeDasharray:r?.join(",")}},fill:f.start.filled?e:"none"}),f.end&&k("path",{d:f.end.d,transform:f.end.transform,stroke:o,onPointerDown:u,onTouchStart:u,style:{cursor:h?"move":"pointer",strokeWidth:n,strokeLinecap:"butt",pointerEvents:h?"none":f.end.filled?"visible":"visibleStroke",...i===he.DASHED&&{strokeDasharray:r?.join(",")}},fill:f.end.filled?e:"none"})]})}function ch({rect:e,vertices:t,color:n="transparent",strokeColor:o="#000000",opacity:i=1,strokeWidth:r,scale:a,isSelected:s,onClick:l,lineEndings:c}){const u=K(()=>t.map(({x:v,y:f})=>({x:v-e.origin.x,y:f-e.origin.y})),[t,e]),h=K(()=>{if(!u.length)return"";const[v,...f]=u;return`M ${v.x} ${v.y} `+f.map(y=>`L ${y.x} ${y.y} `).join("").trim()},[u]),m=K(()=>{if(u.length<2)return{start:null,end:null};const v=(b,w)=>Math.atan2(w.y-b.y,w.x-b.x),f=v(u[0],u[1]),y=v(u[u.length-2],u[u.length-1]);return{start:Do.createEnding(c?.start,r,f+Math.PI,u[0].x,u[0].y),end:Do.createEnding(c?.end,r,y,u[u.length-1].x,u[u.length-1].y)}},[u,c,r]),g=e.size.width*a,p=e.size.height*a;return k("svg",{style:{position:"absolute",width:g,height:p,pointerEvents:"none",zIndex:2,overflow:"visible"},width:g,height:p,viewBox:`0 0 ${e.size.width} ${e.size.height}`,children:[k("path",{d:h,onPointerDown:l,onTouchStart:l,opacity:i,style:{fill:"none",stroke:o??n,strokeWidth:r,cursor:s?"move":"pointer",pointerEvents:s?"none":"visibleStroke",strokeLinecap:"butt",strokeLinejoin:"miter"}}),m.start&&k("path",{d:m.start.d,transform:m.start.transform,stroke:o,fill:m.start.filled?n:"none",onPointerDown:l,onTouchStart:l,style:{cursor:s?"move":"pointer",strokeWidth:r,pointerEvents:s?"none":m.start.filled?"visible":"visibleStroke",strokeLinecap:"butt"}}),m.end&&k("path",{d:m.end.d,transform:m.end.transform,stroke:o,fill:m.end.filled?n:"none",onPointerDown:l,onTouchStart:l,style:{cursor:s?"move":"pointer",strokeWidth:r,pointerEvents:s?"none":m.end.filled?"visible":"visibleStroke",strokeLinecap:"butt"}})]})}function dh({rect:e,vertices:t,color:n="transparent",strokeColor:o="#000000",opacity:i=1,strokeWidth:r,strokeStyle:a=he.SOLID,strokeDashArray:s,scale:l,isSelected:c,onClick:u,currentVertex:h,handleSize:m=14}){const g=h?[...t,h]:t,p=K(()=>g.map(({x:w,y:x})=>({x:w-e.origin.x,y:x-e.origin.y})),[g,e]),v=K(()=>{if(!p.length)return"";const[w,...x]=p,C=!!h;return(`M ${w.x} ${w.y} `+x.map(S=>`L ${S.x} ${S.y}`).join(" ")+(C?"":" Z")).trim()},[p,h]),f=h&&t.length>0,y=e.size.width*l,b=e.size.height*l;return k("svg",{style:{position:"absolute",width:y,height:b,pointerEvents:"none",zIndex:2,overflow:"visible"},width:y,height:b,viewBox:`0 0 ${e.size.width} ${e.size.height}`,children:[k("path",{d:v,onPointerDown:u,onTouchStart:u,opacity:i,style:{fill:h?"none":n,stroke:o??n,strokeWidth:r,cursor:c?"move":"pointer",pointerEvents:c?"none":n==="transparent"?"visibleStroke":"visible",strokeLinecap:"butt",strokeLinejoin:"miter",...a===he.DASHED&&{strokeDasharray:s?.join(",")}}}),f&&t.length>1&&k("path",{d:`M ${p[p.length-1].x} ${p[p.length-1].y} L ${p[0].x} ${p[0].y}`,fill:"none",style:{stroke:o,strokeWidth:r,strokeDasharray:"4,4",opacity:.7}}),f&&t.length>=2&&k("rect",{x:p[0].x-m/l/2,y:p[0].y-m/l/2,width:m/l,height:m/l,fill:o,opacity:.4,stroke:o,strokeWidth:r/2})]})}function $f({isSelected:e,isEditing:t,annotation:n,pageIndex:o,scale:i,onClick:r}){const a=V(null),{provides:s}=vt(),[l,c]=R(!1);L(()=>{if(t&&a.current){const f=a.current;f.focus();const y=window.getSelection();if(y){const b=document.createRange();b.selectNodeContents(f),b.collapse(!1),y.removeAllRanges(),y.addRange(b)}}},[t]),Fo(()=>{try{const f=navigator,y=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&f?.maxTouchPoints>1;c(y)}catch{c(!1)}},[]);const u=n.object.fontSize*i,h=l&&t&&u>0&&u<16,m=h?16:u,g=h?u/16:1,p=h?100/g:100;return k("div",{style:{position:"absolute",width:n.object.rect.size.width*i,height:n.object.rect.size.height*i,cursor:e&&!t?"move":"default",pointerEvents:e&&!t?"none":"auto",zIndex:2},onPointerDown:r,onTouchStart:r,children:k("span",{ref:a,onBlur:()=>{s&&a.current&&s.updateAnnotation(o,n.object.id,{contents:a.current.innerText})},tabIndex:0,style:{color:n.object.fontColor,fontSize:m,fontFamily:(v=n.object.fontFamily,jo(v).css),textAlign:yg(n.object.textAlign),flexDirection:"column",justifyContent:n.object.verticalAlign===nt.Top?"flex-start":n.object.verticalAlign===nt.Middle?"center":"flex-end",display:"flex",backgroundColor:n.object.color??n.object.backgroundColor,opacity:n.object.opacity,width:h?`${p}%`:"100%",height:h?`${p}%`:"100%",lineHeight:"1.18",overflow:"hidden",cursor:t?"text":"pointer",outline:"none",transform:h?`scale(${g})`:void 0,transformOrigin:"top left"},contentEditable:t,...Of,children:n.object.contents})});var v}function Ff({documentId:e,pageIndex:t,annotation:n,scaleFactor:o=1,style:i,...r}){const{provides:a}=vt(),[s,l]=R(null),c=V(null),{width:u,height:h}=n.rect.size;return L(()=>{if(a){const m=a.forDocument(e).renderAnnotation({pageIndex:t,annotation:n,options:{scaleFactor:o,dpr:window.devicePixelRatio}});return m.wait(g=>{const p=URL.createObjectURL(g);l(p),c.current=p},ze),()=>{c.current?(URL.revokeObjectURL(c.current),c.current=null):m.abort({code:J.Cancelled,message:"canceled render task"})}}},[t,o,a,e,n.id,u,h]),k(te,{children:s&&k("img",{src:s,onLoad:()=>{c.current&&(URL.revokeObjectURL(c.current),c.current=null)},...r,style:{width:"100%",height:"100%",display:"block",...i||{}}})})}function jf({isSelected:e,annotation:t,documentId:n,pageIndex:o,scale:i,onClick:r}){return k("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:2,pointerEvents:e?"none":"auto",cursor:"pointer"},onPointerDown:r,onTouchStart:r,children:k(Ff,{documentId:n,pageIndex:o,annotation:{...t.object,id:t.object.id},scaleFactor:i})})}function Uf({isSelected:e,strokeColor:t="#0000FF",strokeWidth:n=2,strokeStyle:o=he.UNDERLINE,strokeDashArray:i,rect:r,scale:a,onClick:s,hasIRT:l=!1}){const{width:c,height:u}=K(()=>({width:r.size.width,height:r.size.height}),[r]),h=c*a,m=u*a,g=K(()=>{if(o===he.DASHED)return i?.join(",")??`${3*n},${n}`},[o,i,n]),p=o===he.UNDERLINE;return k("svg",{style:{position:"absolute",width:h,height:m,pointerEvents:"none",zIndex:2},width:h,height:m,viewBox:`0 0 ${c} ${u}`,children:[k("rect",{x:0,y:0,width:c,height:u,fill:"transparent",onPointerDown:l?void 0:s,onTouchStart:l?void 0:s,style:{cursor:l?"default":e?"move":"pointer",pointerEvents:l||e?"none":"visible"}}),p?k("line",{x1:1,y1:u-1,x2:c-1,y2:u-1,stroke:t,strokeWidth:n,strokeDasharray:g,style:{pointerEvents:"none"}}):k("rect",{x:n/2,y:n/2,width:Math.max(c-n,0),height:Math.max(u-n,0),fill:"transparent",stroke:t,strokeWidth:n,strokeDasharray:g,style:{pointerEvents:"none"}})]})}function Hf(e){const{documentId:t,pageIndex:n,scale:o,pageWidth:i,pageHeight:r,selectionMenu:a}=e,{provides:s}=vt(),{provides:l}=Yo(),[c,u]=R([]),{register:h}=(function({modeId:I,pageIndex:P,documentId:z}){const{provides:D}=Fn();return{register:(T,_)=>{const H=_?.modeId??I,$=_?.pageIndex??P,j=_?.documentId??z;return H?D?.registerHandlers({modeId:H,handlers:T,pageIndex:$,documentId:j}):D?.registerAlways({scope:$!==void 0?{type:"page",documentId:j,pageIndex:$}:{type:"global",documentId:j},handlers:T})}}})({documentId:t,pageIndex:n}),[m,g]=R([]),[p,v]=R(null),f=K(()=>s?s.forDocument(t):null,[s,t]),y=m.length>1;L(()=>{if(f){const I=f.getState();return u(as(I,n)),g(ji(I)),f.onStateChange(P=>{u(as(P,n)),g(ji(P))})}},[f,n]);const b=K(()=>({onPointerDown:(I,P)=>{P.target===P.currentTarget&&f&&(f.deselectAnnotation(),v(null))}}),[f]),w=Y((I,P)=>{I.stopPropagation(),f&&l&&(l.clear(),"metaKey"in I&&(I.metaKey||I.ctrlKey)?f.toggleSelection(n,P.object.id):f.selectAnnotation(n,P.object.id),P.object.id!==p&&v(null))},[f,l,p,n]),x=Y((I,P)=>{if(I.stopPropagation(),f&&l){if(l.clear(),P.object.inReplyToId){const z=P.object.inReplyToId,D=c.find(T=>T.object.id===z);if(D)return void f.selectAnnotation(D.object.pageIndex,z)}f.selectAnnotation(n,P.object.id)}},[f,l,c,n]);L(()=>h(b,{documentId:t}),[h,b]);const C=K(()=>c.filter(I=>m.includes(I.object.id)),[c,m]),S=K(()=>!(C.length<2)&&C.every(I=>{const P=f?.findToolForAnnotation(I.object);return P?.interaction.isGroupDraggable??P?.interaction.isDraggable??!0}),[C,f]),M=K(()=>!(C.length<2)&&C.every(I=>{const P=f?.findToolForAnnotation(I.object);return P?.interaction.isGroupResizable??P?.interaction.isResizable??!0}),[C,f]),A=K(()=>{if(!f)return!1;const I=f.getSelectedAnnotations();return I.length>1&&I.every(P=>P.object.pageIndex===n)},[f,n,m]);return k(te,{children:[c.map(I=>{const P=m.includes(I.object.id),z=p===I.object.id,D=f?.findToolForAnnotation(I.object);if(ku(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!0,isResizable:D?.interaction.isResizable??!0,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(rh,{...T,isSelected:P,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Mu(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!0,isResizable:D?.interaction.isResizable??!0,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(ah,{...T,isSelected:P,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Su(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!0,isResizable:D?.interaction.isResizable??!0,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(sh,{...T,isSelected:P,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Tu(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!1,isResizable:D?.interaction.isResizable??!1,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),zIndex:0,style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(nh,{...T,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Eu(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!1,isResizable:D?.interaction.isResizable??!1,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),zIndex:0,style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(oh,{...T,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Ru(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!1,isResizable:D?.interaction.isResizable??!1,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),zIndex:0,style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(ih,{...T,scale:o,onClick:_=>w(_,I)})},I.object.id);if(zu(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!1,isResizable:D?.interaction.isResizable??!1,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),zIndex:0,style:{mixBlendMode:Be(I.object.blendMode??Z.Multiply)},...e,children:T=>k(th,{...T,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Du(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!0,isResizable:D?.interaction.isResizable??!1,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),vertexConfig:{extractVertices:T=>[T.linePoints.start,T.linePoints.end],transformAnnotation:(T,_)=>({...T,linePoints:{start:_[0],end:_[1]}})},style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(te,{children:k(lh,{...T,isSelected:P,scale:o,onClick:_=>w(_,I)})})},I.object.id);if(Au(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!0,isResizable:D?.interaction.isResizable??!1,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),vertexConfig:{extractVertices:T=>T.vertices,transformAnnotation:(T,_)=>({...T,vertices:_})},style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(te,{children:k(ch,{...T,isSelected:P,scale:o,onClick:_=>w(_,I)})})},I.object.id);if(Pu(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!0,isResizable:D?.interaction.isResizable??!1,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),vertexConfig:{extractVertices:T=>T.vertices,transformAnnotation:(T,_)=>({...T,vertices:_})},style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(te,{children:k(dh,{...T,isSelected:P,scale:o,onClick:_=>w(_,I)})})},I.object.id);if(_u(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:(D?.interaction.isDraggable??!0)&&!z,isResizable:D?.interaction.isResizable??!0,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},onDoubleClick:T=>{T.stopPropagation(),v(I.object.id)},...e,children:T=>k($f,{isSelected:P,isEditing:z,annotation:{...I,object:T},pageIndex:n,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Nu(I))return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:D?.interaction.isDraggable??!0,isResizable:D?.interaction.isResizable??!0,lockAspectRatio:D?.interaction.lockAspectRatio??!1,selectionMenu:a,onSelect:T=>w(T,I),style:{mixBlendMode:Be(I.object.blendMode??Z.Normal)},...e,children:T=>k(jf,{isSelected:P,annotation:I,documentId:t,pageIndex:n,scale:o,onClick:_=>w(_,I)})},I.object.id);if(Tr(I)){const T=!!I.object.inReplyToId;return k(et,{trackedAnnotation:I,isSelected:P,isMultiSelected:y,isDraggable:!1,isResizable:!1,lockAspectRatio:!1,selectionMenu:T?void 0:a,onSelect:_=>x(_,I),...e,children:_=>k(Uf,{..._,isSelected:P,scale:o,onClick:H=>x(H,I),hasIRT:T})},I.object.id)}return null}),A&&C.length>=2&&k(Lf,{documentId:t,pageIndex:n,scale:o,rotation:e.rotation,pageWidth:i,pageHeight:r,selectedAnnotations:C,isDraggable:S,isResizable:M,resizeUI:e.resizeUI,selectionOutlineColor:e.selectionOutlineColor,groupSelectionMenu:e.groupSelectionMenu})]})}function Bf({documentId:e,pageIndex:t,scale:n}){var o,i,r,a,s,l,c,u,h,m,g,p;const{provides:v}=Yo(),{provides:f}=vt(),[y,b]=R([]),[w,x]=R(null),[C,S]=R(null);if(L(()=>{if(v)return v.forDocument(e).onSelectionChange(()=>{b(v.forDocument(e).getHighlightRectsForPage(t)),x(v.forDocument(e).getBoundingRectForPage(t))})},[v,e,t]),L(()=>{if(f)return S(f.forDocument(e).getActiveTool()),f.forDocument(e).onActiveToolChange(M=>S(M))},[f,e]),!w||!C||!C.defaults)return null;switch(C.defaults.type){case E.UNDERLINE:return k("div",{style:{mixBlendMode:Be(((o=C.defaults)==null?void 0:o.blendMode)??Z.Normal),pointerEvents:"none",position:"absolute",inset:0},children:k(nh,{strokeColor:(i=C.defaults)==null?void 0:i.strokeColor,opacity:(r=C.defaults)==null?void 0:r.opacity,segmentRects:y,scale:n})});case E.HIGHLIGHT:return k("div",{style:{mixBlendMode:Be(((a=C.defaults)==null?void 0:a.blendMode)??Z.Multiply),pointerEvents:"none",position:"absolute",inset:0},children:k(th,{strokeColor:(s=C.defaults)==null?void 0:s.strokeColor,opacity:(l=C.defaults)==null?void 0:l.opacity,segmentRects:y,scale:n})});case E.STRIKEOUT:return k("div",{style:{mixBlendMode:Be(((c=C.defaults)==null?void 0:c.blendMode)??Z.Normal),pointerEvents:"none",position:"absolute",inset:0},children:k(oh,{strokeColor:(u=C.defaults)==null?void 0:u.strokeColor,opacity:(h=C.defaults)==null?void 0:h.opacity,segmentRects:y,scale:n})});case E.SQUIGGLY:return k("div",{style:{mixBlendMode:Be(((m=C.defaults)==null?void 0:m.blendMode)??Z.Normal),pointerEvents:"none",position:"absolute",inset:0},children:k(ih,{strokeColor:(g=C.defaults)==null?void 0:g.strokeColor,opacity:(p=C.defaults)==null?void 0:p.opacity,segmentRects:y,scale:n})});default:return null}}function Wf({preview:e,scale:t}){const{bounds:n}=e,o={position:"absolute",left:n.origin.x*t,top:n.origin.y*t,width:n.size.width*t,height:n.size.height*t,pointerEvents:"none",zIndex:10};return e.type===E.CIRCLE?k("div",{style:o,children:k(sh,{isSelected:!1,scale:t,...e.data})}):e.type===E.SQUARE?k("div",{style:o,children:k(ah,{isSelected:!1,scale:t,...e.data})}):e.type===E.POLYGON?k("div",{style:o,children:k(dh,{isSelected:!1,scale:t,...e.data})}):e.type===E.POLYLINE?k("div",{style:o,children:k(ch,{isSelected:!1,scale:t,...e.data})}):e.type===E.LINE?k("div",{style:o,children:k(lh,{isSelected:!1,scale:t,...e.data})}):e.type===E.INK?k("div",{style:o,children:k(rh,{isSelected:!1,scale:t,...e.data})}):e.type===E.FREETEXT?k("div",{style:o,children:k("div",{style:{width:"100%",height:"100%",border:`1px dashed ${e.data.fontColor||"#000000"}`,backgroundColor:"transparent"}})}):null}function qf({documentId:e,pageIndex:t,scale:n}){const{plugin:o}=Rr(),[i,r]=R(new Map),a=V(null),s=V(null),l=K(()=>({requestFile:({accept:c,onFile:u})=>{if(!a.current)return;const h=a.current;h.accept=c,h.onchange=m=>{var g;const p=(g=m.target.files)==null?void 0:g[0];p&&(u(p),h.value="")},h.click()},processImage:({source:c,maxWidth:u,maxHeight:h,onComplete:m})=>{const g=s.current;if(!g||!g.getContext)return;const p=g.getContext("2d");if(!p)return;const v=new Image;v.crossOrigin="Anonymous",v.onload=()=>{let{naturalWidth:f,naturalHeight:y}=v;const b=u?u/f:1,w=h?h/y:1,x=Math.min(b,w,1),C=f*x,S=y*x;g.width=C,g.height=S,p.drawImage(v,0,0,C,S);const M=p.getImageData(0,0,C,S);typeof c!="string"&&URL.revokeObjectURL(v.src),m({imageData:M,width:C,height:S})},v.src=typeof c=="string"?c:URL.createObjectURL(c)}}),[]);return L(()=>{if(o)return o.registerPageHandlers(e,t,n,{services:l,onPreview:(c,u)=>{r(h=>{const m=new Map(h);return u?m.set(c,u):m.delete(c),m})}})},[e,t,n,o,l]),k(te,{children:[k("input",{ref:a,type:"file",style:{display:"none"}}),k("canvas",{ref:s,style:{display:"none"}}),Array.from(i.entries()).map(([c,u])=>k(Wf,{preview:u,scale:n},c))]})}function Gf({style:e,documentId:t,pageIndex:n,scale:o,rotation:i,selectionMenu:r,groupSelectionMenu:a,resizeUI:s,vertexUI:l,selectionOutlineColor:c,customAnnotationRenderer:u,...h}){var m,g,p,v;const f=je(t),y=(g=(m=f?.document)==null?void 0:m.pages)==null?void 0:g[n],b=((p=y?.size)==null?void 0:p.width)??0,w=((v=y?.size)==null?void 0:v.height)??0,x=K(()=>o!==void 0?o:f?.scale??1,[o,f?.scale]);return k("div",{style:{...e},...h,children:[k(Hf,{documentId:t,selectionMenu:r,groupSelectionMenu:a,pageIndex:n,scale:x,rotation:K(()=>i!==void 0?i:f?.rotation??Lt.Degree0,[i,f?.rotation]),pageWidth:b,pageHeight:w,resizeUI:s,vertexUI:l,selectionOutlineColor:c,customAnnotationRenderer:u}),k(Bf,{documentId:t,pageIndex:n,scale:x}),k(qf,{documentId:t,pageIndex:n,scale:x})]})}const uh="print",Vf={id:uh,name:"Print Plugin",version:"1.0.0",provides:["print"],requires:[],optional:[],defaultConfig:{}},hh=class extends Ie{constructor(e,t,n){super(e,t),this.printReady$=We()}buildCapability(){return{print:e=>this.print(e),forDocument:e=>this.createPrintScope(e)}}createPrintScope(e){return{print:t=>this.print(t,e)}}print(e,t){const n=t??this.getActiveDocumentId();if(!this.checkPermission(n,N.Print))return this.logger.debug("PrintPlugin","Print",`Cannot print: document ${n} lacks Print permission`),de.reject({code:J.Security,message:"Document lacks Print permission"});const o=e??{},i=new fe;return i.progress({stage:"preparing",message:"Preparing document..."}),this.preparePrintDocument(o,n).wait(r=>{i.progress({stage:"document-ready",message:"Document prepared successfully"}),this.printReady$.emit({documentId:n,options:o,buffer:r,task:i})},r=>i.fail(r)),i}preparePrintDocument(e,t){const n=this.coreState.core.documents[t];return n?.document?this.engine.preparePrintDocument(n.document,e):de.reject({code:J.DocNotOpen,message:`Document ${t} not found`})}onPrintRequest(e){return this.printReady$.on(e)}async initialize(e){this.logger.info("PrintPlugin","Initialize","Print plugin initialized")}async destroy(){this.printReady$.clear(),await super.destroy()}};hh.id="print";let Ao=hh;const mh=()=>Te(Ao.id),Kf=an({manifest:Vf,create:(e,t)=>new Ao(uh,e,t),reducer:()=>{},initialState:{}}).addUtility(function(){const{provides:e}=mh(),{plugin:t}=Qe(Ao.id),n=V(null),o=V(null);return L(()=>{if(!e||!t)return;const i=t.onPrintRequest(({buffer:r,task:a})=>{const s=n.current;if(!s)return;o.current&&(URL.revokeObjectURL(o.current),o.current=null);const l=URL.createObjectURL(new Blob([r],{type:"application/pdf"}));o.current=l,s.onload=()=>{var c,u;s.src===l&&(a.progress({stage:"iframe-ready",message:"Ready to print"}),(c=s.contentWindow)==null||c.focus(),(u=s.contentWindow)==null||u.print(),a.progress({stage:"printing",message:"Print dialog opened"}),a.resolve(r))},s.src=l});return()=>{i(),o.current&&URL.revokeObjectURL(o.current)}},[e,t]),k("iframe",{ref:n,style:{position:"absolute",display:"none"},title:"Print Document",src:"about:blank"})}).build(),gh="fullscreen",Zf={id:gh,name:"Fullscreen Plugin",version:"1.0.0",provides:["fullscreen"],requires:[],optional:[],defaultConfig:{}},ph="SET_FULLSCREEN",fh=class extends Ie{constructor(e,t,n){super(e,t),this.onStateChange$=ee(),this.fullscreenRequest$=We(),this.config=n}async initialize(e){}buildCapability(){return{isFullscreen:()=>this.state.isFullscreen,enableFullscreen:e=>this.enableFullscreen(e),exitFullscreen:()=>this.exitFullscreen(),toggleFullscreen:e=>this.toggleFullscreen(e),onRequest:this.fullscreenRequest$.on,onStateChange:this.onStateChange$.on}}getTargetSelector(){return this.currentTargetElement??this.config.targetElement}toggleFullscreen(e){this.state.isFullscreen?this.exitFullscreen():this.enableFullscreen(e)}enableFullscreen(e){this.currentTargetElement=e??this.config.targetElement,this.fullscreenRequest$.emit({action:"enter",targetElement:this.currentTargetElement})}exitFullscreen(){this.fullscreenRequest$.emit({action:"exit"}),this.currentTargetElement=void 0}onStoreUpdated(e,t){this.onStateChange$.emit(t)}setFullscreenState(e){this.dispatch({type:ph,payload:e})}async destroy(){this.fullscreenRequest$.clear(),super.destroy()}};fh.id="fullscreen";let zo=fh;const ws=()=>Qe(zo.id);async function Yf(e,t,n){if(e.action==="enter"){const o=(function(i,r,a){if(!r||i.action!=="enter")return r;let s=null;return a&&(s=r.querySelector(a),s||console.warn(`Fullscreen: Could not find element with selector "${a}" within the wrapper. Falling back to wrapper element.`)),s||(s=r),s})(e,t,n);o&&!document.fullscreenElement&&await o.requestFullscreen()}else document.fullscreenElement&&await document.exitFullscreen()}const Xf=an({manifest:Zf,create:(e,t)=>new zo(gh,e,t),reducer:(e,t)=>t.type===ph?{...e,isFullscreen:t.payload}:e,initialState:{isFullscreen:!1}}).addWrapper(function({children:e,...t}){const{provides:n}=Te(zo.id),{plugin:o}=ws(),{plugin:i}=ws(),r=V(null);return L(()=>{if(!(!n||!o))return n.onRequest(async a=>{const s=o.getTargetSelector();await Yf(a,r.current,s)})},[n,o]),L(()=>{if(!i)return;const a=()=>i.setFullscreenState(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",a),()=>document.removeEventListener("fullscreenchange",a)},[i]),k("div",{...t,style:{position:"relative",width:"100%",height:"100%",...t.style},ref:r,children:e})}).build(),vh="bookmark",Qf={id:vh,name:"Bookmark Plugin",version:"1.0.0",provides:["bookmark"],requires:[],optional:[],defaultConfig:{}},yh=class extends Ie{constructor(e,t){super(e,t)}async initialize(e){}buildCapability(){return{getBookmarks:()=>this.getBookmarks(),forDocument:e=>this.createBookmarkScope(e)}}createBookmarkScope(e){return{getBookmarks:()=>this.getBookmarks(e)}}getBookmarks(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];if(!n?.document)throw new Error(`Document ${t} not loaded`);return this.engine.getBookmarks(n.document)}};yh.id="bookmark";let _r=yh;const Jf={manifest:Qf,create:e=>new _r(vh,e),reducer:()=>{},initialState:{}},bh=class extends Ie{constructor(e,t,n){super(e,t),this.downloadRequest$=We(),this.config=n}buildCapability(){return{saveAsCopy:()=>this.saveAsCopy(),download:()=>this.download(),forDocument:e=>this.createExportScope(e)}}createExportScope(e){return{saveAsCopy:()=>this.saveAsCopy(e),download:()=>this.download(e)}}download(e){const t=e??this.getActiveDocumentId();this.downloadRequest$.emit({documentId:t})}saveAsCopy(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];return n?.document?this.engine.saveAsCopy(n.document):de.reject({code:J.DocNotOpen,message:`Document ${t} not found`})}saveAsCopyAndGetBufferAndName(e){const t=new fe,n=this.coreState.core.documents[e];return n?.document?(this.saveAsCopy(e).wait(o=>{t.resolve({buffer:o,name:n.name??this.config.defaultFileName})},o=>t.fail(o)),t):de.reject({code:J.DocNotOpen,message:`Document ${e} not found`})}onRequest(e){return this.downloadRequest$.on(e)}async initialize(e){this.logger.info("ExportPlugin","Initialize","Export plugin initialized")}async destroy(){this.downloadRequest$.clear(),await super.destroy()}};bh.id="export";let Hi=bh;const xs="export",ev=an({manifest:{id:xs,name:"Export Plugin",version:"1.0.0",provides:["export"],requires:[],optional:[],defaultConfig:{defaultFileName:"document.pdf"}},create:(e,t)=>new Hi(xs,e,t),reducer:()=>{},initialState:{}}).addUtility(function(){const{plugin:e}=Qe(Hi.id),t=V(null);return L(()=>{if(e)return e.onRequest(n=>{const o=t.current;o&&e.saveAsCopyAndGetBufferAndName(n.documentId).wait(({buffer:i,name:r})=>{const a=URL.createObjectURL(new Blob([i]));o.href=a,o.download=r,o.click(),URL.revokeObjectURL(a)},ze)})},[e]),k("a",{style:{display:"none"},ref:t})}).build(),wh="PAN/INIT_STATE",xh="PAN/CLEANUP_STATE",Ch="PAN/SET_PAN_MODE",Ih=class extends Ie{constructor(e,t,n){var o,i,r;super(e,t),this.panMode$=ee(),this.documentHandlers=new Map,this.config=n,this.interactionManager=(o=t.getPlugin(ti.id))==null?void 0:o.provides(),this.viewport=(i=t.getPlugin(qn.id))==null?void 0:i.provides(),this.interactionManager&&(this.interactionManager.registerMode({id:"panMode",scope:"global",exclusive:!1,cursor:"grab",wantsRawTouch:!1}),(r=this.interactionManager)==null||r.onModeChange(a=>{const s=a.activeMode==="panMode",l=this.getDocumentState(a.documentId);l&&l.isPanMode!==s&&this.dispatch((function(c,u){return{type:Ch,payload:{documentId:c,isPanMode:u}}})(a.documentId,s))}))}onDocumentLoadingStarted(e){this.dispatch((function(t,n){return{type:wh,payload:{documentId:t,state:n}}})(e,{isPanMode:!1})),this.registerPanHandlersForDocument(e),this.config.defaultMode==="always"&&this.makePanDefault(!0),this.logger.debug("PanPlugin","DocumentOpened",`Initialized pan state for document: ${e}`)}onDocumentClosed(e){const t=this.documentHandlers.get(e);t&&(t(),this.documentHandlers.delete(e)),this.dispatch((function(n){return{type:xh,payload:n}})(e)),this.logger.debug("PanPlugin","DocumentClosed",`Cleaned up pan state for document: ${e}`)}buildCapability(){return{enablePan:()=>this.enablePan(),disablePan:()=>this.disablePan(),togglePan:()=>this.togglePan(),makePanDefault:e=>this.makePanDefault(e),isPanMode:()=>this.isPanMode(),forDocument:e=>this.createPanScope(e),onPanModeChange:this.panMode$.on}}createPanScope(e){return{enablePan:()=>this.enablePan(e),disablePan:()=>this.disablePan(e),togglePan:()=>this.togglePan(e),isPanMode:()=>this.isPanMode(e),onPanModeChange:t=>this.panMode$.on(n=>{n.documentId===e&&t(n.isPanMode)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Pan state not found for document: ${e??"active"}`);return t}enablePan(e){const t=e??this.getActiveDocumentId();this.interactionManager.forDocument(t).activate("panMode")}disablePan(e){const t=e??this.getActiveDocumentId();this.interactionManager.forDocument(t).activateDefaultMode()}togglePan(e){const t=e??this.getActiveDocumentId(),n=this.interactionManager.forDocument(t);n.getActiveMode()==="panMode"?n.activateDefaultMode():n.activate("panMode")}makePanDefault(e=!0){this.interactionManager&&(this.interactionManager.setDefaultMode("panMode"),e&&this.interactionManager.activateDefaultMode())}isPanMode(e){return this.getDocumentStateOrThrow(e).isPanMode}registerPanHandlersForDocument(e){if(!this.interactionManager||!this.viewport)return;let t=null;const n=this.interactionManager.forDocument(e),o=this.viewport.forDocument(e),i={onMouseDown:(a,s)=>{const l=o.getMetrics();t={startX:s.clientX,startY:s.clientY,startLeft:l.scrollLeft,startTop:l.scrollTop},n.setCursor("panMode","grabbing",10)},onMouseMove:(a,s)=>{if(!t)return;const l=s.clientX-t.startX,c=s.clientY-t.startY;o.scrollTo({x:t.startLeft-l,y:t.startTop-c})},onMouseUp:()=>{t&&(t=null,n.removeCursor("panMode"))},onMouseLeave:()=>{t&&(t=null,n.removeCursor("panMode"))},onMouseCancel:()=>{t&&(t=null,n.removeCursor("panMode"))}},r=this.interactionManager.registerHandlers({documentId:e,modeId:"panMode",handlers:i});this.documentHandlers.set(e,r)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o?.isPanMode!==i.isPanMode&&(this.panMode$.emit({documentId:n,isPanMode:i.isPanMode}),this.logger.debug("PanPlugin","PanModeChanged",`Pan mode changed for document ${n}: ${o?.isPanMode??!1} -> ${i.isPanMode}`))}}async initialize(e){this.logger.info("PanPlugin","Initialize","Pan plugin initialized")}async destroy(){this.documentHandlers.forEach(e=>e()),this.documentHandlers.clear(),this.panMode$.clear(),await super.destroy()}};Ih.id="pan";let po=Ih;const Cs={documents:{},activeDocumentId:null},tv=an({manifest:{id:"pan",name:"Pan Plugin",version:"1.0.0",provides:["pan"],requires:["interaction-manager","viewport"],optional:[],defaultConfig:{defaultMode:"mobile"}},create:(e,t)=>new po("pan",e,t),reducer:(e=Cs,t)=>{switch(t.type){case wh:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case xh:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"PAN/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Ch:{const{documentId:n,isPanMode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isPanMode:o}}}:e}default:return e}},initialState:Cs}).addUtility(()=>{const{provides:e}=Te(po.id),{plugin:t}=Qe(po.id);return L(()=>{var n;if(!e||!t)return;const o=((n=t.config)==null?void 0:n.defaultMode)??"never",i=typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0);o==="mobile"&&i&&e.makePanDefault()},[e,t]),null}).build(),kh="capture",nv={id:kh,name:"Capture Plugin",version:"1.0.0",provides:["capture"],requires:["render"],optional:["interaction-manager"],defaultConfig:{scale:1,imageType:"image/png",withAnnotations:!1}},Sh="CAPTURE/INIT_STATE",Ph="CAPTURE/CLEANUP_STATE",Mh="CAPTURE/SET_MARQUEE_CAPTURE_ACTIVE",ov={isMarqueeCaptureActive:!1},Is={documents:{},activeDocumentId:null},Dh=class extends Ie{constructor(e,t,n){var o;super(e,t),this.captureArea$=We(),this.state$=ee(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.interactionManagerCapability=(o=this.registry.getPlugin("interaction-manager"))==null?void 0:o.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:"marqueeCapture",scope:"page",exclusive:!0,cursor:"crosshair"}),this.interactionManagerCapability.onModeChange(i=>{const r=i.activeMode==="marqueeCapture",a=this.getDocumentState(i.documentId);var s;a&&a.isMarqueeCaptureActive!==r&&this.dispatch((s=i.documentId,{type:Mh,payload:{documentId:s,isActive:r}}))}))}onDocumentLoadingStarted(e){const t={...ov};this.dispatch((function(n,o){return{type:Sh,payload:{documentId:n,state:o}}})(e,t)),this.logger.debug("CapturePlugin","DocumentOpened",`Initialized capture state for document: ${e}`)}onDocumentClosed(e){this.dispatch((function(t){return{type:Ph,payload:t}})(e)),this.logger.debug("CapturePlugin","DocumentClosed",`Cleaned up capture state for document: ${e}`)}async initialize(e){}buildCapability(){return{captureArea:(e,t)=>this.captureArea(e,t),enableMarqueeCapture:()=>this.enableMarqueeCapture(),disableMarqueeCapture:()=>this.disableMarqueeCapture(),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createCaptureScope(e),registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),onCaptureArea:this.captureArea$.on,onStateChange:this.state$.on}}createCaptureScope(e){return{captureArea:(t,n)=>this.captureArea(t,n,e),enableMarqueeCapture:()=>this.enableMarqueeCapture(e),disableMarqueeCapture:()=>this.disableMarqueeCapture(e),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(e),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(e),getState:()=>this.getDocumentStateOrThrow(e),onCaptureArea:t=>this.captureArea$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Capture state not found for document: ${e??"active"}`);return t}registerMarqueeOnPage(e){if(!this.interactionManagerCapability)return this.logger.warn("CapturePlugin","MissingDependency","Interaction manager plugin not loaded, marquee capture disabled"),()=>{};const t=this.coreState.core.documents[e.documentId];if(!t||!t.document)return this.logger.warn("CapturePlugin","DocumentNotFound","Document not found"),()=>{};const n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn("CapturePlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const o=(function(i){const{pageSize:r,scale:a,minDragPx:s=5,onPreview:l,onCommit:c}=i;let u=null,h=null;return{onPointerDown:(m,g)=>{var p;u=m,h={origin:{x:m.x,y:m.y},size:{width:0,height:0}},l?.(h),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:m=>{if(!u)return;const g=me(m.x,0,r.width),p=me(m.y,0,r.height);h={origin:{x:Math.min(u.x,g),y:Math.min(u.y,p)},size:{width:Math.abs(g-u.x),height:Math.abs(p-u.y)}},l?.(h)},onPointerUp:(m,g)=>{var p;h&&Math.max(h.size.width,h.size.height)*a>s&&c?.(h),u=null,h=null,l?.(null),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(m,g)=>{var p;u=null,h=null,l?.(null),(p=g.releasePointerCapture)==null||p.call(g)}}})({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:i=>{var r,a;this.captureArea(e.pageIndex,i,e.documentId),(a=(r=e.callback).onCommit)==null||a.call(r,i)}});return this.interactionManagerCapability.registerHandlers({documentId:e.documentId,modeId:"marqueeCapture",handlers:o,pageIndex:e.pageIndex})}captureArea(e,t,n){const o=n??this.getActiveDocumentId();this.disableMarqueeCapture(o),this.renderCapability.forDocument(o).renderPageRect({pageIndex:e,rect:t,options:{imageType:this.config.imageType,scaleFactor:this.config.scale,withAnnotations:this.config.withAnnotations||!1}}).wait(i=>{this.captureArea$.emit({documentId:o,pageIndex:e,rect:t,blob:i,imageType:this.config.imageType||"image/png",scale:this.config.scale||1,withAnnotations:this.config.withAnnotations||!1})},ze)}enableMarqueeCapture(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activate("marqueeCapture")}disableMarqueeCapture(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activateDefaultMode()}toggleMarqueeCapture(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManagerCapability)==null?void 0:t.forDocument(n);o?.getActiveMode()==="marqueeCapture"?o.activateDefaultMode():o?.activate("marqueeCapture")}isMarqueeCaptureActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManagerCapability)==null?void 0:t.forDocument(n).getActiveMode())==="marqueeCapture"}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o&&i&&o.isMarqueeCaptureActive!==i.isMarqueeCaptureActive&&this.state$.emit({documentId:n,state:i})}}async destroy(){this.captureArea$.clear(),this.state$.clear(),super.destroy()}};Dh.id="capture";let Nr=Dh;const iv={manifest:nv,create:(e,t)=>new Nr(kh,e,t),reducer:(e=Is,t)=>{switch(t.type){case Sh:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Ph:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"CAPTURE/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Mh:{const{documentId:n,isActive:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isMarqueeCaptureActive:o}}}:e}default:return e}},initialState:Is},Ah=()=>Te(Nr.id),rv=({documentId:e,pageIndex:t,scale:n,className:o,stroke:i="rgba(33,150,243,0.8)",fill:r="rgba(33,150,243,0.15)"})=>{const{provides:a}=Ah(),s=je(e),[l,c]=R(null),u=K(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]);return L(()=>{if(a)return a.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:c}})},[a,e,t,u]),l?k("div",{style:{position:"absolute",pointerEvents:"none",left:l.origin.x*u,top:l.origin.y*u,width:l.size.width*u,height:l.size.height*u,border:`1px solid ${i}`,background:r,boxSizing:"border-box"},className:o}):null},mn="history",av={id:mn,name:"History Plugin",version:"1.0.0",provides:["history"],requires:[],optional:[],defaultConfig:{}},zh="HISTORY/INIT_STATE",Th="HISTORY/CLEANUP_STATE",Eh="HISTORY/SET_DOCUMENT_STATE",Rh=class extends Ie{constructor(e,t){super(e,t),this.documentHistories=new Map,this.historyChange$=We()}async initialize(e){this.logger.info("HistoryPlugin","Initialize","History plugin initialized")}onDocumentLoadingStarted(e){this.dispatch((t=>({type:zh,payload:{documentId:t}}))(e)),this.documentHistories.set(e,{topicHistories:new Map,globalTimeline:[],globalIndex:-1}),this.logger.debug("HistoryPlugin","DocumentOpened",`Initialized history state for document: ${e}`)}onDocumentClosed(e){this.dispatch((t=>({type:Th,payload:{documentId:t}}))(e)),this.documentHistories.delete(e),this.logger.debug("HistoryPlugin","DocumentClosed",`Cleaned up history state for document: ${e}`)}getDocumentHistoryData(e){const t=e??this.getActiveDocumentId(),n=this.documentHistories.get(t);if(!n)throw new Error(`History data not found for document: ${t}`);return n}getDocumentHistoryState(e){const t=this.documentHistories.get(e);if(!t)throw new Error(`History data not found for document: ${e}`);const n={};return Array.from(t.topicHistories.entries()).forEach(([o,i])=>{n[o]={canUndo:i.currentIndex>-1,canRedo:i.currentIndex<i.commands.length-1}}),{global:{canUndo:t.globalIndex>-1,canRedo:t.globalIndex<t.globalTimeline.length-1},topics:n}}emitHistoryChange(e,t){const n=this.getDocumentHistoryState(e);this.dispatch(((o,i)=>({type:Eh,payload:{documentId:o,state:i}}))(e,n)),this.historyChange$.emit({documentId:e,topic:t,state:n})}register(e,t,n){const o=this.getDocumentHistoryData(n);o.topicHistories.has(t)||o.topicHistories.set(t,{commands:[],currentIndex:-1});const i=o.topicHistories.get(t);i.commands.splice(i.currentIndex+1),i.commands.push(e),i.currentIndex++;const r={command:e,topic:t};o.globalTimeline.splice(o.globalIndex+1),o.globalTimeline.push(r),o.globalIndex++,e.execute(),this.emitHistoryChange(n,t)}undo(e,t){const n=this.getDocumentHistoryData(t);let o;if(e){const i=n.topicHistories.get(e);i&&i.currentIndex>-1&&(i.commands[i.currentIndex].undo(),i.currentIndex--,o=e)}else if(n.globalIndex>-1){const i=n.globalTimeline[n.globalIndex];i.command.undo(),n.topicHistories.get(i.topic).currentIndex--,n.globalIndex--,o=i.topic}o&&this.emitHistoryChange(t,o)}redo(e,t){const n=this.getDocumentHistoryData(t);let o;if(e){const i=n.topicHistories.get(e);i&&i.currentIndex<i.commands.length-1&&(i.currentIndex++,i.commands[i.currentIndex].execute(),o=e)}else if(n.globalIndex<n.globalTimeline.length-1){n.globalIndex++;const i=n.globalTimeline[n.globalIndex];i.command.execute(),n.topicHistories.get(i.topic).currentIndex++,o=i.topic}o&&this.emitHistoryChange(t,o)}canUndo(e,t){const n=this.getDocumentHistoryData(t);if(e){const o=n.topicHistories.get(e);return!!o&&o.currentIndex>-1}return n.globalIndex>-1}canRedo(e,t){const n=this.getDocumentHistoryData(t);if(e){const o=n.topicHistories.get(e);return!!o&&o.currentIndex<o.commands.length-1}return n.globalIndex<n.globalTimeline.length-1}createHistoryScope(e){return{register:(t,n)=>this.register(t,n,e),undo:t=>this.undo(t,e),redo:t=>this.redo(t,e),canUndo:t=>this.canUndo(t,e),canRedo:t=>this.canRedo(t,e),getHistoryState:()=>this.getDocumentHistoryState(e),onHistoryChange:t=>this.historyChange$.on(n=>{n.documentId===e&&t(n.topic)})}}buildCapability(){return{register:(e,t)=>{const n=this.getActiveDocumentId();this.register(e,t,n)},undo:e=>{const t=this.getActiveDocumentId();this.undo(e,t)},redo:e=>{const t=this.getActiveDocumentId();this.redo(e,t)},canUndo:e=>{const t=this.getActiveDocumentId();return this.canUndo(e,t)},canRedo:e=>{const t=this.getActiveDocumentId();return this.canRedo(e,t)},getHistoryState:()=>{const e=this.getActiveDocumentId();return this.getDocumentHistoryState(e)},forDocument:e=>this.createHistoryScope(e),onHistoryChange:this.historyChange$.on}}async destroy(){this.historyChange$.clear(),this.documentHistories.clear(),super.destroy()}};Rh.id="history";let _h=Rh;const sv={global:{canUndo:!1,canRedo:!1},topics:{}},ks={documents:{},activeDocumentId:null},lv={manifest:av,create:e=>new _h(mn,e),reducer:(e=ks,t)=>{switch(t.type){case zh:{const{documentId:n}=t.payload;return{...e,documents:{...e.documents,[n]:{...sv}}}}case Th:{const{documentId:n}=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case Eh:{const{documentId:n,state:o}=t.payload;return e.documents[n]?{...e,documents:{...e.documents,[n]:o}}:e}case"HISTORY/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};default:return e}},initialState:ks};var De=(e=>(e.MarqueeRedact="marqueeRedact",e.RedactSelection="redactSelection",e))(De||{});const Nh="REDACTION/INIT_STATE",Oh="REDACTION/CLEANUP_STATE",Lh="START_REDACTION",$h="END_REDACTION",Fh="ADD_PENDING",jh="REMOVE_PENDING",Uh="CLEAR_PENDING",Hh="SELECT_PENDING",Bh="DESELECT_PENDING",ro=(e,t)=>({type:Fh,payload:{documentId:e,items:t}}),Ss=(e,t,n)=>({type:jh,payload:{documentId:e,page:t,id:n}}),Ps=e=>({type:Uh,payload:e}),Ms=(e,t)=>({type:Lh,payload:{documentId:e,mode:t}}),Ds=e=>Object.values(e).reduce((t,n)=>t+n.length,0),cv={isRedacting:!1,activeType:null,pending:{},pendingCount:0,selected:null},As={documents:{},activeDocumentId:null},Wh=class extends Ie{constructor(e,t,n){var o,i,r;super(e,t),this.redactionSelection$=new Map,this.pending$=ee(),this.selected$=ee(),this.state$=ee(),this.events$=ee(),this.documentUnsubscribers=new Map,this.config=n,this.selectionCapability=(o=this.registry.getPlugin("selection"))==null?void 0:o.provides(),this.interactionManagerCapability=(i=this.registry.getPlugin("interaction-manager"))==null?void 0:i.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:De.MarqueeRedact,scope:"page",exclusive:!0,cursor:"crosshair"}),this.interactionManagerCapability.registerMode({id:De.RedactSelection,scope:"page",exclusive:!1})),(r=this.interactionManagerCapability)==null||r.onModeChange(a=>{const s=a.documentId;if(a.activeMode===De.RedactSelection)this.dispatch(Ms(s,De.RedactSelection));else if(a.activeMode===De.MarqueeRedact)this.dispatch(Ms(s,De.MarqueeRedact));else{const l=this.getDocumentState(s);l?.isRedacting&&this.dispatch((c=>({type:$h,payload:c}))(s))}})}onDocumentLoadingStarted(e){this.dispatch((function(n,o){return{type:Nh,payload:{documentId:n,state:o}}})(e,{...cv})),this.redactionSelection$.set(e,ee());const t=[];if(this.selectionCapability){const n=this.selectionCapability.forDocument(e),o=n.onSelectionChange(()=>{const r=this.getDocumentState(e);if(!r?.isRedacting)return;const a=n.getFormattedSelection(),s=this.redactionSelection$.get(e);s?.emit(a)}),i=n.onEndSelection(()=>{const r=this.getDocumentState(e);if(!r?.isRedacting||!this.checkPermission(e,N.ModifyContents))return;const a=n.getFormattedSelection().map(l=>({id:Pe(),kind:"text",page:l.pageIndex,rect:l.rect,rects:l.segmentRects}));this.dispatch(ro(e,a));const s=this.redactionSelection$.get(e);s?.emit([]),n.clear(),this.emitPendingChange(e),a.length&&this.selectPending(a[a.length-1].page,a[a.length-1].id,e)});t.push(o,i)}this.documentUnsubscribers.set(e,t),this.logger.debug("RedactionPlugin","DocumentOpened",`Initialized redaction state for document: ${e}`)}onDocumentLoaded(e){var t;(t=this.selectionCapability)==null||t.enableForMode(De.RedactSelection,{showRects:!1},e)}onDocumentClosed(e){this.dispatch((function(o){return{type:Oh,payload:o}})(e));const t=this.redactionSelection$.get(e);t?.clear(),this.redactionSelection$.delete(e);const n=this.documentUnsubscribers.get(e);n&&(n.forEach(o=>o()),this.documentUnsubscribers.delete(e)),this.logger.debug("RedactionPlugin","DocumentClosed",`Cleaned up redaction state for document: ${e}`)}async initialize(e){this.logger.info("RedactionPlugin","Initialize","Redaction plugin initialized")}buildCapability(){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(),enableMarqueeRedact:()=>this.enableMarqueeRedact(),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(),enableRedactSelection:()=>this.enableRedactSelection(),toggleRedactSelection:()=>this.toggleRedactSelection(),isRedactSelectionActive:()=>this.isRedactSelectionActive(),addPending:e=>this.addPendingItems(e),removePending:(e,t)=>this.removePendingItem(e,t),clearPending:()=>this.clearPendingItems(),commitAllPending:()=>this.commitAllPending(),commitPending:(e,t)=>this.commitPendingOne(e,t),endRedaction:()=>this.endRedactionMode(),startRedaction:()=>this.startRedactionMode(),selectPending:(e,t)=>this.selectPending(e,t),getSelectedPending:()=>this.getSelectedPending(),deselectPending:()=>this.deselectPending(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createRedactionScope(e),onPendingChange:this.pending$.on,onSelectedChange:this.selected$.on,onRedactionEvent:this.events$.on,onStateChange:this.state$.on}}createRedactionScope(e){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(e),enableMarqueeRedact:()=>this.enableMarqueeRedact(e),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(e),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(e),enableRedactSelection:()=>this.enableRedactSelection(e),toggleRedactSelection:()=>this.toggleRedactSelection(e),isRedactSelectionActive:()=>this.isRedactSelectionActive(e),addPending:t=>this.addPendingItems(t,e),removePending:(t,n)=>this.removePendingItem(t,n,e),clearPending:()=>this.clearPendingItems(e),commitAllPending:()=>this.commitAllPending(e),commitPending:(t,n)=>this.commitPendingOne(t,n,e),endRedaction:()=>this.endRedactionMode(e),startRedaction:()=>this.startRedactionMode(e),selectPending:(t,n)=>this.selectPending(t,n,e),getSelectedPending:()=>this.getSelectedPending(e),deselectPending:()=>this.deselectPending(e),getState:()=>this.getDocumentStateOrThrow(e),onPendingChange:t=>this.pending$.on(n=>{n.documentId===e&&t(n.pending)}),onSelectedChange:t=>this.selected$.on(n=>{n.documentId===e&&t(n.selected)}),onRedactionEvent:t=>this.events$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Redaction state not found for document: ${e??"active"}`);return t}addPendingItems(e,t){const n=t??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(this.dispatch(ro(n,e)),this.emitPendingChange(n),this.events$.emit({type:"add",documentId:n,items:e})):this.logger.debug("RedactionPlugin","AddPendingItems",`Cannot add redactions: document ${n} lacks ModifyContents permission`)}removePendingItem(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(Ss(o,e,t)),this.emitPendingChange(o),this.events$.emit({type:"remove",documentId:o,page:e,id:t})}clearPendingItems(e){const t=e??this.getActiveDocumentId();this.dispatch(Ps(t)),this.emitPendingChange(t),this.events$.emit({type:"clear",documentId:t})}selectPending(e,t,n){var o;const i=n??this.getActiveDocumentId();this.dispatch(((r,a,s)=>({type:Hh,payload:{documentId:r,page:a,id:s}}))(i,e,t)),(o=this.selectionCapability)==null||o.forDocument(i).clear(),this.emitSelectedChange(i)}getSelectedPending(e){var t;const n=e??this.getActiveDocumentId();return((t=this.getDocumentState(n))==null?void 0:t.selected)??null}deselectPending(e){const t=e??this.getActiveDocumentId();this.dispatch((n=>({type:Bh,payload:n}))(t)),this.emitSelectedChange(t)}enableRedactSelection(e){var t;const n=e??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(t=this.interactionManagerCapability)==null||t.forDocument(n).activate(De.RedactSelection):this.logger.debug("RedactionPlugin","EnableRedactSelection",`Cannot enable redact selection: document ${n} lacks ModifyContents permission`)}toggleRedactSelection(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManagerCapability)==null?void 0:t.forDocument(n);o?.getActiveMode()===De.RedactSelection?o.activateDefaultMode():o?.activate(De.RedactSelection)}isRedactSelectionActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManagerCapability)==null?void 0:t.forDocument(n).getActiveMode())===De.RedactSelection}enableMarqueeRedact(e){var t;const n=e??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(t=this.interactionManagerCapability)==null||t.forDocument(n).activate(De.MarqueeRedact):this.logger.debug("RedactionPlugin","EnableMarqueeRedact",`Cannot enable marquee redact: document ${n} lacks ModifyContents permission`)}toggleMarqueeRedact(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManagerCapability)==null?void 0:t.forDocument(n);o?.getActiveMode()===De.MarqueeRedact?o.activateDefaultMode():o?.activate(De.MarqueeRedact)}isMarqueeRedactActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManagerCapability)==null?void 0:t.forDocument(n).getActiveMode())===De.MarqueeRedact}startRedactionMode(e){var t;const n=e??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(t=this.interactionManagerCapability)==null||t.forDocument(n).activate(De.RedactSelection):this.logger.debug("RedactionPlugin","StartRedactionMode",`Cannot start redaction mode: document ${n} lacks ModifyContents permission`)}endRedactionMode(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activateDefaultMode()}onRedactionSelectionChange(e,t){const n=this.redactionSelection$.get(e);return n?.on(t)??(()=>{})}registerMarqueeOnPage(e){if(!this.interactionManagerCapability)return this.logger.warn("RedactionPlugin","MissingDependency","Interaction manager plugin not loaded, marquee redaction disabled"),()=>{};const t=this.coreState.core.documents[e.documentId];if(!t?.document)return this.logger.warn("RedactionPlugin","DocumentNotFound","Document not found"),()=>{};const n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn("RedactionPlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const o=(function(a){const{pageSize:s,scale:l,minDragPx:c=5,onPreview:u,onCommit:h}=a;let m=null,g=null;return{onPointerDown:(p,v)=>{var f;m=p,g={origin:{x:p.x,y:p.y},size:{width:0,height:0}},u?.(g),(f=v.setPointerCapture)==null||f.call(v)},onPointerMove:p=>{if(!m)return;const v=me(p.x,0,s.width),f=me(p.y,0,s.height);g={origin:{x:Math.min(m.x,v),y:Math.min(m.y,f)},size:{width:Math.abs(v-m.x),height:Math.abs(f-m.y)}},u?.(g)},onPointerUp:(p,v)=>{var f;g&&Math.max(g.size.width,g.size.height)*l>c&&h?.(g),m=null,g=null,u?.(null),(f=v.releasePointerCapture)==null||f.call(v)},onPointerCancel:(p,v)=>{var f;m=null,g=null,u?.(null),(f=v.releasePointerCapture)==null||f.call(v)}}})({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:a=>{var s,l;const c={id:Pe(),kind:"area",page:e.pageIndex,rect:a};this.dispatch(ro(e.documentId,[c])),this.emitPendingChange(e.documentId),(l=(s=e.callback).onCommit)==null||l.call(s,a),this.enableRedactSelection(e.documentId),this.selectPending(e.pageIndex,c.id,e.documentId)}}),i=this.interactionManagerCapability.registerAlways({handlers:{onPointerDown:(a,s)=>{s.target===s.currentTarget&&this.deselectPending(e.documentId)}},scope:{type:"page",documentId:e.documentId,pageIndex:e.pageIndex}}),r=this.interactionManagerCapability.registerHandlers({documentId:e.documentId,modeId:De.MarqueeRedact,handlers:o,pageIndex:e.pageIndex});return()=>{i(),r()}}queueCurrentSelectionAsPending(e){const t=e??this.getActiveDocumentId();if(!this.selectionCapability)return de.reject({code:J.NotFound,message:"[RedactionPlugin] selection plugin required"});const n=this.coreState.core.documents[t];if(!n?.document)return de.reject({code:J.NotFound,message:"Document not found"});const o=this.selectionCapability.forDocument(t),i=o.getFormattedSelection();if(!i.length)return de.resolve(!0);const r=Pe(),a=i.map(c=>({id:r,kind:"text",page:c.pageIndex,rect:c.rect,rects:c.segmentRects}));this.enableRedactSelection(t),this.dispatch(ro(t,a)),this.emitPendingChange(t);const s=a[a.length-1];this.selectPending(s.page,s.id,t);const l=this.redactionSelection$.get(t);return l?.emit([]),o.clear(),de.resolve(!0)}commitPendingOne(e,t,n){const o=n??this.getActiveDocumentId();if(!this.checkPermission(o,N.ModifyContents))return this.logger.debug("RedactionPlugin","CommitPendingOne",`Cannot commit redaction: document ${o} lacks ModifyContents permission`),de.reject({code:J.Security,message:"Document lacks ModifyContents permission"});const i=this.coreState.core.documents[o];if(!i?.document)return de.reject({code:J.NotFound,message:"Document not found"});const r=this.getDocumentState(o);if(!r)return de.reject({code:J.NotFound,message:"Document state not found"});const a=(r.pending[e]??[]).find(u=>u.id===t);if(!a)return de.resolve(!0);const s=a.kind==="text"?a.rects:[a.rect],l=i.document.pages[e];if(!l)return de.reject({code:J.NotFound,message:"Page not found"});const c=new fe;return this.engine.redactTextInRects(i.document,l,s,{drawBlackBoxes:this.config.drawBlackBoxes}).wait(()=>{this.dispatch(Ss(o,e,t)),this.emitPendingChange(o),this.dispatchCoreAction(va(o,[e])),this.events$.emit({type:"commit",documentId:o,success:!0}),c.resolve(!0)},u=>{this.events$.emit({type:"commit",documentId:o,success:!1,error:u.reason}),c.reject({code:J.Unknown,message:"Failed to commit redactions"})}),c}commitAllPending(e){const t=e??this.getActiveDocumentId();if(!this.checkPermission(t,N.ModifyContents))return this.logger.debug("RedactionPlugin","CommitAllPending",`Cannot commit redactions: document ${t} lacks ModifyContents permission`),de.reject({code:J.Security,message:"Document lacks ModifyContents permission"});const n=this.coreState.core.documents[t];if(!n?.document)return de.reject({code:J.NotFound,message:"Document not found"});const o=this.getDocumentState(t);if(!o)return de.reject({code:J.NotFound,message:"Document state not found"});const i=new Map;for(const[l,c]of Object.entries(o.pending)){const u=Number(l),h=i.get(u)??[];for(const m of c)m.kind==="text"?h.push(...m.rects):h.push(m.rect);i.set(u,h)}const r=Array.from(i.entries()).filter(([l,c])=>c.length>0).map(([l])=>l),a=[];for(const[l,c]of i){const u=n.document.pages[l];u&&c.length&&a.push(this.engine.redactTextInRects(n.document,u,c,{drawBlackBoxes:this.config.drawBlackBoxes}))}const s=new fe;return fe.all(a).wait(()=>{this.dispatch(Ps(t)),this.dispatchCoreAction(va(t,r)),this.emitPendingChange(t),this.events$.emit({type:"commit",documentId:t,success:!0}),s.resolve(!0)},l=>{this.events$.emit({type:"commit",documentId:t,success:!1,error:l.reason}),s.reject({code:J.Unknown,message:"Failed to commit redactions"})}),s}emitPendingChange(e){const t=this.getDocumentState(e);t&&this.pending$.emit({documentId:e,pending:t.pending})}emitSelectedChange(e){const t=this.getDocumentState(e);t&&this.selected$.emit({documentId:e,selected:t.selected})}emitStateChange(e){const t=this.getDocumentState(e);t&&this.state$.emit({documentId:e,state:t})}onStoreUpdated(e,t){for(const n in t.documents)t.documents[n]&&(this.emitPendingChange(n),this.emitSelectedChange(n),this.emitStateChange(n))}async destroy(){this.pending$.clear(),this.selected$.clear(),this.state$.clear(),this.events$.clear(),this.redactionSelection$.forEach(e=>e.clear()),this.redactionSelection$.clear(),this.documentUnsubscribers.forEach(e=>{e.forEach(t=>t())}),this.documentUnsubscribers.clear(),await super.destroy()}};Wh.id="redaction";let ni=Wh;const gn="redaction",dv={manifest:{id:gn,name:"Redaction Plugin",version:"1.0.0",provides:["redaction"],requires:[],optional:["interaction-manager","selection"],defaultConfig:{drawBlackBoxes:!0}},create:(e,t)=>new ni(gn,e,t),reducer:(e=As,t)=>{switch(t.type){case Nh:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Oh:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"REDACTION/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Fh:{const{documentId:n,items:o}=t.payload,i=e.documents[n];if(!i)return e;const r={...i.pending};for(const a of o)r[a.page]=(r[a.page]??[]).concat(a);return{...e,documents:{...e.documents,[n]:{...i,pending:r,pendingCount:Ds(r)}}}}case jh:{const{documentId:n,page:o,id:i}=t.payload,r=e.documents[n];if(!r)return e;const a=(r.pending[o]??[]).filter(c=>c.id!==i),s={...r.pending,[o]:a},l=r.selected&&!(r.selected.page===o&&r.selected.id===i);return{...e,documents:{...e.documents,[n]:{...r,pending:s,pendingCount:Ds(s),selected:l?r.selected:null}}}}case Uh:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,pending:{},pendingCount:0,selected:null}}}:e}case Hh:{const{documentId:n,page:o,id:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,selected:{page:o,id:i}}}}:e}case Bh:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,selected:null}}}:e}case Lh:{const{documentId:n,mode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isRedacting:!0,activeType:o}}}:e}case $h:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,pending:{},pendingCount:0,selected:null,isRedacting:!1,activeType:null}}}:e}case"SET_ACTIVE_TYPE":{const{documentId:n,mode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeType:o}}}:e}default:return e}},initialState:As},qh=()=>Qe(ni.id),uv=({documentId:e,pageIndex:t,scale:n,className:o,stroke:i="red",fill:r="transparent"})=>{const{plugin:a}=qh(),s=je(e),[l,c]=R(null),u=K(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]);return L(()=>{if(a&&e)return a.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:c}})},[a,e,t,u]),l?k("div",{style:{position:"absolute",pointerEvents:"none",left:l.origin.x*u,top:l.origin.y*u,width:l.size.width*u,height:l.size.height*u,border:`1px solid ${i}`,background:r,boxSizing:"border-box"},className:o}):null};function Gh({color:e="#FFFF00",opacity:t=1,border:n="1px solid red",rects:o,rect:i,scale:r,onClick:a,style:s,...l}){return k(te,{children:o.map((c,u)=>k("div",{onPointerDown:a,onTouchStart:a,style:{position:"absolute",border:n,left:(i?c.origin.x-i.origin.x:c.origin.x)*r,top:(i?c.origin.y-i.origin.y:c.origin.y)*r,width:c.size.width*r,height:c.size.height*r,background:e,opacity:t,pointerEvents:a?"auto":"none",cursor:a?"pointer":"default",zIndex:a?1:void 0,...s},...l},u))})}function hv({documentId:e,pageIndex:t,scale:n}){const{plugin:o}=qh(),[i,r]=R([]),[a,s]=R(null);return L(()=>{if(o)return o.onRedactionSelectionChange(e,l=>{const c=l.find(u=>u.pageIndex===t);r(c?.segmentRects??[]),s(c?.rect??null)})},[o,e,t]),a?k("div",{style:{mixBlendMode:"normal",pointerEvents:"none",position:"absolute",inset:0},children:k(Gh,{color:"transparent",opacity:1,rects:i,scale:n,border:"1px solid red"})}):null}function mv({documentId:e,pageIndex:t,scale:n,bboxStroke:o="rgba(0,0,0,0.8)",rotation:i=Lt.Degree0,selectionMenu:r}){const{provides:a}=Te(ni.id),[s,l]=R([]),[c,u]=R(null);L(()=>{if(!a)return;const m=a.forDocument(e),g=m.getState();l(g.pending[t]??[]),u(g.selected&&g.selected.page===t?g.selected.id:null);const p=m.onPendingChange(f=>l(f[t]??[])),v=m.onSelectedChange(f=>{u(f&&f.page===t?f.id:null)});return()=>{p?.(),v?.()}},[a,e,t]);const h=Y((m,g)=>{m.stopPropagation(),a&&a.forDocument(e).selectPending(t,g)},[a,e,t]);return s.length?k("div",{style:{position:"absolute",inset:0,pointerEvents:"none"},children:s.map(m=>{if(m.kind==="area"){const p=m.rect;return k(te,{children:[k("div",{style:{position:"absolute",left:p.origin.x*n,top:p.origin.y*n,width:p.size.width*n,height:p.size.height*n,background:"transparent",outline:c===m.id?`1px solid ${o}`:"none",outlineOffset:"2px",border:"1px solid red",pointerEvents:"auto",cursor:"pointer"},onPointerDown:v=>h(v,m.id),onTouchStart:v=>h(v,m.id)}),r&&k($n,{rect:{origin:{x:p.origin.x*n,y:p.origin.y*n},size:{width:p.size.width*n,height:p.size.height*n}},rotation:i,children:v=>r({...v,context:{type:"redaction",item:m,pageIndex:t},selected:c===m.id,placement:{suggestTop:!1}})})]},m.id)}const g=m.rect;return k(te,{children:[k("div",{style:{position:"absolute",left:g.origin.x*n,top:g.origin.y*n,width:g.size.width*n,height:g.size.height*n,background:"transparent",outline:c===m.id?`1px solid ${o}`:"none",outlineOffset:"2px",pointerEvents:"auto",cursor:c===m.id?"pointer":"default"},children:k(Gh,{rect:g,rects:m.rects,color:"transparent",border:"1px solid red",scale:n,onClick:p=>h(p,m.id)})}),r&&k($n,{rect:{origin:{x:g.origin.x*n,y:g.origin.y*n},size:{width:g.size.width*n,height:g.size.height*n}},rotation:i,children:p=>r({...p,context:{type:"redaction",item:m,pageIndex:t},selected:c===m.id,placement:{suggestTop:!1}})})]},m.id)})}):null}const gv=({documentId:e,pageIndex:t,scale:n,rotation:o,selectionMenu:i})=>{const r=je(e),a=K(()=>n!==void 0?n:r?.scale??1,[n,r?.scale]);return k(te,{children:[k(mv,{documentId:e,pageIndex:t,scale:a,rotation:K(()=>o!==void 0?o:r?.rotation??Lt.Degree0,[o,r?.rotation]),selectionMenu:i}),k(uv,{documentId:e,pageIndex:t,scale:a}),k(hv,{documentId:e,pageIndex:t,scale:a})]})},Vh=class extends Ie{constructor(e,t){super(e,t)}async initialize(e){}buildCapability(){return{getAttachments:()=>this.getAttachments(),downloadAttachment:e=>this.downloadAttachment(e),forDocument:e=>this.createAttachmentScope(e)}}createAttachmentScope(e){return{getAttachments:()=>this.getAttachments(e),downloadAttachment:t=>this.downloadAttachment(t,e)}}downloadAttachment(e,t){const n=t??this.getActiveDocumentId(),o=this.coreState.core.documents[n];return o?.document?this.engine.readAttachmentContent(o.document,e):de.reject({code:J.NotFound,message:`Document ${n} not found`})}getAttachments(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];return n?.document?this.engine.getAttachments(n.document):de.reject({code:J.NotFound,message:`Document ${t} not found`})}};Vh.id="attachment";let Kh=Vh;const zs="attachment",pv={manifest:{id:zs,name:"Attachment Plugin",version:"1.0.0",provides:["attachment"],requires:[],optional:[],defaultConfig:{}},create:e=>new Kh(zs,e),reducer:()=>{},initialState:{}},Zh=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),To="-",Ts=[],fv=e=>{const t=yv(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return vv(i);const r=i.split(To),a=r[0]===""&&r.length>1?1:0;return Yh(r,a,t)},getConflictingClassGroupIds:(i,r)=>{if(r){const a=o[i],s=n[i];return a?s?((l,c)=>{const u=new Array(l.length+c.length);for(let h=0;h<l.length;h++)u[h]=l[h];for(let h=0;h<c.length;h++)u[l.length+h]=c[h];return u})(s,a):a:s||Ts}return n[i]||Ts}}},Yh=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const o=e[t],i=n.nextPart.get(o);if(i){const l=Yh(e,t+1,i);if(l)return l}const r=n.validators;if(r===null)return;const a=t===0?e.join(To):e.slice(t).join(To),s=r.length;for(let l=0;l<s;l++){const c=r[l];if(c.validator(a))return c.classGroupId}},vv=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),o=t.slice(0,n);return o?"arbitrary.."+o:void 0})(),yv=e=>{const{theme:t,classGroups:n}=e;return bv(n,t)},bv=(e,t)=>{const n=Zh();for(const o in e){const i=e[o];Or(i,n,o,t)}return n},Or=(e,t,n,o)=>{const i=e.length;for(let r=0;r<i;r++){const a=e[r];wv(a,t,n,o)}},wv=(e,t,n,o)=>{typeof e!="string"?typeof e!="function"?Iv(e,t,n,o):Cv(e,t,n,o):xv(e,t,n)},xv=(e,t,n)=>{(e===""?t:Xh(t,e)).classGroupId=n},Cv=(e,t,n,o)=>{kv(e)?Or(e(o),t,n,o):(t.validators===null&&(t.validators=[]),t.validators.push(((i,r)=>({classGroupId:i,validator:r}))(n,e)))},Iv=(e,t,n,o)=>{const i=Object.entries(e),r=i.length;for(let a=0;a<r;a++){const[s,l]=i[a];Or(l,Xh(t,s),n,o)}},Xh=(e,t)=>{let n=e;const o=t.split(To),i=o.length;for(let r=0;r<i;r++){const a=o[r];let s=n.nextPart.get(a);s||(s=Zh(),n.nextPart.set(a,s)),n=s}return n},kv=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Sv=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),o=Object.create(null);const i=(r,a)=>{n[r]=a,t++,t>e&&(t=0,o=n,n=Object.create(null))};return{get(r){let a=n[r];return a!==void 0?a:(a=o[r])!==void 0?(i(r,a),a):void 0},set(r,a){r in n?n[r]=a:i(r,a)}}},Pv=[],Es=(e,t,n,o,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:o,isExternal:i}),Mv=e=>{const{prefix:t,experimentalParseClassName:n}=e;let o=i=>{const r=[];let a,s=0,l=0,c=0;const u=i.length;for(let p=0;p<u;p++){const v=i[p];if(s===0&&l===0){if(v===":"){r.push(i.slice(c,p)),c=p+1;continue}if(v==="/"){a=p;continue}}v==="["?s++:v==="]"?s--:v==="("?l++:v===")"&&l--}const h=r.length===0?i:i.slice(c);let m=h,g=!1;return h.endsWith("!")?(m=h.slice(0,-1),g=!0):h.startsWith("!")&&(m=h.slice(1),g=!0),Es(r,g,m,a&&a>c?a-c:void 0)};if(t){const i=t+":",r=o;o=a=>a.startsWith(i)?r(a.slice(i.length)):Es(Pv,!1,a,void 0,!0)}if(n){const i=o;o=r=>n({className:r,parseClassName:i})}return o},Dv=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,o)=>{t.set(n,1e6+o)}),n=>{const o=[];let i=[];for(let r=0;r<n.length;r++){const a=n[r],s=a[0]==="[",l=t.has(a);s||l?(i.length>0&&(i.sort(),o.push(...i),i=[]),o.push(a)):i.push(a)}return i.length>0&&(i.sort(),o.push(...i)),o}},Av=/\s+/,Qh=e=>{if(typeof e=="string")return e;let t,n="";for(let o=0;o<e.length;o++)e[o]&&(t=Qh(e[o]))&&(n&&(n+=" "),n+=t);return n},zv=(e,...t)=>{let n,o,i,r;const a=s=>{const l=o(s);if(l)return l;const c=((u,h)=>{const{parseClassName:m,getClassGroupId:g,getConflictingClassGroupIds:p,sortModifiers:v}=h,f=[],y=u.trim().split(Av);let b="";for(let w=y.length-1;w>=0;w-=1){const x=y[w],{isExternal:C,modifiers:S,hasImportantModifier:M,baseClassName:A,maybePostfixModifierPosition:I}=m(x);if(C){b=x+(b.length>0?" "+b:b);continue}let P=!!I,z=g(P?A.substring(0,I):A);if(!z){if(!P){b=x+(b.length>0?" "+b:b);continue}if(z=g(A),!z){b=x+(b.length>0?" "+b:b);continue}P=!1}const D=S.length===0?"":S.length===1?S[0]:v(S).join(":"),T=M?D+"!":D,_=T+z;if(f.indexOf(_)>-1)continue;f.push(_);const H=p(z,P);for(let $=0;$<H.length;++$){const j=H[$];f.push(T+j)}b=x+(b.length>0?" "+b:b)}return b})(s,n);return i(s,c),c};return r=s=>{const l=t.reduce((c,u)=>u(c),e());return n=(c=>({cache:Sv(c.cacheSize),parseClassName:Mv(c),sortModifiers:Dv(c),...fv(c)}))(l),o=n.cache.get,i=n.cache.set,r=a,a(s)},(...s)=>r(((...l)=>{let c,u,h=0,m="";for(;h<l.length;)(c=l[h++])&&(u=Qh(c))&&(m&&(m+=" "),m+=u);return m})(...s))},Tv=[],Ne=e=>{const t=n=>n[e]||Tv;return t.isThemeGetter=!0,t},Jh=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,em=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ev=/^\d+\/\d+$/,Rv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_v=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ov=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Lv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dn=e=>Ev.test(e),re=e=>!!e&&!Number.isNaN(Number(e)),Tt=e=>!!e&&Number.isInteger(Number(e)),yi=e=>e.endsWith("%")&&re(e.slice(0,-1)),xt=e=>Rv.test(e),$v=()=>!0,Fv=e=>_v.test(e)&&!Nv.test(e),tm=()=>!1,jv=e=>Ov.test(e),Uv=e=>Lv.test(e),Hv=e=>!W(e)&&!q(e),Bv=e=>kn(e,im,tm),W=e=>Jh.test(e),qt=e=>kn(e,rm,Fv),bi=e=>kn(e,Kv,re),Rs=e=>kn(e,nm,tm),Wv=e=>kn(e,om,Uv),ao=e=>kn(e,am,jv),q=e=>em.test(e),Tn=e=>Sn(e,rm),qv=e=>Sn(e,Zv),_s=e=>Sn(e,nm),Gv=e=>Sn(e,im),Vv=e=>Sn(e,om),so=e=>Sn(e,am,!0),kn=(e,t,n)=>{const o=Jh.exec(e);return!!o&&(o[1]?t(o[1]):n(o[2]))},Sn=(e,t,n=!1)=>{const o=em.exec(e);return!!o&&(o[1]?t(o[1]):n)},nm=e=>e==="position"||e==="percentage",om=e=>e==="image"||e==="url",im=e=>e==="length"||e==="size"||e==="bg-size",rm=e=>e==="length",Kv=e=>e==="number",Zv=e=>e==="family-name",am=e=>e==="shadow",Gn=zv(()=>{const e=Ne("color"),t=Ne("font"),n=Ne("text"),o=Ne("font-weight"),i=Ne("tracking"),r=Ne("leading"),a=Ne("breakpoint"),s=Ne("container"),l=Ne("spacing"),c=Ne("radius"),u=Ne("shadow"),h=Ne("inset-shadow"),m=Ne("text-shadow"),g=Ne("drop-shadow"),p=Ne("blur"),v=Ne("perspective"),f=Ne("aspect"),y=Ne("ease"),b=Ne("animate"),w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",q,W],x=()=>[q,W,l],C=()=>[dn,"full","auto",...x()],S=()=>[Tt,"none","subgrid",q,W],M=()=>["auto",{span:["full",Tt,q,W]},Tt,q,W],A=()=>[Tt,"auto",q,W],I=()=>["auto","min","max","fr",q,W],P=()=>["auto",...x()],z=()=>[dn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],D=()=>[e,q,W],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",_s,Rs,{position:[q,W]}],_=()=>["auto","cover","contain",Gv,Bv,{size:[q,W]}],H=()=>[yi,Tn,qt],$=()=>["","none","full",c,q,W],j=()=>["",re,Tn,qt],F=()=>[re,yi,_s,Rs],B=()=>["","none",p,q,W],ge=()=>["none",re,q,W],ue=()=>["none",re,q,W],be=()=>[re,q,W],ke=()=>[dn,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xt],breakpoint:[xt],color:[$v],container:[xt],"drop-shadow":[xt],ease:["in","out","in-out"],font:[Hv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xt],shadow:[xt],spacing:["px",re],text:[xt],"text-shadow":[xt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",dn,W,q,f]}],container:["container"],columns:[{columns:[re,W,q,s]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Tt,"auto",q,W]}],basis:[{basis:[dn,"full","auto",s,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[re,dn,"auto","initial","none",W]}],grow:[{grow:["",re,q,W]}],shrink:[{shrink:["",re,q,W]}],order:[{order:[Tt,"first","last","none",q,W]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[s,"screen",...z()]}],"min-w":[{"min-w":[s,"screen","none",...z()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[a]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,Tn,qt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,q,bi]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",yi,W]}],"font-family":[{font:[qv,W,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,q,W]}],"line-clamp":[{"line-clamp":[re,"none",q,bi]}],leading:[{leading:[r,...x()]}],"list-image":[{"list-image":["none",q,W]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",q,W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[re,"from-font","auto",q,qt]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[re,"auto",q,W]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",q,W]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",q,W]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:_()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Tt,q,W],radial:["",q,W],conic:[Tt,q,W]},Vv,Wv]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:j()}],"border-w-x":[{"border-x":j()}],"border-w-y":[{"border-y":j()}],"border-w-s":[{"border-s":j()}],"border-w-e":[{"border-e":j()}],"border-w-t":[{"border-t":j()}],"border-w-r":[{"border-r":j()}],"border-w-b":[{"border-b":j()}],"border-w-l":[{"border-l":j()}],"divide-x":[{"divide-x":j()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":j()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[re,q,W]}],"outline-w":[{outline:["",re,Tn,qt]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",u,so,ao]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",h,so,ao]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[re,qt]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":j()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",m,so,ao]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[re,q,W]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[re]}],"mask-image-linear-from-pos":[{"mask-linear-from":F()}],"mask-image-linear-to-pos":[{"mask-linear-to":F()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":F()}],"mask-image-t-to-pos":[{"mask-t-to":F()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":F()}],"mask-image-r-to-pos":[{"mask-r-to":F()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":F()}],"mask-image-b-to-pos":[{"mask-b-to":F()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":F()}],"mask-image-l-to-pos":[{"mask-l-to":F()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":F()}],"mask-image-x-to-pos":[{"mask-x-to":F()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":F()}],"mask-image-y-to-pos":[{"mask-y-to":F()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[q,W]}],"mask-image-radial-from-pos":[{"mask-radial-from":F()}],"mask-image-radial-to-pos":[{"mask-radial-to":F()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[re]}],"mask-image-conic-from-pos":[{"mask-conic-from":F()}],"mask-image-conic-to-pos":[{"mask-conic-to":F()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:_()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",q,W]}],filter:[{filter:["","none",q,W]}],blur:[{blur:B()}],brightness:[{brightness:[re,q,W]}],contrast:[{contrast:[re,q,W]}],"drop-shadow":[{"drop-shadow":["","none",g,so,ao]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",re,q,W]}],"hue-rotate":[{"hue-rotate":[re,q,W]}],invert:[{invert:["",re,q,W]}],saturate:[{saturate:[re,q,W]}],sepia:[{sepia:["",re,q,W]}],"backdrop-filter":[{"backdrop-filter":["","none",q,W]}],"backdrop-blur":[{"backdrop-blur":B()}],"backdrop-brightness":[{"backdrop-brightness":[re,q,W]}],"backdrop-contrast":[{"backdrop-contrast":[re,q,W]}],"backdrop-grayscale":[{"backdrop-grayscale":["",re,q,W]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[re,q,W]}],"backdrop-invert":[{"backdrop-invert":["",re,q,W]}],"backdrop-opacity":[{"backdrop-opacity":[re,q,W]}],"backdrop-saturate":[{"backdrop-saturate":[re,q,W]}],"backdrop-sepia":[{"backdrop-sepia":["",re,q,W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",q,W]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[re,"initial",q,W]}],ease:[{ease:["linear","initial",y,q,W]}],delay:[{delay:[re,q,W]}],animate:[{animate:["none",b,q,W]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,q,W]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:ge()}],"rotate-x":[{"rotate-x":ge()}],"rotate-y":[{"rotate-y":ge()}],"rotate-z":[{"rotate-z":ge()}],scale:[{scale:ue()}],"scale-x":[{"scale-x":ue()}],"scale-y":[{"scale-y":ue()}],"scale-z":[{"scale-z":ue()}],"scale-3d":["scale-3d"],skew:[{skew:be()}],"skew-x":[{"skew-x":be()}],"skew-y":[{"skew-y":be()}],transform:[{transform:[q,W,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ke()}],"translate-x":[{"translate-x":ke()}],"translate-y":[{"translate-y":ke()}],"translate-z":[{"translate-z":ke()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",q,W]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",q,W]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[re,Tn,qt,bi]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});var Yv=["children","onClick","active","disabled","className","anchorRef"];function Bi(e){var t=e.children,n=e.onClick,o=e.active,i=o!==void 0&&o,r=e.disabled,a=r!==void 0&&r,s=e.className,l=s===void 0?"":s,c=e.anchorRef,u=Oo(e,Yv);return d("button",O({type:"button",ref:c,onClick:n,disabled:a,className:Gn("flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors hover:bg-interactive-hover hover:ring hover:ring-accent cursor-pointer rounded-none px-2 py-1 text-sm hover:bg-transparent border-b-2 hover:border-b-fg-muted hover:ring-transparent",i?"border-b-accent text-accent hover:border-b-accent":"border-b-transparent",a?"cursor-not-allowed opacity-50":"",l)},u),t)}var jn=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M9 6l6 6l-6 6"}))},Lr=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M15 6l-6 6l6 6"}))},sm=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M6 9l6 6l6 -6"}))},lm=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),d("path",{d:"M21 21l-6 -6"}))},cm=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M18 6l-12 12"}),d("path",{d:"M6 6l12 12"}))},Xv={download:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),d("path",{d:"M7 11l5 5l5 -5"}),d("path",{d:"M12 4l0 12"}))},menu:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 8l16 0"}),d("path",{d:"M4 16l16 0"}))},fullscreen:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),d("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),d("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),d("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"}))},fullscreenExit:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 8v-2c0 -.551 .223 -1.05 .584 -1.412"}),d("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),d("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),d("path",{d:"M16 20h2c.545 0 1.04 -.218 1.4 -.572"}),d("path",{d:"M3 3l18 18"}))},save:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),d("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),d("path",{d:"M14 4l0 4l-6 0l0 -4"}))},print:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2"}),d("path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4"}),d("path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z"}))},settings:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),d("path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}))},viewSettings:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),d("path",{d:"M12 10.5v1.5"}),d("path",{d:"M12 16v1.5"}),d("path",{d:"M15.031 12.25l-1.299 .75"}),d("path",{d:"M10.268 15l-1.3 .75"}),d("path",{d:"M15 15.803l-1.285 -.773"}),d("path",{d:"M10.285 12.97l-1.285 -.773"}),d("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),d("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}))},rotateClockwise:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5"}))},rotateCounterClockwise:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5"}))},singlePage:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M5 3m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z"}))},doublePage:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 3m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1zm9 -1v18"}))},zoomIn:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),d("path",{d:"M9 12h6"}),d("path",{d:"M12 9v6"}))},zoomOut:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),d("path",{d:"M9 12l6 0"}))},fitToWidth:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 12v-6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6"}),d("path",{d:"M10 18h-7"}),d("path",{d:"M21 18h-7"}),d("path",{d:"M6 15l-3 3l3 3"}),d("path",{d:"M18 15l3 3l-3 3"}))},fitToPage:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h6"}),d("path",{d:"M18 14v7"}),d("path",{d:"M18 3v7"}),d("path",{d:"M15 18l3 3l3 -3"}),d("path",{d:"M15 6l3 -3l3 3"}))},chevronRight:jn,chevronLeft:Lr,chevronDown:sm,search:lm,comment:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M12 11v.01"}),d("path",{d:"M8 11v.01"}),d("path",{d:"M16 11v.01"}),d("path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3z"}))},sidebar:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"}),d("path",{d:"M10 18v-12a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z"}))},dots:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),d("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),d("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}))},vertical:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M8 7l4 -4l4 4"}),d("path",{d:"M8 17l4 4l4 -4"}),d("path",{d:"M12 3l0 18"}))},horizontal:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M7 8l-4 4l4 4"}),d("path",{d:"M17 8l4 4l-4 4"}),d("path",{d:"M3 12l18 0"}))},book:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),d("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),d("path",{d:"M3 6l0 13"}),d("path",{d:"M12 6l0 13"}),d("path",{d:"M21 6l0 13"}))},book2:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z"}),d("path",{d:"M19 16h-12a2 2 0 0 0 -2 2"}),d("path",{d:"M9 8h6"}))},squares:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z"}),d("path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3"}))},listTree:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M9 6h11"}),d("path",{d:"M12 12h8"}),d("path",{d:"M15 18h5"}),d("path",{d:"M5 6v.01"}),d("path",{d:"M8 12v.01"}),d("path",{d:"M11 18v.01"}))},paperclip:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5"}))},copy:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"}),d("path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"}))},underline:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 20h16",stroke:a}),d("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),d("path",{d:"M8 10h8",stroke:"currentColor"}))},squiggly:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),d("path",{d:"M8 10h8",stroke:"currentColor"}),d("path",{d:"M4 20c1.5 -1.5 3.5 -1.5 5 0s3.5 1.5 5 0 3.5 -1.5 5 0",stroke:a}))},strikethrough:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),d("path",{d:"M4 10h16",stroke:a}))},highlight:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("rect",{x:"2",y:"6",width:"20",height:"16",rx:"2",fill:a,stroke:"none"}),d("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),d("path",{d:"M8 10h8",stroke:"currentColor"}))},palette:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"}),d("path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),d("path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),d("path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}))},x:cm,fileImport:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),d("path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3"}))},hand:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),d("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),d("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),d("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"}))},zoomInArea:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M15 13v4"}),d("path",{d:"M13 15h4"}),d("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),d("path",{d:"M22 22l-3 -3"}),d("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),d("path",{d:"M3 11v-1"}),d("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),d("path",{d:"M10 3h1"}),d("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"}))},screenshot:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M7 19a2 2 0 0 1 -2 -2"}),d("path",{d:"M5 13v-2"}),d("path",{d:"M5 7a2 2 0 0 1 2 -2"}),d("path",{d:"M11 5h2"}),d("path",{d:"M17 5a2 2 0 0 1 2 2"}),d("path",{d:"M19 11v2"}),d("path",{d:"M19 17v4"}),d("path",{d:"M21 19h-4"}),d("path",{d:"M13 19h-2"}))},arrowBackUp:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M9 14l-4 -4l4 -4"}),d("path",{d:"M5 10h11a4 4 0 1 1 0 8h-1"}))},arrowForwardUp:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M15 14l4 -4l-4 -4"}),d("path",{d:"M19 10h-11a4 4 0 1 0 0 8h1"}))},trash:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 7l16 0"}),d("path",{d:"M10 11l0 6"}),d("path",{d:"M14 11l0 6"}),d("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),d("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))},deviceFloppy:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),d("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),d("path",{d:"M14 4l0 4l-6 0l0 -4"}))},pencilMarker:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":i,class:e.className,role:"img","aria-label":e.title},d("path",{d:"m9.109 16.275 8.856-8.097c.812-.743.87-2.014.127-2.826s-2.014-.869-2.826-.127L6.41 13.322l-.127 2.826zM13.79 6.575l2.7 2.952",stroke:"currentColor"}),d("path",{stroke:a,d:"M19.375 20.125c.569.063-4.05-.562-6.412-.437s-4.759 1.229-6.857 1.625c-1.764.687-3.404-.938-1.981-2.5"}))},circle:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.secondaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:s===void 0?"none":s,stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}))},square:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.secondaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:s===void 0?"none":s,stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}))},line:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2.2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M20 4l-16 16"}))},lineArrow:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2.2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M20 4l-16 16"}),d("path",{d:"M16 3h5v5"}))},polygon:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.secondaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:s===void 0?"none":s,stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M13.163 2.168l8.021 5.828c.694 .504 .984 1.397 .719 2.212l-3.064 9.43a1.978 1.978 0 0 1 -1.881 1.367h-9.916a1.978 1.978 0 0 1 -1.881 -1.367l-3.064 -9.43a1.978 1.978 0 0 1 .719 -2.212l8.021 -5.828a1.978 1.978 0 0 1 2.326 0z"}))},zigzag:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{d:"M12 2.4L21.36 11.76L2.64 12.24L12 21.6"}))},text:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M6.5 15.5m-3.5 0a3.5 3.5 0 1 0 7 0a3.5 3.5 0 1 0 -7 0"}),d("path",{d:"M14 19v-10.5a3.5 3.5 0 0 1 7 0v10.5"}),d("path",{d:"M14 13h7"}),d("path",{d:"M10 12v7"}))},italic:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M11 5l6 0"}),d("path",{d:"M7 19l6 0"}),d("path",{d:"M14 5l-4 14"}))},bold:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),d("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"}))},alignLeft:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 6l16 0"}),d("path",{d:"M4 12l10 0"}),d("path",{d:"M4 18l14 0"}))},alignCenter:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 6l16 0"}),d("path",{d:"M8 12l8 0"}),d("path",{d:"M6 18l12 0"}))},alignRight:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M4 6l16 0"}),d("path",{d:"M10 12l10 0"}),d("path",{d:"M6 18l14 0"}))},alignTop:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),d("path",{d:"M11 13h2"}),d("path",{d:"M9 10h6"}),d("path",{d:"M10 7h4"}))},alignMiddle:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),d("path",{d:"M11 15h2"}),d("path",{d:"M9 12h6"}),d("path",{d:"M10 9h4"}))},alignBottom:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),d("path",{d:"M11 17h2"}),d("path",{d:"M9 14h6"}),d("path",{d:"M10 11h4"}))},photo:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M15 8h.01"}),d("path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"}),d("path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"}),d("path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"}))},pointer:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z"}))},redact:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M7 4h10"}),d("path",{d:"M12 4v8"}),d("defs",null,d("clipPath",{id:"stripeClip"},d("rect",{x:"2",y:"12",width:"20",height:"10",rx:"2"}))),d("rect",{x:"2",y:"12",width:"20",height:"10",rx:"2",fill:"none"}),d("g",{"clip-path":"url(#stripeClip)"},d("path",{d:"M-7 24l12 -12"}),d("path",{d:"M-3 24l12 -12"}),d("path",{d:"M1 24l12 -12"}),d("path",{d:"M5 24l12 -12"}),d("path",{d:"M9 24l12 -12"}),d("path",{d:"M13 24l12 -12"}),d("path",{d:"M17 24l12 -12"}),d("path",{d:"M21 24l12 -12"}),d("path",{d:"M25 24l12 -12"})))},redactArea:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M6 20h-1a2 2 0 0 1 -2 -2v-1"}),d("path",{d:"M3 13v-3"}),d("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),d("path",{d:"M10 3h3"}),d("path",{d:"M17 3h1a2 2 0 0 1 2 2v1"}),d("defs",null,d("clipPath",{id:"redactClip"},d("rect",{x:"10",y:"10",width:"12",height:"12",rx:"2"}))),d("rect",{x:"10",y:"10",width:"12",height:"12",rx:"2",fill:"none"}),d("g",{"clip-path":"url(#redactClip)"},d("path",{d:"M-2 24l14 -14"}),d("path",{d:"M2 24l14 -14"}),d("path",{d:"M6 24l14 -14"}),d("path",{d:"M10 24l15 -15"}),d("path",{d:"M14 24l15 -15"}),d("path",{d:"M18 24l15 -15"})))},check:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M5 12l5 5l10 -10"}))},file:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.className,l=e.title;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:s,"aria-hidden":!l,role:l?"img":"presentation"},l&&d("title",null,l),d("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),d("polyline",{points:"14 2 14 8 20 8"}))},plus:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.className,l=e.title;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:s,"aria-hidden":!l,role:l?"img":"presentation"},l&&d("title",null,l),d("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),d("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))},lock:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},d("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),d("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}))},unlock:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},d("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),d("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}))},alertTriangle:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},d("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),d("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),d("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))},eye:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},d("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),d("circle",{cx:"12",cy:"12",r:"3"}))},"eye-off":function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},d("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),d("line",{x1:"1",y1:"1",x2:"23",y2:"23"}))},info:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return d("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},d("circle",{cx:"12",cy:"12",r:"10"}),d("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),d("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))},link:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M9 15l6 -6"}),d("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),d("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"}))},linkOff:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M9 15l3 -3m2 -2l1 -1"}),d("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.072 7.071l-.534 .464"}),d("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"}),d("path",{d:"M3 3l18 18"}))},externalLink:function(e){return d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e.className},d("path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"}),d("path",{d:"M11 13l9 -9"}),d("path",{d:"M15 4h5v5"}))},marqueeSelect:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M17 20h6"}),d("path",{d:"M20 17v6"}),d("path",{d:"M4 13v-2"}),d("path",{d:"M4 6v-1a1 1 0 0 1 1 -1h1"}),d("path",{d:"M6 20h-1a1 1 0 0 1 -1 -1v-1"}),d("path",{d:"M11 4h2"}),d("path",{d:"M11 20h2"}),d("path",{d:"M18 4h1a1 1 0 0 1 1 1v1"}),d("path",{d:"M20 11v2"}))},group:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("path",{d:"M3 5a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),d("path",{d:"M17 5a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),d("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),d("path",{d:"M17 19a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),d("path",{d:"M5 7v10"}),d("path",{d:"M19 7v10"}),d("path",{d:"M7 5h10"}),d("path",{d:"M7 19h10"}),d("path",{d:"M8 8H12.8V11.2H16V16H11.2V12.8H8V8Z"}))},ungroup:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return d("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},d("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),d("rect",{x:"4",y:"4",width:"7",height:"7",rx:"1"}),d("rect",{x:"13",y:"13",width:"7",height:"7",rx:"1"}))}},Wi=new Map,Qv=/^[MmZzLlHhVvCcSsQqTtAa0-9\s,.\-eE]+$/;function Jv(e){return Qv.test(e.trim())}function $r(e,t){for(var n=(function(r){var a,s;return"path"in r?{viewBox:r.viewBox||"0 0 24 24",paths:[{d:r.path,stroke:(a=r.stroke)!==null&&a!==void 0?a:"primary",fill:(s=r.fill)!==null&&s!==void 0?s:"none",strokeWidth:r.strokeWidth}],strokeLinecap:r.strokeLinecap||"round",strokeLinejoin:r.strokeLinejoin||"round",strokeWidth:r.strokeWidth}:{viewBox:r.viewBox||"0 0 24 24",paths:r.paths,strokeLinecap:r.strokeLinecap||"round",strokeLinejoin:r.strokeLinejoin||"round",strokeWidth:r.strokeWidth}})(t),o=0;o<n.paths.length;o++){var i=n.paths[o];if(!i.d||!Jv(i.d))throw new Error('Invalid path data for icon "'.concat(e,'" at path index ').concat(o,". ")+"Path must only contain valid SVG path commands.")}Wi.set(e,n)}function qi(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var o=U(n[t],2);$r(o[0],o[1])}}function Ns(e,t,n){return e&&e!=="none"?e==="primary"?t:e==="secondary"?n:e==="currentColor"?"currentColor":e:"none"}function oe(e){var t,n=e.icon,o=e.title,i=e.size,r=i===void 0?24:i,a=e.strokeWidth,s=a===void 0?2:a,l=e.primaryColor,c=l===void 0?"currentColor":l,u=e.secondaryColor,h=u===void 0?"none":u,m=e.className,g=Xv[n];if(g)return d(g,{size:r,strokeWidth:s,primaryColor:c,secondaryColor:h,className:m,title:o});if(t=n,Wi.has(t)){var p=(function(v){return Wi.get(v)})(n);return(function(v,f){var y,b=f.size,w=f.strokeWidth,x=f.primaryColor,C=f.secondaryColor,S=f.className,M=f.title,A=(y=v.strokeWidth)!==null&&y!==void 0?y:w;return d("svg",{width:b,height:b,viewBox:v.viewBox,"stroke-linecap":v.strokeLinecap,"stroke-linejoin":v.strokeLinejoin,class:S,role:"img","aria-label":M},v.paths.map(function(I,P){var z,D=Ns(I.stroke,x,C),T=Ns(I.fill,x,C),_=(z=I.strokeWidth)!==null&&z!==void 0?z:A;return d("path",{key:P,d:I.d,stroke:D,fill:T,"stroke-width":D!=="none"?_:void 0,opacity:I.opacity})}))})(p,{size:r,strokeWidth:s,primaryColor:c,secondaryColor:h,className:m,title:o})}return console.warn("Icon not found: ".concat(n)),null}var ey=["id","children","onClick","active","disabled","className","tooltip","elementRef"];function Oe(e){var t=e.id,n=e.children,o=e.onClick,i=e.active,r=i!==void 0&&i,a=e.disabled,s=a!==void 0&&a,l=e.className,c=l===void 0?"":l,u=e.tooltip,h=e.elementRef,m=Oo(e,ey);return d("button",O({id:t,ref:h,onClick:o,className:"flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors ".concat(r?"bg-interactive-selected text-accent ring-accent border-none shadow ring":"hover:bg-interactive-hover hover:ring-accent hover:ring"," ").concat(s?"cursor-not-allowed opacity-50 hover:bg-transparent hover:ring-0":"cursor-pointer"," ").concat(c),title:u},m),n)}const bn=Math.min,Yt=Math.max,Eo=Math.round,lo=Math.floor,gt=e=>({x:e,y:e}),ty={left:"right",right:"left",bottom:"top",top:"bottom"},ny={start:"end",end:"start"};function Gi(e,t,n){return Yt(e,bn(t,n))}function Vn(e,t){return typeof e=="function"?e(t):e}function tn(e){return e.split("-")[0]}function Kn(e){return e.split("-")[1]}function dm(e){return e==="x"?"y":"x"}function Fr(e){return e==="y"?"height":"width"}const oy=new Set(["top","bottom"]);function Et(e){return oy.has(tn(e))?"y":"x"}function jr(e){return dm(Et(e))}function Vi(e){return e.replace(/start|end/g,t=>ny[t])}const Os=["left","right"],Ls=["right","left"],iy=["top","bottom"],ry=["bottom","top"];function ay(e,t,n,o){const i=Kn(e);let r=(function(a,s,l){switch(a){case"top":case"bottom":return l?s?Ls:Os:s?Os:Ls;case"left":case"right":return s?iy:ry;default:return[]}})(tn(e),n==="start",o);return i&&(r=r.map(a=>a+"-"+i),t&&(r=r.concat(r.map(Vi)))),r}function co(e){return e.replace(/left|right|bottom|top/g,t=>ty[t])}function um(e){return typeof e!="number"?(function(t){return{top:0,right:0,bottom:0,left:0,...t}})(e):{top:e,right:e,bottom:e,left:e}}function Ro(e){const{x:t,y:n,width:o,height:i}=e;return{width:o,height:i,top:n,left:t,right:t+o,bottom:n+i,x:t,y:n}}function $s(e,t,n){let{reference:o,floating:i}=e;const r=Et(t),a=jr(t),s=Fr(a),l=tn(t),c=r==="y",u=o.x+o.width/2-i.width/2,h=o.y+o.height/2-i.height/2,m=o[s]/2-i[s]/2;let g;switch(l){case"top":g={x:u,y:o.y-i.height};break;case"bottom":g={x:u,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:h};break;case"left":g={x:o.x-i.width,y:h};break;default:g={x:o.x,y:o.y}}switch(Kn(t)){case"start":g[a]-=m*(n&&c?-1:1);break;case"end":g[a]+=m*(n&&c?-1:1)}return g}async function hm(e,t){var n;t===void 0&&(t={});const{x:o,y:i,platform:r,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Vn(t,e),p=um(g),v=s[m?h==="floating"?"reference":"floating":h],f=Ro(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(v)))==null||n?v:v.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),y=h==="floating"?{x:o,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(s.floating)),w=await(r.isElement==null?void 0:r.isElement(b))&&await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1},x=Ro(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:b,strategy:l}):y);return{top:(f.top-x.top+p.top)/w.y,bottom:(x.bottom-f.bottom+p.bottom)/w.y,left:(f.left-x.left+p.left)/w.x,right:(x.right-f.right+p.right)/w.x}}const sy=new Set(["left","top"]);function oi(){return typeof window<"u"}function wn(e){return mm(e)?(e.nodeName||"").toLowerCase():"#document"}function ot(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function pt(e){var t;return(t=(mm(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function mm(e){return!!oi()&&(e instanceof Node||e instanceof ot(e).Node)}function ct(e){return!!oi()&&(e instanceof Element||e instanceof ot(e).Element)}function ft(e){return!!oi()&&(e instanceof HTMLElement||e instanceof ot(e).HTMLElement)}function Fs(e){return!(!oi()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof ot(e).ShadowRoot)}const ly=new Set(["inline","contents"]);function Un(e){const{overflow:t,overflowX:n,overflowY:o,display:i}=dt(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!ly.has(i)}const cy=new Set(["table","td","th"]);function dy(e){return cy.has(wn(e))}const uy=[":popover-open",":modal"];function _o(e){return uy.some(t=>{try{return e.matches(t)}catch{return!1}})}const hy=["transform","translate","scale","rotate","perspective"],my=["transform","translate","scale","rotate","perspective","filter"],gy=["paint","layout","strict","content"];function Ki(e){const t=Ur(),n=ct(e)?dt(e):e;return hy.some(o=>!!n[o]&&n[o]!=="none")||!!n.containerType&&n.containerType!=="normal"||!t&&!!n.backdropFilter&&n.backdropFilter!=="none"||!t&&!!n.filter&&n.filter!=="none"||my.some(o=>(n.willChange||"").includes(o))||gy.some(o=>(n.contain||"").includes(o))}function Ur(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const py=new Set(["html","body","#document"]);function pn(e){return py.has(wn(e))}function dt(e){return ot(e).getComputedStyle(e)}function ii(e){return ct(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Rt(e){if(wn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Fs(e)&&e.host||pt(e);return Fs(t)?t.host:t}function gm(e){const t=Rt(e);return pn(t)?e.ownerDocument?e.ownerDocument.body:e.body:ft(t)&&Un(t)?t:gm(t)}function Hn(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=gm(e),r=i===((o=e.ownerDocument)==null?void 0:o.body),a=ot(i);if(r){const s=Zi(a);return t.concat(a,a.visualViewport||[],Un(i)?i:[],s&&n?Hn(s):[])}return t.concat(i,Hn(i,[],n))}function Zi(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function pm(e){const t=dt(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const i=ft(e),r=i?e.offsetWidth:n,a=i?e.offsetHeight:o,s=Eo(n)!==r||Eo(o)!==a;return s&&(n=r,o=a),{width:n,height:o,$:s}}function Hr(e){return ct(e)?e:e.contextElement}function fn(e){const t=Hr(e);if(!ft(t))return gt(1);const n=t.getBoundingClientRect(),{width:o,height:i,$:r}=pm(t);let a=(r?Eo(n.width):n.width)/o,s=(r?Eo(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const fy=gt(0);function fm(e){const t=ot(e);return Ur()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:fy}function nn(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=Hr(e);let a=gt(1);t&&(o?ct(o)&&(a=fn(o)):a=fn(e));const s=(function(m,g,p){return g===void 0&&(g=!1),!(!p||g&&p!==ot(m))&&g})(r,n,o)?fm(r):gt(0);let l=(i.left+s.x)/a.x,c=(i.top+s.y)/a.y,u=i.width/a.x,h=i.height/a.y;if(r){const m=ot(r),g=o&&ct(o)?ot(o):o;let p=m,v=Zi(p);for(;v&&o&&g!==p;){const f=fn(v),y=v.getBoundingClientRect(),b=dt(v),w=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*f.x,x=y.top+(v.clientTop+parseFloat(b.paddingTop))*f.y;l*=f.x,c*=f.y,u*=f.x,h*=f.y,l+=w,c+=x,p=ot(v),v=Zi(p)}}return Ro({width:u,height:h,x:l,y:c})}function No(e,t){const n=ii(e).scrollLeft;return t?t.left+n:nn(pt(e)).left+n}function vm(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-No(e,n),y:n.top+t.scrollTop}}const vy=new Set(["absolute","fixed"]);function js(e,t,n){let o;if(t==="viewport")o=(function(i,r){const a=ot(i),s=pt(i),l=a.visualViewport;let c=s.clientWidth,u=s.clientHeight,h=0,m=0;if(l){c=l.width,u=l.height;const p=Ur();(!p||p&&r==="fixed")&&(h=l.offsetLeft,m=l.offsetTop)}const g=No(s);if(g<=0){const p=s.ownerDocument,v=p.body,f=getComputedStyle(v),y=p.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,b=Math.abs(s.clientWidth-v.clientWidth-y);b<=25&&(c-=b)}else g<=25&&(c+=g);return{width:c,height:u,x:h,y:m}})(e,n);else if(t==="document")o=(function(i){const r=pt(i),a=ii(i),s=i.ownerDocument.body,l=Yt(r.scrollWidth,r.clientWidth,s.scrollWidth,s.clientWidth),c=Yt(r.scrollHeight,r.clientHeight,s.scrollHeight,s.clientHeight);let u=-a.scrollLeft+No(i);const h=-a.scrollTop;return dt(s).direction==="rtl"&&(u+=Yt(r.clientWidth,s.clientWidth)-l),{width:l,height:c,x:u,y:h}})(pt(e));else if(ct(t))o=(function(i,r){const a=nn(i,!0,r==="fixed"),s=a.top+i.clientTop,l=a.left+i.clientLeft,c=ft(i)?fn(i):gt(1);return{width:i.clientWidth*c.x,height:i.clientHeight*c.y,x:l*c.x,y:s*c.y}})(t,n);else{const i=fm(e);o={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Ro(o)}function ym(e,t){const n=Rt(e);return!(n===t||!ct(n)||pn(n))&&(dt(n).position==="fixed"||ym(n,t))}function yy(e,t,n){const o=ft(t),i=pt(t),r=n==="fixed",a=nn(e,!0,r,t);let s={scrollLeft:0,scrollTop:0};const l=gt(0);function c(){l.x=No(i)}if(o||!o&&!r)if((wn(t)!=="body"||Un(i))&&(s=ii(t)),o){const h=nn(t,!0,r,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&c();r&&!o&&i&&c();const u=!i||o||r?gt(0):vm(i,s);return{x:a.left+s.scrollLeft-l.x-u.x,y:a.top+s.scrollTop-l.y-u.y,width:a.width,height:a.height}}function wi(e){return dt(e).position==="static"}function Us(e,t){if(!ft(e)||dt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return pt(e)===n&&(n=n.ownerDocument.body),n}function Hs(e,t){const n=ot(e);if(_o(e))return n;if(!ft(e)){let i=Rt(e);for(;i&&!pn(i);){if(ct(i)&&!wi(i))return i;i=Rt(i)}return n}let o=Us(e,t);for(;o&&dy(o)&&wi(o);)o=Us(o,t);return o&&pn(o)&&wi(o)&&!Ki(o)?n:o||(function(i){let r=Rt(i);for(;ft(r)&&!pn(r);){if(Ki(r))return r;if(_o(r))return null;r=Rt(r)}return null})(e)||n}const by={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:i}=e;const r=i==="fixed",a=pt(o),s=!!t&&_o(t.floating);if(o===a||s&&r)return n;let l={scrollLeft:0,scrollTop:0},c=gt(1);const u=gt(0),h=ft(o);if((h||!h&&!r)&&((wn(o)!=="body"||Un(a))&&(l=ii(o)),ft(o))){const g=nn(o);c=fn(o),u.x=g.x+o.clientLeft,u.y=g.y+o.clientTop}const m=!a||h||r?gt(0):vm(a,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}},getDocumentElement:pt,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const r=[...n==="clippingAncestors"?_o(t)?[]:(function(l,c){const u=c.get(l);if(u)return u;let h=Hn(l,[],!1).filter(v=>ct(v)&&wn(v)!=="body"),m=null;const g=dt(l).position==="fixed";let p=g?Rt(l):l;for(;ct(p)&&!pn(p);){const v=dt(p),f=Ki(p);f||v.position!=="fixed"||(m=null),(g?!f&&!m:!f&&v.position==="static"&&m&&vy.has(m.position)||Un(p)&&!f&&ym(l,p))?h=h.filter(y=>y!==p):m=v,p=Rt(p)}return c.set(l,h),h})(t,this._c):[].concat(n),o],a=r[0],s=r.reduce((l,c)=>{const u=js(t,c,i);return l.top=Yt(u.top,l.top),l.right=bn(u.right,l.right),l.bottom=bn(u.bottom,l.bottom),l.left=Yt(u.left,l.left),l},js(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Hs,getElementRects:async function(e){const t=this.getOffsetParent||Hs,n=this.getDimensions,o=await n(e.floating);return{reference:yy(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=pm(e);return{width:t,height:n}},getScale:fn,isElement:ct,isRTL:function(e){return dt(e).direction==="rtl"}};function Bs(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function wy(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,c=Hr(e),u=i||r?[...c?Hn(c):[],...Hn(t)]:[];u.forEach(f=>{i&&f.addEventListener("scroll",n,{passive:!0}),r&&f.addEventListener("resize",n)});const h=c&&s?(function(f,y){let b,w=null;const x=pt(f);function C(){var S;clearTimeout(b),(S=w)==null||S.disconnect(),w=null}return(function S(M,A){M===void 0&&(M=!1),A===void 0&&(A=1),C();const I=f.getBoundingClientRect(),{left:P,top:z,width:D,height:T}=I;if(M||y(),!D||!T)return;const _={rootMargin:-lo(z)+"px "+-lo(x.clientWidth-(P+D))+"px "+-lo(x.clientHeight-(z+T))+"px "+-lo(P)+"px",threshold:Yt(0,bn(1,A))||1};let H=!0;function $(j){const F=j[0].intersectionRatio;if(F!==A){if(!H)return S();F?S(!1,F):b=setTimeout(()=>{S(!1,1e-7)},1e3)}F!==1||Bs(I,f.getBoundingClientRect())||S(),H=!1}try{w=new IntersectionObserver($,{..._,root:x.ownerDocument})}catch{w=new IntersectionObserver($,_)}w.observe(f)})(!0),C})(c,n):null;let m,g=-1,p=null;a&&(p=new ResizeObserver(f=>{let[y]=f;y&&y.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let v=l?nn(e):null;return l&&(function f(){const y=nn(e);v&&!Bs(v,y)&&n(),v=y,m=requestAnimationFrame(f)})(),n(),()=>{var f;u.forEach(y=>{i&&y.removeEventListener("scroll",n),r&&y.removeEventListener("resize",n)}),h?.(),(f=p)==null||f.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const xy=function(e){return{name:"offset",options:e,async fn(t){var n,o;const{x:i,y:r,placement:a,middlewareData:s}=t,l=await(async function(c,u){const{placement:h,platform:m,elements:g}=c,p=await(m.isRTL==null?void 0:m.isRTL(g.floating)),v=tn(h),f=Kn(h),y=Et(h)==="y",b=sy.has(v)?-1:1,w=p&&y?-1:1,x=Vn(u,c);let{mainAxis:C,crossAxis:S,alignmentAxis:M}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return f&&typeof M=="number"&&(S=f==="end"?-1*M:M),y?{x:S*w,y:C*b}:{x:C*b,y:S*w}})(t,e);return a===((n=s.offset)==null?void 0:n.placement)&&(o=s.arrow)!=null&&o.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:a}}}}},Cy=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:i}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:s={fn:f=>{let{x:y,y:b}=f;return{x:y,y:b}}},...l}=Vn(e,t),c={x:n,y:o},u=await hm(t,l),h=Et(tn(i)),m=dm(h);let g=c[m],p=c[h];if(r){const f=m==="y"?"bottom":"right";g=Gi(g+u[m==="y"?"top":"left"],g,g-u[f])}if(a){const f=h==="y"?"bottom":"right";p=Gi(p+u[h==="y"?"top":"left"],p,p-u[f])}const v=s.fn({...t,[m]:g,[h]:p});return{...v,data:{x:v.x-n,y:v.y-o,enabled:{[m]:r,[h]:a}}}}}},Iy=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:i,middlewareData:r,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...f}=Vn(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=tn(i),b=Et(s),w=tn(s)===s,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=m||(w||!v?[co(s)]:(function(_){const H=co(_);return[Vi(_),H,Vi(H)]})(s)),S=p!=="none";!m&&S&&C.push(...ay(s,v,p,x));const M=[s,...C],A=await hm(t,f),I=[];let P=((o=r.flip)==null?void 0:o.overflows)||[];if(u&&I.push(A[y]),h){const _=(function(H,$,j){j===void 0&&(j=!1);const F=Kn(H),B=jr(H),ge=Fr(B);let ue=B==="x"?F===(j?"end":"start")?"right":"left":F==="start"?"bottom":"top";return $.reference[ge]>$.floating[ge]&&(ue=co(ue)),[ue,co(ue)]})(i,a,x);I.push(A[_[0]],A[_[1]])}if(P=[...P,{placement:i,overflows:I}],!I.every(_=>_<=0)){var z,D;const _=(((z=r.flip)==null?void 0:z.index)||0)+1,H=M[_];if(H&&(!(h==="alignment"&&b!==Et(H))||P.every(j=>Et(j.placement)!==b||j.overflows[0]>0)))return{data:{index:_,overflows:P},reset:{placement:H}};let $=(D=P.filter(j=>j.overflows[0]<=0).sort((j,F)=>j.overflows[1]-F.overflows[1])[0])==null?void 0:D.placement;if(!$)switch(g){case"bestFit":{var T;const j=(T=P.filter(F=>{if(S){const B=Et(F.placement);return B===b||B==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,ge)=>B+ge,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:T[0];j&&($=j);break}case"initialPlacement":$=s}if(i!==$)return{reset:{placement:$}}}return{}}}},ky=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:i,rects:r,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=Vn(e,t)||{};if(c==null)return{};const h=um(u),m={x:n,y:o},g=jr(i),p=Fr(g),v=await a.getDimensions(c),f=g==="y",y=f?"top":"left",b=f?"bottom":"right",w=f?"clientHeight":"clientWidth",x=r.reference[p]+r.reference[g]-m[g]-r.floating[p],C=m[g]-r.reference[g],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let M=S?S[w]:0;M&&await(a.isElement==null?void 0:a.isElement(S))||(M=s.floating[w]||r.floating[p]);const A=x/2-C/2,I=M/2-v[p]/2-1,P=bn(h[y],I),z=bn(h[b],I),D=P,T=M-v[p]-z,_=M/2-v[p]/2+A,H=Gi(D,_,T),$=!l.arrow&&Kn(i)!=null&&_!==H&&r.reference[p]/2-(_<D?P:z)-v[p]/2<0,j=$?_<D?_-D:_-T:0;return{[g]:m[g]+j,data:{[g]:H,centerOffset:_-H-j,...$&&{alignmentOffset:j}},reset:$}}}),Sy=(e,t,n)=>{const o=new Map,i={platform:by,...n},r={...i.platform,_c:o};return(async(a,s,l)=>{const{placement:c="bottom",strategy:u="absolute",middleware:h=[],platform:m}=l,g=h.filter(Boolean),p=await(m.isRTL==null?void 0:m.isRTL(s));let v=await m.getElementRects({reference:a,floating:s,strategy:u}),{x:f,y}=$s(v,c,p),b=c,w={},x=0;for(let C=0;C<g.length;C++){const{name:S,fn:M}=g[C],{x:A,y:I,data:P,reset:z}=await M({x:f,y,initialPlacement:c,placement:b,strategy:u,middlewareData:w,rects:v,platform:m,elements:{reference:a,floating:s}});f=A??f,y=I??y,w={...w,[S]:{...w[S],...P}},z&&x<=50&&(x++,typeof z=="object"&&(z.placement&&(b=z.placement),z.rects&&(v=z.rects===!0?await m.getElementRects({reference:a,floating:s,strategy:u}):z.rects),{x:f,y}=$s(v,b,p)),C=-1)}return{x:f,y,placement:b,strategy:u,middlewareData:w}})(e,t,{...i,platform:r})};var Py=(function(){function e(){return Ji(this,e),gl(this,e,arguments)}return pl(e,ht),er(e,[{key:"render",value:function(){return this.props.children}}])})();function My(e){var t=e.children,n=e.content,o=e.position,i=o===void 0?"top":o,r=e.className,a=r===void 0?"":r,s=e.delay,l=s===void 0?200:s,c=e.style,u=c===void 0?"dark":c,h=e.trigger,m=h===void 0?"hover":h,g=V(null),p=V(null),v=V(null),f=U(R(!1),2),y=f[0],b=f[1],w=V(null);return L(function(){var x;if((x=g.current)!==null&&x!==void 0&&x.base&&p.current)return wy(g.current.base,p.current,function(){Sy(g.current.base,p.current,{placement:i,middleware:[xy(8),Iy(),Cy({padding:8}),ky({element:v.current,padding:6})]}).then(function(C){var S,M=C.x,A=C.y,I=C.placement,P=C.middlewareData;Object.assign(p.current.style,{left:"".concat(M,"px"),top:"".concat(A,"px")});var z=(S=P.arrow)!==null&&S!==void 0?S:{},D=z.x,T=z.y,_={top:"bottom",bottom:"top",left:"right",right:"left"}[I.split("-")[0]];Object.assign(v.current.style,G({left:D!=null?"".concat(D,"px"):"",top:T!=null?"".concat(T,"px"):"",right:"",bottom:""},_,"-4px"))})})},[i,y]),L(function(){var x,C=(x=g.current)===null||x===void 0?void 0:x.base,S=p.current;if(C&&S){var M=function(){w.current&&clearTimeout(w.current)},A=function(){M(),w.current=setTimeout(function(){return b(!0)},l)},I=function(){M(),b(!1)},P=function(){return b(function(z){return!z})};return m==="hover"?(C.addEventListener("mouseenter",A),C.addEventListener("mouseleave",I),S.addEventListener("mouseenter",A),S.addEventListener("mouseleave",I),C.addEventListener("pointerdown",I)):m==="click"&&C.addEventListener("click",P),m==="none"&&(w.current&&clearTimeout(w.current),b(!1)),function(){M(),m==="hover"?(C.removeEventListener("mouseenter",A),C.removeEventListener("mouseleave",I),S.removeEventListener("mouseenter",A),S.removeEventListener("mouseleave",I),C.removeEventListener("pointerdown",I)):m==="click"&&C.removeEventListener("click",P)}}},[m,l]),d(te,null,d("div",{ref:p,role:"tooltip",className:"z-100 pointer-events-none absolute select-none whitespace-nowrap rounded-lg px-3 py-2 text-sm shadow-md transition-opacity duration-150 ".concat(u==="dark"?"bg-tooltip-bg text-tooltip-fg":"border-border-subtle bg-bg-elevated text-fg-primary border"," ").concat(y?"opacity-100":"opacity-0"," ").concat(a," "),style:{visibility:y?"visible":"hidden"}},n,d("div",{ref:v,className:"absolute h-2 w-2 rotate-45 bg-inherit ".concat(u==="light"?"border-border-subtle border":""," ")})),d(Py,{ref:g},t))}function Xt(e){var t=e.commandId,n=e.documentId,o=e.variant,i=o===void 0?"icon":o,r=e.itemId,a=e.className,s=It(t,n),l=Xc(n,r||t);if(!s||!s.visible)return null;var c=s.iconProps||{};return d(My,{content:s.label,position:"bottom",delay:500,trigger:s.active||s.disabled?"none":"hover"},d(Oe,{elementRef:l,onClick:function(){s.disabled||s.execute()},active:s.active,disabled:s.disabled,className:a||"p-1","aria-label":s.label},i==="text"?d("span",{className:"text-sm"},s.label):i==="icon-text"?d("span",{className:"flex items-center whitespace-nowrap"},s.icon&&d(oe,{icon:s.icon,className:"mr-1.5 h-5 w-5 flex-shrink-0",primaryColor:c.primaryColor,secondaryColor:c.secondaryColor}),d("span",null,s.label)):i==="tab"?d("span",{className:"px-3 py-1"},s.label):s.icon?d(oe,{icon:s.icon,className:Gn("h-5 w-5",c.className),primaryColor:c.primaryColor,secondaryColor:c.secondaryColor}):d("span",null,s.label)))}function Dy(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.className,r=i===void 0?"":i;if(!o)return null;var a=t.position.slot==="secondary",s=(function(l){switch(l){case"top":return"border-b border-border-default bg-bg-surface px-4 py-2";case"bottom":return"border-t border-border-default bg-bg-surface px-4 py-2";case"left":return"border-r border-border-default bg-bg-surface px-2 py-3 flex-col";case"right":return"border-l border-border-default bg-bg-surface px-2 py-3 flex-col"}})(t.position.placement);return d("div",O({className:Gn("flex items-center gap-2",s,a?"bg-bg-surface-alt":"",r)},Re(t)),t.items.map(function(l){return d(bm,{key:l.id,item:l,documentId:n})}))}function bm(e){var t=e.item,n=e.documentId;switch(t.type){case"command-button":return d(Ay,{item:t,documentId:n});case"tab-group":return d(zy,{item:t,documentId:n});case"divider":return d(Ey,{item:t});case"spacer":return d(Ry,{item:t});case"group":return d(_y,{item:t,documentId:n});case"custom":return d(Ny,{item:t,documentId:n});default:return console.warn("Unknown toolbar item type:",t),null}}function Ay(e){var t=e.item,n=e.documentId;return d("div",O({},Re(t)),d(Xt,{commandId:t.commandId,documentId:n,itemId:t.id,variant:t.variant}))}function zy(e){var t=e.item,n=e.documentId;return d("div",O(O({className:"flex items-center gap-2"},Re(t)),{},{role:"tablist"}),t.tabs.map(function(o){return d(Ty,{key:o.id,tab:o,documentId:n})}))}function Ty(e){var t=e.tab,n=e.documentId,o=It(t.commandId,n),i=Xc(n,t.id);return!o||!o.visible?null:d("div",O({},Re(t)),d(Bi,{anchorRef:i,active:o.active,onClick:function(){o.disabled||o.execute()},disabled:o.disabled},t.variant==="text"&&o.label,t.variant==="icon"&&o.icon&&d(Ws,{icon:o.icon,iconProps:o.iconProps}),t.variant==="icon-text"&&d(te,null,o.icon&&d(Ws,{icon:o.icon,iconProps:o.iconProps}),o.label)))}function Ws(e){var t=e.icon,n=e.iconProps;return d(oe,{icon:t,className:"h-5 w-5",primaryColor:n?.primaryColor,secondaryColor:n?.secondaryColor})}function Ey(e){var t=e.item;return d("div",O({},Re(t)),d("div",{className:t.orientation==="vertical"?"bg-border-default h-6 w-px":"bg-border-default h-px w-6","aria-hidden":"true"}))}function Ry(e){var t=e.item;return d("div",O(O({className:t.flex?"flex-1":"w-4"},Re(t)),{},{"aria-hidden":"true"}))}function _y(e){var t=e.item,n=e.documentId,o=t.gap?"gap-".concat(t.gap):"gap-2",i=(function(r){switch(r){case"start":default:return"justify-start";case"center":return"justify-center";case"end":return"justify-end"}})(t.alignment);return d("div",O({className:Gn("flex items-center",o,i)},Re(t)),t.items.map(function(r){return d(bm,{key:r.id,item:r,documentId:n})}))}function Ny(e){var t=e.item,n=e.documentId,o=Ko().renderCustomComponent;return d("div",O({},Re(t)),o(t.componentId,n,t.props))}function qs(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function Gs(e,t){this.props=e,this.context=t}(Gs.prototype=new ht).isPureReactComponent=!0,Gs.prototype.shouldComponentUpdate=function(e,t){return qs(this.props,e)||qs(this.state,t)};var Vs=ie.__b;ie.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Vs&&Vs(e)};var Oy=ie.__e;ie.__e=function(e,t,n,o){if(e.then){for(var i,r=t;r=r.__;)if((i=r.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}Oy(e,t,n,o)};var Ks=ie.unmount;function wm(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=(function(o,i){for(var r in i)o[r]=i[r];return o})({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return wm(o,t,n)})),e}function xm(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return xm(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function xi(){this.__u=0,this.o=null,this.__b=null}function Cm(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function uo(){this.i=null,this.l=null}ie.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Ks&&Ks(e)},(xi.prototype=new ht).__c=function(e,t){var n=t.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var i=Cm(o.__v),r=!1,a=function(){r||(r=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(!--o.__u){if(o.state.__a){var l=o.state.__a;o.__v.__k[0]=xm(l,l.__c.__P,l.__c.__O)}var c;for(o.setState({__a:o.__b=null});c=o.o.pop();)c.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(a,a)},xi.prototype.componentWillUnmount=function(){this.o=[]},xi.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=wm(this.__b,n,o.__O=o.__P)}this.__b=null}var i=t.__a&&d(te,null,e.fallback);return i&&(i.__u&=-33),[d(te,null,t.__a?null:e.children),i]};var Zs=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function Ly(e){return this.getChildContext=function(){return e.context},e.children}function $y(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){zi(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var o=t.__v;o!==null&&!o.__m&&o.__!==null;)o=o.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:o.__m},contains:function(){return!0},insertBefore:function(i,r){this.childNodes.push(i),t.h.insertBefore(i,r)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),t.h.removeChild(i)}}}zi(d(Ly,{context:t.context},e.__v),t.v)}function Im(e,t){var n=d($y,{__v:e,h:t});return n.containerInfo=t,n}(uo.prototype=new ht).__a=function(e){var t=this,n=Cm(t.__v),o=t.l.get(e);return o[0]++,function(i){var r=function(){t.props.revealOrder?(o.push(i),Zs(t,e,o)):i()};n?n(r):r()}},uo.prototype.render=function(e){this.i=null,this.l=new Map;var t=bo(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},uo.prototype.componentDidUpdate=uo.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Zs(e,n,t)})};var Fy=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,jy=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Uy=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Hy=/[A-Z0-9]/g,By=typeof document<"u",Wy=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};ht.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ht.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ys=ie.event;function qy(){}function Gy(){return this.cancelBubble}function Vy(){return this.defaultPrevented}ie.event=function(e){return Ys&&(e=Ys(e)),e.persist=qy,e.isPropagationStopped=Gy,e.isDefaultPrevented=Vy,e.nativeEvent=e};var Ky={enumerable:!1,configurable:!0,get:function(){return this.class}},Xs=ie.vnode;ie.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,o=t.type,i={},r=o.indexOf("-")===-1;for(var a in n){var s=n[a];if(!(a==="value"&&"defaultValue"in n&&s==null||By&&a==="children"&&o==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&s===!0?s="":l==="translate"&&s==="no"?s=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||o!=="input"&&o!=="textarea"||Wy(n.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":Uy.test(a)&&(a=l):l=a="oninput":r&&jy.test(a)?a=a.replace(Hy,"-$&").toLowerCase():s===null&&(s=void 0),l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=s}}o=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=bo(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),o=="select"&&i.defaultValue!=null&&(i.value=bo(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",Ky)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i})(e),e.$$typeof=Fy,Xs&&Xs(e)};var Qs=ie.__r;ie.__r=function(e){Qs&&Qs(e),e.__c};var Js=ie.diffed;ie.diffed=function(e){Js&&Js(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function Zy(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.onClose,r=Kc().getContainer,a=R(function(){var y=r();return!!y&&y.clientWidth<768}),s=U(a,2),l=s[0],c=s[1];L(function(){var y=r();if(y){var b=new ResizeObserver(function(){var w=y.clientWidth;c(w<768)});return b.observe(y),function(){return b.disconnect()}}},[r]);var u=t.position,h=t.content,m=t.width,g=Ko().renderCustomComponent,p=r();if(l&&p)return Im(d(Yy,{schema:t,documentId:n,isOpen:o,onClose:i,renderCustomComponent:g,content:h,rootElement:p}),p);if(!o)return null;var v=(function(y){switch(y){case"left":return"border-r";case"right":return"border-l";case"top":return"border-b";case"bottom":return"border-t"}})(u.placement),f=m?{width:m}:void 0;return d("div",{className:"".concat(v," border-border-default bg-bg-surface flex flex-col shadow-lg"),style:f,"data-sidebar-id":t.id},d("div",{className:"min-h-0 flex-1"},h.type==="tabs"&&d(km,{content:h,documentId:n,renderCustomComponent:g}),h.type==="component"&&d(te,null,g(h.componentId,n,{}))))}function Yy(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.onClose,r=e.renderCustomComponent,a=e.content,s=e.rootElement,l=U(R("closed"),2),c=l[0],u=l[1],h=U(R(!1),2),m=h[0],g=h[1],p=U(R(0),2),v=p[0],f=p[1],y=U(R(!1),2),b=y[0],w=y[1],x=V(null),C=V({y:0,height:0,time:0,state:"half"}),S=V({y:0,time:0});L(function(){if(!o){u("closed");var F=setTimeout(function(){w(!1)},300);return function(){return clearTimeout(F)}}w(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){u("half")})})},[o]);var M=function(F){switch(F){case"closed":return 0;case"half":return 50;case"full":return 100}},A=Y(function(F){if(x.current){var B,ge=s.clientHeight,ue=x.current.offsetHeight/ge*100;B=ue>=75?"full":ue<=25?"closed":"half",C.current={y:F,height:ue,time:Date.now(),state:B},S.current={y:F,time:Date.now()},f(0),B!==c&&u(B),g(!0)}},[s,c]),I=Y(function(F){if(m){var B=s.clientHeight,ge=(C.current.y-F)/B*100,ue=Math.max(0,Math.min(100,C.current.height+ge));S.current={y:F,time:Date.now()};var be=M(C.current.state);f(ue-be)}},[m,s]),P=Y(function(){if(m){if(Math.abs(C.current.y-S.current.y)<5)return g(!1),void f(0);var F=M(C.current.state)+v,B=Date.now()-S.current.time,ge=S.current.y-C.current.y,ue=(function(be,ke){return Math.abs(ke)>.5?ke>0?be>50?"half":"closed":be<50?"half":"full":be>=75?"full":be<=25?"closed":"half"})(F,B>0?ge/B:0);ue==="closed"?(u("closed"),g(!1),f(0),i()):(g(!1),f(0),u(ue))}},[m,v,i]),z=Y(function(F){A(F.touches[0].clientY)},[A]),D=Y(function(F){m&&(F.cancelable&&F.preventDefault(),I(F.touches[0].clientY))},[m,I]),T=Y(function(){P()},[P]),_=Y(function(F){F.preventDefault(),A(F.clientY)},[A]);if(L(function(){if(m){var F=function(ge){I(ge.clientY)},B=function(){P()};return document.addEventListener("mousemove",F),document.addEventListener("mouseup",B),function(){document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",B)}}},[m,I,P]),!b)return null;var H=M(m?C.current.state:c),$=m?Math.max(0,Math.min(100,H+v)):H,j=.3*Math.min($/50,1);return d(te,null,d("div",{className:"bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ".concat($===0?"pointer-events-none":""),style:{opacity:j},onClick:i}),d("div",{ref:x,className:"bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ".concat(m?"":"transition-[height] duration-300 ease-out"),style:{height:"".concat($,"%")},"data-sidebar-id":t.id},d("div",{className:"flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing",onTouchStart:z,onTouchMove:D,onTouchEnd:T,onMouseDown:_},d("div",{className:"bg-border-default h-1.5 w-12 rounded-full"})),d("div",{className:"min-h-0 flex-1 overflow-hidden"},a.type==="tabs"&&d(km,{content:a,documentId:n,renderCustomComponent:r}),a.type==="component"&&d(te,null,r(a.componentId,n,{})))))}function km(e){var t,n=e.content,o=e.documentId,i=e.renderCustomComponent,r=U(R(((t=n.tabs[0])===null||t===void 0?void 0:t.id)||""),2),a=r[0],s=r[1];return d("div",{className:"flex h-full flex-1 flex-col"},d("div",{role:"tablist",className:"bg-bg-surface mx-4 my-4 flex flex-shrink-0 overflow-hidden"},n.tabs.map(function(l,c,u){var h=a===l.id,m=c===0,g=c===u.length-1;return d("button",{key:l.id,role:"tab","aria-selected":h,tabIndex:h?0:-1,onClick:function(){return s(l.id)},className:"relative flex h-7 flex-1 cursor-pointer items-center justify-center border outline-none transition-colors ".concat(m?"rounded-l-md":""," ").concat(g?"rounded-r-md":""," ").concat(g?"":"border-r-0"," ").concat(h?"border-accent bg-accent text-fg-on-accent":"border-border-default text-fg-secondary hover:bg-interactive-hover")},l.icon&&d(oe,{icon:l.icon,className:"h-5 w-5"}))})),d("div",{className:"min-h-0 flex-1 overflow-auto"},n.tabs.filter(function(l){return l.id===a}).map(function(l){return d(te,{key:l.id},i(l.componentId,o,{}))})))}function Xy(e){var t=e.schema,n=e.documentId,o=e.anchorEl,i=e.onClose,r=Kc().getContainer,a=(function(v){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:768,y=U(R(function(){var x=v();return!!x&&x.clientWidth<f}),2),b=y[0],w=y[1];return L(function(){var x=v();if(x){var C=new ResizeObserver(function(){w(x.clientWidth<f)});return C.observe(x),function(){return C.disconnect()}}},[v,f]),b})(r,768),s=r(),l=(()=>{const{provides:v}=sn();return v?.getSchema()??null})(),c=U(R([{menuId:t.id,schema:t,title:void 0}]),2),u=c[0],h=c[1];L(function(){h([{menuId:t.id,schema:t,title:void 0}])},[t]);var m=u[u.length-1],g=Y(function(v,f){if(l){var y=l.menus[v];y?h(function(b){return[].concat(Lo(b),[{menuId:v,schema:y,title:f}])}):console.warn("Submenu schema not found: ".concat(v))}},[l]),p=Y(function(){u.length>1&&h(function(v){return v.slice(0,-1)})},[u.length]);return m?a&&s?Im(d(Qy,{currentMenu:m,menuStack:u,documentId:n,onClose:i,onNavigateBack:p,onNavigateToSubmenu:g,container:s}),s):d(Jy,{currentMenu:m,documentId:n,anchorEl:o,onClose:i,onNavigateToSubmenu:g}):null}function Qy(e){var t=e.currentMenu,n=e.menuStack,o=e.documentId,i=e.onClose,r=e.onNavigateBack,a=e.onNavigateToSubmenu,s=e.container,l=U(R(!1),2),c=l[0],u=l[1],h=U(R(!1),2),m=h[0],g=h[1],p=U(R(0),2),v=p[0],f=p[1],y=V(null),b=V(null),w=V({isDragging:!1,startY:0,currentY:0,startTime:0,sheetHeight:0});L(function(){u(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){g(!0)})})},[]);var x=U(R(null),2),C=x[0],S=x[1];L(function(){if(b.current){var $=(n.length>1?60:0)+b.current.scrollHeight+24,j=.8*s.clientHeight;S(Math.min($,j))}},[t,n.length,s]);var M=Y(function(){g(!1),setTimeout(function(){u(!1),i()},300)},[i]),A=Y(function($){y.current&&(w.current={isDragging:!0,startY:$,currentY:$,startTime:Date.now(),sheetHeight:y.current.offsetHeight})},[]),I=Y(function($){if(w.current.isDragging){var j=$-w.current.startY,F=Math.max(0,j);w.current.currentY=$,f(F)}},[]),P=Y(function(){if(w.current.isDragging){var $=w.current,j=$.startY,F=$.currentY,B=$.startTime,ge=$.sheetHeight,ue=Math.abs(j-F);if(w.current.isDragging=!1,ue<5)f(0);else{var be=F-j,ke=be/ge*100,$e=Date.now()-B;ke>30||($e>0?be/$e:0)>.5?M():f(0)}}},[M]),z=Y(function($){A($.touches[0].clientY)},[A]),D=Y(function($){w.current.isDragging&&$.cancelable&&$.preventDefault(),I($.touches[0].clientY)},[I]),T=Y(function(){P()},[P]),_=Y(function($){$.preventDefault(),A($.clientY)},[A]);if(L(function(){if(w.current.isDragging){var $=function(F){return I(F.clientY)},j=function(){return P()};return document.addEventListener("mousemove",$),document.addEventListener("mouseup",j),function(){document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",j)}}},[I,P]),L(function(){var $=function(j){j.key==="Escape"&&M()};return document.addEventListener("keydown",$),function(){return document.removeEventListener("keydown",$)}},[M]),!c)return null;var H=m?v:C||400;return d(te,null,d("div",{className:"bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ".concat(m?"opacity-100":"opacity-0"),onClick:M}),d("div",O({ref:y,className:"bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ".concat(w.current.isDragging?"":"transition-transform duration-300 ease-out"),style:{maxHeight:"80%",transform:"translateY(".concat(H,"px)")}},Re(t.schema)),d("div",{className:"flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing",onTouchStart:z,onTouchMove:D,onTouchEnd:T,onMouseDown:_},d("div",{className:"bg-border-default h-1.5 w-12 rounded-full"})),n.length>1&&d("div",{className:"border-border-subtle flex items-center gap-3 border-b px-4 pb-3"},d("button",{onClick:r,className:"hover:bg-interactive-hover rounded-full p-1"},d(Lr,{className:"h-5 w-5"})),d("h3",{className:"text-fg-primary font-semibold"},t.title||"Menu")),d("div",{ref:b,className:"flex-1 overflow-y-auto py-2"},t.schema.items.map(function($){return d(Br,{key:$.id,item:$,documentId:o,onClose:M,isMobile:!0,onNavigateToSubmenu:a})}))))}function Jy(e){var t=e.currentMenu,n=e.documentId,o=e.anchorEl,i=e.onClose,r=e.onNavigateToSubmenu,a=V(null),s=U(R(null),2),l=s[0],c=s[1];L(function(){if(o){var h=function(){var m,g=o.getBoundingClientRect(),p=((m=a.current)===null||m===void 0?void 0:m.offsetWidth)||200,v=g.bottom+4,f=g.left;f+p>window.innerWidth&&(f=window.innerWidth-p-8),f<8&&(f=8),c({top:v,left:f})};return h(),window.addEventListener("scroll",h),window.addEventListener("resize",h),function(){window.removeEventListener("scroll",h),window.removeEventListener("resize",h)}}},[o]),L(function(){var h=function(g){if(a.current){var p=g.composedPath(),v=p.includes(a.current),f=o&&p.includes(o);v||f||i()}},m=setTimeout(function(){document.addEventListener("mousedown",h)},0);return function(){clearTimeout(m),document.removeEventListener("mousedown",h)}},[i,o]),L(function(){var h=function(m){m.key==="Escape"&&i()};return document.addEventListener("keydown",h),function(){return document.removeEventListener("keydown",h)}},[i]);var u=l?{position:"fixed",top:"".concat(l.top,"px"),left:"".concat(l.left,"px"),zIndex:1e3}:{display:"none"};return d("div",O(O({ref:a},Re(t.schema)),{},{className:"border-border-default bg-bg-elevated min-w-[200px] rounded-lg border py-2 shadow-lg",style:u}),t.schema.items.map(function(h){return d(Br,{key:h.id,item:h,documentId:n,onClose:i,isMobile:!1,onNavigateToSubmenu:r})}))}function Br(e){var t=e.item,n=e.documentId,o=e.onClose,i=e.isMobile,r=e.onNavigateToSubmenu;switch(t.type){case"command":return d(eb,{item:t,documentId:n,onClose:o,isMobile:i});case"submenu":return d(tb,{item:t,documentId:n,isMobile:i,onNavigateToSubmenu:r});case"divider":return d("div",O({},Re(t)),d("hr",{className:"border-border-subtle my-2"}));case"section":return d(nb,{item:t,documentId:n,onClose:o,isMobile:i,onNavigateToSubmenu:r});default:return null}}function eb(e){var t,n,o=e.item,i=e.documentId,r=e.onClose,a=e.isMobile,s=It(o.commandId,i);if(!s||!s.visible)return null;var l,c,u=function(){s.disabled||(s.execute(),r())};return a?d("button",O(O({},Re(o)),{},{onClick:u,disabled:s.disabled,className:"active:bg-interactive-active flex w-full items-center gap-3 px-4 py-3 text-left text-base transition-colors ".concat(s.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"," ").concat(s.active?"bg-interactive-selected text-accent":"text-fg-secondary"),role:"menuitem"}),s.icon&&d(oe,{icon:s.icon,className:"h-5 w-5",primaryColor:(l=s.iconProps)===null||l===void 0?void 0:l.primaryColor,secondaryColor:(c=s.iconProps)===null||c===void 0?void 0:c.secondaryColor}),d("span",{className:"flex-1"},s.label)):d("button",O(O({},Re(o)),{},{onClick:u,disabled:s.disabled,className:"flex w-full items-center justify-between gap-2 px-4 py-1 text-left ".concat(s.disabled?"pointer-events-none cursor-not-allowed opacity-50":"cursor-pointer"," ").concat(s.active&&!s.disabled?"bg-accent text-fg-on-accent":"text-fg-muted hover:bg-accent hover:text-fg-on-accent"),role:"menuitem"}),d("div",{className:"flex items-center gap-2"},d("div",{className:"flex h-6 w-6 items-center justify-center"},s.icon&&d(oe,{icon:s.icon,className:"h-6 w-6",primaryColor:(t=s.iconProps)===null||t===void 0?void 0:t.primaryColor,secondaryColor:(n=s.iconProps)===null||n===void 0?void 0:n.secondaryColor})),d("span",{className:"text-sm"},s.label)))}function tb(e){var t=e.item,n=e.documentId,o=e.isMobile,i=e.onNavigateToSubmenu,r=Me(n).translate,a=t.labelKey?r(t.labelKey):t.label||"",s=function(){return i(t.menuId,a)};return o?d("button",O(O({},Re(t)),{},{onClick:s,className:"text-fg-secondary active:bg-interactive-active flex w-full cursor-pointer items-center gap-3 px-4 py-3 text-left text-base transition-colors",role:"menuitem"}),d("span",{className:"flex-1"},a),d(jn,{className:"h-4 w-4"})):d("button",O(O({},Re(t)),{},{onClick:s,className:"text-fg-muted hover:bg-accent hover:text-fg-on-accent flex w-full cursor-pointer items-center justify-between gap-2 px-4 py-1 text-left",role:"menuitem"}),d("span",{className:"text-sm"},a),d(jn,{className:"h-6 w-6"}))}function nb(e){var t=e.item,n=e.documentId,o=e.onClose,i=e.isMobile,r=e.onNavigateToSubmenu,a=Me(n).translate,s=t.labelKey?a(t.labelKey):t.label||"";return d("div",O({},Re(t)),d("div",{className:"text-fg-secondary px-4 py-3 text-xs font-medium uppercase"},s),t.items.map(function(l){return d(Br,{key:l.id,item:l,documentId:n,onClose:o,isMobile:i,onNavigateToSubmenu:r})}))}function ob(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.onClose,r=e.onExited,a=t.content,s=Ko().renderCustomComponent;return a.type!=="component"?(console.warn("SchemaModal only supports component content type, got: ".concat(a.type)),null):d(te,null,s(a.componentId,n,{isOpen:o,onClose:i,onExited:r}))}function ib(e){var t=e.documentId;e.onClose;var n=dc(t),o=n.state,i=n.provides;return d("div",{className:"flex h-full flex-1 flex-col"},d("div",{className:"flex-1 overflow-hidden"},d(af,{documentId:t,style:{width:"100%",height:"100%"}},function(r){return d("div",{key:r.pageIndex,style:{position:"absolute",width:"100%",height:r.wrapperHeight,top:r.top,display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},onClick:function(){var a;i==null||(a=i.scrollToPage)===null||a===void 0||a.call(i,{pageNumber:r.pageIndex+1})}},d("div",{style:{width:r.width,height:r.height,border:"2px solid ".concat(o.currentPage===r.pageIndex+1?"var(--ep-accent-primary)":"var(--ep-border-default)"),borderRadius:"4px",overflow:"hidden",boxShadow:o.currentPage===r.pageIndex+1?"0 0 0 2px var(--ep-interactive-focus-ring)":"none"}},d(sf,{documentId:t,meta:r,style:{width:"100%",height:"100%"}})),d("div",{style:{height:r.labelHeight,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"4px"}},d("span",{className:"text-fg-secondary text-xs"},r.pageIndex+1)))})))}function Wr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:300,n=U(R(e),2),o=n[0],i=n[1];return L(function(){var r=window.setTimeout(function(){return i(e)},t);return function(){return clearTimeout(r)}},[e,t]),o}var el=function(e){var t=e.label,n=e.checked,o=e.onChange;return d("label",{className:"text-fg-secondary inline-flex cursor-pointer select-none items-center gap-2 text-xs font-medium"},d("input",{type:"checkbox",checked:n,onChange:function(i){return o(i.target.checked)},className:"border-border-default bg-bg-input checked:border-accent checked:bg-accent peer h-4 w-4 shrink-0 appearance-none rounded-[3px] border transition-all"}),d("svg",{viewBox:"0 0 24 24",className:"/* fine-tune centering */ text-fg-on-accent pointer-events-none absolute h-3.5 w-3.5 translate-x-[1px] translate-y-[1px] opacity-0 peer-checked:opacity-100",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"},d("polyline",{points:"20 6 9 17 4 12"})),t)},rb=function(e){var t=e.hit,n=e.onClick,o=e.active,i=V(null);return L(function(){o&&i.current&&i.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[o]),d("button",{ref:i,onClick:n,className:"w-full rounded border p-2 text-left text-sm transition-colors ".concat(o?"border-accent bg-accent-light text-fg-primary":"border-border-subtle bg-bg-surface text-fg-secondary hover:bg-interactive-hover")},d("span",null,t.context.truncatedLeft&&" ",t.context.before,d("span",{className:"text-accent font-bold"},t.context.match),t.context.after,t.context.truncatedRight&&" "))};function ab(e){var t=e.documentId;e.onClose;var n=(v=>{const{provides:f}=Ed(),[y,b]=R(Mo),w=K(()=>f?.forDocument(v),[f,v]);return L(()=>{if(w)return b(w.getState()),w.onStateChange(x=>b(x));b(Mo)},[w]),{state:y,provides:w??null}})(t),o=n.state,i=n.provides,r=Cn().provides,a=Me(t).translate,s=V(null),l=U(R(""),2),c=l[0],u=l[1];L(function(){},[]),L(function(){o.query&&!c&&u(o.query)},[o.query]),L(function(){o.activeResultIndex!==void 0&&o.activeResultIndex>=0&&g(o.activeResultIndex)},[o.activeResultIndex]);var h=Wr(c,300);L(function(){h!==o.query&&i?.searchAllPages(h)},[h,i,o.query]);var m=function(v,f){f?i?.setFlags([].concat(Lo(o.flags),[v])):i?.setFlags(o.flags.filter(function(y){return y!==v}))},g=function(v){var f,y=o.results[v];if(y){var b=y.rects.reduce(function(w,x){return{x:Math.min(w.x,x.origin.x),y:Math.min(w.y,x.origin.y)}},{x:1/0,y:1/0});r==null||(f=r.forDocument(t))===null||f===void 0||f.scrollToPage({pageNumber:y.pageIndex+1,pageCoordinates:b,alignX:50,alignY:25})}},p=(function(v){var f={};return v.forEach(function(y,b){f[y.pageIndex]||(f[y.pageIndex]=[]),f[y.pageIndex].push({hit:y,index:b})}),f})(o.results);return d("div",{className:"bg-bg-surface flex h-full flex-col"},d("div",{className:"p-4"},d("div",{className:"relative"},d("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2"},d(lm,{className:"text-fg-muted h-4 w-4"})),d("input",{ref:s,type:"text",placeholder:a("search.placeholder"),value:c,onInput:function(v){var f=v.target;u(f.value)},className:"border-border-default bg-bg-input focus:border-accent focus:ring-accent w-full rounded-md border py-1 pl-8 pr-9 text-base focus:outline-none focus:ring-1"}),c&&d("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3",onClick:function(){u(""),s.current&&s.current.focus()}},d(cm,{className:"text-fg-muted hover:text-fg-secondary h-4 w-4"}))),d("div",{className:"mt-3 flex flex-col gap-2"},d(el,{label:a("search.caseSensitive"),checked:o.flags.includes(En.MatchCase),onChange:function(v){return m(En.MatchCase,v)}}),d(el,{label:a("search.wholeWord"),checked:o.flags.includes(En.MatchWholeWord),onChange:function(v){return m(En.MatchWholeWord,v)}})),d("hr",{className:"border-border-subtle mb-2 mt-5"}),o.active&&d("div",{className:"flex h-[32px] flex-row items-center justify-between"},d("div",{className:"text-fg-muted text-xs"},a("search.resultsFound",{params:{count:o.total}})),o.total>1&&d("div",{className:"flex flex-row"},d(Oe,{onClick:function(){i?.previousResult()}},d(Lr,{className:"h-4 w-4"})),d(Oe,{onClick:function(){i?.nextResult()}},d(jn,{className:"h-4 w-4"}))))),d("div",{className:"flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto px-4"},Object.entries(p).map(function(v){var f=U(v,2),y=f[0],b=f[1];return d("div",{key:y,className:"mt-2 first:mt-0"},d("div",{className:"bg-bg-surface/80 text-fg-muted py-2 text-xs backdrop-blur"},a("search.page",{params:{page:Number(y)+1}})),d("div",{className:"flex flex-col gap-2"},b.map(function(w){var x=w.hit,C=w.index;return d(rb,{key:C,hit:x,active:C===o.activeResultIndex,onClick:function(){i?.goToResult(C)}})})))}),d("div",null)))}function sb(e){var t=e.documentId,n=Te(_r.id).provides,o=Cn().provides,i=Me(t).translate,r=je(t),a=U(R([]),2),s=a[0],l=a[1],c=U(R(new Set),2),u=c[0],h=c[1],m=U(R(!0),2),g=m[0],p=m[1];L(function(){if(n&&r!=null&&r.document){p(!0);var f=n.getBookmarks();return f.wait(function(y){var b=y.bookmarks;l(b);var w=b.map(function(x,C){return"bookmark-".concat(C)});h(new Set(w)),p(!1)},function(){p(!1)}),function(){f.abort({code:J.Cancelled,message:"Bookmark task cancelled"})}}},[n,r?.document]);var v=function(f,y){var b,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x="bookmark-".concat(y),C=f.children&&f.children.length>0,S=u.has(x);return d("div",{key:x,className:"select-none"},d("div",{className:"hover:bg-interactive-hover flex cursor-pointer items-center gap-1 px-2 py-1",style:{paddingLeft:"".concat(16*w+8,"px")},onClick:function(){return(function(M){if(o&&M.target){var A;if(M.target.type==="action"){var I=M.target.action;if(I.type===Zt.Goto||I.type===Zt.RemoteGoto)A=I.destination;else if(I.type===Zt.URI)return void window.open(I.uri,"_blank")}else M.target.type==="destination"&&(A=M.target.destination);if(A)if(A.zoom.mode===cr.XYZ){var P,z=r==null||(P=r.document)===null||P===void 0?void 0:P.pages.find(function(D){return D.index===A.pageIndex});if(!z)return;o.scrollToPage({pageNumber:A.pageIndex+1,pageCoordinates:A.zoom.params?{x:A.zoom.params.x,y:z.size.height-A.zoom.params.y}:void 0,behavior:"smooth"})}else o.scrollToPage({pageNumber:A.pageIndex+1,behavior:"smooth"})}})(f)}},C&&d("button",{onClick:function(M){M.stopPropagation(),(function(A){h(function(I){var P=new Set(I);return P.has(A)?P.delete(A):P.add(A),P})})(x)},className:"flex h-4 w-4 items-center justify-center"},d(S?sm:jn,{className:"h-3 w-3"})),!C&&d("div",{className:"w-4"}),d("span",{className:"text-fg-secondary text-sm"},f.title)),C&&S&&d("div",null,(b=f.children)===null||b===void 0?void 0:b.map(function(M,A){return v(M,A,w+1)})))};return r==null||!r.document||g?d("div",{className:"text-fg-secondary flex h-full flex-col gap-3 p-4 text-sm"},d("div",{className:"text-fg-primary font-medium"},i("outline.title")),d("p",null,i("outline.loading"))):s.length===0?d("div",{className:"flex h-full items-center justify-center p-6"},d("div",{className:"text-fg-muted text-center"},d("div",{className:"text-sm"},i("outline.noOutline")),d("div",{className:"mt-1 text-xs"},i("outline.noBookmarks")))):d("div",{className:"bg-bg-surface flex h-full flex-col"},d("div",{className:"flex-1 overflow-y-auto"},d("div",{className:"outline-tree"},s.map(function(f,y){return v(f,y)}))))}function Yi(e){var t=e.size,n=t===void 0?"md":t,o=e.text,i=e.className,r={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"};return d("div",{className:"flex flex-col items-center justify-center gap-3 ".concat(i===void 0?"":i)},d("div",{className:"relative"},d("div",{className:"".concat(r[n]," border-border-default animate-spin rounded-full border-4")}),d("div",{className:"".concat(r[n]," border-r-accent border-t-accent absolute left-0 top-0 animate-spin rounded-full border-4 border-transparent")})),o&&d("p",{className:"".concat({sm:"text-sm",md:"text-base",lg:"text-lg"}[n]," text-fg-secondary animate-pulse font-medium")},o))}function vn(e){var t=e.size,n=t===void 0?"md":t,o=e.className,i=o===void 0?"":o;return d("div",{className:"".concat({sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-8 h-8 border-3"}[n]," border-border-default border-t-accent animate-spin rounded-full ").concat(i)})}var tl,lb=function(e){var t=e.documentId,n=Fn().provides,o=U(R({show:!1,mode:null,isAnimating:!1}),2),i=o[0],r=o[1],a=Me(t).translate;if(L(function(){if(n)return n.onModeChange(function(c){var u=c.activeMode;if(u==="marqueeZoom"||u==="marqueeCapture"){r({show:!0,mode:u,isAnimating:!0});var h=setTimeout(function(){r(function(m){return O(O({},m),{},{show:!1})})},3e3);return function(){return clearTimeout(h)}}r({show:!1,mode:null,isAnimating:!1})})},[n]),!i.show&&!i.isAnimating)return null;var s=i.mode==="marqueeZoom"?a("zoom.dragTip"):a("capture.dragTip"),l=i.mode==="marqueeZoom"?"rgba(33,150,243,0.8)":"rgba(76,175,80,0.8)";return d("div",{className:"hint-overlay ".concat(i.show?"hint-show":"hint-hide"),onAnimationEnd:function(){i.show||r(function(c){return O(O({},c),{},{isAnimating:!1,mode:null})})},style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"20px"}},d("div",{className:"hint-text",style:{background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",textAlign:"center",maxWidth:"250px"}},s),d("div",{className:"drag-demo",style:{position:"relative",width:"150px",height:"100px"}},d("div",{style:{position:"absolute",top:"20px",left:"20px",width:"110px",height:"60px",border:"2px dashed ".concat(l),borderRadius:"4px",opacity:.6}}),d("div",{className:"animated-rect",style:{position:"absolute",top:"20px",left:"20px",border:"2px solid ".concat(l),backgroundColor:"".concat(l.replace("0.8","0.15")),borderRadius:"4px"}}),d("div",{className:"cursor-demo",style:{position:"absolute",width:"20px",height:"20px"}},d("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d("path",{d:"M3.5 2.5L16.5 10L10 11.5L7.5 16.5L3.5 2.5Z",fill:"rgba(0,0,0,0.3)",transform:"translate(1,1)"}),d("path",{d:"M3 2L16 10L10 11.5L7.5 16L3 2Z",fill:"white",stroke:"black",strokeWidth:"1"}),d("path",{d:"M4 3.5L13.5 9.5L9.5 10.5L7.5 14L4 3.5Z",fill:"rgba(255,255,255,0.8)"})))),d("style",{jsx:!0},`
        .hint-overlay {
          animation-duration: 0.3s;
          animation-fill-mode: both;
        }

        .hint-show {
          animation-name: hintFadeIn;
        }

        .hint-hide {
          animation-name: hintFadeOut;
        }

        @keyframes hintFadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes hintFadeOut {
          from {
            opacity: 1;
            transform: translateY(0);
          }
          to {
            opacity: 0;
            transform: translateY(-10px);
          }
        }

        .animated-rect {
          animation: rectGrow 2s ease-in-out infinite;
        }

        @keyframes rectGrow {
          0% {
            width: 0;
            height: 0;
          }
          50% {
            width: 110px;
            height: 60px;
          }
          100% {
            width: 110px;
            height: 60px;
            opacity: 0.7;
          }
        }

        .cursor-demo {
          animation: cursorMove 2s ease-in-out infinite;
        }

        @keyframes cursorMove {
          0% {
            top: 20px;
            left: 20px;
          }
          50% {
            top: 50px;
            left: 80px;
          }
          100% {
            top: 80px;
            left: 130px;
          }
        }

        .hint-text {
          animation: textPulse 0.6s ease-in-out;
        }

        @keyframes textPulse {
          0% {
            transform: scale(0.9);
          }
          50% {
            transform: scale(1.05);
          }
          100% {
            transform: scale(1);
          }
        }
      `))},cb=function(e){var t=e.placeholder,n=e.onSubmit,o=e.inputRef,i=e.isFocused,r=U(R(""),2),a=r[0],s=r[1];return d("form",{className:"border-border-subtle mt-4 flex items-end space-x-2 border-t pt-4",onClick:function(l){return l.stopPropagation()},onSubmit:function(l){l?.preventDefault(),a.trim()&&(n(a),s(""))}},d("input",{ref:o,type:"text",placeholder:t,value:a,onInput:function(l){return s(l.currentTarget.value)},className:"bg-bg-input text-fg-primary placeholder-fg-muted w-full rounded-lg border px-3 py-1 text-base transition-colors focus:border-transparent focus:outline-none focus:ring-2 ".concat(i?"border-accent focus:ring-accent":"border-border-default focus:ring-accent")}),d("button",{type:"submit",disabled:!a.trim(),className:"bg-accent text-fg-on-accent hover:bg-accent-hover disabled:bg-interactive-disabled rounded-lg p-2 transition-colors disabled:cursor-not-allowed"},d("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},d("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"}))))},Ci=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],db=function(e){if(!e)return Ci[0];var t=e.length>0?e.charCodeAt(0)%Ci.length:0;return Ci[t]},nl=function(e){var t=e.name,n=e.className,o=n===void 0?"":n;return d("div",{className:"flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium text-white ".concat(db(t)," ").concat(o)},(function(i){return i?i.split(" ").map(function(r){return r[0]}).join("").toUpperCase().slice(0,2):"G"})(t))},Sm=function(e){var t,n,o=e.onEdit,i=e.onDelete,r=e.onClose,a=e.documentId,s=V(null),l=Me(a).translate;return L(function(){var c=function(u){t.current&&!t.current.contains(u.target)&&n()};return document.addEventListener("click",c),function(){document.removeEventListener("click",c)}},[t=s,n=r]),d("div",{ref:s,className:"bg-bg-elevated ring-border-default absolute right-0 top-6 z-10 w-32 rounded-md shadow-lg ring-1"},d("div",{className:"py-1"},d("button",{onClick:function(c){c.preventDefault(),c.stopPropagation(),o(),r()},className:"text-fg-secondary hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm"},l("comments.edit")),d("button",{onClick:function(c){c.preventDefault(),c.stopPropagation(),i(),r()},className:"text-state-error hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm"},l("comments.delete"))))},Pm=function(e){var t=e.initialText,n=e.onSave,o=e.onCancel,i=e.autoFocus,r=i!==void 0&&i,a=e.documentId,s=U(R(t),2),l=s[0],c=s[1],u=V(null),h=Me(a).translate;return L(function(){r&&u.current&&(u.current.focus(),u.current.setSelectionRange(l.length,l.length))},[r,l.length]),d("div",{className:"flex-1 space-y-2"},d("textarea",{ref:u,value:l,onInput:function(m){return c(m.currentTarget.value)},className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 text-base focus:outline-none focus:ring-1",rows:3}),d("div",{className:"flex flex-wrap gap-2"},d("button",{onClick:function(m){m.stopPropagation(),n(l)},className:"bg-accent text-fg-on-accent hover:bg-accent-hover whitespace-nowrap rounded-md px-3 py-1 text-sm"},h("comments.save")),d("button",{onClick:function(m){m.stopPropagation(),o()},className:"bg-interactive-hover text-fg-secondary hover:bg-border-default whitespace-nowrap rounded-md px-3 py-1 text-sm"},h("comments.cancel"))))},Mm=function(e){if(!e)return"(no date)";try{return(e instanceof Date?e:new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return typeof e=="string"?e:"(no date)"}},ub=function(e){var t=e.annotation,n=e.onSave,o=e.onDelete,i=e.isReply,r=i!==void 0&&i,a=e.documentId,s=e.isReadOnly,l=s!==void 0&&s,c=U(R(!1),2),u=c[0],h=c[1],m=U(R(!1),2),g=m[0],p=m[1],v=t.author||"Guest";return g?d("div",{className:"flex w-full items-start space-x-3",onClick:function(f){return f.stopPropagation()}},r&&d(nl,{name:v,className:"h-8 w-8"}),d(Pm,{initialText:t.contents||"",onSave:function(f){n(f),p(!1)},onCancel:function(){p(!1)},autoFocus:!0,documentId:a})):d("div",{className:"flex items-start space-x-3"},r&&d(nl,{name:v,className:"h-8 w-8"}),d("div",{className:"min-w-0 flex-1"},r&&d("div",{className:"flex items-center justify-between"},d("div",{className:"leading-none"},d("h5",{className:"text-fg-primary text-sm font-medium"},v),d("span",{className:"text-fg-muted text-xs"},Mm(t.modified||t.created))),!l&&d("div",{className:"relative"},d("button",{onClick:function(f){f.stopPropagation(),h(!0)},className:"text-fg-muted hover:bg-interactive-hover rounded-md p-1"},d("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},d("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"}))),u&&d(Sm,{onEdit:function(){return p(!0)},onDelete:o,onClose:function(){return h(!1)},documentId:a}))),d("p",{className:"text-fg-primary mt-2 text-sm"},t.contents)))},hb=(G(G(G(G(G(G(G(G(G(G(tl={},E.HIGHLIGHT,{label:"Highlight",labelKey:"annotation.highlight",icon:"highlight",iconProps:function(e){return{primaryColor:e.strokeColor||"#ffff00"}}}),E.CIRCLE,{label:"Circle",labelKey:"annotation.circle",icon:"circle",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000",secondaryColor:e.color}}}),E.SQUARE,{label:"Square",labelKey:"annotation.square",icon:"square",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000",secondaryColor:e.color}}}),E.LINE,{label:"Line",labelKey:"annotation.line",icon:"line",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),E.UNDERLINE,{label:"Underline",labelKey:"annotation.underline",icon:"underline",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),E.SQUIGGLY,{label:"Squiggly",labelKey:"annotation.squiggly",icon:"squiggly",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),E.STRIKEOUT,{label:"Strikethrough",labelKey:"annotation.strikeout",icon:"strikethrough",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),E.INK,{label:"Ink",labelKey:"annotation.ink",icon:"pencilMarker",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),E.FREETEXT,{label:"Text",labelKey:"annotation.freeText",icon:"text",iconProps:function(e){return{primaryColor:e.fontColor||"#000000"}}}),E.POLYGON,{label:"Polygon",labelKey:"annotation.polygon",icon:"polygon",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000",secondaryColor:e.color}}}),G(G(tl,E.POLYLINE,{label:"Polyline",labelKey:"annotation.polyline",icon:"zigzag",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),E.STAMP,{label:"Stamp",labelKey:"annotation.stamp",icon:"deviceFloppy",iconProps:function(){return{primaryColor:"#dc2626"}}})),mb=function(e){var t=e.text,n=e.maxWords,o=n===void 0?16:n,i=e.className,r=i===void 0?"":i,a=e.documentId,s=U(R(!1),2),l=s[0],c=s[1],u=Me(a).translate,h=t.split(" ");return h.length>o?d("div",{className:r},l?t:h.slice(0,o).join(" ")+"..."," ",d("button",{onClick:function(m){m.stopPropagation(),c(!l)},className:"text-accent hover:text-accent-hover text-sm font-medium focus:outline-none"},u(l?"comments.showLess":"comments.showMore"))):d("div",{className:r},t)},gb=function(e){var t=e.annotation,n=e.config,o=e.className,i=o===void 0?"":o,r=e.title,a=n.iconProps(t.object);return d("div",{className:"bg-bg-surface-alt flex items-center justify-center rounded-full ".concat(i),title:r},d(oe,O({icon:n.icon},a)))},pb=function(e){var t,n=e.entry,o=e.isSelected,i=e.onSelect,r=e.onUpdate,a=e.onDelete,s=e.onReply,l=e.documentId,c=e.isReadOnly,u=c!==void 0&&c,h=n.annotation,m=n.replies,g=U(R(!1),2),p=g[0],v=g[1],f=U(R(!1),2),y=f[0],b=f[1],w=Me(l).translate,x=(function(P){return Ou(P)?hb[P.object.type]:null})(h),C=!!h.object.contents,S=m.length>0,M=!C&&!S,A=V(null),I=h.object.author||"Guest";return L(function(){var P;o&&((P=A.current)===null||P===void 0||P.focus({preventScroll:!0}))},[o,n]),x?d("div",{onClick:i,className:"bg-bg-surface cursor-pointer rounded-lg border shadow-sm transition-all hover:shadow-md ".concat(o?"border-accent ring-interactive-focus-ring ring-2":"border-border-subtle")},d("div",{className:"p-4"},d("div",{className:"flex items-start space-x-3"},d(gb,{annotation:h,config:x,title:w(x.labelKey,{fallback:x.label}),className:"h-8 w-8"}),d("div",{className:"min-w-0 flex-1"},d("div",{className:"flex items-center justify-between"},d("div",{className:"leading-none"},d("h4",{className:"text-fg-primary text-sm font-medium"},I),d("span",{className:"text-fg-disabled text-xs"},Mm(h.object.modified||h.object.created))),!u&&d("div",{className:"relative"},d("button",{onClick:function(P){P.stopPropagation(),v(!0)},className:"text-fg-disabled hover:bg-interactive-hover hover:text-fg-secondary rounded-md p-1"},d("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},d("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"}))),p&&d(Sm,{onEdit:function(){return b(!0)},onDelete:function(){return a(h)},onClose:function(){return v(!1)},documentId:l}))),((t=h.object.custom)===null||t===void 0?void 0:t.text)&&d(mb,{text:h.object.custom.text,maxWords:14,className:"text-fg-muted mt-2 text-sm",documentId:l}),y?d("div",{className:"mt-2"},d(Pm,{initialText:h.object.contents||"",onSave:function(P){r(h.object.id,P),b(!1)},onCancel:function(){b(!1)},autoFocus:!0,documentId:l})):C?d("p",{className:"text-fg-primary mt-2 text-sm"},h.object.contents):null)),S&&d("div",{className:"border-border-subtle mt-4 space-y-4 border-t pt-4"},m.map(function(P){return d(ub,{key:P.object.id,annotation:P.object,onSave:function(z){return r(P.object.id,z)},onDelete:function(){return a(P)},isReply:!0,documentId:l,isReadOnly:u})})),!y&&!u&&d(cb,{inputRef:A,isFocused:o,placeholder:w(M?"comments.addComment":"comments.addReply"),onSubmit:function(P){M?r(h.object.id,P):s(h.object.id,P)}}))):null},fb=function(e){var t=e.documentId,n=Me(t).translate;return d("div",{class:"text-fg-muted flex flex-col items-center gap-2 p-4"},d(oe,{icon:"comment",className:"h-18 w-18 text-fg-muted"}),d("div",{className:"text-fg-muted max-w-[150px] text-center text-sm"},n("comments.emptyState")))},vb=function(e){var t=e.documentId,n=vt().provides,o=eh(t).state,i=Cn().provides,r=Me(t).translate,a=Bl(t).canModifyAnnotations,s=V({}),l=V(null),c=!a,u=o.selectedUid?Lu(o,o.selectedUid):null,h=(y=>{const b={};for(const x of Object.values(y.pages))for(const C of x){const S=y.byUid[C];if(S&&cf(S)){const M=S.object.inReplyToId;M&&(b[M]||(b[M]=[])).push(S)}}const w={};for(const[x,C]of Object.entries(y.pages)){const S=Number(x),M=[];for(const A of C){const I=y.byUid[A];I&&Ou(I)&&M.push({page:S,annotation:I,replies:b[I.object.id]??[]})}M.length>0&&(w[S]=M)}return w})(o);L(function(){if(u&&l.current){var y=s.current[u.object.id];if(y&&l.current){var b=l.current,w=b.getBoundingClientRect(),x=y.getBoundingClientRect(),C=x.top-w.top+b.scrollTop-b.clientHeight/2+x.height/2;b.scrollTo({top:C,behavior:"smooth"})}}},[u]);var m=function(y,b){var w=f(y);w&&n?.updateAnnotation(w.object.pageIndex,y,{contents:b,modified:new Date})},g=function(y){n?.deleteAnnotation(y.object.pageIndex,y.object.id)},p=function(y,b){var w=f(y);w&&n?.createAnnotation(w.object.pageIndex,{id:Pe(),rect:{origin:{x:w.object.rect.origin.x,y:w.object.rect.origin.y},size:{width:24,height:24}},pageIndex:w.object.pageIndex,created:new Date,modified:new Date,type:E.TEXT,contents:b,inReplyToId:w.object.id,flags:["noRotate","noZoom","print"],icon:dr.Comment})},v=Object.keys(h).map(Number).sort(function(y,b){return y-b}),f=function(y){var b,w=lt(v);try{for(w.s();!(b=w.n()).done;){var x,C=b.value,S=lt(h[C]);try{for(S.s();!(x=S.n()).done;){var M=x.value;if(M.annotation.object.id===y)return M.annotation;var A=M.replies.find(function(I){return I.object.id===y});if(A)return A}}catch(I){S.e(I)}finally{S.f()}}}catch(I){w.e(I)}finally{w.f()}};return v.length===0?d(fb,{documentId:t}):d("div",{ref:l,className:"h-full overflow-y-auto"},d("div",{className:"space-y-6 p-3"},v.map(function(y){return d("div",{key:y,className:"space-y-3"},d("div",{className:"bg-bg-surface sticky top-0 z-10 px-1"},d("div",{className:"border-border-subtle border-b py-2"},d("h3",{className:"text-md text-fg-primary font-semibold"},r("comments.page",{params:{page:y+1}})),d("p",{className:"text-fg-muted text-sm"},h[y].length===1?r("comments.commentCount",{params:{count:1}}):r("comments.commentCountPlural",{params:{count:h[y].length}})))),d("div",{className:"space-y-3 px-1"},h[y].map(function(b){return d("div",{key:b.annotation.object.id,ref:function(w){w&&(s.current[b.annotation.object.id]=w)}},d(pb,{entry:b,isSelected:u?.object.id===b.annotation.object.id,onSelect:function(){return w=b.annotation,n?.selectAnnotation(w.object.pageIndex,w.object.id),void(i==null||i.scrollToPage({pageNumber:w.object.pageIndex+1,pageCoordinates:{x:w.object.rect.origin.x,y:w.object.rect.origin.y},alignX:50,alignY:25,behavior:"smooth"}));var w},onUpdate:m,onDelete:g,onReply:p,documentId:t,isReadOnly:c}))})))})))};function yb(e){var t=e.documentId,n=(c=>{const{provides:u}=Pr(),[h,m]=R(md);return L(()=>{if(!u)return;const g=u.forDocument(c);return m(g.getState()),g.onStateChange(p=>{m(p)})},[u,c]),{state:h,provides:u?.forDocument(c)??null}})(t),o=n.state,i=n.provides,r=U(R(""),2),a=r[0],s=r[1];if(!i)return null;var l=Math.round(100*o.currentZoomLevel);return L(function(){s(l.toString())},[l]),d("div",{className:"relative"},d("div",{className:"bg-interactive-hover flex items-center rounded"},d("form",{onSubmit:function(c){c.preventDefault();var u=c.target,h=new FormData(u),m=parseFloat(h.get("zoom")||a);!isNaN(m)&&m>0&&i.requestZoom(m/100)},className:"block"},d("input",{name:"zoom",type:"text",inputMode:"numeric",pattern:"\\d*",className:"h-6 w-8 border-0 bg-transparent p-0 text-right text-sm outline-none focus:outline-none","aria-label":"Set zoom",autoFocus:!1,value:a,onInput:function(c){var u=c.target.value.replace(/[^0-9]/g,"");s(u)},onBlur:function(){(!a||parseFloat(a)<=0)&&s(l.toString())}}),d("span",{className:"text-sm"},"%")),d(Xt,{commandId:"zoom:toggle-menu",documentId:t,itemId:"zoom-menu-button"}),d(Xt,{commandId:"zoom:out",documentId:t}),d(Xt,{commandId:"zoom:in",documentId:t})))}var ol,bb=function(e){var t=e.documentId,n=Me(t).translate;return d("div",{class:"text-fg-muted flex flex-col items-center gap-2 p-4"},d(oe,{icon:"palette",className:"h-18 w-18 text-fg-muted"}),d("div",{className:"text-fg-muted max-w-[150px] text-center text-sm"},n("annotation.selectAnnotation")))},Ii={color:{key:"color",type:"colorWithTransparent",labelKey:"annotation.fillColor"},strokeColor:{key:"strokeColor",type:"colorWithTransparent",labelKey:"annotation.strokeColor"},opacity:{key:"opacity",type:"opacity",labelKey:"annotation.opacity",min:.1,max:1,step:.05,debounce:!0},strokeWidth:{key:"strokeWidth",type:"slider",labelKey:"annotation.strokeWidth",min:1,max:30,step:1,unit:"px",debounce:!0},strokeStyle:{key:"strokeStyle",type:"strokeStyle",labelKey:"annotation.borderStyle"},lineEndings:{key:"lineEndings",type:"lineEndings",labelKey:"annotation.lineEndings"},fontFamily:{key:"fontFamily",type:"fontFamily",labelKey:"annotation.fontFamily"},fontSize:{key:"fontSize",type:"fontSize",labelKey:"annotation.fontSize"},fontColor:{key:"fontColor",type:"fontColor",labelKey:"annotation.fontColor"},textAlign:{key:"textAlign",type:"textAlign",labelKey:"annotation.textAlign"},verticalAlign:{key:"verticalAlign",type:"verticalAlign",labelKey:"annotation.verticalAlign"},blendMode:{key:"blendMode",type:"blendMode",labelKey:"annotation.blendMode"}},Xi=(G(G(G(G(G(G(G(G(G(G(ol={},E.INK,["strokeColor","opacity","strokeWidth"]),E.CIRCLE,["color","opacity","strokeColor","strokeStyle","strokeWidth"]),E.SQUARE,["color","opacity","strokeColor","strokeStyle","strokeWidth"]),E.POLYGON,["strokeColor","opacity","strokeStyle","strokeWidth","color"]),E.LINE,["strokeColor","opacity","strokeStyle","strokeWidth","lineEndings","color"]),E.POLYLINE,["strokeColor","opacity","strokeStyle","strokeWidth","lineEndings","color"]),E.HIGHLIGHT,["strokeColor","opacity","blendMode"]),E.UNDERLINE,["strokeColor","opacity","blendMode"]),E.STRIKEOUT,["strokeColor","opacity","blendMode"]),E.SQUIGGLY,["strokeColor","opacity","blendMode"]),G(ol,E.FREETEXT,["fontFamily","fontSize","fontColor","textAlign","verticalAlign","opacity","color"])),il,wb=["position"],Dm=function(){var e=U(R(!1),2),t=e[0],n=e[1],o=V(null),i=V(null);return L(function(){if(t){var r=function(a){o.current&&!o.current.contains(a.target)&&n(!1)};return document.addEventListener("click",r),function(){return document.removeEventListener("click",r)}}},[t]),L(function(){t&&i.current&&i.current.scrollIntoView({block:"center",inline:"start"})},[t]),{open:t,setOpen:n,rootRef:o,selectedItemRef:i}},qr=function(e){var t=e.value,n=e.onChange,o=e.options,i=e.getOptionKey,r=e.renderValue,a=e.renderOption,s=e.triggerClass,l=s===void 0?"px-3 py-2":s,c=Dm(),u=c.open,h=c.setOpen,m=c.rootRef,g=c.selectedItemRef;return d("div",{ref:m,class:"relative inline-block w-full"},d("button",{type:"button",class:"border-border-default bg-bg-input flex w-full items-center justify-between gap-2 rounded border ".concat(l),onClick:function(){return h(function(p){return!p})}},r(t),d("svg",{class:"text-fg-secondary h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},d("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"}))),u&&d("div",{class:"border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-60 w-full overflow-y-auto rounded border p-1 shadow-lg"},o.map(function(p){var v=i(p)===i(t);return d("button",{ref:v?g:null,key:i(p),class:"hover:bg-interactive-hover block w-full rounded text-left ".concat(v?"bg-interactive-hover":""),onClick:function(){n(p),h(!1)}},a(p,v))})))},rt=function(e){var t=e.children,n=e.className;return d("label",{class:"text-fg-primary mb-2 block text-sm font-medium ".concat(n===void 0?"":n)},t)},Am=function(e){var t=e.children,n=e.className;return d("span",{class:"text-fg-muted text-xs ".concat(n===void 0?"":n)},t)},ut=function(e){var t=e.children,n=e.className;return d("section",{class:"mb-6 ".concat(n===void 0?"":n)},t)},zm=function(e){var t=e.value,n=e.min,o=n===void 0?0:n,i=e.max,r=i===void 0?1:i,a=e.step,s=a===void 0?.1:a,l=e.onChange;return d("input",{type:"range",class:"range-sm bg-border-subtle mb-2 h-1 w-full cursor-pointer appearance-none rounded-lg",value:t,min:o,max:r,step:s,onInput:function(c){return l(parseFloat(c.target.value))}})},Qi=function(e){var t=e.color,n=e.active,o=e.onSelect,i=(function(r){return r==="transparent"||/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*0\s*\)$/i.test(r)||/^#([0-9a-f]{8})$/i.test(r)&&r.slice(-2).toLowerCase()==="00"||/^#([0-9a-f]{4})$/i.test(r)&&r.slice(-1).toLowerCase()==="0"})(t)?{backgroundColor:"#fff",backgroundImage:"linear-gradient(45deg, transparent 40%, red 40%, red 60%, transparent 60%)",backgroundSize:"100% 100%"}:{backgroundColor:t};return d("button",{title:t,class:"border-border-strong h-5 w-5 rounded-full border ".concat(n?"outline-accent outline outline-2 outline-offset-2":""),style:i,onClick:function(){return o(t)}})},xb=[{id:he.SOLID},{id:he.DASHED,dash:[6,2]},{id:he.DASHED,dash:[8,4]},{id:he.DASHED,dash:[3,3]},{id:he.DASHED,dash:[1,2]},{id:he.DASHED,dash:[4,2,1,2]},{id:he.DASHED,dash:[8,4,1,4]}],rl=function(e){return d("svg",{width:"80",height:"8",viewBox:"0 0 80 8"},d("line",{x1:"0",y1:"4",x2:"80",y2:"4",style:{strokeDasharray:e?.join(" "),stroke:"currentColor",strokeWidth:"2"}}))},Cb=function(e){return d(qr,O(O({},e),{},{options:xb,getOptionKey:function(t){var n;return t.id+(((n=t.dash)===null||n===void 0?void 0:n.join("-"))||"")},renderValue:function(t){return rl(t.dash)},renderOption:function(t){return d("div",{class:"px-1 py-2"},rl(t.dash))}}))},Ib=[Q.None,Q.Square,Q.Circle,Q.Diamond,Q.OpenArrow,Q.ClosedArrow,Q.ROpenArrow,Q.RClosedArrow,Q.Butt,Q.Slash],al=function(e){var t,n=e.ending,o=e.position,i=G(G(G(G(G(G(G(G(G({},Q.Square,d("path",{d:"M68 -4 L76 -4 L76 4 L68 4 Z"})),Q.Circle,d("circle",{cx:"72",cy:"0",r:"4"})),Q.Diamond,d("path",{d:"M72 -5 L77 0 L72 5 L67 0 Z"})),Q.OpenArrow,d("path",{d:"M67 -5 L77 0 L67 5",fill:"none"})),Q.ClosedArrow,d("path",{d:"M67 -5 L77 0 L67 5 Z"})),Q.ROpenArrow,d("path",{d:"M77 -5 L67 0 L77 5",fill:"none"})),Q.RClosedArrow,d("path",{d:"M77 -5 L67 0 L77 5 Z"})),Q.Butt,d("path",{d:"M72 -5 L72 5",fill:"none"})),Q.Slash,d("path",{d:"M67 -5 L77 5",fill:"none"})),r=G(G(G(G(G(G(G(G(G({},Q.Square,68),Q.Circle,68),Q.Diamond,67),Q.OpenArrow,76),Q.ClosedArrow,67),Q.ROpenArrow,67),Q.RClosedArrow,67),Q.Butt,72),Q.Slash,72),a=i[n];return d("svg",{width:"80",height:"20",viewBox:"0 0 80 20",class:"text-fg-primary"},d("g",{transform:o==="start"?"rotate(180 40 10)":""},d("line",{x1:"4",y1:"10",x2:(t=r[n])!==null&&t!==void 0?t:77,y2:"10",stroke:"currentColor","stroke-width":"1.5"}),a&&d("g",{transform:"translate(0, 10)",fill:"currentColor",stroke:"currentColor","stroke-width":"1.5"},a)))},sl=function(e){var t=e.position,n=Oo(e,wb);return d(qr,O(O({},n),{},{options:Ib,getOptionKey:function(o){return o},triggerClass:"px-3 py-1",renderValue:function(o){return d(al,{ending:o,position:t})},renderOption:function(o){return d("div",{class:"px-1 py-1"},d(al,{ending:o,position:t}))}}))},kb=function(e){return d(qr,O(O({},e),{},{options:xg,getOptionKey:function(t){return t},triggerClass:"px-2 py-1 text-sm",renderValue:function(t){return d("span",null,ua(t))},renderOption:function(t){return d("div",{class:"px-2 py-1"},ua(t))}}))},Sb=function(e){var t=e.value,n=e.onChange,o=e.options,i=o===void 0?[8,9,10,11,12,14,16,18,24,36,48,72]:o,r=Dm(),a=r.open,s=r.setOpen,l=r.rootRef,c=r.selectedItemRef;return d("div",{ref:l,class:"relative w-full"},d("input",{type:"number",min:"1",class:"border-border-default bg-bg-input w-full rounded border px-2 py-1 pr-7 text-sm",value:t,onInput:function(u){var h=parseInt(u.target.value,10);Number.isFinite(h)&&h>0&&n(h)},onClick:function(){return s(!0)}}),d("button",{type:"button",class:"absolute inset-y-0 right-1 flex items-center",onClick:function(){return s(function(u){return!u})},tabIndex:-1},d("svg",{class:"text-fg-secondary h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},d("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"}))),a&&d("div",{class:"border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-48 w-full overflow-y-auto rounded border shadow-lg"},i.map(function(u){var h=u===t;return d("button",{ref:h?c:null,key:u,class:"hover:bg-interactive-hover block w-full px-2 py-1 text-left text-sm ".concat(h?"bg-interactive-hover":""),onClick:function(){n(u),s(!1)}},u)})))};function _t(e){var t=e.active,n=t!==void 0&&t,o=e.disabled,i=o!==void 0&&o,r=e.onClick,a=e.title,s=e.children,l=e.className,c=l===void 0?"":l;return d("button",{type:"button",title:a,disabled:i,onClick:r,className:"h-9 w-9 rounded border px-2 py-1 text-sm transition-colors ".concat(n?"border-accent bg-accent text-fg-on-accent":"border-border-default bg-bg-input text-fg-primary hover:bg-interactive-hover"," disabled:cursor-not-allowed disabled:opacity-40 ").concat(c)},s)}function Pb(e){switch(e.config.type){case"color":return k(ll,O(O({},e),{},{allowTransparent:!1}));case"colorWithTransparent":return k(ll,O(O({},e),{},{allowTransparent:!0}));case"opacity":return k(Mb,O({},e));case"slider":return k(Db,O({},e));case"strokeStyle":return k(Ab,O({},e));case"lineEndings":return k(zb,O({},e));case"fontFamily":return k(Tb,O({},e));case"fontSize":return k(Eb,O({},e));case"fontColor":return k(Rb,O({},e));case"textAlign":return k(_b,O({},e));case"verticalAlign":return k(Nb,O({},e));case"blendMode":return k(Lb,O({},e));default:return null}}function ll(e){var t=e.config,n=e.value,o=e.onChange,i=e.colorPresets,r=e.translate,a=e.allowTransparent,s=U(R(n??"#000000"),2),l=s[0],c=s[1];L(function(){return c(n??"#000000")},[n]);var u=function(h){c(h),o(h)};return k(ut,{children:[k(rt,{className:"mb-3",children:r(t.labelKey)}),k("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4",children:[i.map(function(h){return k(Qi,{color:h,active:h===l,onSelect:u},h)}),a&&k(Qi,{color:"transparent",active:l==="transparent",onSelect:u})]})]})}function Mb(e){var t,n,o,i=e.config,r=e.value,a=e.onChange,s=e.translate,l=U(R(r??1),2),c=l[0],u=l[1];L(function(){return u(r??1)},[r]);var h=Wr(c,300);return L(function(){h!==r&&a(h)},[h]),k(ut,{children:[k(rt,{children:s(i.labelKey)}),k(zm,{value:c,min:(t=i.min)!==null&&t!==void 0?t:.1,max:(n=i.max)!==null&&n!==void 0?n:1,step:(o=i.step)!==null&&o!==void 0?o:.05,onChange:u}),k(Am,{children:[Math.round(100*c),"%"]})]})}function Db(e){var t,n,o,i,r,a=e.config,s=e.value,l=e.onChange,c=e.translate,u=U(R((t=s??a.min)!==null&&t!==void 0?t:1),2),h=u[0],m=u[1];L(function(){var p;return m((p=s??a.min)!==null&&p!==void 0?p:1)},[s]);var g=Wr(h,300);return L(function(){g!==s&&l(g)},[g]),k(ut,{children:[k(rt,{children:c(a.labelKey)}),k(zm,{value:h,min:(n=a.min)!==null&&n!==void 0?n:1,max:(o=a.max)!==null&&o!==void 0?o:30,step:(i=a.step)!==null&&i!==void 0?i:1,onChange:m}),k(Am,{children:[h,(r=a.unit)!==null&&r!==void 0?r:""]})]})}function Ab(e){var t=e.config,n=e.value,o=e.onChange,i=e.translate,r=U(R(Qt(n)==="object"&&n!==null?n:{id:n??he.SOLID}),2),a=r[0],s=r[1];return L(function(){var l=Qt(n)==="object"&&n!==null?n:{id:n??he.SOLID};s(l)},[n]),k(ut,{children:[k(rt,{className:"mb-3",children:i(t.labelKey)}),k(Cb,{value:a,onChange:function(l){s(l),o({strokeStyle:l.id,strokeDashArray:l.dash})}})]})}function zb(e){e.config;var t=e.value,n=e.onChange,o=e.translate,i=t??{start:Q.None,end:Q.None},r=U(R(i.start),2),a=r[0],s=r[1],l=U(R(i.end),2),c=l[0],u=l[1];return L(function(){s(i.start),u(i.end)},[t]),k(ut,{children:k("div",{class:"grid grid-cols-2 gap-4",children:[k("div",{children:[k(rt,{className:"mb-3",children:o("annotation.lineStart")}),k(sl,{value:a,onChange:function(h){s(h),n({start:h,end:c})},position:"start"})]}),k("div",{children:[k(rt,{className:"mb-3",children:o("annotation.lineEnd")}),k(sl,{value:c,onChange:function(h){u(h),n({start:a,end:h})},position:"end"})]})]})})}function Tb(e){var t=e.config,n=e.value,o=e.onChange,i=e.translate,r=n??Ee.Helvetica,a=da(r),s=Dn(r),l=An(r),c=U(R(a),2),u=c[0],h=c[1],m=U(R(s),2),g=m[0],p=m[1],v=U(R(l),2),f=v[0],y=v[1];L(function(){var w=n??Ee.Helvetica;h(da(w)),p(Dn(w)),y(An(w))},[n]);var b=function(w,x,C){var S=Bt(w,{bold:x,italic:C});o(S)};return k(ut,{children:[k(rt,{children:i(t.labelKey)}),k("div",{class:"mb-3",children:k(kb,{value:u,onChange:function(w){var x=Dn(Bt(w,{bold:!0,italic:!1})),C=An(Bt(w,{bold:!1,italic:!0})),S=!!x&&g,M=!!C&&f;h(w),p(S),y(M),b(w,S,M)}})}),k("div",{class:"flex gap-2",children:[k(_t,{title:"Bold",active:g,disabled:!Dn(Bt(u,{bold:!0,italic:!1})),onClick:function(){if(Dn(Bt(u,{bold:!0,italic:!1}))){var w=!g;p(w),b(u,w,f)}},className:"font-bold",children:k(oe,{icon:"bold",size:18})}),k(_t,{title:"Italic",active:f,disabled:!An(Bt(u,{bold:!1,italic:!0})),onClick:function(){if(An(Bt(u,{bold:!1,italic:!0}))){var w=!f;y(w),b(u,g,w)}},className:"italic",children:k(oe,{icon:"italic",size:18})})]})]})}function Eb(e){var t=e.config,n=e.value,o=e.onChange,i=e.translate,r=U(R(n??12),2),a=r[0],s=r[1];return L(function(){return s(n??12)},[n]),k(ut,{children:[k(rt,{children:i(t.labelKey)}),k(Sb,{value:a,onChange:function(l){!Number.isFinite(l)||l<=0||(s(l),o(l))}})]})}function Rb(e){var t=e.config,n=e.value,o=e.onChange,i=e.colorPresets,r=e.translate,a=U(R(n??"#000000"),2),s=a[0],l=a[1];L(function(){return l(n??"#000000")},[n]);var c=function(u){l(u),o(u)};return k(ut,{children:[k(rt,{className:"mb-3",children:r(t.labelKey)}),k("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4",children:i.map(function(u){return k(Qi,{color:u,active:u===s,onSelect:c},u)})})]})}function _b(e){var t=e.config,n=e.value,o=e.onChange,i=e.translate,r=U(R(n??Ge.Left),2),a=r[0],s=r[1];L(function(){return s(n??Ge.Left)},[n]);var l=function(c){s(c),o(c)};return k(ut,{children:[k(rt,{children:i(t.labelKey)}),k("div",{class:"flex gap-2",children:[k(_t,{title:"Align left",active:a===Ge.Left,onClick:function(){return l(Ge.Left)},children:k(oe,{icon:"alignLeft",size:18})}),k(_t,{title:"Align center",active:a===Ge.Center,onClick:function(){return l(Ge.Center)},children:k(oe,{icon:"alignCenter",size:18})}),k(_t,{title:"Align right",active:a===Ge.Right,onClick:function(){return l(Ge.Right)},children:k(oe,{icon:"alignRight",size:18})})]})]})}function Nb(e){var t=e.config,n=e.value,o=e.onChange,i=e.translate,r=U(R(n??nt.Top),2),a=r[0],s=r[1];L(function(){return s(n??nt.Top)},[n]);var l=function(c){s(c),o(c)};return k(ut,{children:[k(rt,{children:i(t.labelKey)}),k("div",{class:"flex gap-2",children:[k(_t,{title:"Align top",active:a===nt.Top,onClick:function(){return l(nt.Top)},children:k(oe,{icon:"alignTop",size:18})}),k(_t,{title:"Align middle",active:a===nt.Middle,onClick:function(){return l(nt.Middle)},children:k(oe,{icon:"alignMiddle",size:18})}),k(_t,{title:"Align bottom",active:a===nt.Bottom,onClick:function(){return l(nt.Bottom)},children:k(oe,{icon:"alignBottom",size:18})})]})]})}var Ob=(G(G(G(G(G(G(G(G(G(G(il={},Z.Normal,"blendMode.normal"),Z.Multiply,"blendMode.multiply"),Z.Screen,"blendMode.screen"),Z.Overlay,"blendMode.overlay"),Z.Darken,"blendMode.darken"),Z.Lighten,"blendMode.lighten"),Z.ColorDodge,"blendMode.colorDodge"),Z.ColorBurn,"blendMode.colorBurn"),Z.HardLight,"blendMode.hardLight"),Z.SoftLight,"blendMode.softLight"),G(G(G(G(G(G(il,Z.Difference,"blendMode.difference"),Z.Exclusion,"blendMode.exclusion"),Z.Hue,"blendMode.hue"),Z.Saturation,"blendMode.saturation"),Z.Color,"blendMode.color"),Z.Luminosity,"blendMode.luminosity"));function Lb(e){var t=e.config,n=e.value,o=e.onChange,i=e.translate,r=U(R(n??Z.Normal),2),a=r[0],s=r[1];return L(function(){return s(n??Z.Normal)},[n]),k(ut,{children:[k(rt,{children:i(t.labelKey)}),k("select",{class:"border-border-default bg-bg-input text-fg-primary w-full rounded border px-2 py-1 text-sm",value:a,onChange:function(l){var c=parseInt(l.target.value,10);s(c),o(c)},children:Cg.map(function(l){return k("option",{value:l,children:i(Ob[l])},l)})})]})}function $b(e){var t=e.documentId,n=e.annotations,o=e.activeTool,i=e.colorPresets,r=vt().provides,a=Me(t).translate;if(!r)return null;var s=n.length>0,l=s?Lo(new Set(n.map(function(g){return g.object.type}).filter(function(g){return g!==void 0}))):o?.defaults.type!==void 0?[o.defaults.type]:[];if(l.length===0)return null;var c=(function(g){var p;if(g.length===0)return[];for(var v=g.map(function(C){var S;return new Set((S=Xi[C])!==null&&S!==void 0?S:[])}),f=v[0],y=1;y<v.length;y++){var b,w=lt(f);try{for(w.s();!(b=w.n()).done;){var x=b.value;v[y].has(x)||f.delete(x)}}catch(C){w.e(C)}finally{w.f()}}return((p=Xi[g[0]])!==null&&p!==void 0?p:[]).filter(function(C){return f.has(C)})})(l);if(c.length===0)return null;var u=s?n[0].object:o?.defaults,h=function(g){r&&(s?r.updateAnnotations(n.map(function(p){return{pageIndex:p.object.pageIndex,id:p.object.id,patch:g}})):o&&r.setToolDefaults(o.id,g))},m=function(g){if(u){var p=Ii[g];if(p){if(p.type==="strokeStyle"){var v=u;return{id:v.strokeStyle,dash:v.strokeDashArray}}return u[p.key]}}};return d(te,null,c.map(function(g){var p=Ii[g];return p?d(Pb,{key:g,config:p,value:m(g),onChange:function(v){return(function(f,y){var b=Ii[f];b&&(b.type!=="strokeStyle"||Qt(y)!=="object"?b.type!=="lineEndings"?h(G({},b.key,y)):h({lineEndings:y}):h({strokeStyle:y.strokeStyle,strokeDashArray:y.strokeDashArray}))})(g,v)},colorPresets:i,translate:a}):null}))}var cl={1:"annotation.text",3:"annotation.freeText",4:"annotation.line",5:"annotation.square",6:"annotation.circle",7:"annotation.polygon",8:"annotation.polyline",9:"annotation.highlight",10:"annotation.underline",11:"annotation.squiggly",12:"annotation.strikeout",13:"annotation.stamp",15:"annotation.ink"};function Fb(e){var t,n=e.documentId,o=vt().provides,i=eh(n),r=i.provides,a=i.state,s=Me(n).translate;if(!o||!r)return null;var l=(t=o?.getColorPresets())!==null&&t!==void 0?t:[],c=Fi(a),u=r.getActiveTool(),h=c.length>0,m="";if(c.length>1)m=s("annotation.multiSelect",{params:{count:String(c.length)}});else if(h){var g=c[0].object.type,p=cl[g],v=p?s(p):"";m=v?s("annotation.styles",{params:{type:v}}):""}else if(u){var f=u.defaults.type;if(f!==void 0){var y=cl[f],b=y?s(y):"";m=b?s("annotation.defaults",{params:{type:b}}):""}}var w=h?Lo(new Set(c.map(function(C){return C.object.type}))):u?.defaults.type!==void 0?[u.defaults.type]:[],x=w.length>0&&w.some(function(C){var S,M;return((S=(M=Xi[C])===null||M===void 0?void 0:M.length)!==null&&S!==void 0?S:0)>0});return x||h||u?k("div",{class:"h-full overflow-y-auto p-4",children:[m&&k("h2",{class:"text-md mb-4 font-medium",children:m}),k($b,{documentId:n,annotations:c,activeTool:u,colorPresets:l})]}):k(bb,{documentId:n})}function jb(e){var t=e.schema,n=e.documentId,o=e.props,i=o.menuWrapperProps,r=o.rect,a=o.placement,s={position:"absolute",pointerEvents:"auto",cursor:"default",left:"50%",transform:"translateX(-50%)"};return a!=null&&a.suggestTop?s.top=-48:s.top=r.size.height+8,d("div",O(O({},i),Re(t)),d("div",{style:s,className:"border-border-subtle bg-bg-elevated rounded-lg border shadow-lg"},d("div",{className:"flex items-center gap-1 p-1"},t.items.map(function(l){return d(Tm,{key:l.id,item:l,documentId:n,props:o})}))))}function Ub(e){var t=e.item,n=e.documentId,o=It(t.commandId,n);return o!=null&&o.visible?d("div",O({},Re(t)),d(Xt,{commandId:t.commandId,documentId:n,variant:t.variant})):null}function Tm(e){var t,n=e.item,o=e.documentId,i=e.props;switch(n.type){case"command-button":return d(Ub,{item:n,documentId:o});case"divider":return d("div",O({},Re(n)),d("div",{className:"bg-border-default h-6 w-px","aria-hidden":"true"}));case"group":return d("div",O({className:"flex items-center gap-".concat((t=n.gap)!==null&&t!==void 0?t:1)},Re(n)),n.items.map(function(r){return d(Tm,{key:r.id,item:r,documentId:o,props:i})}));default:return null}}function Hb(e){var t,n,o=e.schema,i=e.documentId,r=e.className,a=o.content,s=o.position,l=Ko().renderCustomComponent,c=(t=s.anchor,(n={"top-left":"top-0 left-0","top-center":"top-0 left-1/2 -translate-x-1/2","top-right":"top-0 right-0","center-left":"top-1/2 left-0 -translate-y-1/2",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","center-right":"top-1/2 right-0 -translate-y-1/2","bottom-left":"bottom-0 left-0","bottom-center":"bottom-0 left-1/2 -translate-x-1/2","bottom-right":"bottom-0 right-0"})[t]||n["bottom-center"]),u=(function(h){if(h){var m={};return h.top&&(m.top=h.top),h.right&&(m.right=h.right),h.bottom&&(m.bottom=h.bottom),h.left&&(m.left=h.left),Object.keys(m).length>0?m:void 0}})(s.offset);return d("div",{className:"absolute ".concat(c," ").concat(r||""),style:u,"data-overlay-id":o.id},l(a.componentId,i))}function Zn(e){var t=e.open,n=e.title,o=e.children,i=e.onClose,r=e.onExited,a=e.className,s=e.showCloseButton,l=s===void 0||s,c=V(null),u=U(R(t),2),h=u[0],m=u[1],g=U(R(!1),2),p=g[0],v=g[1];return L(function(){if(t)m(!0),requestAnimationFrame(function(){v(!0)});else if(h){v(!1);var f=setTimeout(function(){m(!1),r?.()},200);return function(){return clearTimeout(f)}}},[t,h,r]),L(function(){if(t){var f=function(y){y.key==="Escape"&&i?.()};return document.addEventListener("keydown",f),function(){return document.removeEventListener("keydown",f)}}},[t,i]),L(function(){return document.body.style.overflow=h?"hidden":"",function(){document.body.style.overflow=""}},[h]),h?k("div",{ref:c,className:"fixed inset-0 z-50 transition-opacity duration-200 md:flex md:items-center md:justify-center ".concat(p&&t?"bg-bg-overlay":"bg-transparent"),onClick:function(f){f.target===c.current&&i?.()},children:k("div",{className:Gn("bg-bg-surface md:border-border-subtle relative flex h-full w-full flex-col transition-all duration-200 md:h-auto md:w-[28rem] md:max-w-[90vw] md:rounded-lg md:border md:shadow-lg",p&&t?"scale-100 opacity-100":"scale-95 opacity-0",a),onClick:function(f){return f.stopPropagation()},children:[(n||l)&&k("div",{className:"border-border-subtle flex flex-shrink-0 items-center justify-between border-b px-6 py-4",children:[n&&k("h2",{className:"text-fg-primary text-lg font-semibold",children:n}),l&&k(Oe,{onClick:i,className:"hover:bg-interactive-hover p-1",children:k(oe,{icon:"x",className:"h-5 w-5"})})]}),k("div",{className:"flex-1 overflow-y-auto px-6 py-4 md:max-h-[80vh] md:flex-none",children:o})]})}):null}function Bb(e){var t=e.documentId,n=e.isOpen,o=e.onClose,i=e.onExited,r=Cn().provides,a=mh().provides,s=Me(t).translate,l=U(R("all"),2),c=l[0],u=l[1],h=U(R(""),2),m=h[0],g=h[1],p=U(R(!0),2),v=p[0],f=p[1],y=U(R(!1),2),b=y[0],w=y[1],x=U(R(""),2),C=x[0],S=x[1],M=r?.forDocument(t).getMetrics(),A=M?.currentPage||1,I=r?.forDocument(t).getTotalPages()||0;L(function(){n&&(u("all"),g(""),f(!0),w(!1),S(""))},[n]);var P=(c!=="custom"||m.trim().length>0)&&!b;return d(Zn,{open:n!=null&&n,title:s("print.title"),onClose:o,onExited:i,className:"md:w-[32rem]"},d("div",{className:"space-y-6"},d("div",null,d("label",{className:"text-fg-secondary mb-3 block text-sm font-medium"},s("print.pages")),d("div",{className:"space-y-2"},d("label",{className:"flex items-center"},d("input",{type:"radio",name:"pageRange",value:"all",checked:c==="all",onChange:function(){return u("all")},disabled:b,className:"accent-accent mr-2"}),d("span",{className:"text-fg-primary text-sm"},s("print.all"))),d("label",{className:"flex items-center"},d("input",{type:"radio",name:"pageRange",value:"current",checked:c==="current",onChange:function(){return u("current")},disabled:b,className:"accent-accent mr-2"}),d("span",{className:"text-fg-primary text-sm"},s("print.current",{params:{currentPage:A}}))),d("label",{className:"flex items-start"},d("input",{type:"radio",name:"pageRange",value:"custom",checked:c==="custom",onChange:function(){return u("custom")},disabled:b,className:"accent-accent mr-2 mt-0.5"}),d("div",{className:"flex-1"},d("span",{className:"text-fg-primary mb-1 block text-sm"},s("print.specify")),d("input",{type:"text",placeholder:s("print.specifyEG"),value:m,onInput:function(z){return g(z.target.value)},disabled:c!=="custom"||b,className:"w-full rounded-md border px-3 py-1 text-base ".concat(c!=="custom"||b?"bg-interactive-disabled text-fg-muted":"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent"," focus:outline-none focus:ring-1")}),c==="custom"&&m.trim()&&I>0&&d("p",{className:"text-fg-muted mt-1 text-xs"},s("print.current",{params:{totalPages:I}})))))),d("div",null,d("label",{className:"flex items-center"},d("input",{type:"checkbox",checked:v,onChange:function(z){return f(z.target.checked)},disabled:b,className:"accent-accent mr-2"}),d("span",{className:"text-fg-secondary text-sm font-medium"},s("print.annotation")))),b&&d("div",{className:"bg-state-info-light flex items-center space-x-3 rounded-md p-3"},d(vn,{className:"text-accent"}),d("span",{className:"text-accent text-sm"},C)),d("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},d(Oe,{onClick:o,disabled:b,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},s("print.cancel")),d(Oe,{onClick:function(){var z;c==="current"?z=String(A):c==="custom"&&(z=m.trim()||void 0);var D={includeAnnotations:v,pageRange:z};try{w(!0),S(s("print.loading"));var T=a?.forDocument(t).print(D);T&&(T.onProgress(function(_){S(_.message)}),T.wait(function(){w(!1),S(""),o?.()},function(_){console.error("Print failed:",_),w(!1),S("")}))}catch(_){console.error("Print failed:",_),w(!1),S("")}},disabled:!P,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},b&&d(vn,{size:"sm"}),d("span",null,s(b?"print.printing":"print.print"))))))}function Wb(e){var t,n=e.documentId,o=e.isOpen,i=e.onClose,r=e.onExited,a=Cn().provides,s=vt().provides,l=Yo().provides,c=Me(n).translate,u=U(R("url"),2),h=u[0],m=u[1],g=U(R(""),2),p=g[0],v=g[1],f=U(R(1),2),y=f[0],b=f[1],w=a?.forDocument(n).getTotalPages()||1,x=s?.forDocument(n),C=l?.forDocument(n),S=x?.getSelectedAnnotation(),M=(t=C?.getFormattedSelection())!==null&&t!==void 0?t:[];L(function(){o&&(m("url"),v(""),b(1))},[o]);var A=h==="page"||p.trim().length>0;return d(Zn,{open:o!=null&&o,title:c("link.title")||"Insert Link or Page",onClose:i,onExited:r,className:"md:w-[28rem]"},d("form",{onSubmit:function(I){I.preventDefault(),(function(){var P;if(h==="url"){if(!p.trim())return;P={type:"action",action:{type:Zt.URI,uri:p.trim()}}}else P={type:"destination",destination:{pageIndex:y-1,zoom:{mode:cr.FitPage},view:[]}};if(S){var z,D="segmentRects"in S.object?S.object.segmentRects:[S.object.rect],T=lt(D??[]);try{for(T.s();!(z=T.n()).done;){var _=z.value;x?.createAnnotation(S.object.pageIndex,{id:Pe(),type:E.LINK,pageIndex:S.object.pageIndex,rect:_,inReplyToId:S.object.id,replyType:St.Group,target:P,strokeStyle:he.UNDERLINE,strokeColor:"#0000FF",strokeWidth:2})}}catch(B){T.e(B)}finally{T.f()}}else if(M.length>0){var H,$=C?.getSelectedText(),j=lt(M);try{var F=function(){var B=H.value;$?.wait(function(ge){var ue,be=Pe();x?.createAnnotation(B.pageIndex,{id:be,created:new Date,flags:["print"],type:E.HIGHLIGHT,blendMode:Z.Multiply,pageIndex:B.pageIndex,rect:B.rect,segmentRects:B.segmentRects,strokeColor:"#FFFFFF",opacity:0,custom:{text:ge.join(`
`)}});var ke,$e=lt((ue=B.segmentRects)!==null&&ue!==void 0?ue:[B.rect]);try{for($e.s();!(ke=$e.n()).done;){var yt=ke.value;x?.createAnnotation(B.pageIndex,{id:Pe(),type:E.LINK,pageIndex:B.pageIndex,rect:yt,inReplyToId:be,replyType:St.Group,target:P,strokeStyle:he.UNDERLINE,strokeColor:"#0000FF",strokeWidth:2})}}catch(bt){$e.e(bt)}finally{$e.f()}x?.selectAnnotation(B.pageIndex,be)},ze)};for(j.s();!(H=j.n()).done;)F()}catch(B){j.e(B)}finally{j.f()}C?.clear()}i?.()})()},className:"space-y-6"},d("div",{className:"border-border-subtle flex border-b"},d(Bi,{active:h==="url",onClick:function(){return m("url")}},c("link.url")||"URL"),d(Bi,{active:h==="page",onClick:function(){return m("page")}},c("link.page")||"Page")),d("div",{className:"bg-bg-muted rounded-lg"},h==="url"?d("div",null,d("label",{className:"text-fg-secondary mb-2 block text-sm font-medium"},c("link.enterUrl")||"Enter URL"),d("input",{type:"url",value:p,onInput:function(I){return v(I.target.value)},placeholder:"https://example.com",className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 text-base focus:outline-none focus:ring-1",autoFocus:!0})):d("div",null,d("label",{className:"text-fg-secondary mb-2 block text-sm font-medium"},c("link.enterPage")||"Enter Page Number"),d("input",{type:"number",min:1,max:w,value:y,onInput:function(I){var P=parseInt(I.target.value,10);isNaN(P)||b(Math.max(1,Math.min(w,P)))},className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 text-base focus:outline-none focus:ring-1",autoFocus:!0}),d("p",{className:"text-fg-muted mt-1 text-xs"},c("link.pageRange",{params:{totalPages:w}})||"Page 1 to ".concat(w)))),d("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},d(Oe,{type:"button",onClick:i,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm"},c("common.cancel")||"Cancel"),d(Oe,{type:"submit",disabled:!A,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},c("link.link")||"Link"))))}function qb(e){var t=e.documentId,n=Li().provides,o=dc(t),i=o.provides,r=o.state,a=r.currentPage,s=r.totalPages,l=U(R(!1),2),c=l[0],u=l[1],h=U(R(!1),2),m=h[0],g=h[1],p=V(null),v=U(R(a.toString()),2),f=v[0],y=v[1],b=V(null);L(function(){y(a.toString())},[a]);var w=Y(function(){p.current&&clearTimeout(p.current),p.current=setTimeout(function(){m||u(!1)},4e3)},[m]);return L(function(){if(n)return n.onScrollActivity(function(x){x.documentId===t&&(u(!0),w())})},[n,t,w]),L(function(){return function(){p.current&&clearTimeout(p.current)}},[]),s<=1?null:d("div",{onMouseEnter:function(){g(!0),u(!0),p.current&&clearTimeout(p.current)},onMouseLeave:function(){g(!1),w()},className:"pointer-events-auto"},d("div",{className:"border-border-default bg-bg-surface flex items-center gap-1 rounded-lg border p-1 shadow-lg transition-opacity duration-300 ".concat(c?"opacity-100":"opacity-0")},d(Xt,{commandId:"scroll:previous-page",documentId:t,variant:"icon"}),d("div",{className:"flex items-center gap-1 px-1"},d("input",{ref:b,type:"text",inputMode:"numeric",pattern:"[0-9]*",value:f,onChange:function(x){var C=x.target.value.replace(/[^0-9]/g,"");y(C)},onFocus:function(){setTimeout(function(){var x;return(x=b.current)===null||x===void 0?void 0:x.select()},0)},onBlur:function(){var x,C=parseInt(f,10);!isNaN(C)&&C>=1&&C<=s?i==null||(x=i.scrollToPage)===null||x===void 0||x.call(i,{pageNumber:C}):y(a.toString())},onKeyDown:function(x){x.key==="Enter"?x.target.blur():x.key==="Escape"&&(y(a.toString()),x.target.blur())},className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent h-7 w-10 rounded border px-1 text-center text-base focus:outline-none focus:ring-1"}),d("span",{className:"text-fg-secondary text-sm"}," ",s)),d(Xt,{commandId:"scroll:next-page",documentId:t,variant:"icon"})))}var pe=function(e,t,n){return!(function(o,i,r){return Co(o.core,i,r)})(e,t,n)},Gb={"zoom:in":{id:"zoom:in",labelKey:"zoom.in",icon:"zoomIn",shortcuts:["Ctrl+=","Meta+=","Ctrl+NumpadAdd","Meta+NumpadAdd"],categories:["zoom","zoom-in"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).zoomIn()}},"zoom:out":{id:"zoom:out",labelKey:"zoom.out",icon:"zoomOut",shortcuts:["Ctrl+-","Meta+-","Ctrl+NumpadSubtract","Meta+NumpadSubtract"],categories:["zoom","zoom-out"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).zoomOut()}},"zoom:fit-page":{id:"zoom:fit-page",labelKey:"zoom.fitPage",icon:"fitToPage",shortcuts:["Ctrl+0","Meta+0"],categories:["zoom","zoom-fit-page"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(Le.FitPage)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===Le.FitPage}},"zoom:fit-width":{id:"zoom:fit-width",labelKey:"zoom.fitWidth",icon:"fitToWidth",shortcuts:["Ctrl+1","Meta+1"],categories:["zoom","zoom-fit-width"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(Le.FitWidth)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===Le.FitWidth}},"zoom:marquee":{id:"zoom:marquee",labelKey:"zoom.marquee",icon:"zoomInArea",shortcuts:["Ctrl+M","Meta+M"],categories:["zoom","zoom-marquee"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).toggleMarqueeZoom()},active:function(e){var t,n,o=e.state,i=e.documentId;return(t=(n=o.plugins.zoom)===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.isMarqueeZoomActive)!==null&&t!==void 0&&t}},"zoom:25":{id:"zoom:25",label:"25%",categories:["zoom","zoom-level","zoom-level-25"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(.25)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===.25}},"zoom:50":{id:"zoom:50",label:"50%",categories:["zoom","zoom-level","zoom-level-50"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(.5)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===.5}},"zoom:100":{id:"zoom:100",label:"100%",categories:["zoom","zoom-level","zoom-level-100"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(1)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===1}},"zoom:125":{id:"zoom:125",label:"125%",categories:["zoom","zoom-level","zoom-level-125"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(1.25)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===1.25}},"zoom:150":{id:"zoom:150",label:"150%",categories:["zoom","zoom-level","zoom-level-150"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(1.5)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===1.5}},"zoom:200":{id:"zoom:200",label:"200%",categories:["zoom","zoom-level","zoom-level-200"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(2)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===2}},"zoom:400":{id:"zoom:400",label:"400%",categories:["zoom","zoom-level","zoom-level-400"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(4)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===4}},"zoom:800":{id:"zoom:800",label:"800%",categories:["zoom","zoom-level","zoom-level-800"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(8)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===8}},"zoom:1600":{id:"zoom:1600",label:"1600%",categories:["zoom","zoom-level","zoom-level-1600"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(16)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===16}},"zoom:toggle-menu":{id:"zoom:toggle-menu",labelKey:"zoom.menu",icon:"chevronDown",iconProps:{className:"h-3.5 w-3.5"},categories:["zoom","zoom-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).toggleMenu("zoom-menu","zoom:toggle-menu","zoom-menu-button")},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["zoom-menu"]!==void 0}},"zoom:toggle-menu-mobile":{id:"zoom:toggle-menu-mobile",labelKey:"zoom.menu",icon:"zoomIn",categories:["zoom","zoom-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).toggleMenu("zoom-menu","zoom:toggle-menu-mobile","zoom-menu-button")},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["zoom-menu"]!==void 0}},"pan:toggle":{id:"pan:toggle",labelKey:"pan.toggle",icon:"hand",shortcuts:["h"],categories:["tools","pan"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("pan"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).togglePan()},active:function(e){var t,n,o=e.state,i=e.documentId;return(t=(n=o.plugins.pan)===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.isPanMode)!==null&&t!==void 0&&t}},"pointer:toggle":{id:"pointer:toggle",labelKey:"pointer.toggle",icon:"pointer",shortcuts:["p"],categories:["tools","pointer"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("interaction-manager"))===null||t===void 0?void 0:t.provides();if(i){var r=i.forDocument(o);r.getActiveMode()==="pointerMode"?r.activateDefaultMode():r.activate("pointerMode")}},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins["interaction-manager"])===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.activeMode)==="pointerMode"}},"left-action-menu:overflow-menu":{id:"left-action-menu:overflow-menu",labelKey:"menu.moreOptions",icon:"dots",categories:["ui","ui-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.toggleMenu("left-action-menu","left-action-menu:overflow-menu","overflow-left-action-menu-button",o)},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["left-action-menu"]!==void 0}},"capture:screenshot":{id:"capture:screenshot",labelKey:"capture.screenshot",icon:"screenshot",shortcuts:["Ctrl+Shift+S","Meta+Shift+S"],categories:["tools","capture","capture-screenshot"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("capture"))===null||t===void 0?void 0:t.provides();if(i){var r=i.forDocument(o);r.isMarqueeCaptureActive()?r.disableMarqueeCapture():r.enableMarqueeCapture()}},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins["interaction-manager"].documents[o])===null||t===void 0?void 0:t.activeMode)==="marqueeCapture"}},"document:menu":{id:"document:menu",labelKey:"document.menu",icon:"menu",categories:["document","document-menu"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleMenu("document-menu","document:menu","document-menu-button")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["document-menu"]!==void 0}},"document:open":{id:"document:open",labelKey:"document.open",icon:"fileImport",shortcuts:["Ctrl+O","Meta+O"],categories:["document","document-open"],action:function(e){var t,n=(t=e.registry.getPlugin("document-manager"))===null||t===void 0?void 0:t.provides();n?.openFileDialog()}},"document:close":{id:"document:close",labelKey:"document.close",icon:"x",shortcuts:["Ctrl+W","Meta+W"],categories:["document","document-close"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("document-manager"))===null||t===void 0?void 0:t.provides();i?.closeDocument(o)}},"document:print":{id:"document:print",labelKey:"document.print",icon:"print",shortcuts:["Ctrl+P","Meta+P"],categories:["document","document-print"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).openModal("print-modal")}},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.Print)}},"document:protect":{id:"document:protect",labelKey:"document.protect",icon:"lock",categories:["document","document-protect"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).openModal("protect-modal")}},"document:export":{id:"document:export",labelKey:"document.export",icon:"download",categories:["document","document-export"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("export"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).download()}},"document:capture":{id:"document:capture",labelKey:"capture.screenshot",icon:"screenshot",categories:["document","document-capture"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("capture"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).toggleMarqueeCapture()},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins["interaction-manager"])===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.activeMode)==="marqueeCapture"}},"document:fullscreen":{id:"document:fullscreen",labelKey:"document.fullscreen",icon:function(e){var t;return(t=e.state.plugins.fullscreen)!==null&&t!==void 0&&t.isFullscreen?"fullscreenExit":"fullscreen"},shortcuts:["F11"],categories:["document","document-fullscreen"],action:function(e){var t,n=(t=e.registry.getPlugin("fullscreen"))===null||t===void 0?void 0:t.provides();n&&(n.isFullscreen()?n.exitFullscreen():n.enableFullscreen())},active:function(e){var t,n;return(t=(n=e.state.plugins.fullscreen)===null||n===void 0?void 0:n.isFullscreen)!==null&&t!==void 0&&t}},"panel:toggle-sidebar":{id:"panel:toggle-sidebar",labelKey:"panel.sidebar",icon:"sidebar",categories:["panel","panel-sidebar"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("left","main","sidebar-panel")}},active:function(e){var t=e.state,n=e.documentId;return cn(t.plugins,n,"left","main","sidebar-panel")}},"panel:toggle-search":{id:"panel:toggle-search",labelKey:"panel.search",icon:"search",shortcuts:["Ctrl+F","Meta+F"],categories:["panel","panel-search"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("right","main","search-panel")}},active:function(e){var t=e.state,n=e.documentId;return cn(t.plugins,n,"right","main","search-panel")}},"panel:toggle-comment":{id:"panel:toggle-comment",labelKey:"panel.comment",icon:"comment",categories:["panel","panel-comment"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("right","main","comment-panel")}},active:function(e){var t=e.state,n=e.documentId;return cn(t.plugins,n,"right","main","comment-panel")}},"panel:toggle-annotation-style":{id:"panel:toggle-annotation-style",labelKey:"panel.annotationStyle",icon:"palette",categories:["panel","panel-annotation-style"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("left","main","annotation-panel")}},active:function(e){var t=e.state,n=e.documentId;return cn(t.plugins,n,"left","main","annotation-panel")},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"page:settings":{id:"page:settings",labelKey:"page.settings",icon:"viewSettings",categories:["page","page-settings"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleMenu("page-settings-menu","page:settings","page-settings-button")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["page-settings-menu"]!==void 0}},"spread:none":{id:"spread:none",labelKey:"page.single",icon:"singlePage",categories:["page","spread","spread-none"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("spread"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setSpreadMode(Ve.None)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.spread)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.spreadMode)===Ve.None}},"spread:odd":{id:"spread:odd",labelKey:"page.twoOdd",icon:"doublePage",categories:["page","spread","spread-odd"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("spread"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setSpreadMode(Ve.Odd)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.spread)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.spreadMode)===Ve.Odd}},"spread:even":{id:"spread:even",labelKey:"page.twoEven",icon:"book2",categories:["page","spread","spread-even"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("spread"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setSpreadMode(Ve.Even)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.spread)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.spreadMode)===Ve.Even}},"rotate:clockwise":{id:"rotate:clockwise",labelKey:"rotate.clockwise",icon:"rotateClockwise",shortcuts:["Ctrl+]","Meta+]"],categories:["page","rotate","rotate-clockwise"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("rotate"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).rotateForward()}},"rotate:counter-clockwise":{id:"rotate:counter-clockwise",labelKey:"rotate.counterClockwise",icon:"rotateCounterClockwise",shortcuts:["Ctrl+[","Meta+["],categories:["page","rotate","rotate-counter-clockwise"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("rotate"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).rotateBackward()}},"scroll:vertical":{id:"scroll:vertical",labelKey:"page.vertical",icon:"vertical",categories:["page","scroll","scroll-vertical"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setScrollStrategy(Xe.Vertical)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.scroll)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.strategy)===Xe.Vertical}},"scroll:horizontal":{id:"scroll:horizontal",labelKey:"page.horizontal",icon:"horizontal",categories:["page","scroll","scroll-horizontal"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setScrollStrategy(Xe.Horizontal)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.scroll)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.strategy)===Xe.Horizontal}},"scroll:next-page":{id:"scroll:next-page",labelKey:"page.next",icon:"chevronRight",categories:["page","navigation","navigation-next"],shortcuts:["Ctrl+]","Meta+]","ArrowRight"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).scrollToNextPage()},disabled:function(e){var t,n,o=e.state,i=e.documentId;return((t=o.plugins.scroll)===null||t===void 0||(t=t.documents[i])===null||t===void 0?void 0:t.currentPage)>=((n=o.plugins.scroll)===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.totalPages)}},"scroll:previous-page":{id:"scroll:previous-page",labelKey:"page.previous",icon:"chevronLeft",categories:["page","navigation","navigation-previous"],shortcuts:["Ctrl+[","Meta+[","ArrowLeft"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).scrollToPreviousPage()},disabled:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.scroll)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.currentPage)<=1}},"mode:view":{id:"mode:view",labelKey:"mode.view",categories:["mode","mode-view"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin("ui"))===null||t===void 0?void 0:t.provides(),a=(n=o.getPlugin("interaction-manager"))===null||n===void 0?void 0:n.provides();if(r&&a){var s=a.forDocument(i);s&&(s.activate("pointerMode"),r.forDocument(i).closeToolbarSlot("top","secondary"))}},active:function(e){var t=e.state,n=e.documentId;return!eo(t.plugins,n,"top","secondary")}},"mode:annotate":{id:"mode:annotate",labelKey:"mode.annotate",categories:["mode","mode-annotate","annotation"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.setActiveToolbar("top","secondary","annotation-toolbar",o)},active:function(e){var t=e.state,n=e.documentId;return eo(t.plugins,n,"top","secondary","annotation-toolbar")}},"mode:shapes":{id:"mode:shapes",labelKey:"mode.shapes",categories:["mode","mode-shapes","annotation"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.setActiveToolbar("top","secondary","shapes-toolbar",o)},active:function(e){var t=e.state,n=e.documentId;return eo(t.plugins,n,"top","secondary","shapes-toolbar")}},"mode:redact":{id:"mode:redact",labelKey:"mode.redact",categories:["mode","mode-redact","redaction"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.setActiveToolbar("top","secondary","redaction-toolbar",o)},active:function(e){var t=e.state,n=e.documentId;return eo(t.plugins,n,"top","secondary","redaction-toolbar")}},"tabs:overflow-menu":{id:"tabs:overflow-menu",labelKey:"tabs.overflowMenu",icon:"dots",categories:["ui","ui-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.toggleMenu("mode-tabs-overflow-menu","tabs:overflow-menu","overflow-tabs-button",o)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.ui)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.openMenus["mode-tabs-overflow-menu"])!==void 0}},"annotation:add-highlight":{id:"annotation:add-highlight",labelKey:"annotation.highlight",icon:"highlight",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"highlight"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-markup","annotation-highlight"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ne))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Kt))===null||n===void 0?void 0:n.provides(),l=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&l){var c=a?.forDocument(r),u=s?.forDocument(r);if(c&&u){var h=a.getTool("highlight");if(h&&Mf(h)){var m=h.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var v,f=lt(g);try{var y=function(){var w=v.value;p.wait(function(x){var C=Pe();c.createAnnotation(w.pageIndex,{id:C,created:new Date,flags:["print"],type:E.HIGHLIGHT,blendMode:Z.Multiply,strokeColor:m.strokeColor,opacity:m.opacity,pageIndex:w.pageIndex,rect:w.rect,segmentRects:w.segmentRects,custom:{text:x.join(`
`)}}),c.selectAnnotation(w.pageIndex,C)},ze)};for(f.s();!(v=f.n()).done;)y()}catch(w){f.e(w)}finally{f.f()}u.clear(),c.setActiveTool("highlight"),l.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=c.getActiveTool())===null||b===void 0?void 0:b.id)==="highlight"?c.setActiveTool(null):c.setActiveTool("highlight")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="highlight"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-underline":{id:"annotation:add-underline",labelKey:"annotation.underline",icon:"underline",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"underline"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-markup","annotation-underline"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ne))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Kt))===null||n===void 0?void 0:n.provides(),l=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&l){var c=a?.forDocument(r),u=s?.forDocument(r);if(c&&u){var h=a.getTool("underline");if(h&&Af(h)){var m=h.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var v,f=lt(g);try{var y=function(){var w=v.value;p.wait(function(x){var C=Pe();c.createAnnotation(w.pageIndex,{id:C,created:new Date,flags:["print"],type:E.UNDERLINE,strokeColor:m.strokeColor,opacity:m.opacity,pageIndex:w.pageIndex,rect:w.rect,segmentRects:w.segmentRects,custom:{text:x.join(`
`)}}),c.selectAnnotation(w.pageIndex,C)},ze)};for(f.s();!(v=f.n()).done;)y()}catch(w){f.e(w)}finally{f.f()}u.clear(),c.setActiveTool("underline"),l.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=c.getActiveTool())===null||b===void 0?void 0:b.id)==="underline"?c.setActiveTool(null):c.setActiveTool("underline")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="underline"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-strikeout":{id:"annotation:add-strikeout",labelKey:"annotation.strikeout",icon:"strikethrough",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"strikeout"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-markup","annotation-strikeout"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ne))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Kt))===null||n===void 0?void 0:n.provides(),l=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&l){var c=a?.forDocument(r),u=s?.forDocument(r);if(c&&u){var h=a.getTool("strikeout");if(h&&zf(h)){var m=h.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var v,f=lt(g);try{var y=function(){var w=v.value;p.wait(function(x){var C=Pe();c.createAnnotation(w.pageIndex,{id:C,created:new Date,flags:["print"],type:E.STRIKEOUT,strokeColor:m.strokeColor,opacity:m.opacity,pageIndex:w.pageIndex,rect:w.rect,segmentRects:w.segmentRects,custom:{text:x.join(`
`)}}),c.selectAnnotation(w.pageIndex,C)},ze)};for(f.s();!(v=f.n()).done;)y()}catch(w){f.e(w)}finally{f.f()}u.clear(),c.setActiveTool("strikeout"),l.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=c.getActiveTool())===null||b===void 0?void 0:b.id)==="strikeout"?c.setActiveTool(null):c.setActiveTool("strikeout")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="strikeout"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-squiggly":{id:"annotation:add-squiggly",labelKey:"annotation.squiggly",icon:"squiggly",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"squiggly"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-markup","annotation-squiggly"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ne))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Kt))===null||n===void 0?void 0:n.provides(),l=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&l){var c=a?.forDocument(r),u=s?.forDocument(r);if(c&&u){var h=a.getTool("squiggly");if(h&&Df(h)){var m=h.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var v,f=lt(g);try{var y=function(){var w=v.value;p.wait(function(x){var C=Pe();c.createAnnotation(w.pageIndex,{id:C,created:new Date,flags:["print"],type:E.SQUIGGLY,strokeColor:m.strokeColor,opacity:m.opacity,pageIndex:w.pageIndex,rect:w.rect,segmentRects:w.segmentRects,custom:{text:x.join(`
`)}}),c.selectAnnotation(w.pageIndex,C)},ze)};for(f.s();!(v=f.n()).done;)y()}catch(w){f.e(w)}finally{f.f()}u.clear(),c.setActiveTool("squiggly"),l.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=c.getActiveTool())===null||b===void 0?void 0:b.id)==="squiggly"?c.setActiveTool(null):c.setActiveTool("squiggly")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="squiggly"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-ink":{id:"annotation:add-ink",labelKey:"annotation.ink",icon:"pencilMarker",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"ink"))===null||t===void 0?void 0:t.color}},categories:["annotation","annotation-ink"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="ink"?a.setActiveTool(null):a.setActiveTool("ink"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="ink"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-text":{id:"annotation:add-text",labelKey:"annotation.text",icon:"text",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"freeText"))===null||t===void 0?void 0:t.fontColor}},categories:["annotation","annotation-text"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="freeText"?a.setActiveTool(null):a.setActiveTool("freeText"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="freeText"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-stamp":{id:"annotation:add-stamp",labelKey:"annotation.stamp",icon:"photo",categories:["annotation","annotation-stamp"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="stamp"?a.setActiveTool(null):a.setActiveTool("stamp"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="stamp"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-rectangle":{id:"annotation:add-rectangle",labelKey:"annotation.rectangle",icon:"square",iconProps:function(e){var t,n,o=e.state;return{primaryColor:(t=qe(o.plugins.annotation,"square"))===null||t===void 0?void 0:t.strokeColor,secondaryColor:(n=qe(o.plugins.annotation,"square"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-rectangle"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="square"?a.setActiveTool(null):a.setActiveTool("square"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="square"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-circle":{id:"annotation:add-circle",labelKey:"annotation.circle",icon:"circle",iconProps:function(e){var t,n,o=e.state;return{primaryColor:(t=qe(o.plugins.annotation,"circle"))===null||t===void 0?void 0:t.strokeColor,secondaryColor:(n=qe(o.plugins.annotation,"circle"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-circle"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="circle"?a.setActiveTool(null):a.setActiveTool("circle"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="circle"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-line":{id:"annotation:add-line",labelKey:"annotation.line",icon:"line",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"line"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-shape","annotation-line"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="line"?a.setActiveTool(null):a.setActiveTool("line"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="line"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-arrow":{id:"annotation:add-arrow",labelKey:"annotation.arrow",icon:"lineArrow",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"line"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-shape","annotation-arrow"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="lineArrow"?a.setActiveTool(null):a.setActiveTool("lineArrow"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="lineArrow"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-polygon":{id:"annotation:add-polygon",labelKey:"annotation.polygon",icon:"polygon",iconProps:function(e){var t,n,o=e.state;return{primaryColor:(t=qe(o.plugins.annotation,"polygon"))===null||t===void 0?void 0:t.strokeColor,secondaryColor:(n=qe(o.plugins.annotation,"polygon"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-polygon"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="polygon"?a.setActiveTool(null):a.setActiveTool("polygon"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="polygon"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-polyline":{id:"annotation:add-polyline",labelKey:"annotation.polyline",icon:"zigzag",iconProps:function(e){var t;return{primaryColor:(t=qe(e.state.plugins.annotation,"polyline"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-shape","annotation-polyline"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="polyline"?a.setActiveTool(null):a.setActiveTool("polyline"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ne])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="polyline"},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:delete-selected":{id:"annotation:delete-selected",labelKey:"annotation.deleteSelected",icon:"trash",categories:["annotation","annotation-delete"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides(),r=i?.forDocument(o);if(r){var a=r.getSelectedAnnotation();a&&r.deleteAnnotation(a.object.pageIndex,a.object.id)}},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:delete-all-selected":{id:"annotation:delete-all-selected",labelKey:"annotation.deleteAllSelected",icon:"trash",categories:["annotation","annotation-delete","annotation-group"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides(),r=i?.forDocument(o);if(r){var a=r.getSelectedAnnotations();a.length!==0&&(r.deleteAnnotations(a.map(function(s){return{pageIndex:s.object.pageIndex,id:s.object.id}})),r.deselectAnnotation())}},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:toggle-group":{id:"annotation:toggle-group",labelKey:function(e){var t,n=e.registry,o=e.documentId;return((t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o).getGroupingAction())==="ungroup"?"annotation.ungroup":"annotation.group"},icon:function(e){var t,n=e.registry,o=e.documentId;return((t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o).getGroupingAction())==="ungroup"?"ungroup":"group"},categories:["annotation","annotation-group"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o);if(i){var r=i.getGroupingAction();if(r==="ungroup"){var a=i.getSelectedAnnotations();a.length>0&&i.ungroupAnnotations(a[0].object.id)}else r==="group"&&i.groupAnnotations()}},disabled:function(e){var t,n=e.registry,o=e.state,i=e.documentId;return!!pe(o,i,N.ModifyAnnotations)||((t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(i).getGroupingAction())==="disabled"}},"annotation:overflow-tools":{id:"annotation:overflow-tools",labelKey:"annotation.moreTools",icon:"dots",categories:["annotation","annotation-overflow"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();if(i){var r=i.forDocument(o);r&&r.toggleMenu("annotation-tools-menu","annotation:overflow-tools","overflow-annotation-tools")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["annotation-tools-menu"]!==void 0},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:overflow-shapes":{id:"annotation:overflow-shapes",labelKey:"annotation.moreTools",icon:"dots",categories:["annotation","annotation-shape","annotation-overflow"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();if(i){var r=i.forDocument(o);r&&r.toggleMenu("shapes-tools-menu","annotation:overflow-shapes","overflow-shapes-tools")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["shapes-tools-menu"]!==void 0},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:add-link":{id:"annotation:add-link",labelKey:"annotation.addLink",icon:"link",categories:["annotation","annotation-link"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).openModal("link-modal")},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:toggle-annotation-style":{id:"annotation:toggle-annotation-style",labelKey:"annotation.style",icon:"palette",categories:["annotation","annotation-style"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("left","main","annotation-panel")}},active:function(e){var t=e.state,n=e.documentId;return cn(t.plugins,n,"left","main","annotation-panel")},visible:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o),r=i?.getSelectedAnnotation();return!r||r.object.type!==E.LINK},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:toggle-link":{id:"annotation:toggle-link",labelKey:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o);if(!i)return"annotation.addLink";var r=i.getSelectedAnnotation();return r&&i.hasAttachedLinks(r.object.id)?"annotation.removeLink":"annotation.addLink"},icon:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o);if(!i)return"link";var r=i.getSelectedAnnotation();return r&&i.hasAttachedLinks(r.object.id)?"linkOff":"link"},categories:["annotation","annotation-link"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ne))===null||t===void 0?void 0:t.provides(),a=(n=o.getPlugin("ui"))===null||n===void 0?void 0:n.provides();if(r&&a){var s=r.forDocument(i),l=s.getSelectedAnnotation();l&&(s.hasAttachedLinks(l.object.id)?s.deleteAttachedLinks(l.object.id):a.forDocument(i).openModal("link-modal"))}},visible:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o),r=i?.getSelectedAnnotation();return!r||r.object.type!==E.LINK},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyAnnotations)}},"annotation:toggle-comment":{id:"annotation:toggle-comment",labelKey:"annotation.comment",icon:"comment",categories:["annotation","annotation-comment"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(st);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("right","main","comment-panel")}},active:function(e){var t=e.state,n=e.documentId;return cn(t.plugins,n,"right","main","comment-panel")},visible:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides().forDocument(o),r=i?.getSelectedAnnotation();return!r||r.object.type!==E.LINK}},"annotation:goto-link":{id:"annotation:goto-link",labelKey:"annotation.gotoLink",icon:"externalLink",categories:["annotation","annotation-link"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ne))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin("scroll"))===null||n===void 0?void 0:n.provides();if(a){var l=a.forDocument(r),c=l.getSelectedAnnotation();if(c){var u=null;if(Tr(c))u=c.object;else{var h=l.getAttachedLinks(c.object.id);h.length>0&&(u=h[0].object)}if((o=u)!==null&&o!==void 0&&o.target){var m=u.target;if(m.type==="action"){var g=m.action;if(g.type===Zt.URI)window.open(g.uri,"_blank","noopener,noreferrer");else if(g.type===Zt.Goto&&s){var p=g.destination;s.forDocument(r).scrollToPage({pageNumber:p.pageIndex+1,behavior:"smooth"})}}else if(m.type==="destination"&&s){var v=m.destination;s.forDocument(r).scrollToPage({pageNumber:v.pageIndex+1,behavior:"smooth"})}}}}},visible:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ne))===null||t===void 0?void 0:t.provides();if(!i)return!1;var r=i.forDocument(o),a=r?.getSelectedAnnotation();return!!a&&(a.object.type===E.LINK||r.hasAttachedLinks(a.object.id))}},"redaction:redact-area":{id:"redaction:redact-area",labelKey:"redaction.area",icon:"redactArea",categories:["redaction","redaction-area"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).toggleMarqueeRedact()},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[gn])===null||t===void 0?void 0:t.documents[o];return i?.activeType===De.MarqueeRedact},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyContents)}},"redaction:redact-text":{id:"redaction:redact-text",labelKey:"redaction.text",icon:"redact",categories:["redaction","redaction-text"],action:function(e){var t,n,o,i,r=e.registry,a=e.documentId,s=(t=r.getPlugin("redaction"))===null||t===void 0?void 0:t.provides(),l=(n=r.getPlugin(Kt))===null||n===void 0?void 0:n.provides(),c=(o=r.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&l&&c){var u=s.forDocument(a),h=l?.forDocument(a);((i=h?.getFormattedSelection())!==null&&i!==void 0?i:[]).length>0?(u.queueCurrentSelectionAsPending(),c.setActiveToolbar("top","secondary","redaction-toolbar",a)):u.toggleRedactSelection()}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[gn])===null||t===void 0?void 0:t.documents[o];return i?.activeType===De.RedactSelection},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.ModifyContents)}},"redaction:apply-all":{id:"redaction:apply-all",labelKey:"redaction.applyAll",icon:"check",categories:["redaction","redaction-apply"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).commitAllPending()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[gn])===null||t===void 0?void 0:t.documents[o];return i?.pendingCount===0||pe(n,o,N.ModifyContents)}},"redaction:clear-all":{id:"redaction:clear-all",labelKey:"redaction.clearAll",icon:"x",categories:["redaction","redaction-clear"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).clearPending()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[gn])===null||t===void 0?void 0:t.documents[o];return i?.pendingCount===0||pe(n,o,N.ModifyContents)}},"redaction:delete-selected":{id:"redaction:delete-selected",labelKey:"redaction.deleteSelected",icon:"trash",categories:["redaction","redaction-delete"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides(),r=i?.forDocument(o).getSelectedPending();r&&i?.forDocument(o).removePending(r.page,r.id)}},"redaction:commit-selected":{id:"redaction:commit-selected",labelKey:"redaction.commitSelected",icon:"check",categories:["redaction","redaction-commit"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides(),r=i?.forDocument(o).getSelectedPending();r&&i?.forDocument(o).commitPending(r.page,r.id)}},"selection:copy-to-clipboard":{id:"selection:copy-to-clipboard",labelKey:"selection.copyToClipboard",icon:"copy",shortcuts:["Ctrl+C","Meta+C"],categories:["selection","selection-copy-to-clipboard"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin("selection"),i=o?.provides().forDocument(n);i?.copyToClipboard()},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.CopyContents)}},"selection:copy":{id:"selection:copy",labelKey:"selection.copy",icon:"copy",categories:["selection","selection-copy"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin("selection"),i=o?.provides().forDocument(n);i?.copyToClipboard(),i?.clear()},disabled:function(e){var t=e.state,n=e.documentId;return pe(t,n,N.CopyContents)}},"history:undo":{id:"history:undo",labelKey:"history.undo",icon:"arrowBackUp",shortcuts:["Ctrl+Z","Meta+Z"],categories:["history","history-undo"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(mn))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).undo()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[mn])===null||t===void 0?void 0:t.documents[o];return!(i!=null&&i.global.canUndo)}},"history:redo":{id:"history:redo",labelKey:"history.redo",icon:"arrowForwardUp",shortcuts:["Ctrl+Y","Meta+Shift+Z"],categories:["history","history-redo"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(mn))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).redo()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[mn])===null||t===void 0?void 0:t.documents[o];return!(i!=null&&i.global.canRedo)}}},Vb={"zoom.level":function(e){var t,n,o=e.state,i=e.documentId,r=i&&(t=(n=o.plugins[kr])===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.currentZoomLevel)!==null&&t!==void 0?t:1;return{level:Math.round(100*r)}}},Em={colors:{background:{app:"#f3f4f6",surface:"#ffffff",surfaceAlt:"#f1f3f5",elevated:"#ffffff",overlay:"rgba(0, 0, 0, 0.5)",input:"#ffffff"},foreground:{primary:"#111827",secondary:"#374151",muted:"#6b7280",disabled:"#9ca3af",onAccent:"#ffffff"},border:{default:"#d1d5db",subtle:"#e5e7eb",strong:"#9ca3af"},accent:{primary:"#3b82f6",primaryHover:"#2563eb",primaryActive:"#1d4ed8",primaryLight:"#eff6ff",primaryForeground:"#ffffff"},interactive:{hover:"#f3f4f6",active:"#e5e7eb",selected:"#eff6ff",focus:"#3b82f6",focusRing:"#bfdbfe"},state:{error:"#ef4444",errorLight:"#fef2f2",warning:"#f59e0b",warningLight:"#fffbeb",success:"#22c55e",successLight:"#f0fdf4",info:"#3b82f6",infoLight:"#eff6ff"},tooltip:{background:"#111827",foreground:"#ffffff"},scrollbar:{track:"#f3f4f6",thumb:"#d1d5db",thumbHover:"#9ca3af"}}},Rm={colors:{background:{app:"#111827",surface:"#1f2937",surfaceAlt:"#374151",elevated:"#1f2937",overlay:"rgba(0, 0, 0, 0.7)",input:"#374151"},foreground:{primary:"#f9fafb",secondary:"#e5e7eb",muted:"#9ca3af",disabled:"#6b7280",onAccent:"#111827"},border:{default:"#4b5563",subtle:"#374151",strong:"#6b7280"},accent:{primary:"#60a5fa",primaryHover:"#3b82f6",primaryActive:"#2563eb",primaryLight:"#1e3a5f",primaryForeground:"#111827"},interactive:{hover:"#374151",active:"#4b5563",selected:"#1e3a5f",focus:"#60a5fa",focusRing:"#1e40af"},state:{error:"#f87171",errorLight:"#7f1d1d",warning:"#fbbf24",warningLight:"#78350f",success:"#4ade80",successLight:"#14532d",info:"#60a5fa",infoLight:"#1e3a5f"},tooltip:{background:"#f9fafb",foreground:"#111827"},scrollbar:{track:"#1f2937",thumb:"#4b5563",thumbHover:"#6b7280"}}};function _m(e,t){var n=O({},e);for(var o in t){var i=t[o];i&&Qt(i)==="object"&&!Array.isArray(i)?n[o]=_m(e[o]||{},i):i!==void 0&&(n[o]=i)}return n}function Nm(e,t){return{colors:_m(e.colors,t)}}function dl(e){return e==="system"?typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}function ul(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Kb(e){return`:host {
`.concat((function(t){var n=[];return(function o(i,r){for(var a=0,s=Object.entries(i);a<s.length;a++){var l=U(s[a],2),c=l[0],u=l[1];u&&Qt(u)==="object"?o(u,"".concat(r,"-").concat(ul(c))):u!==void 0&&n.push("  --ep".concat(r,"-").concat(ul(c),": ").concat(u,";"))}})(t.colors,""),n.join(`
`)})(e),`
}`)}function Zb(e){var t=e.documentStates,n=e.activeDocumentId,o=e.visibility,i=o===void 0?"multiple":o,r=e.allowOpenFile,a=r===void 0||r,s=In().provides,l=Y(function(h){s?.setActiveDocument(h)},[s]),c=Y(function(h){s?.closeDocument(h)},[s]),u=Y(function(){s?.openFileDialog()},[s]);return i==="always"||i==="multiple"&&t.length>1?d("div",{className:"bg-bg-surface-alt flex items-end pr-2 pt-2"},d("div",{className:"flex flex-1 items-end overflow-x-auto pl-4"},t.map(function(h){var m,g,p=n===h.id;return d("div",{key:h.id,onClick:function(){return l(h.id)},role:"tab",tabIndex:0,"aria-selected":p,onKeyDown:function(v){v.key!=="Enter"&&v.key!==" "||(v.preventDefault(),l(h.id))},className:"group relative flex min-w-[120px] max-w-[240px] cursor-pointer items-center gap-2 rounded-t-lg px-4 py-2 text-sm font-medium transition-all ".concat(p?"bg-bg-surface text-fg-primary z-10":"bg-bg-surface-alt text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary")},d("span",{className:"min-w-0 flex-1 truncate"},(m=h.name)!==null&&m!==void 0?m:"Document ".concat(h.id.slice(0,8))),p&&d("button",{onClick:function(v){v.stopPropagation(),c(h.id)},"aria-label":"Close ".concat((g=h.name)!==null&&g!==void 0?g:"document"),className:"hover:bg-interactive-hover flex-shrink-0 cursor-pointer rounded-full p-1 transition-all ".concat(p?"opacity-100":"opacity-0 group-hover:opacity-100")},d(oe,{icon:"x",size:14})))}),a&&d("button",{onClick:u,className:"text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary mb-1.5 ml-1 flex-shrink-0 cursor-pointer rounded p-1.5 transition-colors","aria-label":"Open File",title:"Open File"},d(oe,{icon:"plus",size:14})))):null}function Yb(){var e=In().provides,t=Me().translate;return d("div",{className:"bg-bg-app flex h-full w-full items-center justify-center"},d("div",{className:"flex max-w-sm flex-col items-center text-center"},d("div",{className:"bg-accent-light mb-6 rounded-full p-5"},d(oe,{icon:"file",size:48,className:"text-accent"})),d("h2",{className:"text-fg-primary mb-2 text-xl font-semibold"},t("emptyState.title")),d("p",{className:"text-fg-secondary mb-6 text-sm leading-relaxed"},t("emptyState.description"),d("br",null),t("emptyState.descriptionMulti")),d("button",{onClick:function(){e?.openFileDialog()},className:"bg-accent hover:bg-accent-hover text-accent-fg inline-flex cursor-pointer items-center gap-2 rounded-md px-5 py-2.5 text-sm font-medium shadow-sm transition-all"},d(oe,{icon:"plus",size:16}),t("emptyState.openButton")),d("p",{className:"text-fg-muted mt-4 text-xs"},t("emptyState.supportedFormats"))))}function Xb(e){var t=e.documentState,n=In().provides,o=Me().translate,i=U(R(""),2),r=i[0],a=i[1],s=U(R(!1),2),l=s[0],c=s[1];if(!t)return null;var u=t.name,h=t.errorCode,m=t.passwordProvided,g=h===J.Password,p=g&&!m,v=g&&m;if(!g)return d("div",{className:"bg-bg-app flex h-full items-center justify-center p-8"},d("div",{className:"bg-bg-surface border-border-default flex max-w-sm flex-col items-center rounded-xl border p-6 text-center shadow-lg"},d("div",{className:"bg-state-error-light mb-4 rounded-full p-4"},d(oe,{icon:"alertTriangle",size:28,className:"text-state-error"})),d("h3",{className:"text-fg-primary text-lg font-semibold"},o("documentError.title")),d("p",{className:"text-fg-secondary mt-2 text-sm"},t.error||o("documentError.unknown")),h&&d("p",{className:"text-fg-muted mt-1 text-xs"},o("documentError.errorCode",{params:{code:String(h)}})),d("button",{onClick:function(){return n?.closeDocument(t.id)},className:"bg-accent hover:bg-accent-hover text-accent-fg mt-5 w-full cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors"},o("documentError.close"))));var f=(function(){var y=ml(Nn().m(function b(){return Nn().w(function(w){for(;;)switch(w.n){case 0:if(n&&r.trim()){w.n=1;break}return w.a(2);case 1:c(!0),n.retryDocument(t.id,{password:r}).wait(function(){a(""),c(!1)},function(x){console.error("Retry failed:",x),c(!1)});case 2:return w.a(2)}},b)}));return function(){return y.apply(this,arguments)}})();return d("div",{className:"bg-bg-app flex h-full items-center justify-center p-8"},d("div",{className:"bg-bg-surface border-border-default w-full max-w-sm rounded-xl border p-6 shadow-lg"},d("div",{className:"flex flex-col items-center text-center"},d("div",{className:"bg-accent-light mb-4 rounded-full p-4"},d(oe,{icon:"lock",size:28,className:"text-accent"})),d("h3",{className:"text-fg-primary text-lg font-semibold"},o("passwordPrompt.title")),u&&d("p",{className:"text-fg-muted mt-1 text-sm"},u)),d("p",{className:"text-fg-secondary mt-4 text-center text-sm"},p&&o("passwordPrompt.required"),v&&o("passwordPrompt.incorrect")),d("div",{className:"mt-5"},d("label",{className:"text-fg-primary mb-1.5 block text-sm font-medium"},o("passwordPrompt.label")),d("input",{type:"password",value:r,onInput:function(y){return a(y.target.value)},onKeyDown:function(y){return y.key==="Enter"&&!l&&r.trim()&&f()},disabled:l,placeholder:o("passwordPrompt.placeholder"),className:"bg-bg-input border-border-default focus:border-accent focus:ring-accent text-fg-primary placeholder:text-fg-muted block w-full rounded-md border px-3 py-2.5 text-sm focus:outline-none focus:ring-1 disabled:opacity-50",autoFocus:!0})),v&&d("div",{className:"bg-state-error-light border-state-error mt-3 flex items-center gap-2 rounded-md border p-3"},d(oe,{icon:"alertTriangle",size:16,className:"text-state-error flex-shrink-0"}),d("p",{className:"text-state-error text-sm"},o("passwordPrompt.incorrectWarning"))),d("div",{className:"mt-6 flex gap-3"},d("button",{onClick:function(){return n?.closeDocument(t.id)},disabled:l,className:"border-border-default text-fg-secondary hover:bg-interactive-hover flex-1 cursor-pointer rounded-md border px-4 py-2.5 text-sm font-medium transition-colors disabled:opacity-50"},o("passwordPrompt.cancel")),d("button",{onClick:f,disabled:l||!r.trim(),className:"bg-accent hover:bg-accent-hover text-accent-fg flex-1 cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors disabled:cursor-not-allowed disabled:opacity-50"},o(l?"passwordPrompt.opening":"passwordPrompt.open")))))}function Qb(e){var t=e.documentId,n=e.className,o=It("mode:view",t),i=It("mode:annotate",t),r=It("mode:shapes",t),a=It("mode:redact",t),s=It("tabs:overflow-menu",t),l=K(function(){return[o,i,r,a].find(function(h){return h?.active})||o},[o,i,r,a]),c=Y(function(h){h.preventDefault(),h.stopPropagation(),s&&!s.disabled&&s.execute()},[s]);if(!s||!s.visible)return null;var u=s.active;return d("div",{style:{maxWidth:"100px",width:"100px"},className:n},d(Oe,{className:"bg-bg-surface col-start-1 row-start-1 !w-full appearance-none rounded-md py-1.5 pl-3 pr-2 text-[13px] ".concat(u?"bg-interactive-selected ring-accent border-none shadow ring":"border-border-default outline-border-default hover:bg-interactive-hover hover:ring-accent outline outline-1 -outline-offset-1 hover:ring"," flex flex-row items-center justify-between gap-2"),onClick:c,disabled:s.disabled,style:{height:34}},d("span",{className:"min-w-0 flex-1 truncate text-left ".concat(u?"text-accent":"text-fg-primary")},l?.label),d(oe,{icon:"chevronDown",className:"h-4 w-4 ".concat(u?"text-accent":"text-fg-secondary")})))}function Jb(e){var t=e.documentId,n=Ah().provides,o=U(R(!1),2),i=o[0],r=o[1],a=U(R(null),2),s=a[0],l=a[1],c=U(R(null),2),u=c[0],h=c[1],m=U(R(null),2),g=m[0],p=m[1],v=V(null),f=V(null),y=Me(t).translate,b=function(){v.current&&(URL.revokeObjectURL(v.current),v.current=null),g&&(URL.revokeObjectURL(g),p(null)),r(!1),l(null),h(null)};return L(function(){if(n)return n.onCaptureArea(function(w){var x=w.pageIndex,C=w.rect,S=w.blob;l({pageIndex:x,rect:C,blob:S});var M=URL.createObjectURL(S);v.current=M,h(M),r(!0)})},[n]),d(te,null,d(Zn,{open:i,onClose:b,title:y("capture.title"),className:"md:w-[48rem]"},d("div",{className:"space-y-6"},d("div",{className:"flex justify-center"},u&&d("img",{src:u,onLoad:function(){v.current&&(URL.revokeObjectURL(v.current),v.current=null)},alt:"Captured PDF area",style:{maxWidth:"100%",maxHeight:"400px",border:"1px solid #e5e7eb",borderRadius:"4px",display:"block"}})),d("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},d(Oe,{onClick:b,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},y("capture.cancel")),d(Oe,{onClick:function(){if(s&&f.current){var w=URL.createObjectURL(s.blob);p(w),f.current.href=w,f.current.download="pdf-capture-page-".concat(s.pageIndex+1,".png"),f.current.click(),b()}},disabled:!s,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},y("capture.download"))))),d("a",{ref:f,style:{display:"none"},href:"",download:""}))}var fo=[{flag:N.Print,labelKey:"protect.permissions.print"},{flag:N.PrintHighQuality,labelKey:"protect.permissions.printHighQuality"},{flag:N.CopyContents,labelKey:"protect.permissions.copy"},{flag:N.ExtractForAccessibility,labelKey:"protect.permissions.accessibility"},{flag:N.ModifyContents,labelKey:"protect.permissions.modify"},{flag:N.ModifyAnnotations,labelKey:"protect.permissions.annotations"},{flag:N.FillForms,labelKey:"protect.permissions.fillForms"},{flag:N.AssembleDocument,labelKey:"protect.permissions.assemble"}];function Om(e){var t=e.permissions,n=e.translate,o=e.label;return d("div",null,d("label",{className:"text-fg-secondary mb-2 block text-sm font-medium"},o??n("security.viewPermissions.restrictedActions")),d("div",{className:"grid grid-cols-1 gap-1 sm:grid-cols-2"},fo.map(function(i){var r,a=(r=i.flag,(t&r)!==0);return d("div",{key:i.flag,className:"flex items-center rounded-md p-2 ".concat(a?"text-fg-primary":"text-fg-muted")},d(oe,{icon:a?"check":"x",className:"mr-2 h-4 w-4 flex-shrink-0 ".concat(a?"text-state-success":"text-state-error")}),d("span",{className:"text-sm"},n(i.labelKey)))})))}function e0(e){var t,n,o,i=e.documentId,r=e.isOpen,a=e.onClose,s=e.onExited,l=Me(i).translate,c=In().provides,u=je(i),h=u?.document,m=(t=h?.isEncrypted)!==null&&t!==void 0&&t,g=(n=h?.isOwnerUnlocked)!==null&&n!==void 0&&n,p=(o=h?.permissions)!==null&&o!==void 0?o:0,v=U(R("edit-protection"),2),f=v[0],y=v[1],b=U(R(""),2),w=b[0],x=b[1],C=U(R(!1),2),S=C[0],M=C[1],A=U(R(!1),2),I=A[0],P=A[1],z=U(R(null),2),D=z[0],T=z[1],_=U(R(!1),2),H=_[0],$=_[1],j=U(R(""),2),F=j[0],B=j[1],ge=U(R(""),2),ue=ge[0],be=ge[1],ke=U(R(!1),2),$e=ke[0],yt=ke[1],bt=U(R(!1),2),Je=bt[0],$t=bt[1],Mt=U(R(""),2),se=Mt[0],we=Mt[1],_e=U(R(""),2),ye=_e[0],X=_e[1],le=U(R(!1),2),ae=le[0],ve=le[1],Ue=R(new Set(fo.map(function(ce){return ce.flag}))),Ke=U(Ue,2),Dt=Ke[0],Ft=Ke[1],At=U(R(!1),2),at=At[0],jt=At[1],Gr=U(R(null),2),Pn=Gr[0],Ut=Gr[1];L(function(){r&&(x(""),M(!1),P(!1),T(null),$(!1),B(""),be(""),yt(!1),$t(!1),we(""),X(""),ve(!1),Ft(new Set(fo.map(function(ce){return ce.flag}))),jt(!1),Ut(null),y(m&&!g?"unlock":m&&g?"choose-action":"edit-protection"))},[r,m,g]);var ri=F===ue,ai=se===ye,Fm=!H||F.length>0&&ri,jm=!Je||se.length>0&&ai,Vr=(H||Je)&&Fm&&jm&&!at,Kr=function(){c&&w&&(P(!0),T(null),c.unlockOwnerPermissions(i,w).wait(function(ce){P(!1),ce?y("choose-action"):T(l("security.unlock.invalidPassword"))},function(ce){var He,Ze;P(!1),T((He=(Ze=ce.reason)===null||Ze===void 0?void 0:Ze.message)!==null&&He!==void 0?He:l("security.unlock.failed"))}))},Um=function(){if(Vr&&c){var ce=0;if(Je){var He,Ze=lt(Dt);try{for(Ze.s();!(He=Ze.n()).done;)ce|=He.value}catch(Mn){Ze.e(Mn)}finally{Ze.f()}}else ce=N.AllowAll;var Ht=H?F:"",Wm=Je?se:H?F:"";jt(!0),Ut(null),c.setDocumentEncryption(i,{userPassword:Ht,ownerPassword:Wm,allowedFlags:ce}).wait(function(Mn){jt(!1),Mn?a?.():Ut(l("protect.applyFailed"))},function(Mn){var si,li;jt(!1),Ut((si=(li=Mn.reason)===null||li===void 0?void 0:li.message)!==null&&si!==void 0?si:l("protect.applyFailed"))})}},Hm=function(){c&&(jt(!0),Ut(null),c.removeEncryption(i).wait(function(ce){jt(!1),ce?a?.():Ut(l("protect.removeFailed"))},function(ce){var He,Ze;jt(!1),Ut((He=(Ze=ce.reason)===null||Ze===void 0?void 0:Ze.message)!==null&&He!==void 0?He:l("protect.removeFailed"))}))},Bm=function(){return d("div",{className:"space-y-6"},d("div",{className:"bg-bg-subtle rounded-lg"},d("label",{className:"flex cursor-pointer items-start"},d("input",{type:"checkbox",checked:H,onChange:function(ce){return $(ce.target.checked)},className:"accent-accent mr-3 mt-0.5"}),d("div",{className:"flex-1"},d("span",{className:"text-fg-primary block font-medium"},l("protect.openPassword.title")),d("span",{className:"text-fg-muted text-sm"},l("protect.openPassword.description")))),H&&d("div",{className:"mt-4 space-y-3 pl-6"},d("div",null,d("label",{className:"text-fg-secondary mb-1 block text-sm"},l("protect.openPassword.label")),d("div",{className:"relative"},d("input",{type:$e?"text":"password",value:F,onInput:function(ce){return B(ce.target.value)},placeholder:l("protect.openPassword.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1"}),d("button",{type:"button",onClick:function(){return yt(!$e)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},d(oe,{icon:$e?"eye-off":"eye",className:"h-4 w-4"})))),d("div",null,d("label",{className:"text-fg-secondary mb-1 block text-sm"},l("protect.openPassword.confirm")),d("input",{type:$e?"text":"password",value:ue,onInput:function(ce){return be(ce.target.value)},placeholder:l("protect.openPassword.confirmPlaceholder"),className:"border-border-default bg-bg-input text-fg-primary focus:ring-accent w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-1 ".concat(ue&&!ri?"border-state-error focus:border-state-error":"focus:border-accent")}),ue&&!ri&&d("p",{className:"text-state-error mt-1 text-xs"},l("protect.passwordMismatch"))))),d("div",{className:"bg-bg-subtle rounded-lg"},d("label",{className:"flex cursor-pointer items-start"},d("input",{type:"checkbox",checked:Je,onChange:function(ce){return $t(ce.target.checked)},className:"accent-accent mr-3 mt-0.5"}),d("div",{className:"flex-1"},d("span",{className:"text-fg-primary block font-medium"},l("protect.permissions.title")),d("span",{className:"text-fg-muted text-sm"},l("protect.permissions.description")))),Je&&d("div",{className:"mt-4 space-y-4 pl-6"},d("div",{className:"border-border-subtle border-b pb-4"},d("div",null,d("label",{className:"text-fg-secondary mb-1 block text-sm"},l("protect.ownerPassword.label")),d("div",{className:"relative"},d("input",{type:ae?"text":"password",value:se,onInput:function(ce){return we(ce.target.value)},placeholder:l("protect.ownerPassword.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1"}),d("button",{type:"button",onClick:function(){return ve(!ae)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},d(oe,{icon:ae?"eye-off":"eye",className:"h-4 w-4"})))),d("div",{className:"mt-3"},d("label",{className:"text-fg-secondary mb-1 block text-sm"},l("protect.ownerPassword.confirm")),d("input",{type:ae?"text":"password",value:ye,onInput:function(ce){return X(ce.target.value)},placeholder:l("protect.ownerPassword.confirmPlaceholder"),className:"border-border-default bg-bg-input text-fg-primary focus:ring-accent w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-1 ".concat(ye&&!ai?"border-state-error focus:border-state-error":"focus:border-accent")}),ye&&!ai&&d("p",{className:"text-state-error mt-1 text-xs"},l("protect.passwordMismatch")))),d("div",null,d("label",{className:"text-fg-secondary mb-2 block text-sm font-medium"},l("protect.permissions.allowedActions")),d("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2"},fo.map(function(ce){return d("label",{key:ce.flag,className:"hover:bg-bg-surface flex cursor-pointer items-center rounded-md p-2 transition-colors"},d("input",{type:"checkbox",checked:Dt.has(ce.flag),onChange:function(){return He=ce.flag,void Ft(function(Ze){var Ht=new Set(Ze);return Ht.has(He)?Ht.delete(He):(Ht.add(He),He===N.PrintHighQuality&&Ht.add(N.Print)),Ht});var He},className:"accent-accent mr-2"}),d("span",{className:"text-fg-primary text-sm"},l(ce.labelKey)))}))))),H&&Je&&d("div",{className:"bg-state-info-light flex items-start space-x-2 rounded-md p-3"},d(oe,{icon:"info",className:"text-accent mt-0.5 h-4 w-4 flex-shrink-0"}),d("p",{className:"text-fg-secondary text-sm"},l("protect.bothPasswordsNote"))),!H&&!Je&&!Pn&&d("div",{className:"bg-state-warning-light flex items-start space-x-2 rounded-md p-3"},d(oe,{icon:"alertTriangle",className:"text-state-warning mt-0.5 h-4 w-4 flex-shrink-0"}),d("p",{className:"text-fg-secondary text-sm"},l("protect.noProtectionSelected"))),Pn&&d("div",{className:"bg-state-error-light flex items-start space-x-2 rounded-md p-3"},d(oe,{icon:"alertTriangle",className:"text-state-error mt-0.5 h-4 w-4 flex-shrink-0"}),d("p",{className:"text-state-error text-sm"},Pn)),d("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},m&&g&&d(Oe,{onClick:function(){return y("choose-action")},disabled:at,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},l("common.back")),d(Oe,{onClick:Um,disabled:!Vr,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},at&&d(vn,{size:"sm"}),d("span",null,l(at?"protect.applying":"protect.apply")))))};return d(Zn,{open:r!=null&&r,title:(function(){switch(f){case"unlock":return l("protect.encrypted.title");case"choose-action":return l("protect.modifyProtection.title");case"remove-protection":return l("protect.removeProtection.title");default:return l("protect.title")}})(),onClose:a,onExited:s,className:"md:w-[36rem]"},(function(){switch(f){case"unlock":return d("div",{className:"space-y-5"},d("p",{className:"text-fg-secondary text-sm"},l("protect.encrypted.description")),d("div",null,d("label",{className:"text-fg-primary mb-2 block text-sm font-medium"},l("protect.encrypted.enterOwnerPassword")),d("div",{className:"relative"},d("input",{type:S?"text":"password",value:w,onInput:function(ce){return x(ce.target.value)},placeholder:l("protect.ownerPassword.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1",onKeyDown:function(ce){ce.key==="Enter"&&w&&Kr()}}),d("button",{type:"button",onClick:function(){return M(!S)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},d(oe,{icon:S?"eye-off":"eye",className:"h-4 w-4"}))),D&&d("p",{className:"text-state-error mt-2 text-xs"},D)),d(Om,{permissions:p,translate:l}),d("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},d(Oe,{onClick:Kr,disabled:!w||I,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},I&&d(vn,{size:"sm"}),d("span",null,l("protect.encrypted.unlockAndEdit")))));case"choose-action":return d("div",{className:"space-y-5"},d("p",{className:"text-fg-secondary text-sm"},l("protect.modifyProtection.description")),d("div",{className:"space-y-3"},d("button",{type:"button",onClick:function(){return y("edit-protection")},className:"border-border-default hover:border-accent hover:bg-bg-subtle flex w-full items-center rounded-lg border p-4 text-left transition-colors"},d("div",{className:"bg-accent/10 mr-4 rounded-full p-2"},d(oe,{icon:"lock",size:20,className:"text-accent"})),d("div",null,d("span",{className:"text-fg-primary block font-medium"},l("protect.modifyProtection.changeOption")),d("span",{className:"text-fg-muted text-sm"},l("protect.modifyProtection.changeDescription")))),d("button",{type:"button",onClick:function(){return y("remove-protection")},className:"border-border-default hover:border-state-error hover:bg-state-error-light flex w-full items-center rounded-lg border p-4 text-left transition-colors"},d("div",{className:"bg-state-error-light mr-4 rounded-full p-2"},d(oe,{icon:"unlock",size:20,className:"text-state-error"})),d("div",null,d("span",{className:"text-fg-primary block font-medium"},l("protect.modifyProtection.removeOption")),d("span",{className:"text-fg-muted text-sm"},l("protect.modifyProtection.removeDescription"))))),d("div",{className:"border-border-subtle flex justify-end border-t pt-4"},d(Oe,{onClick:a,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm"},l("protect.cancel"))));case"remove-protection":return d("div",{className:"space-y-5"},d("div",{className:"bg-state-warning-light flex items-start space-x-3 rounded-lg p-4"},d(oe,{icon:"alertTriangle",className:"text-state-warning mt-0.5 h-5 w-5 flex-shrink-0"}),d("div",null,d("p",{className:"text-fg-primary font-medium"},l("protect.removeProtection.warning")),d("p",{className:"text-fg-secondary mt-1 text-sm"},l("protect.removeProtection.description")))),Pn&&d("div",{className:"bg-state-error-light flex items-start space-x-2 rounded-md p-3"},d(oe,{icon:"alertTriangle",className:"text-state-error mt-0.5 h-4 w-4 flex-shrink-0"}),d("p",{className:"text-state-error text-sm"},Pn)),d("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},d(Oe,{onClick:function(){return y("choose-action")},disabled:at,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},l("common.back")),d(Oe,{onClick:Hm,disabled:at,className:"bg-state-error text-fg-on-accent hover:bg-state-error/90 flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},at&&d(vn,{size:"sm"}),d("span",null,l("protect.removeProtection.confirm")))));default:return Bm()}})())}function t0(e){var t,n,o,i=e.documentId,r=Me(i).translate,a=sn().provides,s=je(i),l=s?.document,c=(t=l?.isEncrypted)!==null&&t!==void 0&&t,u=(n=l?.isOwnerUnlocked)!==null&&n!==void 0&&n,h=(((o=l?.permissions)!==null&&o!==void 0?o:N.AllowAll)&N.AllowAll)!==N.AllowAll,m=c&&!u&&h,g=Y(function(){a?.forDocument(i).disableOverlay("unlock-owner-overlay")},[i,a]),p=Y(function(){a?.forDocument(i).disableOverlay("unlock-owner-overlay"),a?.forDocument(i).openModal("view-permissions-modal")},[i,a]);return m?d("div",{className:""},d("div",{className:"bg-bg-surface border-border-default flex max-w-sm items-start gap-3 rounded-lg border p-4 shadow-lg"},d("div",{className:"bg-accent/10 flex-shrink-0 rounded-full p-2"},d(oe,{icon:"lock",size:20,className:"text-accent"})),d("div",{className:"min-w-0 flex-1"},d("h3",{className:"text-fg-primary text-sm font-semibold"},r("security.protected.title")),d("p",{className:"text-fg-secondary mt-1 text-xs leading-relaxed"},r("security.protected.description")),d("button",{type:"button",onClick:p,className:"text-accent hover:text-accent-hover mt-2 text-xs font-medium"},r("security.protected.viewPermissions"))),d("button",{type:"button",onClick:g,className:"text-fg-muted hover:text-fg-secondary -mr-1 -mt-1 flex-shrink-0 p-1","aria-label":r("common.close")},d(oe,{icon:"x",size:16})))):null}function n0(e){var t,n,o=e.documentId,i=e.isOpen,r=e.onClose,a=e.onExited,s=Me(o).translate,l=je(o),c=In().provides,u=U(R(""),2),h=u[0],m=u[1],g=U(R(!1),2),p=g[0],v=g[1],f=U(R(!1),2),y=f[0],b=f[1],w=U(R(null),2),x=w[0],C=w[1],S=l?.document,M=(t=S?.permissions)!==null&&t!==void 0?t:0,A=(n=S?.isOwnerUnlocked)!==null&&n!==void 0&&n;L(function(){i&&(m(""),v(!1),b(!1),C(null))},[i]);var I=function(){c&&h&&(b(!0),C(null),c.unlockOwnerPermissions(o,h).wait(function(P){b(!1),P?m(""):C(s("security.unlock.invalidPassword"))},function(P){var z,D;b(!1),C((z=(D=P.reason)===null||D===void 0?void 0:D.message)!==null&&z!==void 0?z:s("security.unlock.failed"))}))};return d(Zn,{open:i!=null&&i,title:s("security.viewPermissions.title"),onClose:r,onExited:a,className:"md:w-[32rem]"},d("div",{className:"space-y-5"},d("p",{className:"text-fg-secondary text-sm"},s("security.viewPermissions.description")),!A&&d("div",null,d("label",{className:"text-fg-primary mb-2 block text-sm font-medium"},s("security.unlock.label")),d("div",{className:"relative"},d("input",{type:p?"text":"password",value:h,onInput:function(P){return m(P.target.value)},placeholder:s("security.unlock.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1",onKeyDown:function(P){P.key==="Enter"&&h&&I()}}),d("button",{type:"button",onClick:function(){return v(!p)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},d(oe,{icon:p?"eye-off":"eye",className:"h-4 w-4"}))),x&&d("p",{className:"text-state-error mt-2 text-xs"},x),d(Oe,{onClick:I,disabled:!h||y,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover mt-3 flex items-center space-x-2 rounded-md px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},y&&d(vn,{size:"sm"}),d("span",null,s("security.unlock.button")))),A&&d("div",{className:"bg-state-success-light flex items-center space-x-2 rounded-md p-3"},d(oe,{icon:"check",className:"text-state-success h-4 w-4 flex-shrink-0"}),d("p",{className:"text-fg-secondary text-sm"},s("security.unlock.success"))),d(Om,{permissions:M,translate:s}),d("div",{className:"border-border-subtle flex justify-end border-t pt-4"},d(Oe,{onClick:r,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm"},s("common.close")))))}var Ce={documentManager:{},commands:{commands:Gb},i18n:{defaultLocale:"en",locales:[{code:"en",name:"English",translations:{search:{placeholder:"Search",caseSensitive:"Case sensitive",wholeWord:"Whole word",resultsFound:"{count} results found",page:"Page {page}"},zoom:{in:"Zoom In",out:"Zoom Out",fitWidth:"Fit to Width",fitPage:"Fit to Page",marquee:"Marquee Zoom",menu:"Zoom Menu",level:"Zoom Level ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Toggle Pan Mode"},pointer:{toggle:"Toggle Pointer Mode"},capture:{screenshot:"Screenshot",dragTip:"Drag to select area to capture",title:"Screenshot Preview",download:"Download",cancel:"Cancel"},document:{menu:"Document Menu",open:"Open",close:"Close",print:"Print",protect:"Security",export:"Export",fullscreen:"Fullscreen",loading:"Loading document..."},emptyState:{title:"No Documents Open",description:"Open a PDF document to get started.",descriptionMulti:"You can view multiple documents using tabs.",openButton:"Open Document",supportedFormats:"Supported format: PDF"},passwordPrompt:{title:"Password Required",required:"This document is password protected. Please enter the password to open it.",incorrect:"The password you entered was incorrect. Please try again.",incorrectWarning:"Incorrect password. Please check and try again.",label:"Password",placeholder:"Enter document password",open:"Open",opening:"Opening...",cancel:"Cancel",close:"Close"},documentError:{title:"Error loading document",unknown:"An unknown error occurred",errorCode:"Error Code: {code}",close:"Close Document"},panel:{sidebar:"Sidebar",search:"Search",comment:"Comment",thumbnails:"Thumbnails",outline:"Outline",annotationStyle:"Annotation Style"},menu:{viewControls:"View Controls",zoomControls:"Zoom Controls",moreOptions:"More Options"},outline:{title:"Outline",loading:"Loading outline...",noOutline:"No outline available",noBookmarks:"This document doesn't contain bookmarks"},page:{settings:"Page Settings",single:"Single Page",twoOdd:"Two Page (Odd)",twoEven:"Two Page (Even)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Spread Mode",scrollLayout:"Scroll Layout",rotation:"Page Rotation",next:"Next Page",previous:"Previous Page"},rotate:{clockwise:"Rotate Clockwise",counterClockwise:"Rotate Counter-Clockwise"},selection:{copy:"Copy Selection"},mode:{view:"View",annotate:"Annotate",shapes:"Shapes",redact:"Redact"},annotation:{text:"Text",highlight:"Highlight",strikeout:"Strikethrough",underline:"Underline",squiggly:"Squiggly",rectangle:"Rectangle",circle:"Circle",line:"Line",arrow:"Arrow",polygon:"Polygon",polyline:"Polyline",ink:"Ink",stamp:"Stamp",freeText:"Free Text",square:"Square",style:"Annotation Style",styles:"{type} Styles",defaults:"{type} Defaults",color:"Color",opacity:"Opacity",blendMode:"Blend mode",strokeWidth:"Stroke width",strokeColor:"Stroke color",borderStyle:"Border style",fillColor:"Fill color",fontSize:"Font size",fontFamily:"Font",textAlign:"Text alignment",verticalAlign:"Vertical alignment",lineEnding:"Line ending",lineStart:"Line start",lineEnd:"Line end",font:"Font",fontColor:"Font color",backgroundColor:"Background color",noStyles:"There are no styles for this annotation.",noStylesStamp:"There are no styles for stamps.",selectAnnotation:"Select an annotation to see styles",deleteSelected:"Delete selected annotation",deleteAllSelected:"Delete Selected",multiSelect:"{count} annotations selected",group:"Group",ungroup:"Ungroup",moreTools:"More Tools",addLink:"Add Link",removeLink:"Remove Link",gotoLink:"Go to Link",comment:"Comment"},redaction:{area:"Redact Area",text:"Redact Text",applyAll:"Apply All",clearAll:"Clear All",deleteSelected:"Delete selected redaction",commitSelected:"Apply selected redaction"},history:{undo:"Undo",redo:"Redo"},comments:{page:"Page {page}",commentCount:"{count} comment",commentCountPlural:"{count} comments",addComment:"Add comment...",addReply:"Add reply...",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",showMore:"more",showLess:"less",emptyState:"Add annotations to be able to comment on them."},blendMode:{normal:"Normal",multiply:"Multiply",screen:"Screen",overlay:"Overlay",darken:"Darken",lighten:"Lighten",colorDodge:"Color Dodge",colorBurn:"Color Burn",hardLight:"Hard Light",softLight:"Soft Light",difference:"Difference",exclusion:"Exclusion",hue:"Hue",saturation:"Saturation",color:"Color",luminosity:"Luminosity"},print:{title:"Print Settings",loading:"Preparing document...",pages:"Pages to print",all:"All pages",current:"Current page ({currentPage})",specify:"Specify pages",specifyEG:"e.g., 1-3, 5, 8-10",total:"Total pages in document: {totalPages}",annotation:"Include annotations",printing:"Printing...",print:"Print",cancel:"Cancel"},protect:{title:"Protect Document",cancel:"Cancel",apply:"Apply Protection",applying:"Applying...",applyFailed:"Failed to apply protection. Please try again.",removeFailed:"Failed to remove protection. Please try again.",passwordMismatch:"Passwords do not match",noProtectionSelected:"Select at least one protection option to apply.",bothPasswordsNote:"Users who open with the document password will have restricted permissions. Use the owner password to unlock full access.",openPassword:{title:"Require password to open",description:"Users must enter a password to view this document.",label:"Document Password",placeholder:"Enter password",confirm:"Confirm Password",confirmPlaceholder:"Confirm password"},ownerPassword:{label:"Owner Password",placeholder:"Enter owner password",confirm:"Confirm Owner Password",confirmPlaceholder:"Confirm owner password"},permissions:{title:"Restrict permissions",description:"Limit what users can do with this document.",allowedActions:"Allowed actions",print:"Print",printHighQuality:"Print high quality",copy:"Copy content",accessibility:"Extract for accessibility",modify:"Modify content",annotations:"Add/modify annotations & comments",fillForms:"Fill forms & sign",assemble:"Assemble & extract pages"},encrypted:{title:"Document is Protected",description:"This document is protected by the owner. Enter the owner password to modify security settings.",enterOwnerPassword:"Enter Owner Password to Modify",unlockAndEdit:"Unlock & Edit"},modifyProtection:{title:"Modify Protection",description:"Choose how you want to modify the document protection.",changeOption:"Change Passwords or Permissions",changeDescription:"Update the document password or permission settings.",removeOption:"Remove All Protection",removeDescription:"Remove password protection from this document."},removeProtection:{title:"Remove Protection",warning:"Are you sure you want to remove protection?",description:"This will remove all password protection from the document. Anyone will be able to open and modify it.",confirm:"Remove Protection"}},security:{protected:{title:"This Document is Protected",description:"This file is protected and some features may be disabled. Go to Security in the document menu to view or unlock permissions.",viewPermissions:"View permissions"},viewPermissions:{title:"Document Permissions",description:"This file is restricted by the owner and requires a password to unlock certain actions.",restrictedActions:"Restricted Actions"},unlock:{label:"Enter Owner Password to Unlock File",placeholder:"Enter owner password",button:"Unlock file",invalidPassword:"Invalid password. Please try again.",failed:"Failed to unlock. Please try again.",success:"Owner permissions unlocked! You now have full access."}},common:{close:"Close",back:"Back",cancel:"Cancel"},link:{title:"Insert Link",url:"URL",page:"Page",enterUrl:"Enter URL",enterPage:"Enter Page Number",pageRange:"Page 1 to {totalPages}",link:"Link"}}},{code:"nl",name:"Nederlands",translations:{search:{placeholder:"Zoeken",caseSensitive:"Hoofdlettergevoelig",wholeWord:"Heel woord",resultsFound:"{count} resultaten gevonden",page:"Pagina {page}"},zoom:{in:"Inzoomen",out:"Uitzoomen",fitWidth:"Aanbreedte aanpassen",fitPage:"Aan pagina aanpassen",marquee:"Lijstzoom",menu:"Zoommenu",level:"Zoomniveau ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Pan-modus wisselen"},pointer:{toggle:"Aanwijzermodus wisselen"},capture:{screenshot:"Schermafbeelding",dragTip:"Sleep om een gebied te selecteren om vast te leggen",title:"Screenshot voorbeeld",download:"Downloaden",cancel:"Annuleren"},document:{menu:"Documentmenu",open:"Openen",close:"Sluiten",print:"Afdrukken",protect:"Beveiliging",export:"Exporteren",fullscreen:"Volledig scherm",loading:"Document laden..."},emptyState:{title:"Geen documenten geopend",description:"Open een PDF-document om te beginnen.",descriptionMulti:"U kunt meerdere documenten bekijken met tabs.",openButton:"Document openen",supportedFormats:"Ondersteund formaat: PDF"},passwordPrompt:{title:"Wachtwoord vereist",required:"Dit document is beveiligd met een wachtwoord. Voer het wachtwoord in om te openen.",incorrect:"Het ingevoerde wachtwoord was onjuist. Probeer het opnieuw.",incorrectWarning:"Onjuist wachtwoord. Controleer en probeer opnieuw.",label:"Wachtwoord",placeholder:"Voer documentwachtwoord in",open:"Openen",opening:"Openen...",cancel:"Annuleren",close:"Sluiten"},documentError:{title:"Fout bij laden van document",unknown:"Er is een onbekende fout opgetreden",errorCode:"Foutcode: {code}",close:"Document sluiten"},panel:{sidebar:"Zijbalk",search:"Zoeken",comment:"Opmerking",thumbnails:"Miniaturen",outline:"Overzicht",annotationStyle:"Annotatiestijl"},menu:{viewControls:"Weergave-instellingen",zoomControls:"Zoom-instellingen",moreOptions:"Meer opties"},outline:{title:"Overzicht",loading:"Overzicht laden...",noOutline:"Geen overzicht beschikbaar",noBookmarks:"Dit document bevat geen bladwijzers"},page:{settings:"Pagina-instellingen",single:"Enkele pagina",twoOdd:"Twee pagina's (Oneven)",twoEven:"Twee pagina's (Even)",vertical:"Verticaal",horizontal:"Horizontaal",spreadMode:"Spreidingsmodus",scrollLayout:"Scrollindeling",rotation:"Paginarotatie",next:"Volgende pagina",previous:"Vorige pagina"},rotate:{clockwise:"Met de klok mee draaien",counterClockwise:"Tegen de klok in draaien"},selection:{copy:"Selectie kopiren"},mode:{view:"Weergave",annotate:"Annoteren",shapes:"Vormen",redact:"Redigeren"},annotation:{text:"Tekst",highlight:"Markeren",strikeout:"Doorhalen",underline:"Onderstrepen",squiggly:"Golflijn",rectangle:"Rechthoek",circle:"Cirkel",line:"Lijn",arrow:"Pijl",polygon:"Veelhoek",polyline:"Polylijn",ink:"Inkt",stamp:"Stempel",freeText:"Vrije tekst",square:"Vierkant",style:"Annotatiestijl",styles:"{type} stijlen",defaults:"{type} standaardwaarden",color:"Kleur",opacity:"Dekking",blendMode:"Overvloeimodus",strokeWidth:"Lijndikte",strokeColor:"Lijnkleur",borderStyle:"Randstijl",fillColor:"Vulkleur",fontSize:"Lettergrootte",fontFamily:"Lettertype",textAlign:"Tekstuitlijning",verticalAlign:"Verticale uitlijning",lineEnding:"Lijneinde",lineStart:"Lijnbegin",lineEnd:"Lijneinde",font:"Lettertype",fontColor:"Tekstkleur",backgroundColor:"Achtergrondkleur",noStyles:"Er zijn geen stijlen voor deze annotatie.",noStylesStamp:"Er zijn geen stijlen voor stempels.",selectAnnotation:"Selecteer een annotatie om stijlen te zien",deleteSelected:"Geselecteerde annotatie verwijderen",deleteAllSelected:"Selectie verwijderen",multiSelect:"{count} annotaties geselecteerd",group:"Groeperen",ungroup:"Groepering opheffen",moreTools:"Meer gereedschappen",addLink:"Link toevoegen",removeLink:"Link verwijderen",gotoLink:"Ga naar link",comment:"Opmerking"},redaction:{area:"Gebied redigeren",text:"Tekst redigeren",applyAll:"Alles toepassen",clearAll:"Alles wissen",deleteSelected:"Geselecteerde redactie verwijderen",commitSelected:"Geselecteerde redactie toepassen"},history:{undo:"Ongedaan maken",redo:"Opnieuw doen"},comments:{page:"Pagina {page}",commentCount:"{count} opmerking",commentCountPlural:"{count} opmerkingen",addComment:"Opmerking toevoegen...",addReply:"Antwoord toevoegen...",save:"Opslaan",cancel:"Annuleren",edit:"Bewerken",delete:"Verwijderen",showMore:"meer",showLess:"minder",emptyState:"Voeg annotaties toe om erop te kunnen reageren."},blendMode:{normal:"Normaal",multiply:"Vermenigvuldigen",screen:"Bleken",overlay:"Bedekken",darken:"Donkerder",lighten:"Lichter",colorDodge:"Kleur tegenhouden",colorBurn:"Kleur doordrukken",hardLight:"Hard licht",softLight:"Zacht licht",difference:"Verschil",exclusion:"Uitsluiting",hue:"Kleurtoon",saturation:"Verzadiging",color:"Kleur",luminosity:"Helderheid"},print:{title:"Afdrukinstellingen",loading:"Document voorbereiden...",pages:"Af te drukken pagina's",all:"Alle pagina's",current:"Huidige pagina ({currentPage})",specify:"Pagina's",specifyEG:"bijv. 1-3, 5, 8-10",total:"Totaal aantal pagina's in document: {totalPages}",annotation:"Inclusief annotaties",printing:"Afdrukken...",print:"Afdrukken",cancel:"Annuleren"},protect:{title:"Document beveiligen",cancel:"Annuleren",apply:"Beveiliging toepassen",applying:"Bezig met toepassen...",applyFailed:"Beveiliging kon niet worden toegepast. Probeer het opnieuw.",removeFailed:"Beveiliging kon niet worden verwijderd. Probeer het opnieuw.",passwordMismatch:"Wachtwoorden komen niet overeen",noProtectionSelected:"Selecteer minimaal n beveiligingsoptie.",bothPasswordsNote:"Gebruikers die openen met het documentwachtwoord hebben beperkte rechten. Gebruik het eigenaarswachtwoord voor volledige toegang.",openPassword:{title:"Wachtwoord vereist om te openen",description:"Gebruikers moeten een wachtwoord invoeren om dit document te bekijken.",label:"Documentwachtwoord",placeholder:"Wachtwoord invoeren",confirm:"Wachtwoord bevestigen",confirmPlaceholder:"Wachtwoord bevestigen"},ownerPassword:{label:"Eigenaarswachtwoord",placeholder:"Eigenaarswachtwoord invoeren",confirm:"Eigenaarswachtwoord bevestigen",confirmPlaceholder:"Eigenaarswachtwoord bevestigen"},permissions:{title:"Rechten beperken",description:"Beperk wat gebruikers met dit document kunnen doen.",allowedActions:"Toegestane acties",print:"Afdrukken",printHighQuality:"Hoge kwaliteit afdrukken",copy:"Inhoud kopiren",accessibility:"Extraheren voor toegankelijkheid",modify:"Inhoud wijzigen",annotations:"Annotaties & opmerkingen toevoegen/wijzigen",fillForms:"Formulieren invullen & ondertekenen",assemble:"Document samenstellen & pagina's extraheren"},encrypted:{title:"Document is beveiligd",description:"Dit document is beveiligd door de eigenaar. Voer het eigenaarswachtwoord in om beveiligingsinstellingen te wijzigen.",enterOwnerPassword:"Voer eigenaarswachtwoord in om te wijzigen",unlockAndEdit:"Ontgrendelen & Bewerken"},modifyProtection:{title:"Beveiliging wijzigen",description:"Kies hoe u de documentbeveiliging wilt wijzigen.",changeOption:"Wachtwoorden of rechten wijzigen",changeDescription:"Update het documentwachtwoord of rechtinstellingen.",removeOption:"Alle beveiliging verwijderen",removeDescription:"Verwijder wachtwoordbeveiliging van dit document."},removeProtection:{title:"Beveiliging verwijderen",warning:"Weet u zeker dat u de beveiliging wilt verwijderen?",description:"Dit verwijdert alle wachtwoordbeveiliging van het document. Iedereen kan het openen en wijzigen.",confirm:"Beveiliging verwijderen"}},security:{protected:{title:"Dit document is beveiligd",description:"Dit bestand is beveiligd en sommige functies zijn mogelijk uitgeschakeld. Ga naar Beveiliging in het documentmenu om rechten te bekijken of te ontgrendelen.",viewPermissions:"Rechten bekijken"},viewPermissions:{title:"Documentrechten",description:"Dit bestand is beperkt door de eigenaar en vereist een wachtwoord om bepaalde acties te ontgrendelen.",restrictedActions:"Beperkte acties"},unlock:{label:"Voer eigenaarswachtwoord in om te ontgrendelen",placeholder:"Eigenaarswachtwoord invoeren",button:"Bestand ontgrendelen",invalidPassword:"Ongeldig wachtwoord. Probeer het opnieuw.",failed:"Ontgrendelen mislukt. Probeer het opnieuw.",success:"Eigenaarrechten ontgrendeld! U heeft nu volledige toegang."}},common:{close:"Sluiten",back:"Terug",cancel:"Annuleren"},link:{title:"Link invoegen",url:"URL",page:"Pagina",enterUrl:"URL invoeren",enterPage:"Paginanummer invoeren",pageRange:"Pagina 1 tot {totalPages}",link:"Koppelen"}}},{code:"de",name:"Deutsch",translations:{search:{placeholder:"Suchen",caseSensitive:"Gro-/Kleinschreibung",wholeWord:"Ganzes Wort",resultsFound:"{count} Ergebnisse gefunden",page:"Seite {page}"},zoom:{in:"Vergrern",out:"Verkleinern",fitWidth:"An Breite anpassen",fitPage:"An Seite anpassen",marquee:"Laufrahmen-Zoom",menu:"Zoom-Men",level:"Zoomstufe ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Verschieben-Modus umschalten"},pointer:{toggle:"Zeiger-Modus umschalten"},capture:{screenshot:"Screenshot",dragTip:"Ziehen Sie, um den Bereich zum Erfassen auszuwhlen",title:"Screenshot-Vorschau",download:"Herunterladen",cancel:"Abbrechen"},document:{menu:"Dokument-Men",open:"ffnen",close:"Schlieen",print:"Drucken",protect:"Sicherheit",export:"Exportieren",fullscreen:"Vollbild",loading:"Dokument wird geladen..."},emptyState:{title:"Keine Dokumente geffnet",description:"ffnen Sie ein PDF-Dokument, um zu beginnen.",descriptionMulti:"Sie knnen mehrere Dokumente mit Tabs anzeigen.",openButton:"Dokument ffnen",supportedFormats:"Untersttztes Format: PDF"},passwordPrompt:{title:"Passwort erforderlich",required:"Dieses Dokument ist passwortgeschtzt. Bitte geben Sie das Passwort ein.",incorrect:"Das eingegebene Passwort war falsch. Bitte versuchen Sie es erneut.",incorrectWarning:"Falsches Passwort. Bitte berprfen und erneut versuchen.",label:"Passwort",placeholder:"Dokumentpasswort eingeben",open:"ffnen",opening:"ffnen...",cancel:"Abbrechen",close:"Schlieen"},documentError:{title:"Fehler beim Laden des Dokuments",unknown:"Ein unbekannter Fehler ist aufgetreten",errorCode:"Fehlercode: {code}",close:"Dokument schlieen"},panel:{sidebar:"Seitenleiste",search:"Suchen",comment:"Kommentar",thumbnails:"Miniaturansichten",outline:"Gliederung",annotationStyle:"Anmerkungsstil"},menu:{viewControls:"Ansichtseinstellungen",zoomControls:"Zoom-Einstellungen",moreOptions:"Weitere Optionen"},outline:{title:"Gliederung",loading:"Gliederung wird geladen...",noOutline:"Keine Gliederung verfgbar",noBookmarks:"Dieses Dokument enthlt keine Lesezeichen"},page:{settings:"Seiteneinstellungen",single:"Einzelseite",twoOdd:"Zwei Seiten (Ungerade)",twoEven:"Zwei Seiten (Gerade)",vertical:"Vertikal",horizontal:"Horizontal",spreadMode:"Doppelseiten-Modus",scrollLayout:"Scroll-Layout",rotation:"Seitendrehung",next:"Nchste Seite",previous:"Vorherige Seite"},rotate:{clockwise:"Im Uhrzeigersinn drehen",counterClockwise:"Gegen den Uhrzeigersinn drehen"},selection:{copy:"Auswahl kopieren"},mode:{view:"Ansicht",annotate:"Annotieren",shapes:"Formen",redact:"Schwrzen"},annotation:{text:"Text",highlight:"Markieren",strikeout:"Durchstreichen",underline:"Unterstreichen",squiggly:"Wellenlinie",rectangle:"Rechteck",circle:"Kreis",line:"Linie",arrow:"Pfeil",polygon:"Polygon",polyline:"Polylinie",ink:"Freihand",stamp:"Stempel",freeText:"Freitext",square:"Quadrat",style:"Anmerkungsstil",styles:"{type}-Stile",defaults:"{type}-Standardwerte",color:"Farbe",opacity:"Deckkraft",blendMode:"Mischmodus",strokeWidth:"Strichstrke",strokeColor:"Strichfarbe",borderStyle:"Rahmenstil",fillColor:"Fllfarbe",fontSize:"Schriftgre",fontFamily:"Schriftart",textAlign:"Textausrichtung",verticalAlign:"Vertikale Ausrichtung",lineEnding:"Linienende",lineStart:"Linienanfang",lineEnd:"Linienende",font:"Schriftart",fontColor:"Schriftfarbe",backgroundColor:"Hintergrundfarbe",noStyles:"Fr diese Anmerkung gibt es keine Stile.",noStylesStamp:"Fr Stempel gibt es keine Stile.",selectAnnotation:"Whlen Sie eine Anmerkung aus, um Stile anzuzeigen",deleteSelected:"Ausgewhlte Anmerkung lschen",deleteAllSelected:"Ausgewhlte lschen",multiSelect:"{count} Anmerkungen ausgewhlt",group:"Gruppieren",ungroup:"Gruppierung aufheben",moreTools:"Weitere Werkzeuge",addLink:"Link hinzufgen",removeLink:"Link entfernen",gotoLink:"Zum Link gehen",comment:"Kommentar"},redaction:{area:"Bereich schwrzen",text:"Text schwrzen",applyAll:"Alle anwenden",clearAll:"Alle lschen",deleteSelected:"Ausgewhlte Schwrzung lschen",commitSelected:"Ausgewhlte Schwrzung anwenden"},history:{undo:"Rckgngig",redo:"Wiederholen"},comments:{page:"Seite {page}",commentCount:"{count} Kommentar",commentCountPlural:"{count} Kommentare",addComment:"Kommentar hinzufgen...",addReply:"Antwort hinzufgen...",save:"Speichern",cancel:"Abbrechen",edit:"Bearbeiten",delete:"Lschen",showMore:"mehr",showLess:"weniger",emptyState:"Fgen Sie Anmerkungen hinzu, um sie kommentieren zu knnen."},blendMode:{normal:"Normal",multiply:"Multiplizieren",screen:"Negativ multiplizieren",overlay:"Ineinanderkopieren",darken:"Abdunkeln",lighten:"Aufhellen",colorDodge:"Farbig abwedeln",colorBurn:"Farbig nachbelichten",hardLight:"Hartes Licht",softLight:"Weiches Licht",difference:"Differenz",exclusion:"Ausschluss",hue:"Farbton",saturation:"Sttigung",color:"Farbe",luminosity:"Luminanz"},print:{title:"Druckeinstellungen",loading:"Dokument wird vorbereitet...",pages:"Zu druckende Seiten",all:"Alle Seiten",current:"Aktuelle Seite ({currentPage})",specify:"Seiten angeben",specifyEG:"z.B. 1-3, 5, 8-10",total:"Gesamtseitenzahl im Dokument: {totalPages}",annotation:"Anmerkungen einbeziehen",printing:"Drucken...",print:"Drucken",cancel:"Abbrechen"},protect:{title:"Dokument schtzen",cancel:"Abbrechen",apply:"Schutz anwenden",applying:"Wird angewendet...",applyFailed:"Schutz konnte nicht angewendet werden. Bitte versuchen Sie es erneut.",removeFailed:"Schutz konnte nicht entfernt werden. Bitte versuchen Sie es erneut.",passwordMismatch:"Passwrter stimmen nicht berein",noProtectionSelected:"Whlen Sie mindestens eine Schutzoption aus.",bothPasswordsNote:"Benutzer, die das Dokumentpasswort eingeben, haben eingeschrnkte Berechtigungen. Verwenden Sie das Eigentmerpasswort fr vollen Zugriff.",openPassword:{title:"Passwort zum ffnen erforderlich",description:"Benutzer mssen ein Passwort eingeben, um dieses Dokument anzuzeigen.",label:"Dokumentpasswort",placeholder:"Passwort eingeben",confirm:"Passwort besttigen",confirmPlaceholder:"Passwort besttigen"},ownerPassword:{label:"Eigentmerpasswort",placeholder:"Eigentmerpasswort eingeben",confirm:"Eigentmerpasswort besttigen",confirmPlaceholder:"Eigentmerpasswort besttigen"},permissions:{title:"Berechtigungen einschrnken",description:"Beschrnken Sie, was Benutzer mit diesem Dokument tun knnen.",allowedActions:"Erlaubte Aktionen",print:"Drucken",printHighQuality:"In hoher Qualitt drucken",copy:"Inhalt kopieren",accessibility:"Fr Barrierefreiheit extrahieren",modify:"Inhalt ndern",annotations:"Anmerkungen & Kommentare hinzufgen/ndern",fillForms:"Formulare ausfllen & unterschreiben",assemble:"Dokument zusammenstellen & Seiten extrahieren"},encrypted:{title:"Dokument ist geschtzt",description:"Dieses Dokument ist vom Eigentmer geschtzt. Geben Sie das Eigentmerpasswort ein, um die Sicherheitseinstellungen zu ndern.",enterOwnerPassword:"Eigentmerpasswort eingeben zum ndern",unlockAndEdit:"Entsperren & Bearbeiten"},modifyProtection:{title:"Schutz ndern",description:"Whlen Sie, wie Sie den Dokumentschutz ndern mchten.",changeOption:"Passwrter oder Berechtigungen ndern",changeDescription:"Aktualisieren Sie das Dokumentpasswort oder die Berechtigungseinstellungen.",removeOption:"Gesamten Schutz entfernen",removeDescription:"Passwortschutz von diesem Dokument entfernen."},removeProtection:{title:"Schutz entfernen",warning:"Sind Sie sicher, dass Sie den Schutz entfernen mchten?",description:"Dadurch wird der gesamte Passwortschutz vom Dokument entfernt. Jeder kann es ffnen und bearbeiten.",confirm:"Schutz entfernen"}},security:{protected:{title:"Dieses Dokument ist geschtzt",description:"Diese Datei ist geschtzt und einige Funktionen sind mglicherweise deaktiviert. Gehen Sie zu Sicherheit im Dokumentmen, um Berechtigungen anzuzeigen oder freizuschalten.",viewPermissions:"Berechtigungen anzeigen"},viewPermissions:{title:"Dokumentberechtigungen",description:"Diese Datei ist vom Eigentmer eingeschrnkt und erfordert ein Passwort, um bestimmte Aktionen freizuschalten.",restrictedActions:"Eingeschrnkte Aktionen"},unlock:{label:"Eigentmerpasswort eingeben zum Entsperren",placeholder:"Eigentmerpasswort eingeben",button:"Datei entsperren",invalidPassword:"Ungltiges Passwort. Bitte versuchen Sie es erneut.",failed:"Entsperren fehlgeschlagen. Bitte versuchen Sie es erneut.",success:"Eigentmerberechtigungen entsperrt! Sie haben jetzt vollen Zugriff."}},common:{close:"Schlieen",back:"Zurck",cancel:"Abbrechen"},link:{title:"Link einfgen",url:"URL",page:"Seite",enterUrl:"URL eingeben",enterPage:"Seitennummer eingeben",pageRange:"Seite 1 bis {totalPages}",link:"Verknpfen"}}},{code:"fr",name:"Franais",translations:{search:{placeholder:"Rechercher",caseSensitive:"Respecter la casse",wholeWord:"Mot entier",resultsFound:"{count} rsultats trouvs",page:"Page {page}"},zoom:{in:"Zoom avant",out:"Zoom arrire",fitWidth:"Ajuster  la largeur",fitPage:"Ajuster  la page",marquee:"Zoom de slection",menu:"Menu Zoom",level:"Niveau de zoom ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Basculer le mode dplacement"},pointer:{toggle:"Basculer le mode pointeur"},capture:{screenshot:"Capture d'cran",dragTip:"Faites glisser pour slectionner la zone  capturer",title:"Aperu de la capture",download:"Tlcharger",cancel:"Annuler"},document:{menu:"Menu Document",open:"Ouvrir",close:"Fermer",print:"Imprimer",protect:"Scurit",export:"Exporter",fullscreen:"Plein cran",loading:"Chargement du document..."},emptyState:{title:"Aucun document ouvert",description:"Ouvrez un document PDF pour commencer.",descriptionMulti:"Vous pouvez afficher plusieurs documents avec des onglets.",openButton:"Ouvrir un document",supportedFormats:"Format pris en charge : PDF"},passwordPrompt:{title:"Mot de passe requis",required:"Ce document est protg par mot de passe. Veuillez entrer le mot de passe.",incorrect:"Le mot de passe saisi est incorrect. Veuillez ressayer.",incorrectWarning:"Mot de passe incorrect. Veuillez vrifier et ressayer.",label:"Mot de passe",placeholder:"Entrer le mot de passe du document",open:"Ouvrir",opening:"Ouverture...",cancel:"Annuler",close:"Fermer"},documentError:{title:"Erreur lors du chargement du document",unknown:"Une erreur inconnue est survenue",errorCode:"Code erreur : {code}",close:"Fermer le document"},panel:{sidebar:"Barre latrale",search:"Rechercher",comment:"Commentaire",thumbnails:"Miniatures",outline:"Plan",annotationStyle:"Style d'annotation"},menu:{viewControls:"Contrles d'affichage",zoomControls:"Contrles de zoom",moreOptions:"Plus d'options"},outline:{title:"Plan",loading:"Chargement du plan...",noOutline:"Aucun plan disponible",noBookmarks:"Ce document ne contient pas de signets"},page:{settings:"Paramtres de page",single:"Page unique",twoOdd:"Deux pages (Impair)",twoEven:"Deux pages (Pair)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Mode double page",scrollLayout:"Disposition de dfilement",rotation:"Rotation de page",next:"Page suivante",previous:"Page prcdente"},rotate:{clockwise:"Tourner dans le sens horaire",counterClockwise:"Tourner dans le sens antihoraire"},selection:{copy:"Copier la slection"},mode:{view:"Affichage",annotate:"Annoter",shapes:"Formes",redact:"Caviarder"},annotation:{text:"Texte",highlight:"Surligner",strikeout:"Barrer",underline:"Souligner",squiggly:"Ondul",rectangle:"Rectangle",circle:"Cercle",line:"Ligne",arrow:"Flche",polygon:"Polygone",polyline:"Polyligne",ink:"Encre",stamp:"Tampon",freeText:"Texte libre",square:"Carr",style:"Style d'annotation",styles:"Styles de {type}",defaults:"Valeurs par dfaut de {type}",color:"Couleur",opacity:"Opacit",blendMode:"Mode de fusion",strokeWidth:"paisseur du trait",strokeColor:"Couleur du trait",borderStyle:"Style de bordure",fillColor:"Couleur de remplissage",fontSize:"Taille de police",fontFamily:"Police",textAlign:"Alignement du texte",verticalAlign:"Alignement vertical",lineEnding:"Fin de ligne",lineStart:"Dbut de ligne",lineEnd:"Fin de ligne",font:"Police",fontColor:"Couleur du texte",backgroundColor:"Couleur de fond",noStyles:"Il n'y a pas de styles pour cette annotation.",noStylesStamp:"Il n'y a pas de styles pour les tampons.",selectAnnotation:"Slectionnez une annotation pour voir les styles",deleteSelected:"Supprimer l'annotation slectionne",deleteAllSelected:"Supprimer la slection",multiSelect:"{count} annotations slectionnes",group:"Grouper",ungroup:"Dissocier",moreTools:"Plus d'outils",addLink:"Ajouter un lien",removeLink:"Supprimer le lien",gotoLink:"Aller au lien",comment:"Commentaire"},redaction:{area:"Caviarder la zone",text:"Caviarder le texte",applyAll:"Tout appliquer",clearAll:"Tout effacer",deleteSelected:"Supprimer la rdaction slectionne",commitSelected:"Appliquer la rdaction slectionne"},history:{undo:"Annuler",redo:"Refaire"},comments:{page:"Page {page}",commentCount:"{count} commentaire",commentCountPlural:"{count} commentaires",addComment:"Ajouter un commentaire...",addReply:"Ajouter une rponse...",save:"Enregistrer",cancel:"Annuler",edit:"Modifier",delete:"Supprimer",showMore:"plus",showLess:"moins",emptyState:"Ajoutez des annotations pour pouvoir les commenter."},blendMode:{normal:"Normal",multiply:"Produit",screen:"Superposition",overlay:"Incrustation",darken:"Obscurcir",lighten:"claircir",colorDodge:"Densit couleur -",colorBurn:"Densit couleur +",hardLight:"Lumire crue",softLight:"Lumire tamise",difference:"Diffrence",exclusion:"Exclusion",hue:"Teinte",saturation:"Saturation",color:"Couleur",luminosity:"Luminosit"},print:{title:"Paramtres d'impression",loading:"Prparation du document...",pages:"Pages  imprimer",all:"Toutes les pages",current:"Page actuelle ({currentPage})",specify:"Spcifier les pages",specifyEG:"ex : 1-3, 5, 8-10",total:"Nombre total de pages dans le document : {totalPages}",annotation:"Inclure les annotations",printing:"Impression...",print:"Imprimer",cancel:"Annuler"},protect:{title:"Protger le document",cancel:"Annuler",apply:"Appliquer la protection",applying:"Application en cours...",applyFailed:"chec de l'application de la protection. Veuillez ressayer.",removeFailed:"chec de la suppression de la protection. Veuillez ressayer.",passwordMismatch:"Les mots de passe ne correspondent pas",noProtectionSelected:"Slectionnez au moins une option de protection.",bothPasswordsNote:"Les utilisateurs qui ouvrent avec le mot de passe du document auront des permissions limites. Utilisez le mot de passe propritaire pour un accs complet.",openPassword:{title:"Mot de passe requis pour l'ouverture",description:"Les utilisateurs doivent entrer un mot de passe pour voir ce document.",label:"Mot de passe du document",placeholder:"Entrer le mot de passe",confirm:"Confirmer le mot de passe",confirmPlaceholder:"Confirmer le mot de passe"},ownerPassword:{label:"Mot de passe propritaire",placeholder:"Entrer le mot de passe propritaire",confirm:"Confirmer le mot de passe propritaire",confirmPlaceholder:"Confirmer le mot de passe propritaire"},permissions:{title:"Restreindre les permissions",description:"Limitez ce que les utilisateurs peuvent faire avec ce document.",allowedActions:"Actions autorises",print:"Imprimer",printHighQuality:"Imprimer en haute qualit",copy:"Copier le contenu",accessibility:"Extraire pour l'accessibilit",modify:"Modifier le contenu",annotations:"Ajouter/modifier les annotations et commentaires",fillForms:"Remplir les formulaires et signer",assemble:"Assembler le document et extraire les pages"},encrypted:{title:"Document protg",description:"Ce document est protg par le propritaire. Entrez le mot de passe propritaire pour modifier les paramtres de scurit.",enterOwnerPassword:"Entrer le mot de passe propritaire pour modifier",unlockAndEdit:"Dverrouiller & Modifier"},modifyProtection:{title:"Modifier la protection",description:"Choisissez comment vous voulez modifier la protection du document.",changeOption:"Modifier les mots de passe ou les permissions",changeDescription:"Mettre  jour le mot de passe du document ou les paramtres de permissions.",removeOption:"Supprimer toute la protection",removeDescription:"Supprimer la protection par mot de passe de ce document."},removeProtection:{title:"Supprimer la protection",warning:"tes-vous sr de vouloir supprimer la protection ?",description:"Cela supprimera toute la protection par mot de passe du document. Tout le monde pourra l'ouvrir et le modifier.",confirm:"Supprimer la protection"}},security:{protected:{title:"Ce document est protg",description:"Ce fichier est protg et certaines fonctionnalits peuvent tre dsactives. Allez dans Scurit dans le menu document pour afficher ou dverrouiller les permissions.",viewPermissions:"Voir les permissions"},viewPermissions:{title:"Permissions du document",description:"Ce fichier est restreint par le propritaire et ncessite un mot de passe pour dbloquer certaines actions.",restrictedActions:"Actions restreintes"},unlock:{label:"Entrer le mot de passe propritaire pour dverrouiller",placeholder:"Entrer le mot de passe propritaire",button:"Dverrouiller le fichier",invalidPassword:"Mot de passe invalide. Veuillez ressayer.",failed:"chec du dverrouillage. Veuillez ressayer.",success:"Permissions propritaire dverrouilles ! Vous avez maintenant un accs complet."}},common:{close:"Fermer",back:"Retour",cancel:"Annuler"},link:{title:"Insrer un lien",url:"URL",page:"Page",enterUrl:"Entrer l'URL",enterPage:"Entrer le numro de page",pageRange:"Page 1  {totalPages}",link:"Lier"}}},{code:"es",name:"Espaol",translations:{search:{placeholder:"Buscar",caseSensitive:"Distinguir maysculas",wholeWord:"Palabra completa",resultsFound:"{count} resultados encontrados",page:"Pgina {page}"},zoom:{in:"Acercar",out:"Alejar",fitWidth:"Ajustar al ancho",fitPage:"Ajustar a la pgina",marquee:"Zoom de seleccin",menu:"Men de zoom",level:"Nivel de zoom ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Alternar modo desplazamiento"},pointer:{toggle:"Alternar modo puntero"},capture:{screenshot:"Captura de pantalla",dragTip:"Arrastre para seleccionar el rea a capturar",title:"Vista previa de la captura",download:"Descargar",cancel:"Cancelar"},document:{menu:"Men del documento",open:"Abrir",close:"Cerrar",print:"Imprimir",protect:"Seguridad",export:"Exportar",fullscreen:"Pantalla completa",loading:"Cargando documento..."},emptyState:{title:"No hay documentos abiertos",description:"Abra un documento PDF para comenzar.",descriptionMulti:"Puede ver varios documentos usando pestaas.",openButton:"Abrir documento",supportedFormats:"Formato compatible: PDF"},passwordPrompt:{title:"Contrasea requerida",required:"Este documento est protegido con contrasea. Por favor, ingrese la contrasea para abrirlo.",incorrect:"La contrasea ingresada es incorrecta. Por favor, intntelo de nuevo.",incorrectWarning:"Contrasea incorrecta. Por favor, verifique e intntelo de nuevo.",label:"Contrasea",placeholder:"Ingrese la contrasea del documento",open:"Abrir",opening:"Abriendo...",cancel:"Cancelar",close:"Cerrar"},documentError:{title:"Error al cargar el documento",unknown:"Ha ocurrido un error desconocido",errorCode:"Cdigo de error: {code}",close:"Cerrar documento"},panel:{sidebar:"Barra lateral",search:"Buscar",comment:"Comentario",thumbnails:"Miniaturas",outline:"Esquema",annotationStyle:"Estilo de anotacin"},menu:{viewControls:"Controles de vista",zoomControls:"Controles de zoom",moreOptions:"Ms opciones"},outline:{title:"Esquema",loading:"Cargando esquema...",noOutline:"No hay esquema disponible",noBookmarks:"Este documento no contiene marcadores"},page:{settings:"Configuracin de pgina",single:"Pgina nica",twoOdd:"Dos pginas (Impar)",twoEven:"Dos pginas (Par)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Modo de doble pgina",scrollLayout:"Diseo de desplazamiento",rotation:"Rotacin de pgina",next:"Pgina siguiente",previous:"Pgina anterior"},rotate:{clockwise:"Rotar en sentido horario",counterClockwise:"Rotar en sentido antihorario"},selection:{copy:"Copiar seleccin"},mode:{view:"Ver",annotate:"Anotar",shapes:"Formas",redact:"Redactar"},annotation:{text:"Texto",highlight:"Resaltar",strikeout:"Tachar",underline:"Subrayar",squiggly:"Ondulado",rectangle:"Rectngulo",circle:"Crculo",line:"Lnea",arrow:"Flecha",polygon:"Polgono",polyline:"Polilnea",ink:"Tinta",stamp:"Sello",freeText:"Texto libre",square:"Cuadrado",style:"Estilo de anotacin",styles:"Estilos de {type}",defaults:"Valores predeterminados de {type}",color:"Color",opacity:"Opacidad",blendMode:"Modo de fusin",strokeWidth:"Grosor del trazo",strokeColor:"Color del trazo",borderStyle:"Estilo del borde",fillColor:"Color de relleno",fontSize:"Tamao de fuente",fontFamily:"Fuente",textAlign:"Alineacin del texto",verticalAlign:"Alineacin vertical",lineEnding:"Final de lnea",lineStart:"Inicio de lnea",lineEnd:"Final de lnea",font:"Fuente",fontColor:"Color de fuente",backgroundColor:"Color de fondo",noStyles:"No hay estilos para esta anotacin.",noStylesStamp:"No hay estilos para los sellos.",selectAnnotation:"Seleccione una anotacin para ver los estilos",deleteSelected:"Eliminar anotacin seleccionada",deleteAllSelected:"Eliminar seleccin",multiSelect:"{count} anotaciones seleccionadas",group:"Agrupar",ungroup:"Desagrupar",moreTools:"Ms herramientas",addLink:"Agregar enlace",removeLink:"Eliminar enlace",gotoLink:"Ir al enlace",comment:"Comentario"},redaction:{area:"Redactar rea",text:"Redactar texto",applyAll:"Aplicar todo",clearAll:"Borrar todo",deleteSelected:"Eliminar redaccin seleccionada",commitSelected:"Aplicar redaccin seleccionada"},history:{undo:"Deshacer",redo:"Rehacer"},comments:{page:"Pgina {page}",commentCount:"{count} comentario",commentCountPlural:"{count} comentarios",addComment:"Aadir comentario...",addReply:"Aadir respuesta...",save:"Guardar",cancel:"Cancelar",edit:"Editar",delete:"Eliminar",showMore:"ms",showLess:"menos",emptyState:"Aada anotaciones para poder comentarlas."},blendMode:{normal:"Normal",multiply:"Multiplicar",screen:"Trama",overlay:"Superponer",darken:"Oscurecer",lighten:"Aclarar",colorDodge:"Sobreexponer color",colorBurn:"Subexponer color",hardLight:"Luz fuerte",softLight:"Luz suave",difference:"Diferencia",exclusion:"Exclusin",hue:"Tono",saturation:"Saturacin",color:"Color",luminosity:"Luminosidad"},print:{title:"Configuracin de impresin",loading:"Preparando documento...",pages:"Pginas a imprimir",all:"Todas las pginas",current:"Pgina actual ({currentPage})",specify:"Especificar pginas",specifyEG:"ej: 1-3, 5, 8-10",total:"Total de pginas en el documento: {totalPages}",annotation:"Incluir anotaciones",printing:"Imprimiendo...",print:"Imprimir",cancel:"Cancelar"},protect:{title:"Proteger documento",cancel:"Cancelar",apply:"Aplicar proteccin",applying:"Aplicando...",applyFailed:"No se pudo aplicar la proteccin. Por favor, intntelo de nuevo.",removeFailed:"No se pudo eliminar la proteccin. Por favor, intntelo de nuevo.",passwordMismatch:"Las contraseas no coinciden",noProtectionSelected:"Seleccione al menos una opcin de proteccin.",bothPasswordsNote:"Los usuarios que abran con la contrasea del documento tendrn permisos restringidos. Use la contrasea de propietario para acceso completo.",openPassword:{title:"Contrasea requerida para abrir",description:"Los usuarios deben ingresar una contrasea para ver este documento.",label:"Contrasea del documento",placeholder:"Ingresar contrasea",confirm:"Confirmar contrasea",confirmPlaceholder:"Confirmar contrasea"},ownerPassword:{label:"Contrasea de propietario",placeholder:"Ingresar contrasea de propietario",confirm:"Confirmar contrasea de propietario",confirmPlaceholder:"Confirmar contrasea de propietario"},permissions:{title:"Restringir permisos",description:"Limite lo que los usuarios pueden hacer con este documento.",allowedActions:"Acciones permitidas",print:"Imprimir",printHighQuality:"Imprimir alta calidad",copy:"Copiar contenido",accessibility:"Extraer para accesibilidad",modify:"Modificar contenido",annotations:"Aadir/modificar anotaciones y comentarios",fillForms:"Rellenar formularios y firmar",assemble:"Ensamblar documento y extraer pginas"},encrypted:{title:"Documento protegido",description:"Este documento est protegido por el propietario. Ingrese la contrasea de propietario para modificar la configuracin de seguridad.",enterOwnerPassword:"Ingrese la contrasea de propietario para modificar",unlockAndEdit:"Desbloquear y Editar"},modifyProtection:{title:"Modificar proteccin",description:"Elija cmo desea modificar la proteccin del documento.",changeOption:"Cambiar contraseas o permisos",changeDescription:"Actualizar la contrasea del documento o la configuracin de permisos.",removeOption:"Eliminar toda la proteccin",removeDescription:"Eliminar la proteccin por contrasea de este documento."},removeProtection:{title:"Eliminar proteccin",warning:"Est seguro de que desea eliminar la proteccin?",description:"Esto eliminar toda la proteccin por contrasea del documento. Cualquiera podr abrirlo y modificarlo.",confirm:"Eliminar proteccin"}},security:{protected:{title:"Este documento est protegido",description:"Este archivo est protegido y algunas funciones pueden estar deshabilitadas. Vaya a Seguridad en el men del documento para ver o desbloquear los permisos.",viewPermissions:"Ver permisos"},viewPermissions:{title:"Permisos del documento",description:"Este archivo est restringido por el propietario y requiere una contrasea para desbloquear ciertas acciones.",restrictedActions:"Acciones restringidas"},unlock:{label:"Ingrese la contrasea de propietario para desbloquear",placeholder:"Ingresar contrasea de propietario",button:"Desbloquear archivo",invalidPassword:"Contrasea invlida. Por favor, intntelo de nuevo.",failed:"Error al desbloquear. Por favor, intntelo de nuevo.",success:"Permisos de propietario desbloqueados! Ahora tiene acceso completo."}},common:{close:"Cerrar",back:"Atrs",cancel:"Cancelar"},link:{title:"Insertar enlace",url:"URL",page:"Pgina",enterUrl:"Introducir URL",enterPage:"Introducir nmero de pgina",pageRange:"Pgina 1 a {totalPages}",link:"Enlazar"}}},{code:"zh-CN",name:"",translations:{search:{placeholder:"",caseSensitive:"",wholeWord:"",resultsFound:"{count} ",page:"{page}"},zoom:{in:"",out:"",fitWidth:"",fitPage:"",marquee:"",menu:"",level:" ({level}%)",dragTip:""},pan:{toggle:""},pointer:{toggle:""},capture:{screenshot:"",dragTip:"",title:"PDF",download:"",cancel:""},document:{menu:"",open:"",close:"",print:"",protect:"",export:"",fullscreen:"",loading:"..."},emptyState:{title:"",description:"+ PDF",descriptionMulti:"",openButton:"",supportedFormats:": PDF"},passwordPrompt:{title:"",required:"",incorrect:"",incorrectWarning:"",label:"",placeholder:"",open:"",opening:"...",cancel:"",close:""},documentError:{title:"",unknown:"",errorCode:": {code}",close:""},panel:{sidebar:"",search:"",comment:"",thumbnails:"",outline:"",annotationStyle:""},menu:{viewControls:"",zoomControls:"",moreOptions:""},outline:{title:"",loading:"...",noOutline:"",noBookmarks:""},page:{settings:"",single:"",twoOdd:"",twoEven:"",vertical:"",horizontal:"",spreadMode:"",scrollLayout:"",rotation:"",next:"",previous:""},rotate:{clockwise:"",counterClockwise:""},selection:{copy:""},mode:{view:"",annotate:"",shapes:"",redact:""},annotation:{text:"",highlight:"",strikeout:"",underline:"",squiggly:"",rectangle:"",circle:"",line:"",arrow:"",polygon:"",polyline:"",ink:"",stamp:"",freeText:"",square:"",style:"",styles:"{type} ",defaults:"{type} ",color:"",opacity:"",blendMode:"",strokeWidth:"",strokeColor:"",borderStyle:"",fillColor:"",fontSize:"",fontFamily:"",textAlign:"",verticalAlign:"",lineEnding:"",lineStart:"",lineEnd:"",font:"",fontColor:"",backgroundColor:"",noStyles:"",noStylesStamp:"",selectAnnotation:"",deleteSelected:"",deleteAllSelected:"",multiSelect:" {count} ",group:"",ungroup:"",moreTools:"",addLink:"",removeLink:"",gotoLink:"",comment:""},redaction:{area:"",text:"",applyAll:"",clearAll:"",deleteSelected:"",commitSelected:""},history:{undo:"",redo:""},comments:{page:"{page}",commentCount:"{count}",commentCountPlural:"{count}",addComment:"...",addReply:"...",save:"",cancel:"",edit:"",delete:"",showMore:"",showLess:"",emptyState:""},blendMode:{normal:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"",colorDodge:"",colorBurn:"",hardLight:"",softLight:"",difference:"",exclusion:"",hue:"",saturation:"",color:"",luminosity:""},print:{title:"",loading:"...",pages:"",all:"",current:"{currentPage}",specify:"",specifyEG:"1-3, 5, 8-10",total:"{totalPages}",annotation:"",printing:"...",print:"",cancel:""},protect:{title:"",cancel:"",apply:"",applying:"...",applyFailed:"",removeFailed:"",passwordMismatch:"",noProtectionSelected:"",bothPasswordsNote:"",openPassword:{title:"",description:"",label:"",placeholder:"",confirm:"",confirmPlaceholder:""},ownerPassword:{label:"",placeholder:"",confirm:"",confirmPlaceholder:""},permissions:{title:"",description:"",allowedActions:"",print:"",printHighQuality:"",copy:"",accessibility:"",modify:"",annotations:"/",fillForms:"",assemble:""},encrypted:{title:"",description:"",enterOwnerPassword:"",unlockAndEdit:""},modifyProtection:{title:"",description:"",changeOption:"",changeDescription:"",removeOption:"",removeDescription:""},removeProtection:{title:"",warning:"",description:"",confirm:""}},security:{protected:{title:"",description:'""',viewPermissions:""},viewPermissions:{title:"",description:"",restrictedActions:""},unlock:{label:"",placeholder:"",button:"",invalidPassword:"",failed:"",success:""}},common:{close:"",back:"",cancel:""},link:{title:"",url:"",page:"",enterUrl:"",enterPage:"",pageRange:"1{totalPages}",link:""}}}],paramResolvers:Vb},ui:{schema:{id:"pdf-viewer-ui",version:"1.0.0",toolbars:{"main-toolbar":{id:"main-toolbar",position:{placement:"top",slot:"main",order:0},permanent:!0,responsive:{localeOverrides:{groups:[{id:"chinese-languages",locales:["zh-CN"],breakpoints:{sm:{replaceHide:["zoom-toolbar","mode-select-button","overflow-tabs-button"],replaceShow:["view-mode","annotate-mode","shapes-mode","redact-mode","pan-button","pointer-button","divider-3"]},md:{replaceShow:["view-mode","annotate-mode","shapes-mode","redact-mode","zoom-toolbar","pan-button","pointer-button","divider-3"],replaceHide:["zoom-menu-button","mode-select-button","overflow-tabs-button"]}}},{id:"germanic-languages",locales:["de","nl"],breakpoints:{md:{replaceShow:["view-mode","annotate-mode","zoom-toolbar","pan-button","pointer-button","divider-3","overflow-tabs-button"]}}}]},breakpoints:{xxxs:{maxWidth:400,hide:["annotate-mode","view-mode","shapes-mode","redact-mode","zoom-toolbar","pan-button","pointer-button","divider-3","page-settings-button","zoom-menu-button","divider-2","overflow-tabs-button"],show:["mode-select-button"]},xxs:{minWidth:400,show:["page-settings-button","zoom-menu-button","divider-2"],hide:["overflow-left-action-menu-button"]},xs:{minWidth:500,maxWidth:640,show:["pan-button","pointer-button","divider-3"]},sm:{minWidth:640,maxWidth:768,hide:["shapes-mode","redact-mode","zoom-toolbar","mode-select-button"],show:["view-mode","annotate-mode","overflow-tabs-button","pan-button","pointer-button","divider-3"]},md:{minWidth:768,show:["view-mode","annotate-mode","shapes-mode","zoom-toolbar","pan-button","pointer-button","divider-3","overflow-tabs-button"],hide:["zoom-menu-button","mode-select-button"]},lg:{minWidth:1024,show:["shapes-mode","redact-mode"],hide:["overflow-tabs-button"]}}},items:[{type:"group",id:"left-group",alignment:"start",gap:2,items:[{type:"command-button",id:"document-menu-button",commandId:"document:menu",variant:"icon",categories:["document","document-menu"]},{type:"divider",id:"divider-1",orientation:"vertical"},{type:"command-button",id:"sidebar-button",commandId:"panel:toggle-sidebar",variant:"icon",categories:["panel","panel-sidebar"]},{type:"command-button",id:"overflow-left-action-menu-button",commandId:"left-action-menu:overflow-menu",variant:"icon",categories:["ui","ui-menu"]},{type:"command-button",id:"page-settings-button",commandId:"page:settings",variant:"icon",categories:["page","page-settings"]}]},{type:"divider",id:"divider-2",orientation:"vertical"},{type:"group",id:"center-group",alignment:"center",gap:2,items:[{type:"command-button",id:"zoom-menu-button",commandId:"zoom:toggle-menu-mobile",variant:"icon",categories:["zoom","zoom-menu"]},{type:"custom",id:"zoom-toolbar",componentId:"zoom-toolbar",categories:["zoom"]},{type:"divider",id:"divider-3",orientation:"vertical",visibilityDependsOn:{itemIds:["zoom-toolbar","zoom-menu-button"]}},{type:"command-button",id:"pan-button",commandId:"pan:toggle",variant:"icon",categories:["tools","pan"]},{type:"command-button",id:"pointer-button",commandId:"pointer:toggle",variant:"icon",categories:["tools","pointer"]}]},{type:"spacer",id:"spacer-1",flex:!0},{type:"custom",id:"mode-select-button",componentId:"mode-select-button",categories:["mode"],visibilityDependsOn:{menuId:"mode-tabs-overflow-menu"}},{type:"tab-group",id:"mode-tabs",tabs:[{id:"view-mode",commandId:"mode:view",variant:"text",categories:["mode","mode-view"],visibilityDependsOn:{itemIds:["annotate-mode","shapes-mode","redact-mode"]}},{id:"annotate-mode",commandId:"mode:annotate",variant:"text",categories:["mode","mode-annotate","annotation"]},{id:"shapes-mode",commandId:"mode:shapes",variant:"text",categories:["mode","mode-shapes","annotation"]},{id:"redact-mode",commandId:"mode:redact",variant:"text",categories:["mode","mode-redact","redaction"]},{id:"overflow-tabs-button",commandId:"tabs:overflow-menu",variant:"icon",categories:["ui","ui-menu"],visibilityDependsOn:{menuId:"mode-tabs-overflow-menu"}}]},{type:"spacer",id:"spacer-2",flex:!0},{type:"group",id:"right-group",alignment:"end",gap:2,items:[{type:"command-button",id:"search-button",commandId:"panel:toggle-search",variant:"icon",categories:["panel","panel-search"]},{type:"command-button",id:"comment-button",commandId:"panel:toggle-comment",variant:"icon",categories:["panel","panel-comment"]}]}]},"annotation-toolbar":{id:"annotation-toolbar",position:{placement:"top",slot:"secondary",order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:["add-text","add-stamp"],show:["overflow-annotation-tools"]},md:{minWidth:640,hide:["overflow-annotation-tools"],show:["add-text","add-stamp"]}}},permanent:!1,categories:["annotation"],items:[{type:"spacer",id:"spacer-3",flex:!0},{type:"group",id:"annotation-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"add-highlight",commandId:"annotation:add-highlight",variant:"icon",categories:["annotation","annotation-markup","annotation-highlight"]},{type:"command-button",id:"add-strikeout",commandId:"annotation:add-strikeout",variant:"icon",categories:["annotation","annotation-markup","annotation-strikeout"]},{type:"command-button",id:"add-underline",commandId:"annotation:add-underline",variant:"icon",categories:["annotation","annotation-markup","annotation-underline"]},{type:"command-button",id:"add-ink",commandId:"annotation:add-ink",variant:"icon",categories:["annotation","annotation-ink"]},{type:"command-button",id:"add-text",commandId:"annotation:add-text",variant:"icon",categories:["annotation","annotation-text"]},{type:"command-button",id:"add-stamp",commandId:"annotation:add-stamp",variant:"icon",categories:["annotation","annotation-stamp"]},{type:"command-button",id:"overflow-annotation-tools",commandId:"annotation:overflow-tools",variant:"icon",categories:["annotation","annotation-overflow"]},{type:"divider",id:"annotation-tools-divider-1",orientation:"vertical"},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"divider",id:"annotation-tools-divider-2",orientation:"vertical",visibilityDependsOn:{itemIds:["toggle-annotation-style"]}},{type:"command-button",id:"undo-button",commandId:"history:undo",variant:"icon",categories:["history","history-undo"]},{type:"command-button",id:"redo-button",commandId:"history:redo",variant:"icon",categories:["history","history-redo"]}]},{type:"spacer",id:"spacer-4",flex:!0}]},"shapes-toolbar":{id:"shapes-toolbar",position:{placement:"top",slot:"secondary",order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:["add-polygon","add-polyline"],show:["overflow-shapes-tools"]},md:{minWidth:640,hide:["overflow-shapes-tools"],show:["add-polygon","add-polyline"]}}},permanent:!1,categories:["annotation","annotation-shape"],items:[{type:"spacer",id:"spacer-5",flex:!0},{type:"group",id:"shapes-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"add-rectangle",commandId:"annotation:add-rectangle",variant:"icon",categories:["annotation","annotation-shape","annotation-rectangle"]},{type:"command-button",id:"add-circle",commandId:"annotation:add-circle",variant:"icon",categories:["annotation","annotation-shape","annotation-circle"]},{type:"command-button",id:"add-line",commandId:"annotation:add-line",variant:"icon",categories:["annotation","annotation-shape","annotation-line"]},{type:"command-button",id:"add-arrow",commandId:"annotation:add-arrow",variant:"icon",categories:["annotation","annotation-shape","annotation-arrow"]},{type:"command-button",id:"add-polygon",commandId:"annotation:add-polygon",variant:"icon",categories:["annotation","annotation-shape","annotation-polygon"]},{type:"command-button",id:"add-polyline",commandId:"annotation:add-polyline",variant:"icon",categories:["annotation","annotation-shape","annotation-polyline"]},{type:"command-button",id:"overflow-shapes-tools",commandId:"annotation:overflow-shapes",variant:"icon",categories:["annotation","annotation-shape","annotation-overflow"]},{type:"divider",id:"shapes-tools-divider-1",orientation:"vertical"},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"divider",id:"shapes-tools-divider-2",orientation:"vertical",visibilityDependsOn:{itemIds:["toggle-annotation-style"]}},{type:"command-button",id:"undo-button",commandId:"history:undo",variant:"icon",categories:["history","history-undo"]},{type:"command-button",id:"redo-button",commandId:"history:redo",variant:"icon",categories:["history","history-redo"]}]},{type:"spacer",id:"spacer-6",flex:!0}]},"redaction-toolbar":{id:"redaction-toolbar",position:{placement:"top",slot:"secondary",order:0},permanent:!1,categories:["redaction"],items:[{type:"spacer",id:"spacer-7",flex:!0},{type:"group",id:"redaction-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"redact-text",commandId:"redaction:redact-text",variant:"icon",categories:["redaction","redaction-text"]},{type:"command-button",id:"redact-area",commandId:"redaction:redact-area",variant:"icon",categories:["redaction","redaction-area"]},{type:"divider",id:"divider-5",orientation:"vertical"},{type:"command-button",id:"apply-redactions",commandId:"redaction:apply-all",variant:"icon",categories:["redaction","redaction-apply"]},{type:"command-button",id:"clear-redactions",commandId:"redaction:clear-all",variant:"icon",categories:["redaction","redaction-clear"]}]},{type:"spacer",id:"spacer-8",flex:!0}]}},menus:{"left-action-menu":{id:"left-action-menu",categories:["ui"],items:[{type:"submenu",id:"page-settings-submenu",labelKey:"menu.viewControls",label:"View Controls",icon:"viewSettings",menuId:"page-settings-menu",categories:["page"]},{type:"submenu",id:"zoom-submenu",labelKey:"menu.zoomControls",label:"Zoom Controls",icon:"zoomIn",menuId:"zoom-menu",categories:["zoom"]},{type:"divider",id:"divider-15"},{type:"command",id:"pan-button-menu",commandId:"pan:toggle",categories:["tools","pan"]},{type:"command",id:"pointer-button-menu",commandId:"pointer:toggle",categories:["tools","pointer"]}]},"mode-tabs-overflow-menu":{id:"mode-tabs-overflow-menu",items:[{type:"command",id:"mode:view",commandId:"mode:view",categories:["mode","mode-view"]},{type:"command",id:"mode:annotate",commandId:"mode:annotate",categories:["mode","mode-annotate","annotation"]},{type:"command",id:"mode:shapes",commandId:"mode:shapes",categories:["mode","mode-shapes","annotation"]},{type:"command",id:"mode:redact",commandId:"mode:redact",categories:["mode","mode-redact","redaction"]}],responsive:{breakpoints:{xs:{maxWidth:640,show:["mode:view","mode:annotate","mode:shapes","mode:redact"]},sm:{minWidth:640,maxWidth:768,hide:["mode:view","mode:annotate"]},md:{minWidth:768,hide:["mode:view","mode:annotate","mode:shapes"]}},localeOverrides:{groups:[{id:"germanic-languages",locales:["de","nl"],breakpoints:{md:{replaceHide:["mode:view","mode:annotate"]}}}]}}},"zoom-levels-menu":{id:"zoom-levels-menu",categories:["zoom","zoom-level"],items:[{type:"command",id:"zoom-levels-menu:25",commandId:"zoom:25",categories:["zoom","zoom-level","zoom-level-25"]},{type:"command",id:"zoom-levels-menu:50",commandId:"zoom:50",categories:["zoom","zoom-level","zoom-level-50"]},{type:"command",id:"zoom-levels-menu:100",commandId:"zoom:100",categories:["zoom","zoom-level","zoom-level-100"]},{type:"command",id:"zoom-levels-menu:125",commandId:"zoom:125",categories:["zoom","zoom-level","zoom-level-125"]},{type:"command",id:"zoom-levels-menu:150",commandId:"zoom:150",categories:["zoom","zoom-level","zoom-level-150"]},{type:"command",id:"zoom-levels-menu:200",commandId:"zoom:200",categories:["zoom","zoom-level","zoom-level-200"]},{type:"command",id:"zoom-levels-menu:400",commandId:"zoom:400",categories:["zoom","zoom-level","zoom-level-400"]},{type:"command",id:"zoom-levels-menu:800",commandId:"zoom:800",categories:["zoom","zoom-level","zoom-level-800"]},{type:"command",id:"zoom-levels-menu:1600",commandId:"zoom:1600",categories:["zoom","zoom-level","zoom-level-1600"]}]},"zoom-menu":{id:"zoom-menu",categories:["zoom"],items:[{type:"command",id:"zoom-menu:25",commandId:"zoom:25",categories:["zoom","zoom-level","zoom-level-25"]},{type:"command",id:"zoom-menu:50",commandId:"zoom:50",categories:["zoom","zoom-level","zoom-level-50"]},{type:"command",id:"zoom-menu:100",commandId:"zoom:100",categories:["zoom","zoom-level","zoom-level-100"]},{type:"command",id:"zoom-menu:125",commandId:"zoom:125",categories:["zoom","zoom-level","zoom-level-125"]},{type:"command",id:"zoom-menu:150",commandId:"zoom:150",categories:["zoom","zoom-level","zoom-level-150"]},{type:"command",id:"zoom-menu:200",commandId:"zoom:200",categories:["zoom","zoom-level","zoom-level-200"]},{type:"command",id:"zoom-menu:400",commandId:"zoom:400",categories:["zoom","zoom-level","zoom-level-400"]},{type:"command",id:"zoom-menu:800",commandId:"zoom:800",categories:["zoom","zoom-level","zoom-level-800"]},{type:"command",id:"zoom-menu:1600",commandId:"zoom:1600",categories:["zoom","zoom-level","zoom-level-1600"]},{type:"submenu",id:"zoom-levels-submenu",labelKey:"zoom.level",label:"Zoom Levels",menuId:"zoom-levels-menu",categories:["zoom","zoom-level"]},{type:"divider",id:"divider-zoom-in-out"},{type:"command",id:"zoom-menu:in",commandId:"zoom:in",categories:["zoom","zoom-in"]},{type:"command",id:"zoom-menu:out",commandId:"zoom:out",categories:["zoom","zoom-out"]},{type:"divider",id:"divider-8"},{type:"command",id:"zoom:fit-page",commandId:"zoom:fit-page",categories:["zoom","zoom-fit-page"]},{type:"command",id:"zoom:fit-width",commandId:"zoom:fit-width",categories:["zoom","zoom-fit-width"]},{type:"divider",id:"divider-9"},{type:"command",id:"zoom:marquee",commandId:"zoom:marquee",categories:["zoom","zoom-marquee"]}],responsive:{breakpoints:{xs:{maxWidth:640,show:["zoom-levels-submenu","divider-zoom-in-out"],hide:["zoom-menu:25","zoom-menu:50","zoom-menu:100","zoom-menu:125","zoom-menu:150","zoom-menu:200","zoom-menu:400","zoom-menu:800","zoom-menu:1600"]},md:{minWidth:768,show:["zoom-menu:25","zoom-menu:50","zoom-menu:100","zoom-menu:125","zoom-menu:150","zoom-menu:200","zoom-menu:400","zoom-menu:800","zoom-menu:1600"],hide:["zoom-levels-submenu","divider-zoom-in-out","zoom-menu:in","zoom-menu:out"]}}}},"document-menu":{id:"document-menu",categories:["document"],items:[{type:"command",id:"document:open",commandId:"document:open",categories:["document","document-open"]},{type:"command",id:"document:close",commandId:"document:close",categories:["document","document-close"]},{type:"divider",id:"divider-10"},{type:"command",id:"document:print",commandId:"document:print",categories:["document","document-print"]},{type:"command",id:"document:protect",commandId:"document:protect",categories:["document","document-protect"]},{type:"command",id:"document:capture",commandId:"document:capture",categories:["document","document-capture"]},{type:"command",id:"document:export",commandId:"document:export",categories:["document","document-export"]},{type:"divider",id:"divider-11",visibilityDependsOn:{itemIds:["document:export","document:print","document:capture","document:protect"]}},{type:"command",id:"document:fullscreen",commandId:"document:fullscreen",categories:["document","document-fullscreen"]}]},"annotation-tools-menu":{id:"annotation-tools-menu",categories:["annotation"],items:[{type:"command",id:"annotation:add-text",commandId:"annotation:add-text",categories:["annotation","annotation-text"]},{type:"command",id:"annotation:add-stamp",commandId:"annotation:add-stamp",categories:["annotation","annotation-stamp"]}]},"shapes-tools-menu":{id:"shapes-tools-menu",categories:["annotation","annotation-shape"],items:[{type:"command",id:"annotation:add-polygon",commandId:"annotation:add-polygon",categories:["annotation","annotation-shape","annotation-polygon"]},{type:"command",id:"annotation:add-polyline",commandId:"annotation:add-polyline",categories:["annotation","annotation-shape","annotation-polyline"]}]},"page-settings-menu":{id:"page-settings-menu",categories:["page"],items:[{type:"section",id:"spread-mode-section",labelKey:"page.spreadMode",label:"Spread Mode",categories:["page","spread"],items:[{type:"command",id:"spread:none",commandId:"spread:none",categories:["page","spread","spread-none"]},{type:"command",id:"spread:odd",commandId:"spread:odd",categories:["page","spread","spread-odd"]},{type:"command",id:"spread:even",commandId:"spread:even",categories:["page","spread","spread-even"]}]},{type:"divider",id:"divider-13"},{type:"section",id:"scroll-layout-section",labelKey:"page.scrollLayout",label:"Scroll Layout",categories:["page","scroll"],items:[{type:"command",id:"scroll:vertical",commandId:"scroll:vertical",categories:["page","scroll","scroll-vertical"]},{type:"command",id:"scroll:horizontal",commandId:"scroll:horizontal",categories:["page","scroll","scroll-horizontal"]}]},{type:"divider",id:"divider-14"},{type:"section",id:"page-rotation-section",labelKey:"page.rotation",label:"Page Rotation",categories:["page","rotate"],items:[{type:"command",id:"rotate:clockwise",commandId:"rotate:clockwise",categories:["page","rotate","rotate-clockwise"]},{type:"command",id:"rotate:counter-clockwise",commandId:"rotate:counter-clockwise",categories:["page","rotate","rotate-counter-clockwise"]}]},{type:"divider",id:"divider-15"},{type:"command",id:"document:fullscreen",commandId:"document:fullscreen",categories:["document","document-fullscreen"]}]}},sidebars:{"sidebar-panel":{id:"sidebar-panel",position:{placement:"left",slot:"main",order:0},content:{type:"tabs",tabs:[{id:"thumbnails",labelKey:"panel.thumbnails",label:"Thumbnails",icon:"squares",componentId:"thumbnails-sidebar"},{id:"outline",labelKey:"panel.outline",label:"Outline",icon:"listTree",componentId:"outline-sidebar"}]},width:"250px",collapsible:!0,defaultOpen:!1},"annotation-panel":{id:"annotation-panel",position:{placement:"left",slot:"main",order:0},content:{type:"component",componentId:"annotation-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1},"search-panel":{id:"search-panel",position:{placement:"right",slot:"main",order:0},content:{type:"component",componentId:"search-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1},"comment-panel":{id:"comment-panel",position:{placement:"right",slot:"main",order:0},content:{type:"component",componentId:"comment-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1}},modals:{"print-modal":{id:"print-modal",content:{type:"component",componentId:"print-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0},"protect-modal":{id:"protect-modal",content:{type:"component",componentId:"protect-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0},"view-permissions-modal":{id:"view-permissions-modal",content:{type:"component",componentId:"view-permissions-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0},"link-modal":{id:"link-modal",content:{type:"component",componentId:"link-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0}},overlays:{"page-controls":{id:"page-controls",position:{anchor:"bottom-center",offset:{bottom:"1.5rem"}},content:{type:"component",componentId:"page-controls"},defaultEnabled:!0},"unlock-owner-overlay":{id:"unlock-owner-overlay",position:{anchor:"bottom-right",offset:{bottom:"1.5rem",right:"1.5rem"}},content:{type:"component",componentId:"unlock-owner-overlay"},defaultEnabled:!0}},selectionMenus:{annotation:{id:"annotation",categories:["annotation"],items:[{type:"command-button",id:"delete-annotation",commandId:"annotation:delete-selected",variant:"icon",categories:["annotation","annotation-delete"]},{type:"command-button",id:"toggle-link",commandId:"annotation:toggle-link",variant:"icon",categories:["annotation","annotation-link"]},{type:"command-button",id:"toggle-annotation-style",commandId:"annotation:toggle-annotation-style",variant:"icon",categories:["annotation","annotation-style"]},{type:"command-button",id:"comment-button",commandId:"annotation:toggle-comment",variant:"icon",categories:["annotation","annotation-comment"]},{type:"command-button",id:"goto-link",commandId:"annotation:goto-link",variant:"icon-text",categories:["annotation","annotation-link"]}]},groupAnnotation:{id:"groupAnnotation",categories:["annotation","annotation-group"],items:[{type:"command-button",id:"toggle-group-annotations",commandId:"annotation:toggle-group",variant:"icon",categories:["annotation","annotation-group"]},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"command-button",id:"delete-all-annotations",commandId:"annotation:delete-all-selected",variant:"icon",categories:["annotation","annotation-delete","annotation-group"]}]},redaction:{id:"redaction",categories:["redaction"],items:[{type:"command-button",id:"delete-redaction",commandId:"redaction:delete-selected",variant:"icon",categories:["redaction","redaction-delete"]},{type:"command-button",id:"commit-redaction",commandId:"redaction:commit-selected",variant:"icon",categories:["redaction","redaction-commit"]}]},selection:{id:"selection",visibilityDependsOn:{itemIds:["copy-selection","add-highlight","add-strikeout","add-underline","add-squiggly","add-link","redact-text"]},items:[{type:"command-button",id:"copy-selection",commandId:"selection:copy",variant:"icon",categories:["selection","selection-copy"]},{type:"command-button",id:"add-highlight",commandId:"annotation:add-highlight",variant:"icon",categories:["annotation","annotation-markup","annotation-highlight"]},{type:"command-button",id:"add-strikeout",commandId:"annotation:add-strikeout",variant:"icon",categories:["annotation","annotation-markup","annotation-strikeout"]},{type:"command-button",id:"add-underline",commandId:"annotation:add-underline",variant:"icon",categories:["annotation","annotation-markup","annotation-underline"]},{type:"command-button",id:"add-squiggly",commandId:"annotation:add-squiggly",variant:"icon",categories:["annotation","annotation-markup","annotation-squiggly"]},{type:"command-button",id:"add-link",commandId:"annotation:add-link",variant:"icon",categories:["annotation","annotation-link"]},{type:"command-button",id:"redact-text",commandId:"redaction:redact-text",variant:"icon",categories:["redaction","redaction-text"]}]}}}},viewport:{viewportGap:10},scroll:{defaultStrategy:Xe.Vertical},zoom:{defaultZoomLevel:Le.FitPage},spread:{defaultSpreadMode:Ve.None},rotation:{defaultRotation:Lt.Degree0},pan:{},render:{defaultImageType:"image/png"},tiling:{tileSize:768,overlapPx:2.5,extraRings:0},thumbnails:{width:150,gap:10,buffer:3,labelHeight:30},annotations:{},search:{},selection:{},bookmarks:{},attachments:{},capture:{scale:2,imageType:"image/png"},redaction:{drawBlackBoxes:!0},print:{},export:{defaultFileName:"document.pdf"},fullscreen:{},history:{},interactionManager:{}};function o0(e){var t=e.documentId,n=e.tabBarVisibility,o=n===void 0?"multiple":n,i=(function(f){const y=xr(),{provides:b}=sn(),w=b?.getSchema(),x=Gc(f);return{renderToolbar:(C,S)=>{const M=`${C}-${S}`;if(!w||!b||!x)return null;const A=x.activeToolbars[M],I=A?w.toolbars[A.toolbarId]:null;A&&!I&&console.warn(`Toolbar "${A.toolbarId}" not found in schema`);const P=I&&!I.permanent?()=>b.forDocument(f).closeToolbarSlot(C,S):void 0,z=y.toolbar;return k(te,{children:A&&I&&k(z,{schema:I,documentId:f,isOpen:A.isOpen,onClose:P})},`toolbar-slot-${M}`)},renderSidebar:(C,S)=>{var M;const A=`${C}-${S}`;if(!w||!b||!x)return null;const I=x.activeSidebars[A],P=I?(M=w.sidebars)==null?void 0:M[I.sidebarId]:null;I&&!P&&console.warn(`Sidebar "${I.sidebarId}" not found in schema`);const z=y.sidebar;return k(te,{children:I&&P&&k(z,{schema:P,documentId:f,isOpen:I.isOpen,onClose:()=>{b.forDocument(f).closeSidebarSlot(C,S)}})},`sidebar-slot-${A}`)},renderModal:()=>{var C;if(!w||!b||!x)return null;const S=y.modal;if(!S)return null;const M=x.activeModal,A=M?(C=w.modals)==null?void 0:C[M.modalId]:null;return M&&!A&&console.warn(`Modal "${M.modalId}" not found in schema`),k(te,{children:M&&A&&k(S,{schema:A,documentId:f,isOpen:M.isOpen,onClose:()=>{b.forDocument(f).closeModal()},onExited:()=>{b.forDocument(f).clearModal()}})},"modal-slot")},getActiveToolbars:()=>x?Object.entries(x.activeToolbars).map(([C,S])=>{const[M,A]=C.split("-");return{placement:M,slot:A,toolbarId:S.toolbarId,isOpen:S.isOpen}}):[],getActiveSidebars:()=>x?Object.entries(x.activeSidebars).map(([C,S])=>{const[M,A]=C.split("-");return{placement:M,slot:A,sidebarId:S.sidebarId,isOpen:S.isOpen}}):[],renderOverlays:()=>{if(!w||!b||!x)return null;const C=y.overlay;return C?k(te,{children:(w.overlays?Object.values(w.overlays):[]).filter(S=>x.enabledOverlays[S.id]!==!1).map(S=>k(C,{schema:S,documentId:f},S.id))},"overlays-slot"):null}}})(t),r=i.renderToolbar,a=i.renderSidebar,s=i.renderModal,l=i.renderOverlays,c=Me(t).translate,u=to("selection",t),h=to("annotation",t),m=to("groupAnnotation",t),g=to("redaction",t),p=(f=>{const y=ko();return K(()=>y?y.documentOrder.map(b=>y.documents[b]).filter(b=>b!=null):[],[y,f])})(),v=(()=>{const f=ko();return K(()=>{if(!f)return{activeDocumentId:null,activeDocument:null};const y=f.activeDocumentId;return{activeDocumentId:y,activeDocument:y?f.documents[y]??null:null}},[f])})();return d(te,null,d(Zb,{documentStates:p,activeDocumentId:v.activeDocumentId,visibility:o}),r("top","main"),r("top","secondary"),d("div",{id:"document-content",className:"bg-bg-surface flex flex-1 overflow-hidden"},a("left","main"),d("div",{className:"flex-1 overflow-hidden"},d(wp,{documentId:t},function(f){var y=f.documentState,b=f.isLoading,w=f.isError,x=f.isLoaded;return d(te,null,b&&d("div",{className:"flex h-full items-center justify-center"},d(Yi,{size:"lg",text:c("document.loading")})),w&&d(Xb,{documentState:y}),x&&d("div",{className:"relative h-full w-full"},d(_f,{documentId:t},d(Gg,{className:"bg-bg-app",documentId:t},d(Ap,{documentId:t},d(Xg,{documentId:t,renderPage:function(C){var S=C.pageIndex;return d(Np,{documentId:t,pageIndex:S,style:{backgroundColor:"#fff"}},d(Nf,{documentId:t,pageIndex:S},d(Ep,{documentId:t,pageIndex:S,scale:.5,style:{pointerEvents:"none"}}),d(tf,{documentId:t,pageIndex:S,style:{pointerEvents:"none"}}),d(Lp,{documentId:t,pageIndex:S}),d(zp,{documentId:t,pageIndex:S}),d(rv,{documentId:t,pageIndex:S}),d(Kp,{documentId:t,pageIndex:S,selectionMenu:u}),d(gv,{documentId:t,pageIndex:S,selectionMenu:g}),d(Gf,{documentId:t,pageIndex:S,selectionMenu:h,groupSelectionMenu:m}),d(Zp,{documentId:t,pageIndex:S})))}})))),l()))})),a("right","main")),s())}var hl=new $l([new Ol,new Ll]);function i0(e){var t,n=e.config,o=e.onRegistryReady,i=(function(c){const{wasmUrl:u=Ug,worker:h=!0,logger:m,encoderPoolSize:g,fontFallback:p}=c??{},[v,f]=R(null),[y,b]=R(!0),[w,x]=R(null),C=V(null);return L(()=>{let S=!1;return(async()=>{try{const{createPdfiumEngine:M}=h?await Zr(()=>import("./worker-engine-CXR2yBQy-DEDpPuPu.js"),__vite__mapDeps([0,1,2,3,4])):await Zr(()=>import("./direct-engine-D0BBgE6g-DpGwOH-w.js"),__vite__mapDeps([5,2,3,4,1])),A=await M(u,{logger:m,encoderPoolSize:g,fontFallback:p});C.current=A,f(A),b(!1)}catch(M){S||(x(M),b(!1))}})(),()=>{var M,A;S=!0,(A=(M=C.current)==null?void 0:M.closeAllDocuments)==null||A.call(M).wait(()=>{var I,P;(P=(I=C.current)==null?void 0:I.destroy)==null||P.call(I),C.current=null},ze)}},[u,h,m,p]),{engine:v,isLoading:y,error:w}})(O(O({},n.wasmUrl&&{wasmUrl:n.wasmUrl}),{},{worker:n.worker,logger:n.log?hl:void 0})),r=i.engine,a=i.isLoading,s=K(function(){return{"thumbnails-sidebar":ib,"annotation-sidebar":Fb,"zoom-toolbar":yb,"search-sidebar":ab,"outline-sidebar":sb,"comment-sidebar":vb,"print-modal":Bb,"link-modal":Wb,"protect-modal":e0,"unlock-owner-overlay":t0,"page-controls":qb,"mode-select-button":Qb,"view-permissions-modal":n0}},[]),l=K(function(){return{toolbar:Dy,sidebar:Zy,modal:ob,overlay:Hb,menu:Xy,selectionMenu:jb}},[]);return d(te,null,d("style",null,Xm),!r||a?d("div",{className:"flex h-full w-full items-center justify-center"},d(Yi,{size:"lg",text:"Initializing PDF engine..."})):d($g,{config:{logger:n.log?hl:void 0,permissions:n.permissions},onInitialized:(t=ml(Nn().m(function c(u){return Nn().w(function(h){for(;;)switch(h.n){case 0:o&&u&&o(u);case 1:return h.a(2)}},c)})),function(c){return t.apply(this,arguments)}),engine:r,plugins:[xe(xp,O(O(O({},Ce.documentManager),n.src&&{initialDocuments:[{url:n.src}]}),n.documentManager)),xe(Ip,O(O(O({},Ce.commands),n.disabledCategories&&{disabledCategories:n.disabledCategories}),n.commands)),xe(Sp,O(O({},Ce.i18n),n.i18n)),xe(mp,O(O(O({},Ce.ui),n.disabledCategories&&{disabledCategories:n.disabledCategories}),n.ui)),xe(Wg,O(O({},Ce.viewport),n.viewport)),xe(Yg,O(O({},Ce.scroll),n.scroll)),xe(Mp,O(O({},Ce.zoom),n.zoom)),xe(Jg,O(O({},Ce.spread),n.spread)),xe(_p,O(O({},Ce.rotation),n.rotation)),xe(tv,O(O({},Ce.pan),n.pan)),xe(Tp,O(O({},Ce.render),n.render)),xe(Jp,O(O({},Ce.tiling),n.tiling)),xe(rf,O(O({},Ce.thumbnails),n.thumbnails)),xe(Tf,O(O({},Ce.annotations),n.annotations)),xe(Op,O(O({},Ce.search),n.search)),xe(Yp,O(O({},Ce.selection),n.selection)),xe(Jf,O(O({},Ce.bookmarks),n.bookmarks)),xe(pv,O(O({},Ce.attachments),n.attachments)),xe(iv,O(O({},Ce.capture),n.capture)),xe(dv,O(O({},Ce.redaction),n.redaction)),xe(Kf,O(O({},Ce.print),n.print)),xe(ev,O(O({},Ce.export),n.export)),xe(Xf,O(O({},Ce.fullscreen),n.fullscreen)),xe(lv,O(O({},Ce.history),n.history)),xe(Ef,O(O({},Ce.interactionManager),n.interactionManager))]},function(c){var u=c.pluginsReady,h=c.activeDocumentId;return d(te,null,u?d(te,null,h?d(bp,{documentId:h,components:s,renderers:l,className:"relative flex h-full w-full select-none flex-col"},d(o0,{documentId:h,tabBarVisibility:n.tabBar}),d(Jb,{documentId:h}),d(lb,{documentId:h})):d(Yb,null)):d("div",{className:"flex h-full items-center justify-center"},d(Yi,{size:"lg",text:"Initializing plugins..."})))}))}var r0=typeof HTMLElement<"u"?HTMLElement:er(function e(){Ji(this,e)}),Lm=(function(){function e(){var t;return Ji(this,e),G(t=gl(this,e),"_resolveRegistry",null),G(t,"themeStyleEl",null),G(t,"systemPreferenceCleanup",null),G(t,"handleRegistryReady",function(n){t._resolveRegistry&&(t._resolveRegistry(n),t._resolveRegistry=null)}),t.root=t.attachShadow({mode:"open"}),t._registryPromise=new Promise(function(n){t._resolveRegistry=n}),t}return pl(e,r0),er(e,[{key:"connectedCallback",value:function(){this._config||(this._config={src:this.getAttribute("src")||"/demo.pdf",worker:this.getAttribute("worker")!=="false",theme:this.parseThemeAttribute()}),this.setupTheme(),this.renderViewer()}},{key:"disconnectedCallback",value:function(){var t;(t=this.systemPreferenceCleanup)===null||t===void 0||t.call(this),this.systemPreferenceCleanup=null}},{key:"parseThemeAttribute",value:function(){var t=this.getAttribute("theme");if(t)return["light","dark","system"].includes(t)?{preference:t}:void 0}},{key:"config",get:function(){return this._config},set:function(t){this._config=t,t.icons&&qi(t.icons),this.isConnected&&(this.setupTheme(),this.renderViewer())}},{key:"registry",get:function(){return this._registryPromise}},{key:"themePreference",get:function(){var t;return((t=this._config)===null||t===void 0||(t=t.theme)===null||t===void 0?void 0:t.preference)||"system"}},{key:"activeColorScheme",get:function(){return dl(this.themePreference)}},{key:"activeTheme",get:function(){return this.resolveActiveTheme()}},{key:"resolveActiveTheme",value:function(){var t,n,o,i=(t=this._config)===null||t===void 0?void 0:t.theme,r=dl(i?.preference||"system"),a=r==="dark"?Rm:Em,s=i?.[r];return o=a,(n=s)?Nm(o,n):o}},{key:"setupTheme",value:function(){var t,n,o=this;(t=this.systemPreferenceCleanup)===null||t===void 0||t.call(this),this.systemPreferenceCleanup=null,(((n=this._config)===null||n===void 0||(n=n.theme)===null||n===void 0?void 0:n.preference)||"system")==="system"&&(this.systemPreferenceCleanup=(function(i){if(typeof window>"u")return function(){};var r=window.matchMedia("(prefers-color-scheme: dark)"),a=function(s){return i(s.matches?"dark":"light")};return r.addEventListener("change",a),function(){return r.removeEventListener("change",a)}})(function(i){o.injectTheme(),o.dispatchEvent(new CustomEvent("themechange",{detail:{preference:"system",colorScheme:i,theme:o.activeTheme},bubbles:!0}))})),this.injectTheme()}},{key:"injectTheme",value:function(){var t=Kb(this.resolveActiveTheme()),n=this.root.querySelector("style[data-embedpdf-theme]");n||((n=document.createElement("style")).setAttribute("data-embedpdf-theme",""),this.root.appendChild(n)),this.themeStyleEl=n,this.themeStyleEl.textContent=t,this.setAttribute("data-color-scheme",this.activeColorScheme)}},{key:"setTheme",value:function(t){this._config&&(this._config.theme=typeof t=="string"?O(O({},this._config.theme),{},{preference:t}):O(O({},this._config.theme),t),this.setupTheme(),this.dispatchEvent(new CustomEvent("themechange",{detail:{preference:this.themePreference,colorScheme:this.activeColorScheme,theme:this.activeTheme},bubbles:!0})))}},{key:"registerIcon",value:function(t,n){$r(t,n)}},{key:"registerIcons",value:function(t){qi(t)}},{key:"renderViewer",value:function(){this._config&&(zi(d(i0,{config:this._config,onRegistryReady:this.handleRegistryReady}),this.root),this.injectTheme())}}])})(),a0=["type","target"],$m="2.3.0";typeof customElements>"u"||customElements.get("embedpdf-container")||customElements.define("embedpdf-container",Lm);var s0={version:$m,init:function(e){if(e.type==="container")return(function(t){t.type,t.target;var n=Oo(t,a0),o=document.createElement("embedpdf-container");return o.config=n,t.target.appendChild(o),o})(e)}};const I0=Object.freeze(Object.defineProperty({__proto__:null,AnnotationPlugin:Jo,AttachmentPlugin:Kh,BookmarkPlugin:_r,CapturePlugin:Nr,CommandsPlugin:Cr,DocumentManagerPlugin:Po,EmbedPdfContainer:Lm,ExportPlugin:Hi,FullscreenPlugin:zo,HistoryPlugin:_h,I18nPlugin:Ir,InteractionManagerPlugin:ti,PanPlugin:po,PrintPlugin:Ao,RedactionMode:De,RedactionPlugin:ni,RenderPlugin:Mr,RotatePlugin:Dr,Rotation:Lt,ScrollPlugin:Go,ScrollStrategy:Xe,SearchPlugin:Ar,SelectionPlugin:Zo,SpreadMode:Ve,SpreadPlugin:fc,ThumbnailPlugin:Xo,TilingPlugin:zr,UIPlugin:Vo,ViewportPlugin:qn,ZoomMode:Le,ZoomPlugin:Sr,createTheme:Nm,darkTheme:Rm,default:s0,ignore:ze,lightTheme:Em,registerIcon:$r,registerIcons:qi,version:$m},Symbol.toStringTag,{value:"Module"}));export{g0 as $,dr as A,Lt as B,C0 as C,dg as D,ug as E,p0 as F,de as G,Pe as I,v0 as K,E as M,mg as N,Zt as P,x0 as Q,hg as R,cg as S,St as T,f0 as V,vg as W,w0 as X,u0 as Y,y0 as Z,he as _,lg as a,d0 as b,c0 as c,h0 as d,cr as e,b0 as f,I0 as g,pg as j,Rn as k,tg as o,fe as p,J as q,Nl as s,ma as w,Ee as x,m0 as y,Q as z};
