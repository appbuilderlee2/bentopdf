import{c as h,i as y}from"./style-DHqpffR4.js";import"./lucide-init-b51_Izr7.js";import"./simple-mode-footer-CTXl6sKe.js";import"./version-Cc_uNslJ.js";import{a as m,f as L,b as f,d as F,h as b}from"./main-X9THBjap.js";import{l as I}from"./pymupdf-loader-DSwOn04P.js";import{h as x}from"./heic2any-xTF0NWax.js";import{g as B,c as D}from"./image-compress-D5rNPUMg.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-provider-C9fvsoLq.js";const v=".jpg,.jpeg,.png,.bmp,.gif,.tiff,.tif,.pnm,.pgm,.pbm,.ppm,.pam,.jxr,.jpx,.jp2,.psd,.svg,.heic,.heif,.webp",C="JPG, PNG, BMP, GIF, TIFF, PNM, PGM, PBM, PPM, PAM, JXR, JPX, JP2, PSD, SVG, HEIC, WebP";let c=[],g=null;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();function u(){h({icons:y});const e=document.getElementById("file-input"),t=document.getElementById("drop-zone"),n=document.getElementById("add-more-btn"),s=document.getElementById("clear-files-btn"),i=document.getElementById("process-btn"),o=document.getElementById("supported-formats");o&&(o.textContent=C),e&&(e.accept=v,e.addEventListener("change",k)),t&&(t.addEventListener("dragover",a=>{a.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",()=>{t.classList.remove("bg-gray-700")}),t.addEventListener("drop",a=>{a.preventDefault(),t.classList.remove("bg-gray-700");const r=a.dataTransfer?.files;r&&r.length>0&&w(r)}),e?.addEventListener("click",()=>{e&&(e.value="")})),n&&n.addEventListener("click",()=>{e?.click()}),s&&s.addEventListener("click",()=>{c=[],p()}),i&&i.addEventListener("click",U),document.getElementById("back-to-tools")?.addEventListener("click",()=>{window.location.href="/bentopdf/"})}function k(e){const t=e.target;t.files&&t.files.length>0&&w(t.files)}function E(e){return"."+e.split(".").pop()?.toLowerCase()||""}function M(e){const t=E(e.name);return v.split(",").includes(t)||e.type.startsWith("image/")}function w(e){const t=Array.from(e).filter(M);t.length<e.length&&m("Invalid Files","Some files were skipped. Only supported image formats are allowed."),t.length>0&&(c=[...c,...t],p())}const R=()=>{c=[],p()};function p(){const e=document.getElementById("file-display-area"),t=document.getElementById("file-controls"),n=document.getElementById("jpg-to-pdf-options");!e||!t||!n||(e.innerHTML="",c.length>0?(t.classList.remove("hidden"),n.classList.remove("hidden"),c.forEach((s,i)=>{const o=document.createElement("div");o.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const a=document.createElement("div");a.className="flex items-center gap-2 overflow-hidden";const r=document.createElement("span");r.className="truncate font-medium text-gray-200",r.textContent=s.name;const l=document.createElement("span");l.className="flex-shrink-0 text-gray-400 text-xs",l.textContent=`(${L(s.size)})`,a.append(r,l);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=()=>{c=c.filter((O,P)=>P!==i),p()},o.append(a,d),e.appendChild(o)}),h({icons:y})):(t.classList.add("hidden"),n.classList.add("hidden")))}async function S(){return g||(g=await I()),g}async function T(e){const t=E(e.name);if(t===".heic"||t===".heif")try{const n=await x({blob:e,toType:"image/png",quality:.9}),s=Array.isArray(n)?n[0]:n;return new File([s],e.name.replace(/\.(heic|heif)$/i,".png"),{type:"image/png"})}catch(n){throw console.error(`Failed to convert HEIC: ${e.name}`,n),new Error(`Failed to process HEIC file: ${e.name}`)}if(t===".webp")try{return await new Promise((n,s)=>{const i=new Image,o=URL.createObjectURL(e);i.onload=()=>{const a=document.createElement("canvas");a.width=i.width,a.height=i.height;const r=a.getContext("2d");if(!r){URL.revokeObjectURL(o),s(new Error("Canvas context failed"));return}r.drawImage(i,0,0),a.toBlob(l=>{URL.revokeObjectURL(o),l?n(new File([l],e.name.replace(/\.webp$/i,".png"),{type:"image/png"})):s(new Error("Canvas toBlob failed"))},"image/png")},i.onerror=()=>{URL.revokeObjectURL(o),s(new Error("Failed to load WebP image"))},i.src=o})}catch(n){throw console.error(`Failed to convert WebP: ${e.name}`,n),new Error(`Failed to process WebP file: ${e.name}`)}return e}async function U(){if(c.length===0){m("No Files","Please select at least one image file.");return}f("Processing images...");try{const e=B(),t=[];for(const i of c)try{const o=await T(i),a=await D(o,e);t.push(a)}catch(o){throw console.warn(o),o}f("Loading engine...");const n=await S();f("Converting images to PDF...");const s=await n.imagesToPdf(t);F(s,"images_to_pdf.pdf"),m("Success","PDF created successfully!","success",()=>{R()})}catch(e){console.error("[ImageToPDF]",e),m("Conversion Error",e.message||"Failed to convert images to PDF.")}finally{b()}}
