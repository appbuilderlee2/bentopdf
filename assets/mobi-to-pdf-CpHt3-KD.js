const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-DhcferR8.js","assets/main-DSprMeGA.js","assets/style-BMqLG_Qf.js","assets/style-CsosqKDh.css","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
import{c as $,i as D}from"./style-BMqLG_Qf.js";import"./lucide-init-Css57rKe.js";import"./simple-mode-footer-WbVs9YeG.js";import"./version-Cc_uNslJ.js";import{s as t,a as m,b as p,d as _,h as y,_ as T,f as P}from"./main-DSprMeGA.js";import{l as F}from"./pymupdf-loader-BmwcVkri.js";import"./mobileMenu-BoMunYmR.js";import"./wasm-provider-BDZaM2k5.js";const h="mobi",N=[".mobi"],L="MOBI";document.addEventListener("DOMContentLoaded",()=>{const d=document.getElementById("file-input"),l=document.getElementById("drop-zone"),r=document.getElementById("process-btn"),f=document.getElementById("file-display-area"),u=document.getElementById("file-controls"),b=document.getElementById("add-more-btn"),B=document.getElementById("clear-files-btn"),w=document.getElementById("back-to-tools");w&&w.addEventListener("click",()=>{window.location.href="/"});const v=async()=>{if(!(!f||!r||!u))if(t.files.length>0){f.innerHTML="";for(let e=0;e<t.files.length;e++){const s=t.files[e],a=document.createElement("div");a.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const o=document.createElement("div");o.className="flex flex-col overflow-hidden";const n=document.createElement("div");n.className="truncate font-medium text-gray-200 text-sm mb-1",n.textContent=s.name;const i=document.createElement("div");i.className="text-xs text-gray-400",i.textContent=P(s.size),o.append(n,i);const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{t.files=t.files.filter((I,E)=>E!==e),v()},a.append(o,c),f.appendChild(a)}$({icons:D}),u.classList.remove("hidden"),r.classList.remove("hidden"),r.disabled=!1}else f.innerHTML="",u.classList.add("hidden"),r.classList.add("hidden"),r.disabled=!0},g=()=>{t.files=[],t.pdfDoc=null,v()},C=async()=>{try{if(t.files.length===0){m("No Files",`Please select at least one ${L} file.`);return}p("Loading engine...");const e=await F();if(t.files.length===1){const s=t.files[0];p(`Converting ${s.name}...`);const a=await e.convertToPdf(s,{filetype:h}),o=s.name.replace(/\.[^.]+$/,"")+".pdf";_(a,o),y(),m("Conversion Complete",`Successfully converted ${s.name} to PDF.`,"success",()=>g())}else{p("Converting files...");const s=(await T(async()=>{const{default:n}=await import("./jszip.min-DhcferR8.js").then(i=>i.j);return{default:n}},__vite__mapDeps([0,1,2,3,4]))).default,a=new s;for(let n=0;n<t.files.length;n++){const i=t.files[n];p(`Converting ${n+1}/${t.files.length}: ${i.name}...`);const c=await e.convertToPdf(i,{filetype:h}),I=i.name.replace(/\.[^.]+$/,""),E=await c.arrayBuffer();a.file(`${I}.pdf`,E)}const o=await a.generateAsync({type:"blob"});_(o,`${h}-converted.zip`),y(),m("Conversion Complete",`Successfully converted ${t.files.length} ${L} file(s) to PDF.`,"success",()=>g())}}catch(e){console.error(`[${L}2PDF] ERROR:`,e),y(),m("Error",`An error occurred during conversion. Error: ${e.message}`)}},x=e=>{e&&e.length>0&&(t.files=[...t.files,...Array.from(e)],v())};d&&l&&(d.addEventListener("change",e=>{x(e.target.files)}),l.addEventListener("dragover",e=>{e.preventDefault(),l.classList.add("bg-gray-700")}),l.addEventListener("dragleave",e=>{e.preventDefault(),l.classList.remove("bg-gray-700")}),l.addEventListener("drop",e=>{e.preventDefault(),l.classList.remove("bg-gray-700");const s=e.dataTransfer?.files;if(s&&s.length>0){const a=Array.from(s).filter(o=>{const n=o.name.toLowerCase();return N.some(i=>n.endsWith(i))});if(a.length>0){const o=new DataTransfer;a.forEach(n=>o.items.add(n)),x(o.files)}}}),d.addEventListener("click",()=>{d.value=""})),b&&b.addEventListener("click",()=>{d.click()}),B&&B.addEventListener("click",()=>{g()}),r&&r.addEventListener("click",C)});
